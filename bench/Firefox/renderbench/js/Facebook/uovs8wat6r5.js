/*!CK:1232305107!*//*1413168878,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["o7UyR"]); }

__d("BlackbirdUpsellConstants",[],function(a,b,c,d,e,f){e.exports={ACTION_EDUCATE:"educate",ACTION_UPSELL:"upsell",CLICK_TYPE_DISMISS_PROMO:"dismiss_promo",CLICK_TYPE_ENABLE_CHAT:"enable_chat",CLICK_TYPE_OPEN_SETTINGS:"open_settings"};},null);
__d("ChatSidebarSections",[],function(a,b,c,d,e,f){e.exports={MORE_ONLINE_FRIENDS:"more_online_friends",MORE_ONLINE_COWORKERS:"more_online_coworkers",OFFLINE_USERS:"offline_users",ORDERED_LIST:"ordered_list",ORDERED_COWORKERS:"ordered_coworkers",TYPEAHEAD:"typeahead"};},null);
__d("AsyncLoader",["copyProperties","AsyncRequest","BaseAsyncLoader"],function(a,b,c,d,e,f,g,h,i){function j(k,l){this._endpoint=k;this._type=l;}g(j.prototype,i.prototype);j.prototype.send=function(k,l,m,n,o){new h(k).setData({ids:l}).setHandler(n).setErrorHandler(o).setAllowCrossPageTransition(true).setMethod('GET').setReadOnly(true).send();};e.exports=j;},null);
__d("BlackbirdUpsell",["Event","Arbiter","AsyncRequest","LegacyContextualDialog","DOM","LayerDestroyOnHide","LayerHideOnTransition","PresencePrivacy","copyProperties","BlackbirdUpsellConfig","BlackbirdUpsellConstants","BlackbirdUpsellTemplates"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s='/ajax/chat/blackbird/update_clicks.php',t='/ajax/chat/blackbird/update_impressions.php',u='/ajax/chat/blackbird/dismiss.php',v=235,w=null,x=null,y=false,z=false;function aa(){}o(aa,{shouldShow:function(){if(this._dialogDismissed)return false;if(this.isEducation()){return !p.EducationDismissed&&p.EducationImpressions<p.EducationImpressionLimit;}else return !!p.UpsellGK&&!p.UpsellDismissed&&p.UpsellImpressions<p.UpsellImpressionLimit&&p.FriendCount>=p.UpsellMinFriendCount;},isEducation:function(){return p.TimeOffline<=p.EducationTimeOfflineThresdhold;},getOfflineContent:function(){if(this.isEducation()){return this._getEducationContent();}else return this._getUpsellContent();},_getEducationContent:function(){ga();var ka=r[':fb:chat:blackbird:offline-educate'].build(),la=ka.getNode('chatSettingsButton');g.listen(la,'click',function(){h.inform('chat/advanced-settings-dialog-opened');ja(q.CLICK_TYPE_OPEN_SETTINGS);da();});return ka.getRoot();},_getUpsellContent:function(){fa();var ka=r[':fb:chat:blackbird:upsell'].build(),la=ka.getNode('chatSettingsButton');g.listen(la,'click',function(){h.inform('chat/advanced-settings-dialog-opened');ia(q.CLICK_TYPE_OPEN_SETTINGS);ca();});var ma=ka.getNode('enableChatButton');g.listen(ma,'click',function(){ia(q.CLICK_TYPE_ENABLE_CHAT);ca();});return ka.getRoot();},getBlackbirdContent:function(ka){ga();switch(ka){case n.ONLINE:return r[':fb:chat:blackbird:most-friends-educate'].build().getRoot();case n.OFFLINE:return r[':fb:chat:blackbird:some-friends-educate'].build().getRoot();}},showOfflineDialog:function(ka){this.showDialog(ka,this.getOfflineContent.bind(this));},showBlackbirdDialog:function(ka,la){this.showDialog(ka,this.getBlackbirdContent.bind(null,la));},showDialog:function(ka,la){!w&&this._constructDialog();k.setContent(x,la());w.setContext(ka);w.show();},hide:function(){if(w&&w.isShown())w.hide();},dismiss:function(){this.hide();if(this.isEducation()){da();}else ca();},registerDismissClick:function(){if(this.isEducation()){ja(q.CLICK_TYPE_DISMISS_PROMO);}else ia(q.CLICK_TYPE_DISMISS_PROMO);},isVisible:function(){return z&&!y;},_constructDialog:function(){var ka=r[':fb:chat:blackbird:dialog-frame'].build();x=ka.getNode('dialogContent');w=new j();w.init(ka.getRoot());w.setPosition('above').setWidth(v).setFixed(true).disableBehavior(l).disableBehavior(m);g.listen(ka.getNode('dialogCloseButton'),'click',this.dismiss.bind(this));g.listen(ka.getNode('dialogCloseButton'),'click',this.registerDismissClick.bind(this));}});function ba(ka,la){if(!y&&z){y=true;n.inform('privacy-user-presence-changed');var ma=new i(u);ma.setData({source:ka,impressions:la,time_offline:p.TimeOffline});ma.setErrorHandler(function(){y=false;});ma.send();}}function ca(){ba(q.ACTION_UPSELL,p.UpsellImpressions);}function da(){ba(q.ACTION_EDUCATE,p.EducationImpressions);}function ea(ka,la){if(!z){z=true;var ma=new i(t);ma.setData({action:ka,impressions:la,time_offline:p.TimeOffline});ma.setErrorHandler(function(){z=false;});ma.send();}}function fa(){ea(q.ACTION_UPSELL,p.UpsellImpressions);}function ga(){ea(q.ACTION_EDUCATE,p.EducationImpressions);}function ha(ka,la,ma,na){var oa=new i(s);oa.setData({action:ka,impressions:ma,source:la,time_offline:na});oa.send();}function ia(ka){ha(ka,q.ACTION_UPSELL,p.UpsellImpressions,p.TimeOffline);}function ja(ka){ha(ka,q.ACTION_EDUCATE,p.EducateImpressions,p.TimeOffline);}h.subscribe('chat/advanced-settings-dialog-opened',aa.dismiss.bind(aa));h.subscribe('chat-visibility/go-online',aa.dismiss.bind(aa));h.subscribe('chat-visibility/go-offline',aa.dismiss.bind(aa));e.exports=aa;},null);
__d("Chat",["Arbiter"],function(a,b,c,d,e,f,g){var h={buddyListNub:'buddylist-nub/initialized',sidebar:'sidebar/initialized'};function i(k,l){g.subscribe(h[k],function(event,m){l(m);});}var j={openBuddyList:function(){i('buddyListNub',function(k){k.show();i('sidebar',function(l){l.enable();});});},closeBuddyList:function(){i('buddyListNub',function(k){k.hide();});},toggleSidebar:function(){i('sidebar',function(k){k.toggle();});}};a.Chat=e.exports=j;},3);
__d("ChatHovercard",["Arbiter","AsyncLoader","Hovercard","JSLogger","debounce"],function(a,b,c,d,e,f,g,h,i,j,k){var l=5,m=new h('/ajax/chat/hovercard/sidebar.php','hover'),n=j.create('chat_hovercard');g.subscribe('Hovercard/dirty',m.reset.bind(m));function o(s,t){m.get(s,function(u){setTimeout(function(){if(!u){n.error('fetch_failure',{id:s});return;}var v=i.getDialog(u);if(!v){n.error('no_hovercard',{id:s,endpoint:u});return;}if(s==t.getActiveID())t.showHovercard(s,v);},0);});}function p(s,t){var u=[];function v(y){if(y>=0&&y<s.length)u.push(s[y]);}var w=s.indexOf(t);if(w>-1){v(w);for(var x=1;x<l;x++){v(w+x);v(w-x);}}return u.filter(function(y){return y;});}function q(s,t){var u=t.getActiveID();if(u){var v=s.getShowingUsers(),w=p(v,u);m.get(w,function(){});}}function r(s){var t=s.getHoverController();t.registerDefault(o);t.subscribe('hover',k(q.bind(null,s,t),100));}e.exports=r;},null);
__d("ChatOrderedListHover",["ArbiterMixin","CSS","ErrorUtils","Event","LayerHideOnBlur","Parent","copyProperties","cx","mixin","setTimeoutAcrossTransitions","shield"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){function r(x){h.addClass(x,'fetching');}function s(x){h.removeClass(x,'fetching');}var t=o(g);for(var u in t)if(t.hasOwnProperty(u))w[u]=t[u];var v=t===null?null:t.prototype;w.prototype=Object.create(v);w.prototype.constructor=w;w.__superConstructor__=t;function w(x){"use strict";this._orderedList=x;this._root=x.getRoot();j.listen(this._root,'mouseover',this._mouseOver.bind(this));j.listen(this._root,'mouseleave',this._mouseLeave.bind(this));x.subscribe('click',q(this._hide,this));}w.prototype._mouseOver=function(event){"use strict";if(this._paused)return;var x=event.getTarget(),y=l.byClass(x,"_42fz")||l.byClass(x,"_5a58");y&&this._setActiveItem(y);};w.prototype._mouseLeave=function(event){"use strict";this._setActiveItem(null);};w.prototype._clearTimeouts=function(){"use strict";this._showTimeout&&clearTimeout(this._showTimeout);this._showTimeout=null;this._hideTimeout&&clearTimeout(this._hideTimeout);this._hideTimeout=null;};w.prototype._hide=function(){"use strict";if(this._showingDialog){this._showingDialog.hide();this._showingDialog=null;this._showingID=null;}};w.prototype._show=function(){"use strict";var x=this.getActiveID(),y=false;if(this._defaultHandler){y=true;i.applyWithGuard(this._defaultHandler,{},[x,this]);}if(y&&this._showingID!=this.getActiveID())r(this._activeItem);};w.prototype._setActiveItem=function(x){"use strict";if(x!=this._activeItem){this._clearTimeouts();this._activeItem&&s(this._activeItem);this._activeItem=null;var y=x?0:100;this._hideTimeout=p(function(){if(this.getActiveID()!=this._showingID)this._hide();}.bind(this),y);if(x){this._activeItem=x;var z=y+500;this._showTimeout=p(function(){this._show();}.bind(this),z);this.inform('hover');}else this.inform('leave');}};w.prototype.registerDefault=function(x){"use strict";this._defaultHandler=x;};w.prototype.getActiveID=function(){"use strict";var x=this._activeItem&&this._orderedList.getUserForNode(this._activeItem);return x||null;};w.prototype.showHovercard=function(x,y){"use strict";if(x==this.getActiveID()&&x!=this._showingID){this._clearTimeouts();s(this._activeItem);this._hide();this._showingDialog=y;this._showingID=x;var z=y.subscribe('mouseenter',this._setActiveItem.bind(this,this._activeItem)),aa=y.subscribe('mouseleave',function(){z.unsubscribe();this._setActiveItem(null);}.bind(this)),ba=y.subscribe('hide',function(){this.inform('hovercard_hide');z.unsubscribe();aa.unsubscribe();ba.unsubscribe();}.bind(this));y.enableBehavior(k).setContext(this._activeItem).setPosition('left').show();this.inform('hovercard_show');}};m(w.prototype,{_root:null,_activeItem:null,_hideTimeout:null,_showTimeout:null,_showingDialog:null,_showingID:null,_defaultHandler:null});e.exports=w;},null);
__d("ChatSidebarConstants",["mergeInto"],function(a,b,c,d,e,f,g){var h={LITESTAND_CLASSIC_SIZE:32,IMAGE_SIZE:28};g(h,{getImageSize:function(i){if(i===false)return h.IMAGE_SIZE;return h.LITESTAND_CLASSIC_SIZE;},getItemHeight:function(i){if(i===false)return h.IMAGE_SIZE+4;return h.LITESTAND_CLASSIC_SIZE+4;}});e.exports=h;},null);
__d("ChatQuietLinks",["Event","DOM","UserAgent_DEPRECATED","DataStore","Parent"],function(a,b,c,d,e,f,g,h,i,j,k){var l={},m={silenceLinks:function(q){n(q,this.removeEmptyHrefs.bind(this));},nukeLinks:function(q){n(q,this.removeAllHrefs.bind(this));},removeEmptyHrefs:function(q){o(q,function(r){return !r||r==='#';});},removeAllHrefs:function(q){o(q);}};function n(q,r){var s=!!i.chrome(),t=!!i.chrome()||i.ie()>=9||i.firefox()>=4;if(l[h.getID(q)])return;l[h.getID(q)]=true;if(!t)return;if(!s){r&&r(q);return;}g.listen(q,'mouseover',function u(v){var w=k.byTag(v.getTarget(),'a');if(w){var x=w.getAttribute('href');if(p(x)){j.set(w,'stashedHref',w.getAttribute('href'));w.removeAttribute('href');}}});g.listen(q,'mouseout',function u(v){var w=k.byTag(v.getTarget(),'a'),x=w&&j.remove(w,'stashedHref');if(p(x))w.setAttribute('href',x);});g.listen(q,'mousedown',function(u){if(!u.isDefaultRequested())return true;var v=k.byTag(u.getTarget(),'a'),w=v&&j.get(v,'stashedHref');if(p(w))v.setAttribute('href',w);});}function o(q,r){var s=h.scry(q,'a');if(r)s=s.filter(function(t){return r(t.getAttribute('href'));});s.forEach(function(t){t.removeAttribute('href');t.setAttribute('tabindex',0);});}function p(q){return q&&q!=='#';}e.exports=m;},null);
__d("ChatSidebarItem.react",["AvailableListConstants","ChatConfig","ChatSidebarConstants","Image.react","Link.react","React","SplitImage.react","cx","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=9,q=l.createClass({displayName:'ChatSidebarItem',propTypes:{birthday:l.PropTypes.bool,context:l.PropTypes.string,detailedStatus:l.PropTypes.string,href:l.PropTypes.object,imageSize:l.PropTypes.number,name:l.PropTypes.string,onClick:l.PropTypes.func,status:l.PropTypes.number,statusTime:l.PropTypes.string,unreadCount:l.PropTypes.number},render:function(){var r=(("_55ln")+(this.props.context?' '+"_55lo":'')+(this.props.unreadCount?' '+"_5bom":''));return (l.createElement(k,{className:r,href:this.props.href,onClick:this.props.onClick,rel:"ignore"},l.createElement("div",{className:"_55lp"},l.createElement("div",{className:"_56p9"},this.renderImage(),l.createElement("div",{className:"_568w"})),l.createElement("div",{className:"_5bon"},this.renderBirthday(),this.renderUnreadCount(),this.renderStatus()),l.createElement("div",{className:"_55lr"},this.props.name),l.createElement("div",{className:"_55ls"},this.props.context))));},renderImage:function(){var r=this.props.imageSize||i.IMAGE_SIZE;return l.createElement(m,{size:r,srcs:this.props.images});},renderUnreadCount:function(){var r=this.props.unreadCount;if(!r)return null;var s=(("_5boo")+(r>p?' '+"_5bop":''));if(r>p)r=p+'+';return (l.createElement("div",{className:s},r));},renderStatus:function(){var r=this.getStatusSrc();if(!r&&!this.props.statusTime)return null;var s=r?l.createElement(j,{className:"_568_",src:r}):null;return (l.createElement("div",{className:"_568z"},l.createElement("div",{className:"_568-"},this.props.statusTime),this.renderDetailedPresence(),s));},renderDetailedPresence:function(){if(this.props.unreadCount)return null;return (l.createElement("div",{className:"_5t35"},this.props.detailedStatus));},renderBirthday:function(){if(!this.props.birthday)return null;var r=o('/images/gifts/icons/cake_icon.png');if(h.get('gray_cake'))r=o('/images/chat/sidebar/livebar/divebar_cake.png');return (l.createElement(j,{className:"_5dv3",src:r}));},getStatusSrc:function(){switch(this.props.status){case g.ACTIVE:return o('/images/litestand_classic/sidebar/online.png');case g.MOBILE:return o('/images/litestand_classic/sidebar/pushable.png');}return null;}});e.exports=q;},null);
__d("ChatSidebarUser.react",["ChatOpenTab","ChatSidebarItem.react","WebMessengerPermalinkConstants","React"],function(a,b,c,d,e,f,g,h,i,j){var k=j.createClass({displayName:'ChatSidebarUser',propTypes:{birthday:j.PropTypes.bool,detailedStatus:j.PropTypes.string,image:j.PropTypes.string,imageSize:j.PropTypes.number,name:j.PropTypes.string,sectionName:j.PropTypes.string.isRequired,slot:j.PropTypes.number,status:j.PropTypes.number,statusTime:j.PropTypes.string,unreadCount:j.PropTypes.number,userID:j.PropTypes.string.isRequired},_openTab:function(event){g.openUserTab(this.props.userID,this.props.sectionName,{global_slot:this.props.slot});return event.preventDefault();},render:function(){var l=i.getURIPathForIDOrVanity(this.props.userID);return (j.createElement(h,{onClick:this._openTab,href:{url:l},imageSize:this.props.imageSize,images:this.props.image,name:this.props.name,status:this.props.status,birthday:this.props.birthday,statusTime:this.props.statusTime,detailedStatus:this.props.detailedStatus,context:this.props.context,unreadCount:this.props.unreadCount}));}});e.exports=k;},null);
__d("ChatUnreadCount",["ArbiterMixin","MercuryIDs","copyProperties","MercuryThreadInformer","MercuryThreads"],function(a,b,c,d,e,f,g,h,i){var j=b('MercuryThreadInformer').get(),k=b('MercuryThreads').get(),l={};j.subscribe('threads-updated',function(m,n){for(var o in n){var p=h.getUserIDFromThreadID(o);l.inform('unread-changed',p);}});i(l,g,{getUnreadCountForUID:function(m,n){k.getThreadMeta(h.getThreadIDFromUserID(m),function(o){n(o.unread_count);});}});e.exports=l;},null);
__d("ChatSidebarUserGroup.react",["AvailableList","AvailableListConstants","ChannelConnection","ChatContexts","ChatSidebarSections","ChatSidebarUser.react","ChatUnreadCount","LastMobileActiveTimes","PresencePrivacy","PresenceStatus","React","ShortProfiles","SubscriptionsHandler","cx","shield"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){var v=Object.keys(k).map(function(x){return k[x];}),w=q.createClass({displayName:'ChatSidebarUserGroup',propTypes:{ids:q.PropTypes.array.isRequired,sectionName:q.PropTypes.oneOf(v).isRequired},getInitialState:function(){return {userData:[],unreadCounts:{}};},_updateUnreadCount:function(x){m.getUnreadCountForUID(x,function(y){this.state.unreadCounts[x]=y;this.setState({unreadCounts:this.state.unreadCounts});}.bind(this));},componentWillMount:function(){this.componentWillReceiveProps(this.props);this._subscriptions=new s();this._subscriptions.addSubscriptions(g.subscribe(h.ON_AVAILABILITY_CHANGED,u(this.forceUpdate,this)),o.subscribe('privacy-changed',u(this.forceUpdate,this)),i.subscribe([i.CONNECTED,i.RECONNECTING,i.SHUTDOWN,i.MUTE_WARNING,i.UNMUTE_WARNING],u(this.forceUpdate,this)));},componentWillUnmount:function(){this._subscriptions.release();},componentWillReceiveProps:function(x){r.getMulti(x.ids,function(y){var z=x.ids.map(function(aa){return y[aa];});this.setState({userData:z});}.bind(this));},_renderProfile:function(x,y){if(x.id===0)return null;var z=p.get(x.id),aa=(z!==h.ACTIVE)?n.getShortDisplay(x.id):null,ba=(z===h.ACTIVE)?p.getDetailedActivePresence(x.id):null,ca=i.disconnected()||!o.allows(x.id),da=j.getShortDisplay(x.id);return (q.createElement("li",{className:(("_42fz")+(da?' '+"_52zj":'')+(ca?' '+"_570-":'')),'data-id':x.id,key:x.id},q.createElement(l,{birthday:p.isBirthday(x.id),context:da,detailedStatus:ba,image:x.thumbSrc,imageSize:this.props.imageSize,name:x.name,sectionName:this.props.sectionName,slot:y,status:z,statusTime:aa,unreadCount:this.state.unreadCounts[x.id],userID:x.id})));},render:function(){return (q.createElement("ul",Object.assign({},this.props),this.state.userData.map(this._renderProfile)));}});e.exports=w;},null);
__d("ChatSidebarOrderedList.react",["Animation","AsyncDialog","AsyncRequest","ChatQuietLinks","ChatSidebarConstants","ChatSidebarSections","ChatSidebarUserGroup.react","PresencePrivacy","React","URI","cx","shield","tx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=o.createClass({displayName:'ChatSidebarOrderedList',propTypes:{topUsers:o.PropTypes.array.isRequired,availableUsers:o.PropTypes.array.isRequired,isSidebar:o.PropTypes.bool.isRequired,scrollContainer:o.PropTypes.object},getInitialState:function(){return {mouseOver:true,pauseRendering:false};},shouldComponentUpdate:function(u,v){return !v.mouseOver&&!v.pauseRendering;},componentDidMount:function(){j.nukeLinks(this.getDOMNode());},_scrollToSeparator:function(){if(!this.props.scrollContainer)return;var u=this.refs.usersSeparator.getDOMNode(),v=this.props.scrollContainer.scrollHeight,w=this.props.scrollContainer.clientHeight,x=this.props.scrollContainer.scrollTop,y=Math.min(u.offsetTop,v-w);if(x!==y){var z=Math.abs(y-x)/this.props.scrollContainer.clientHeight*500;new g(this.props.scrollContainer).to('scrollTop',y).ease(g.ease.end).duration(z).go();}},_openBlackbirdSettings:function(){var u=new p('/ajax/chat/privacy/settings_dialog.php').addQueryData({ref:'whitelist_separator'});h.send(new i(u));},_renderOfflineSection:function(){var u=k.getImageSize(this.props.isSidebar),v=this.props.topUsers.filter(function(x){return !n.allows(x);});v.splice(-2);var w=(o.createElement("a",{href:"#",onClick:this._openBlackbirdSettings},"Edit"));return [o.createElement("div",{key:"users_separator1",className:"_554m"},o.createElement("div",{className:"_554o"},o.createElement("div",{className:"_554n"},o.createElement("span",{className:"_554p"},"MORE FRIENDS"),o.createElement("div",{className:"_554q"},o.createElement("span",{className:"_554r"}))))),o.createElement("div",{key:"users_separator2",className:"_554m blackbirdWhitelist"},o.createElement("div",{className:"_554o"},o.createElement("div",{className:"_554n"},o.createElement("div",{className:"_5v-d"},o.createElement("span",{className:"_554t"},s._("These friends can't see you on chat. {=link}",{'=link':w})))))),o.createElement(m,{key:l.OFFLINE_USERS,sectionName:l.OFFLINE_USERS,ids:v,imageSize:u})];},_renderOnlineSection:function(){if(this.props.availableUsers.length===0)return null;var u=k.getImageSize(this.props.isSidebar);return [o.createElement("div",{key:"users_separator",ref:"usersSeparator",onClick:this._scrollToSeparator,className:"_554m moreOnlineFriends"},o.createElement("div",{className:"_554o"},o.createElement("div",{className:"_554n"},o.createElement("span",{className:"_554p"},s._("{MORE ONLINE FRIENDS} ({=count})",{'MORE ONLINE FRIENDS':"MORE FRIENDS",'=count':this.props.availableUsers.length})),o.createElement("div",{className:"_554q"},o.createElement("span",{className:"_554r"}))))),o.createElement(m,{key:l.MORE_ONLINE_FRIENDS,sectionName:l.MORE_ONLINE_FRIENDS,ids:this.props.availableUsers,imageSize:u})];},render:function(){var u=k.getImageSize(this.props.isSidebar),v=this.props.topUsers;if(n.getVisibility()==n.ONLINE)v=this.props.topUsers.filter(function(x){return n.allows(x);});var w=(n.getOnlinePolicy()==n.ONLINE_TO_WHITELIST&&n.getVisibility())?this._renderOfflineSection():this._renderOnlineSection();return (o.createElement("li",Object.assign({},this.props,{onMouseEnter:r(this.setState,this,{mouseOver:true}),onMouseLeave:r(this.setState,this,{mouseOver:false})}),o.createElement(m,{key:l.ORDERED_LIST,sectionName:l.ORDERED_LIST,ids:v,imageSize:u}),w));}});e.exports=t;},null);
__d("OrderedFriendsList",["AvailableList","createArrayFrom","ShortProfiles","WorkModeConfig","InitialChatFriendsList"],function(a,b,c,d,e,f,g,h,i,j){var k=[],l={},m=[],n={contains:function(o){return o in l;},getList:function(){if(j.is_work_user)return h(k);n.reRank();var o=h(k);o=o.filter(function(p){var q=i.getNowUnsafe(p);return !q||q.type=="friend";});return o;},getRank:function(o){return o in l?l[o]:k.length;},reRank:function(){k=[];var o={},p=0;m.forEach(function(q){var r=q.slice(0,-2),s=q.slice(-1);if(!o.hasOwnProperty(r))o[r]=g.get(r);var t=o[r];if(t==s){k[p]=r;l[r]=p++;}});}};(function(){var o=b('InitialChatFriendsList');k=o.list.length?o.list:[];if(!j.is_work_user){m=k.slice();n.reRank();}k.forEach(function(p,q){l[p]=q;});})();e.exports=a.OrderedFriendsList||n;},null);
__d("ChatSortUsers",["AvailableListConstants","OrderedFriendsList","PresencePrivacy","PresenceStatus","ShortProfiles","TokenizeUtil"],function(a,b,c,d,e,f,g,h,i,j,k,l){function m(q,r){var s=i.allows(q),t=i.allows(r);if(s!==t)return s?-1:1;return 0;}var n={};function o(q){if(n[q])return n[q];var r=(k.getNowUnsafe(q)||{}).name;if(r)return n[q]=l.flatten(r);return '~';}var p={sortAlphabetical:function(q,r){var s=o(q),t=o(r);if(s!==t)return s<t?-1:1;return 0;},sortMobile:function(q,r){var s=j.get(q)===g.MOBILE,t=j.get(r)===g.MOBILE;if(s!==t)return t?-1:1;return p.sortAlphabetical(q,r);},sortCoefficient:function(q,r){var s=h.getRank(q),t=h.getRank(r);if(s!==t)return s-t;return p.sortAlphabetical(q,r);},sort:function(q,r){var s=m(q,r);if(s!==0)return s;return p.sortCoefficient(q,r);}};e.exports=p;},null);
__d("ChatOrderedList",["Arbiter","ArbiterMixin","AvailableList","AvailableListConstants","CSS","ChatConfig","ChatHovercard","ChatOrderedListHover","ChatSidebarConstants","ChatSidebarOrderedList.react","ChatSortUsers","ChatVisibility","DOM","DataStore","Event","JSLogger","OrderedFriendsList","Parent","PresencePrivacy","PresenceStatus","React","createObjectFrom","csx","debounceAcrossTransitions","mixin","shield"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa){var ga=null,ha,ia=ea(h);for(var ja in ia)if(ia.hasOwnProperty(ja))la[ja]=ia[ja];var ka=ia===null?null:ia.prototype;la.prototype=Object.create(ka);la.prototype.constructor=la;la.__superConstructor__=ia;function la(ma,na,oa){"use strict";this._isSidebar=ma;this._root=na;this._isVisible=false;this._excludedIds={};this._numTopFriends=5;this._hoverController=null;this._contextualDialog=oa;this._orderedList=s.find(this._root,'.fbChatOrderedList');this._scrollableOrderedList=x.byClass(this._root,'scrollableOrderedList');this._scrollableArea=x.byClass(this._root,'scrollable');if(this._isSidebar)new m(this);g.subscribe(v.DUMP_EVENT,function(pa,qa){qa.chat_lists=qa.chat_lists||{sorted_list:this.getCachedSortedList(),ordered_list:w.getList(),available_list:la.getAvailableList(this._excludedIds),excluded_list:this._excludedIds};}.bind(this));y.subscribe('privacy-user-presence-changed',fa(this._render,this));i.subscribe(j.ON_AVAILABILITY_CHANGED,fa(this._render,this));}la.prototype.getShowingUsers=function(){"use strict";return s.scry(this._root,"li._42fz,li._5a58").map(this.getUserForNode);};la.prototype.getUserForNode=function(ma){"use strict";return t.get(ma,'id')||t.get(ma,'serverthreadid');};la.prototype.getHoverController=function(){"use strict";if(!this._hoverController)this._hoverController=new n(this,this._contextualDialog);return this._hoverController;};la.prototype.getItemHeight=function(){"use strict";return o.getItemHeight(this._isSidebar);};la.prototype.getRoot=function(){"use strict";return this._root;};la.prototype.getSortedList=function(ma){"use strict";return la.getSortedList(ma||this._excludedIds,this._numTopFriends);};la.prototype.getCachedSortedList=function(ma){"use strict";if(ga==null)ga=this.getSortedList(ma);return ga;};la.prototype.hide=function(){"use strict";if(!this._isVisible)return;this._isVisible=false;k.hide(this._scrollableOrderedList||this._root);this.inform('hide');};la.prototype.setNumTopFriends=function(ma){"use strict";if(ma!==this._numTopFriends){this._numTopFriends=ma;this._render();}};la.prototype._renderOrderedList=function(){"use strict";if(!this._isVisible||ha)return;var ma=la.getSortedList({},this._numTopFriends),na=la.getAvailableList(ba(ma));na.sort(q.sortMobile);aa.renderComponent(aa.createElement(p,{availableUsers:na,isSidebar:this._isSidebar,scrollContainer:this._scrollContainer,topUsers:ma}),this._orderedList);this.inform('render');};la.prototype._render=function(){"use strict";this._render=da(this._renderOrderedList.bind(this),300);this._render();};la.prototype.show=function(){"use strict";if(this._isVisible)return;this._isVisible=true;k.show(this._scrollableOrderedList||this._root);this._render();this.inform('show');};la.prototype.isVisible=function(){"use strict";return this._isVisible;};la.prototype.setScrollContainer=function(ma){"use strict";if(s.contains(ma,this._root))this._scrollContainer=ma;};la.getSortedList=function(ma,na){"use strict";var oa=w.getList().filter(function(ra){return !(ra in ma)&&y.getFriendVisibility(ra)!==y.BLACKLISTED;}),pa=[];if(!r.isOnline()){Array.prototype.push.apply(pa,oa);}else{if(y.getOnlinePolicy()===y.ONLINE_TO_WHITELIST)oa=this._filterByWhitelist(oa);Array.prototype.push.apply(pa,oa);}pa=pa.slice(0,na);if(pa.length===na){var qa=la.getAvailableList(pa.concat(ma)).length;qa&&pa.splice(-1);}ga=pa.slice();return pa;};la._filterByWhitelist=function(ma){"use strict";var na=ma,oa={},pa,qa;ma=[];for(pa=0;pa<na.length;++pa){qa=na[pa];if(y.allows(qa)){oa[qa]=true;ma.push(qa);}}var ra=y.getWhitelist();for(pa=0;pa<ra.length;++pa){qa=ra[pa];if(!(qa in oa))ma.push(qa);}for(pa=0;pa<na.length;++pa){qa=na[pa];if(!y.allows(qa))ma.push(qa);}return ma;};la.getAvailableList=function(ma){"use strict";var na;if(!na)na=z.getOnlineIDs();return na.filter(function(oa){return !(oa in ma);});};la._pause=function(){"use strict";ha=true;};la._unpause=function(){"use strict";ha=false;};la._registerToggleRenderItem=function(ma){"use strict";u.listen(ma,'click',function(){ha=!ha;k.conditionClass(ma,'checked',ha);});};e.exports=la;},null);
__d("ChatMiniSidebarUser.react",["AvailableListConstants","ChatOpenTab","ChatSidebarSections","Image.react","Link.react","WebMessengerPermalinkConstants","PresenceStatus","React","cx","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){'use strict';var q=n.createClass({displayName:'ChatMiniSidebarUser',propTypes:{user:n.PropTypes.object.isRequired},_openTab:function(r){h.openUserTab(this.props.user.id,i.ORDERED_LIST);r.preventDefault();},_renderImage:function(){return n.createElement(j,{src:this.props.user.thumbSrc});},_renderStatus:function(){var r=m.get(this.props.user.id),s=null;if(r==g.ACTIVE){s=p('/images/litestand_classic/sidebar/online.png');}else if(r==g.MOBILE)s=p('/images/litestand_classic/sidebar/pushable.png');return s?n.createElement(j,{src:s}):null;},_getHref:function(){return l.getURIPathForIDOrVanity(this.props.user.id);},render:function(){return (n.createElement("li",{className:"_2sb2"},n.createElement("div",{'aria-label':this.props.user.name,className:"_2sb3",'data-hover':"tooltip",'data-tooltip-position':"left"},n.createElement(k,{href:{url:this._getHref()},onClick:this._openTab,rel:"ignore"},n.createElement("div",{className:"_2sb4"},n.createElement("div",{className:"_2sb5"},this._renderImage()),n.createElement("div",{className:"_2sb6"},this._renderStatus()))))));}});e.exports=q;},null);
__d("ChatMiniSidebarBody.react",["ChatMiniSidebarUser.react","LegacyScrollableArea.react","React","ShortProfiles","XUISpinner.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){'use strict';var n=56,o=i.createClass({displayName:'ChatMiniSidebarBody',propTypes:{height:i.PropTypes.number.isRequired,isSearching:i.PropTypes.bool,users:i.PropTypes.array.isRequired},getDefaultProps:function(){return {isSearching:false};},getInitialState:function(){return {loading:true,userData:[]};},componentDidMount:function(){this._populateUserData(this.props.users);},componentWillReceiveProps:function(p){this._populateUserData(p.users);},_populateUserData:function(p){j.getMulti(p,function(q){var r=p.map(function(s){return q[s];});this.setState({loading:false,userData:r});}.bind(this));},_renderUser:function(p){if(p.id===0)return null;return i.createElement(g,{key:p.id,user:p});},render:function(){var p=null;if(this.state.loading){p=i.createElement("div",{className:"_1rg3"},i.createElement(k,null));}else if(this.state.userData.length===0&&this.props.isSearching){p=i.createElement("div",null,"No results.");}else p=i.createElement("ul",null,this.state.userData.map(function(q){return this._renderUser(q);}.bind(this)));return (i.createElement(h,{height:this.props.height,width:n,fade:true},p));}});e.exports=o;},null);
__d("SearchableTextInput.react",["EventListener","React","AbstractTextFieldMixin.react","AbstractTextInput.react","getActiveElement","merge"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=h.createClass({displayName:'SearchableTextInput',propTypes:l(i.propTypes,{queryString:h.PropTypes.string,searchSource:h.PropTypes.object,searchSourceOptions:h.PropTypes.object,onEntriesFound:h.PropTypes.func.isRequired,searchOnFocus:h.PropTypes.bool,searchOnUpdate:h.PropTypes.bool,onPaste:h.PropTypes.func,onFocus:h.PropTypes.func,onChange:h.PropTypes.func}),componentDidMount:function(){if(this.props.onPaste)this._listener=g.listen(this.refs.input.getTextFieldDOM(),'paste',this.props.onPaste);},componentWillReceiveProps:function(n){},componentDidUpdate:function(n){if(this.props.searchOnUpdate)if(n.queryString!==this.props.queryString)this.search(this.props.queryString);},componentWillUnmount:function(){if(this._listener){this._listener.remove();this._listener=null;}},_onInputFocus:function(){this.props.searchSource.bootstrap(function(){if(this.props.searchOnFocus)this.search(this.props.queryString);}.bind(this));this.props.onFocus&&this.props.onFocus();},_onSearchCallback:function(n,o){if(this.props.queryString===o)this.props.onEntriesFound(n);},_onChange:function(event){this.props.onChange&&this.props.onChange(event);var n=event.target.value;setTimeout(function(){this.search(n);}.bind(this));},search:function(n){this.props.searchSource.search(n,this._onSearchCallback,this.props.searchSourceOptions);},focusInput:function(){var n=this.getTextFieldDOM();if(k()===n){this._onInputFocus();}else n.offsetHeight&&n.focus();},blurInput:function(){var n=this.getTextFieldDOM();n.offsetHeight&&n.blur();},getTextFieldDOM:function(){return this.refs.input.getTextFieldDOM();},render:function(){var n=this.props.queryString||'';return (h.createElement(j,Object.assign({},this.props,{'aria-label':n,onChange:this._onChange,onFocus:this._onInputFocus,ref:"input",role:"combobox",value:n})));}});e.exports=m;},null);
__d("ChatMiniSidebarFooter.react",["Image.react","React","ReactLayeredComponentMixin","SearchableTextInput.react","XUIContextualDialog.react","XUIContextualDialogBody.react","cx","ix","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';var p=140,q=h.createClass({displayName:'ChatMiniSidebarFooter',mixins:[i],propTypes:{onEntriesFound:h.PropTypes.func.isRequired,onInputChanged:h.PropTypes.func.isRequired,source:h.PropTypes.object.isRequired},getInitialState:function(){return {query:'',shown:false};},_showSearchFlyout:function(){this.setState({shown:true});},_hideSearchFlyout:function(){this.setState(this.getInitialState());this.props.onInputChanged(this.state.query);},_onChange:function(r){var s=r.target.value;this.setState({query:s});this.props.onInputChanged(s);},renderLayers:function(){return {contextualDialog:h.createElement(k,{contextRef:"search",onBlur:this._hideSearchFlyout,position:"left",shown:this.state.shown,width:p},h.createElement(l,null,h.createElement(j,{placeholder:"Search",queryString:this.state.query,searchSource:this.props.source,onEntriesFound:this.props.onEntriesFound,onChange:this._onChange})))};},render:function(){return (h.createElement("div",{className:"_iup",ref:"search"},h.createElement("div",{className:"_35_4"},h.createElement(g,{alt:"Search",onClick:this._showSearchFlyout,tabIndex:"0",src:n('/images/chat/sidebar/search.png')}))));}});e.exports=q;},null);
__d("ChatMiniSidebar.react",["AvailableList","AvailableListConstants","ChannelConnection","ChatOrderedList","ChatSidebarConstants","ChatSortUsers","ChatMiniSidebarBody.react","ChatMiniSidebarFooter.react","PresencePrivacy","React","SubscriptionsHandler","createObjectFrom","cx","shield"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){'use strict';var u=6,v=27,w=p.createClass({displayName:'ChatMiniSidebar',propTypes:{dataSource:p.PropTypes.object.isRequired,height:p.PropTypes.number.isRequired,shown:p.PropTypes.bool.isRequired},getInitialState:function(){return {users:[],searchResults:[],isSearching:false};},componentWillMount:function(){this._subscriptions=new q();this._subscriptions.addSubscriptions(g.subscribe(h.ON_AVAILABILITY_CHANGED,this._updateUsers),i.subscribe([i.CONNECTED,i.RECONNECTING,i.SHUTDOWN,i.MUTE_WARNING,i.UNMUTE_WARNING],t(this.forceUpdate,this)),o.subscribe('privacy-changed',t(this.forceUpdate,this)),o.subscribe('privacy-user-presence-changed',this._updateUsers));this._updateUsers();},componentWillReceiveProps:function(x){if(!x.shown)this.setState({searchResults:[],isSearching:false});},componentWillUnmount:function(){this._subscriptions&&this._subscriptions.release();},_getScrollableAreaHeight:function(){return Math.max(this.props.height-u-v,0);},_updateUsers:function(){if(!this.props.shown)return;var x=this._getScrollableAreaHeight(),y=x/k.getItemHeight(true),z=j.getSortedList({},y),aa=j.getAvailableList(r(z));aa.sort(l.sortMobile);this.setState({users:z.concat(aa)});},_onEntriesFound:function(x){var y=x.map(function(z){return z.getUniqueID();});this.setState({searchResults:y});},_onInputChanged:function(x){this.setState({isSearching:!!x});},render:function(){if(!this.props.shown)return null;var x=this._getScrollableAreaHeight(),y=this.state.isSearching?this.state.searchResults:this.state.users;return (p.createElement("div",{className:"_269v"},p.createElement("div",{className:"_269w"}),p.createElement(m,{className:"_269x",height:x,isSearching:this.state.isSearching,users:y}),p.createElement(n,{onEntriesFound:this._onEntriesFound,onInputChanged:this._onInputChanged,source:this.props.dataSource})));}});e.exports=w;},null);
__d("ChatMiniSidebarController",["ChatMiniSidebar.react","React"],function(a,b,c,d,e,f,g,h){'use strict';var i=null,j=0,k=null,l=null,m={init:function(n,o){if(l||i)return;l=n;i=o;},setHeight:function(n){j=n;},show:function(){k=h.renderComponent(h.createElement(g,{dataSource:i,height:j,shown:true}),l);},hide:function(){k&&h.renderComponent(h.createElement(g,{dataSource:i,height:j,shown:false}),l);}};e.exports=m;},null);
__d("AbstractSearchSource",["Deferred","emptyFunction"],function(a,b,c,d,e,f,g,h){function i(){}var j={bootstrap:function(k){k=k||h;if(this._bootstrapped){k();return;}if(this._bootstrapDeferred)return this._bootstrapDeferred.addCallback(k);this._bootstrapDeferred=new g();this._bootstrapDeferred.addCallback(k);this.bootstrapImpl(function(){this._bootstrapped=true;this._bootstrapDeferred.succeed();this._bootstrapDeferred=null;}.bind(this));return this._bootstrapDeferred;},search:function(k,l,m){this.searchImpl(k,l,m);},bootstrapImpl:function(k){k();},searchImpl:function(k,l,m){throw new Error('Abstract method #searchImpl is not implemented.');}};Object.assign(i.prototype,j);i.Mixin=j;e.exports=i;},null);
__d("SearchSourceCallbackManager",["createObjectFrom","invariant"],function(a,b,c,d,e,f,g,h){function i(k){"use strict";this.$SearchSourceCallbackManager0=k.parseFn;h(typeof this.$SearchSourceCallbackManager0==='function');this.$SearchSourceCallbackManager1=k.matchFn;h(typeof this.$SearchSourceCallbackManager1==='function');this.$SearchSourceCallbackManager2=k.alwaysPrefixMatch||false;this.$SearchSourceCallbackManager3=k.indexFn||j;this.reset();}i.prototype.search=function(k,l,m){"use strict";var n=this.$SearchSourceCallbackManager4(k,l,m);if(n)return 0;this.$SearchSourceCallbackManager5.push({queryString:k,callback:l,options:m});var o=this.$SearchSourceCallbackManager5.length-1;this.$SearchSourceCallbackManager6.push(o);return o;};i.prototype.$SearchSourceCallbackManager4=function(k,l,m){"use strict";var n=this.$SearchSourceCallbackManager7(k),o=!!this.$SearchSourceCallbackManager8[k];if(!n.length){l([],k);return o;}var p=n.map(function(q){return this.$SearchSourceCallbackManager9[q];},this);l(p,k);return o;};i.prototype.$SearchSourceCallbackManagera=function(){"use strict";var k=this.$SearchSourceCallbackManager6;this.$SearchSourceCallbackManager6=[];k.forEach(this.$SearchSourceCallbackManagerb,this);};i.prototype.$SearchSourceCallbackManagerb=function(k){"use strict";var l=this.$SearchSourceCallbackManager5[k];if(!l)return;var m=this.$SearchSourceCallbackManager4(l.queryString,l.callback,l.options);if(m){delete this.$SearchSourceCallbackManager5[k];return;}this.$SearchSourceCallbackManager6.push(k);};i.prototype.reset=function(){"use strict";this.$SearchSourceCallbackManager9={};this.$SearchSourceCallbackManagerc={};this.$SearchSourceCallbackManagerd={};this.$SearchSourceCallbackManagere={};this.$SearchSourceCallbackManager8={};this.$SearchSourceCallbackManager6=[];this.$SearchSourceCallbackManager5=[undefined];};i.prototype.addLocalEntries=function(k){"use strict";k.forEach(function(l){var m=l.getUniqueID(),n=this.$SearchSourceCallbackManager3(l);this.$SearchSourceCallbackManager9[m]=l;this.$SearchSourceCallbackManagerc[m]=n;var o=this.$SearchSourceCallbackManager0(n);o.tokens.forEach(function(p){if(!this.$SearchSourceCallbackManagerd.hasOwnProperty(p))this.$SearchSourceCallbackManagerd[p]={};this.$SearchSourceCallbackManagerd[p][m]=true;},this);},this);this.$SearchSourceCallbackManagera();};i.prototype.addQueryEntries=function(k,l){"use strict";var m=this.$SearchSourceCallbackManager7(l),n=this.$SearchSourceCallbackManager0(l).flatValue;this.$SearchSourceCallbackManagere[n]=g(m,true);k.forEach(function(o){var p=o.getUniqueID();this.$SearchSourceCallbackManager9[p]=o;this.$SearchSourceCallbackManagerc[p]=this.$SearchSourceCallbackManager3(o);this.$SearchSourceCallbackManagere[n][p]=true;},this);this.$SearchSourceCallbackManagera();};i.prototype.unsubscribe=function(k){"use strict";delete this.$SearchSourceCallbackManager5[k];};i.prototype.removeEntry=function(k){"use strict";delete this.$SearchSourceCallbackManager9[k];};i.prototype.getAllEntriesMap=function(){"use strict";return this.$SearchSourceCallbackManager9;};i.prototype.setQueryStringAsExhausted=function(k){"use strict";this.$SearchSourceCallbackManager8[k]=true;};i.prototype.unsetQueryStringAsExhausted=function(k){"use strict";delete this.$SearchSourceCallbackManager8[k];};i.prototype.$SearchSourceCallbackManager7=function(k){"use strict";var l=this.$SearchSourceCallbackManagerf(k,this.$SearchSourceCallbackManagerg(k)),m=this.$SearchSourceCallbackManagerf(k,this.$SearchSourceCallbackManagerh(k)),n=l.concat(m),o={},p=[];n.forEach(function(q){if(!o[q]&&this.$SearchSourceCallbackManager9[q]!==undefined){p.push(q);o[q]=true;}},this);return p;};i.prototype.$SearchSourceCallbackManagerf=function(k,l){"use strict";var m=this.$SearchSourceCallbackManageri(k,l),n=this.$SearchSourceCallbackManager9;function o(p,q){if(m[p]!==m[q])return m[p]?-1:1;var r=n[p],s=n[q];if(r.getOrder()!==s.getOrder())return r.getOrder()-s.getOrder();var t=r.getTitle().length,u=s.getTitle().length;if(t!==u)return t-u;return r.getUniqueID()-s.getUniqueID();}return l.sort(o).slice();};i.prototype.$SearchSourceCallbackManageri=function(k,l){"use strict";var m={};l.forEach(function(n){m[n]=this.$SearchSourceCallbackManager1(k,this.$SearchSourceCallbackManagerc[n]);},this);return m;};i.prototype.$SearchSourceCallbackManagerg=function(k){"use strict";var l=this.$SearchSourceCallbackManager0(k,this.$SearchSourceCallbackManager2),m=this.$SearchSourceCallbackManager2?l.sortedTokens:l.tokens,n=m.length,o=l.isPrefixQuery?n-1:null,p={},q={},r={},s=false,t={},u=0;m.forEach(function(w,x){if(t.hasOwnProperty(w))return;u++;t[w]=true;for(var y in this.$SearchSourceCallbackManagerd){var z=(y===w&&!p.hasOwnProperty(y)),aa=false;if(!z)aa=((this.$SearchSourceCallbackManager2||o===x)&&y.indexOf(w)===0);if(!z&&!aa)continue;if(y===w){if(q.hasOwnProperty(y))s=true;p[y]=true;}else{if(p.hasOwnProperty(y)||q.hasOwnProperty(y))s=true;q[y]=true;}for(var ba in this.$SearchSourceCallbackManagerd[y])if(x===0||(r.hasOwnProperty(ba)&&r[ba]==u-1))r[ba]=u;}},this);var v=Object.keys(r).filter(function(w){return r[w]==u;});if(s||u<n)v=this.$SearchSourceCallbackManagerj(k,v);return v;};i.prototype.$SearchSourceCallbackManagerh=function(k){"use strict";var l=this.$SearchSourceCallbackManager0(k).flatValue,m=this.$SearchSourceCallbackManagerk(l);if(this.$SearchSourceCallbackManagere.hasOwnProperty(l))return m;return this.$SearchSourceCallbackManagerj(k,m);};i.prototype.$SearchSourceCallbackManagerk=function(k){"use strict";var l=0,m=null,n=this.$SearchSourceCallbackManagere;Object.keys(n).forEach(function(o){if(k.indexOf(o)===0&&o.length>l){l=o.length;m=o;}});return (n.hasOwnProperty(m)?Object.keys(n[m]):[]);};i.prototype.$SearchSourceCallbackManagerj=function(k,l){"use strict";return l.filter(function(m){return this.$SearchSourceCallbackManager1(k,this.$SearchSourceCallbackManagerc[m]);},this);};function j(k){return [k.getTitle(),k.getKeywordString()].join(' ');}e.exports=i;},null);
__d("ChatMiniSidebarSearchSource",["AbstractSearchSource","AsyncRequest","ChatSortUsers","CurrentUser","MercuryParticipantTypes","SearchableEntry","SearchSourceCallbackManager","ShortProfiles","TokenizeUtil","copyProperties","emptyFunction","isValidUniqueID"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){'use strict';for(var s in g)if(g.hasOwnProperty(s))u[s]=g[s];var t=g===null?null:g.prototype;u.prototype=Object.create(t);u.prototype.constructor=u;u.__superConstructor__=g;function u(v){this.$ChatMiniSidebarSearchSource0=new m({parseFn:o.parse,matchFn:o.isQueryMatch,indexFn:v.indexFn});this.$ChatMiniSidebarSearchSource1=[];this.$ChatMiniSidebarSearchSource2=v.queryRequests||[];}u.prototype.bootstrapImpl=function(v){n.fetchAll().then(function(){this.$ChatMiniSidebarSearchSource3();v();}.bind(this));};u.prototype.searchImpl=function(v,w,x){var y=null,z={},aa=this.$ChatMiniSidebarSearchSource0.search(v,function(da){if(!y){y=da;y.forEach(function(ea){return z[ea.getUniqueID()]=true;});}else da.forEach(function(ea){var fa=ea.getUniqueID();if(!z[fa]){y.push(ea);z[fa]=true;}});w(y,v);},x);if(!aa||!this.$ChatMiniSidebarSearchSource2||!this.$ChatMiniSidebarSearchSource2.length)return;var ba={value:v,existing_ids:y&&y.map(function(da){return da.getUniqueID();}).join(',')},ca=this.$ChatMiniSidebarSearchSource2.length;this.$ChatMiniSidebarSearchSource2.forEach(function(da){this.$ChatMiniSidebarSearchSource4(ba,da,function(ea){this.$ChatMiniSidebarSearchSource5(this.$ChatMiniSidebarSearchSource6(this.$ChatMiniSidebarSearchSource7(ea)),v);ca--;if(ca===0)this.$ChatMiniSidebarSearchSource0.setQueryStringAsExhausted(v);}.bind(this));}.bind(this),this);};u.prototype.getBootstrappedEntries=function(v){return this.bootstrap(function(){return v(this.$ChatMiniSidebarSearchSource1||[]);}.bind(this));};u.prototype.getAllEntriesMap=function(){return this.$ChatMiniSidebarSearchSource0.getAllEntries();};u.prototype.$ChatMiniSidebarSearchSource3=function(){var v=n.getCachedProfileIDs(),w=v.filter(function(y){var z=n.getNow(y);return (y==j.getID()||z.type===k.FRIEND);});w.sort(i.sort);var x=w.map(this.$ChatMiniSidebarSearchSource8);if(x.length){this.$ChatMiniSidebarSearchSource0.addLocalEntries(x);this.$ChatMiniSidebarSearchSource1=this.$ChatMiniSidebarSearchSource1.concat(x);}};u.prototype.$ChatMiniSidebarSearchSource6=function(v){return v.map(this.$ChatMiniSidebarSearchSource9);};u.prototype.$ChatMiniSidebarSearchSource9=function(v,w){var x=v.text,y=v.uid;if(!x||!r(y))return null;return new l({uniqueID:y,title:x,order:w,subtitle:v.subtext,type:v.type,photo:v.photo,uri:v.path});};u.prototype.$ChatMiniSidebarSearchSource7=function(v){var w=v.getPayload();if(Array.isArray(w)){return w;}else if(w&&w.entries){return w.entries;}else return [];};u.prototype.$ChatMiniSidebarSearchSource8=function(v,w){var x=n.getNow(v),y=v==j.getID()?k.FRIEND:x.type,z=[x.additionalName,x.alternateName].concat(x.searchTokens||[]).join(' ');return new l({uniqueID:v,title:x.name,order:w,subtitle:x.additionalName,keywordString:z,type:y,photo:x.thumbSrc,uri:x.uri});};u.prototype.$ChatMiniSidebarSearchSource4=function(v,w,x,y){new h(w.uri).setData(p({},v,w.data)).setMethod('GET').setReadOnly(true).setHandler(x).setErrorHandler(y||q).send();};u.prototype.$ChatMiniSidebarSearchSource5=function(v,w){if(v.length)this.$ChatMiniSidebarSearchSource0.addQueryEntries(v.filter(function(x){return !!x;}),w);};e.exports=u;},null);
__d("ChatSidebarSheet",["ArbiterMixin","BlackbirdUpsell","ChannelConnection","ChannelConstants","ChatBehavior","ChatConfig","ChatVisibility","CSS","DOM","Event","JSLogger","PresencePrivacy","copyProperties","mixin","setTimeoutAcrossTransitions","tx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){var w=q.create('sidebar_sheet');function x(da){switch(da){case j.HINT_AUTH:return "Your session has timed out. Please log in.";case j.HINT_CONN:return v._("Facebook {Chat} is currently unavailable.",{Chat:"Chat"});case j.HINT_MAINT:return v._("Facebook {Chat} is currently down for maintenance.",{Chat:"Chat"});default:return v._("Facebook {Chat} is currently unavailable.",{Chat:"Chat"});}}function y(da){var ea;if(da===null||false===navigator.onLine){ea="Unable to connect to chat. Check your Internet connection.";}else if(da>l.get('warning_countdown_threshold_msec')){var fa=o.create('a',{href:'#',className:'fbChatReconnectLink'},"Try again");ea=o.tx._("Unable to connect to chat. {try-again-link}",{'try-again-link':fa});}else if(da>1000){ea=v._("Unable to connect to chat. Reconnecting in {seconds}...",{seconds:Math.floor(da/1000)});}else ea="Unable to connect to chat. Reconnecting...";return ea;}var z=t(g);for(var aa in z)if(z.hasOwnProperty(aa))ca[aa]=z[aa];var ba=z===null?null:z.prototype;ca.prototype=Object.create(ba);ca.prototype.constructor=ca;ca.__superConstructor__=z;function ca(da){"use strict";this._root=da;this._message=o.find(da,'div.fbChatSidebarMessage div.message');i.subscribe([i.CONNECTED,i.SHUTDOWN,i.RECONNECTING],this._handleConnectionChange.bind(this));i.subscribe([i.MUTE_WARNING,i.UNMUTE_WARNING],this._render.bind(this));r.subscribe('privacy-user-presence-changed',this._render.bind(this));k.subscribe(k.ON_CHANGED,this._render.bind(this));this._render();}ca.prototype._handleConnectionChange=function(da,ea){"use strict";this._channelStatus=da;this._channelData=ea;this._render();};ca.prototype._renderChannelDisconnect=function(){"use strict";if(this._channelStatus===i.SHUTDOWN){return o.setContent(this._message,x(this._channelData));}else if(this._channelStatus===i.RECONNECTING){var da=this._channelData;o.setContent(this._message,y(da));if(da>1000){if(da>l.get('warning_countdown_threshold_msec'))this._warningMsgEventListener=p.listen(this._message,'click',function(event){if(n.hasClass(event.getTarget(),'fbChatReconnectLink')){i.reconnect();return false;}});this._showWarningTimeout=u(this._handleConnectionChange.bind(this,i.RECONNECTING,da-1000),1000);}}};ca.prototype._renderOffline=function(){"use strict";var da='fbChatGoOnlineLink',ea="Turn on chat",fa=o.create('a',{href:'#',className:da},ea),ga=o.tx._("{=Go online} to see who's available.",{'=Go online':fa});o.setContent(this._message,ga);this._goOnlineEventListener=p.listen(this._message,'click',function(event){if(n.hasClass(event.getTarget(),da)){w.log('sidebar_go_online');m.goOnline();return false;}});};ca.prototype._renderBlackbirdUpsell=function(){"use strict";o.setContent(this._message,h.getOfflineContent());};ca.prototype._renderBlackbird=function(da){"use strict";o.setContent(this._message,h.getBlackbirdContent(da));};ca.prototype._clear=function(){"use strict";if(this._showWarningTimeout){clearTimeout(this._showWarningTimeout);this._showWarningTimeout=null;}if(this._warningMsgEventListener){this._warningMsgEventListener.remove();this._warningMsgEventListener=null;}if(this._goOnlineEventListener){this._goOnlineEventListener.remove();this._goOnlineEventListener=null;}n.removeClass(this._root,'upsell');n.removeClass(this._root,'offline');n.removeClass(this._root,'blackbird');n.removeClass(this._root,'error');n.removeClass(this._root,'notice');o.empty(this._message);};ca.prototype._render=function(){"use strict";this._clear();if(h.shouldShow()){if(m.hasBlackbirdEnabled()){var da=m.isOnline()?'blackbird':'upsell';n.addClass(this._root,da);this._renderBlackbird(r.getVisibility());}else if(!m.isOnline()){n.addClass(this._root,'upsell');this._renderBlackbirdUpsell();}}else if(!m.isOnline()){n.addClass(this._root,'offline');this._renderOffline();}else if(i.disconnected()){n.addClass(this._root,'error');this._renderChannelDisconnect();}else if(!k.notifiesUserMessages()){n.addClass(this._root,'notice');var ea="Alerts are off while you use another client to chat.";o.setContent(this._message,ea);}this.inform('updated');};s(ca.prototype,{_channelStatus:null,_channelData:null,_showWarningTimeout:null,_warningMsgEventListener:null,_goOnlineEventListener:null});e.exports=ca;},null);
__d("SidebarFitWindowHeight",["Arbiter","ArbiterMixin","Event","Style","SubscriptionsHandler","TinyViewport","Vector","mixin","queryThenMutateDOM"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=n(h);for(var q in p)if(p.hasOwnProperty(q))s[q]=p[q];var r=p===null?null:p.prototype;s.prototype=Object.create(r);s.prototype.constructor=s;s.__superConstructor__=p;function s(t){"use strict";this.$SidebarFitWindowHeight0=t;this.onViewportUpdate();l.subscribe('change',this.onViewportUpdate.bind(this));}s.prototype.onViewportUpdate=function(){"use strict";if(l.isTiny()){this.onScroll();var t=this.onScroll.bind(this);this.$SidebarFitWindowHeight1=new k();this.$SidebarFitWindowHeight1.addSubscriptions(i.listen(window,'scroll',t),g.subscribe('dom-scroll',t));}else{if(this.$SidebarFitWindowHeight2!==0){j.set(this.$SidebarFitWindowHeight0,'margin-top','0');this.$SidebarFitWindowHeight2=0;}this.$SidebarFitWindowHeight1&&this.$SidebarFitWindowHeight1.release();}};s.prototype.onScroll=function(){"use strict";o(this.updateScrollPosition.bind(this),this.resizeSidebar.bind(this),'SidebarFitWindowHeight/scroll');};s.prototype.updateScrollPosition=function(){"use strict";this.$SidebarFitWindowHeight3=m.getScrollPosition().y;this.$SidebarFitWindowHeight4||(this.$SidebarFitWindowHeight4=this.$SidebarFitWindowHeight0.offsetHeight);};s.prototype.resizeSidebar=function(){"use strict";var t=-Math.max(Math.min(this.$SidebarFitWindowHeight3,this.$SidebarFitWindowHeight4),0);j.set(this.$SidebarFitWindowHeight0,'margin-top',t+'px');if(t!=this.$SidebarFitWindowHeight2){this.$SidebarFitWindowHeight2=t;this.inform('resized',t);}};s.prototype.getOffset=function(){"use strict";return this.$SidebarFitWindowHeight2;};e.exports=s;},null);
__d("ChatSidebar",["Arbiter","ArbiterMixin","AsyncRequest","Banzai","BanzaiLogger","BootloaderConfig","ChatConfig","ChatImpressionLogger","ChatOptions","ChatMiniSidebarController","ChatMiniSidebarSearchSource","ChatSidebarSheet","CSS","DOM","DOMDimensions","Event","JSLogger","JSXDOM","KeyEventController","LitestandClassicPlaceHolders","ModalLayer","OrderedFriendsList","Parent","PresencePrivacy","ScrollableArea","SidebarFitWindowHeight","Style","ViewportBounds","copyProperties","createArrayFrom","csx","cx","debounce","emptyFunction","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa){var pa,qa=null,ra=false,sa=false,ta=false,ua=false,va=false,wa=false,xa,ya=false,za,ab,bb,cb,db,eb,fb,gb=null,hb,ib=w.create('chat_sidebar'),jb='succeeded',kb=k.create(ia({retry:true},j.VITAL));function lb(){s.removeClass(document.documentElement,'sidebarMode');if(!va||!wb.isVisible()){g.inform('reflow');return;}ta=false;ua=false;gb=null;cb.hide();eb.getCore().reset();s.hide(ab);if(ya){s.hide(xa);s.hide(za);s.removeClass(document.documentElement,'miniSidebar');s.removeClass(ab,"_51xq");p.hide();ib.log('minisidebar_hide');}else ib.log('sidebar_hide');g.inform('sidebar/hide',wb);g.inform('reflow');}function mb(){var xb=wb.shouldShowSidebar(),yb=wb.shouldShowMiniSidebar();if(wb.isEnabled()&&(xb||yb)){if(xb){pb();qb();}else rb();}else lb();if(!va){ub();va=true;}gb=null;}function nb(){if(eb&&wb.isVisible())eb.getCore().getElement().focus();}function ob(xb){var yb=fb.height;xb.forEach(function(zb){if(zb&&zb!==pa)yb-=u.getElementDimensions(zb).height;});if(hb)yb-=hb.getOffset();if(db)yb-=u.getElementDimensions(db).height;return Math.max(0,yb);}function pb(){if(wb.isVisible())return;if(ya){s.hide(xa);s.show(za);s.removeClass(document.documentElement,'miniSidebar');s.removeClass(ab,"_51xq");p.hide();}ta=true;ua=false;gb=null;s.show(ab);s.addClass(document.documentElement,'sidebarMode');cb.show();ib.log('sidebar_show');g.inform('sidebar/show',wb);z.destroy('sidebar');}function qb(){var xb=ob(ja(za.childNodes)),yb=cb.getItemHeight(),zb=8,ac=Math.floor((xb-zb)/yb);ga.set(pa,'height',xb+'px');cb.setNumTopFriends(ac);var bc=Math.floor((xb-zb)/yb);bc=(bc-2)>0?bc-2:0;eb.getData().setMaxResults(bc);g.inform('sidebar/resized',wb);g.inform('reflow');}function rb(){s.hide(za);s.show(xa);s.show(ab);s.addClass(document.documentElement,'sidebarMode');s.addClass(document.documentElement,'miniSidebar');s.addClass(ab,"_51xq");var xb=ob([]);p.setHeight(xb);p.show();ta=false;ua=true;z.destroy('sidebar');ib.log('minisidebar_show');g.inform('minisidebar/show',wb);g.inform('reflow');}function sb(){o.setSetting('sidebar_mode',wb.isEnabled(),'sidebar');new i('/ajax/chat/settings.php').setHandler(na).setErrorHandler(na).setData({sidebar_mode:wb.isEnabled()}).setAllowCrossPageTransition(true).send();}function tb(){return ba.getList().length<=m.get('sidebar.min_friends');}function ub(){var xb=true;if(!wb.isEnabled()){ib.log('state_not_enabled');xb=false;}if(!wb.isViewportCapable())if(!ya){ib.log('state_not_shown_viewport');xb=false;}else if(!wb.isViewportCapableForMiniSidebar()){ib.log('state_not_shown_viewport_mini');xb=false;}if(sa){ib.log('state_not_shown_hidden');xb=false;}if(tb()){ib.log('state_not_shown_num_friends');xb=false;}ib.log(xb?'state_shown':'state_not_shown');}function vb(event,xb){if(!wb.isVisible())return;if(xb){ga.set(ab,'right',xb+'px');}else ga.set(ab,'right','');}var wb={init:function(xb,yb,zb,ac){wb.init=na;wa=true;ab=xb;cb=yb;eb=zb;bb=ac;pa=t.find(xb,'div.fbChatSidebarBody');xa=t.find(xb,"._51x-");za=t.find(xb,"._51x_");db=t.find(xb,"._5qqe");ya=m.get('mini_sidebar',false);if(ya){var bc=new q({queryRequests:[{uri:'/ajax/mercury/composer_query.php'}]});p.init(xa,bc);}v.listen(window,'resize',mb);y.registerKey('q',function(event){if(ta){if(!qa)qa=t.scry(xb,'.inputsearch')[0];if(qa){qa.focus();event.prevent();}}});var cc=new r(xb);cc.subscribe('updated',mb);cb.setScrollContainer(ca.byClass(cb.getRoot(),'uiScrollableAreaWrap'));cb.subscribe(['render','show','hide'],ma(function(ec){var fc=ea.getInstance(cb.getRoot());fc&&fc.adjustGripper();}));g.subscribe('chat/option-changed',function(ec,fc){if(fc.name=="sidebar_mode"){ra=!!o.getSetting('sidebar_mode');mb();}});zb.getCore().subscribe('sidebar/typeahead/active',wb.updateOnActiveTypeahead);zb.subscribe('reset',function(){if(!zb.getCore().getValue()&&!cb.isVisible())wb.updateOnActiveTypeahead(null,false);});g.subscribe('buddylist-nub/initialized',function(ec,fc){v.listen(fc.getButton(),'click',function(event){var gc=sa;sa=false;wb.enable();var hc=wb.shouldShowSidebar();sa=gc&&!hc;return !hc;});});ra=!!o.getSetting('sidebar_mode');da.subscribe('privacy-user-presence-changed',mb);mb();n.init(cb);ha.addPersistentRight(wb.getVisibleWidth);wb.inform('sidebar/initialized',wb,g.BEHAVIOR_PERSISTENT);g.inform('sidebar/initialized',wb,g.BEHAVIOR_PERSISTENT);hb=new fa(db);hb.subscribe('resized',mb);if(m.get('chat_sidebar_load_log')){var dc={event:jb,session_token:ac.session_token,country_code:ac.viewer_country_code,buddylist_short:m.get('buddylist_short_group'),bootloader_retry:l.retry_on_timeout};kb.log('MessagesSidebarLoadLoggerConfig',dc);}aa.subscribe('CompensateForScrollbar',vb);},updateOnActiveTypeahead:function(xb,yb){if(!ta)return;if(yb){cb.hide();}else{cb.show();mb();}},isInitialized:function(){return va;},disable:function(){if(!wb.isEnabled())return;ra=false;sb();lb();},enable:function(){if(wb.isEnabled())return;ra=true;sb();mb();setTimeout(nb,0);},ensureLoaded:function(){if(!ra)return;if(wa)return;if(oa('pagelet_sidebar'))return;d(['UIPagelet'],function(xb){var yb=x.div({id:"pagelet_sidebar"});t.appendContent(document.body,yb);xb.loadFromEndpoint('SidebarPagelet','pagelet_sidebar');});wa=true;},hide:function(){if(sa)return;sa=true;lb();},unhide:function(){if(!sa)return;sa=false;mb();},getBody:function(){return pa;},getRoot:function(){return ab;},getVisibleWidth:function(){if((!ta&&!ua)||!ab)return 0;if(gb===null){gb=ab.offsetWidth;if(ua)gb=206;}return gb;},isEnabled:function(){return ra;},isViewportCapable:function(){fb=u.getViewportWithoutScrollbarDimensions();var xb=m.get('sidebar.minimum_width');return fb.width>xb;},shouldShowSidebar:function(){var xb=wb.isViewportCapable();return xb&&!sa&&!tb();},isViewportCapableForMiniSidebar:function(){fb=u.getViewportWithoutScrollbarDimensions();var xb=m.get('sidebar.minimum_width'),yb=m.get('minisidebar.minimum_width');return fb.width>yb&&fb.width<=xb;},shouldShowMiniSidebar:function(){if(!ya)return false;var xb=wb.isViewportCapableForMiniSidebar();return xb&&!sa&&!tb();},isVisible:function(){return ta;},resize:mb,toggle:function(){wb.isEnabled()?wb.disable():wb.enable();}};ia(wb,h);e.exports=wb;},null);
__d("ChatTypeaheadBehavior",["ChatOpenTab","CSS","Parent","Rect","copyProperties","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l){function m(o,p){var q=i.byClass(o,"_4oes");if(q)h.conditionClass(q,"_5q83",p);}function n(o){"use strict";this._typeahead=o;}n.prototype.enable=function(){"use strict";var o=this._typeahead;this._subscriptions=[o.subscribe('focus',function(){o.getData().refreshData();m(o.getElement(),true);}),o.subscribe('blur',function(p){o.getCore().reset();m(o.getElement(),false);}),o.subscribe('respond',function(p,q){if(q.value&&q.value===o.getCore().getValue()){if(!q.results.length){var r=q.value.toLowerCase(),s=o.getData().getQueryCache();if(!q.isAsync&&!s.hasOwnProperty(r))return;o.getView().showNoResults();}h.addClass(o.getElement(),'hasValue');}}),o.subscribe('reset',function(){h.removeClass(o.getElement(),'hasValue');}),o.subscribe('select',function(p,q){var r=q.selected.uid;if(q.selected.mercury_thread&&!q.selected.mercury_thread.is_canonical)r=q.selected.mercury_thread.thread_fbid;o.getView().hide();g.openTabByType(r,q.selected.type,'typeahead');}),o.subscribe('highlight',function(p,q){if(q.index>=0){var r=o.getView().getItems()[q.index];if(r){var s=new j(r),t=r.offsetParent,u=s.boundWithin(new j(t)).getPositionVector();s.getPositionVector().sub(u).scrollElementBy(t);}}})];};n.prototype.disable=function(){"use strict";this._subscriptions.forEach(function(o){this._typeahead.unsubscribe(o);},this);this._subscriptions=null;};k(n.prototype,{_subscriptions:null});e.exports=n;},null);
__d("getDOMImageSize",["URI"],function(a,b,c,d,e,f,g){function h(m){m.onload=null;m.onerror=null;m.onreadystatechange=null;m._callback=null;m._thisObj=null;m._srcStr=null;m.parentNode&&m.parentNode.removeChild(m);}function i(){var m=this;if(m._callback)m._callback.call(m._thisObj,m.naturalWidth||m.width,m.naturalHeight||m.height,m._srcStr);h(m);}function j(){var m=this;if(m.readyState==='complete')i.call(m);}function k(){var m=this;if(m._callback)m._callback.call(m._thisObj,0,0,m._srcStr);h(m);}function l(m,n,o){o=o||null;if(!m){n.call(o,0,0,'');return;}var p=document.body;if(!p){setTimeout(l.bind(this,m,n,o),500);return;}var q;if(typeof m==='string'){q=m;}else if(typeof m==='object')if(typeof m.width==='number'&&typeof m.height==='number'){if(typeof m.src==='string'){q=m.src;if(m.naturalWidth&&m.naturalHeight){n.call(o,m.naturalWidth,m.naturalHeight,q);return;}}if(typeof m.uri==='string'){q=m.uri;if(m.width&&m.height){n.call(o,m.width,m.height,q);return;}}}else if(m instanceof g)q=m.toString();if(!q){n(0,0,m);return;}var r=document.createElement('img');r.onreadystatechange=j;r.onload=i;r.onerror=k;r._callback=n;r._thisObj=o;r._srcStr=q;r.src=q;r.style.cssText='position:absolute;left:0;top:0;width:auto;height:auto;clip:rect(0 0 0 0);';p.insertBefore(r,p.firstChild);}e.exports=l;},null);
__d("CachedDOMImageSizePool",["debounce","getDOMImageSize"],function(a,b,c,d,e,f,g,h){function i(j,k){"use strict";this.$CachedDOMImageSizePool0={};this.$CachedDOMImageSizePool1=k;this.$CachedDOMImageSizePool2=0;this.$CachedDOMImageSizePool3=j;this.$CachedDOMImageSizePool4=g(this.$CachedDOMImageSizePool5,5000,this);this.$CachedDOMImageSizePool6={};this.$CachedDOMImageSizePool7={};}i.prototype.get=function(j,k,l){"use strict";if(!j){k.call(l,0,0,j);return;}var m=this.$CachedDOMImageSizePool0[j];if(m){m.lastAccessTime=Date.now();k.call(l,m.width,m.height,m.src);}else if(this.$CachedDOMImageSizePool6[j]){this.$CachedDOMImageSizePool6[j].push(k);this.$CachedDOMImageSizePool7[j].push(l);}else{this.$CachedDOMImageSizePool6[j]=[k];this.$CachedDOMImageSizePool7[j]=[l];h(j,this.$CachedDOMImageSizePool8,this);}};i.prototype.set=function(j,k,l){"use strict";if(this.$CachedDOMImageSizePool2>this.$CachedDOMImageSizePool3)this.$CachedDOMImageSizePool4();var m=this.$CachedDOMImageSizePool0;if(j&&!m[j]){var n={width:k,height:l,src:j,lastAccessTime:Date.now()};m[j]=n;this.$CachedDOMImageSizePool2++;}};i.prototype.$CachedDOMImageSizePool8=function(j,k,l){"use strict";this.set(l,j,k);var m=this.$CachedDOMImageSizePool6[l],n=this.$CachedDOMImageSizePool7[l];for(var o=0,p=m.length;o<p;o++)m[o].call(n[o],j,k,l);delete this.$CachedDOMImageSizePool6[l];delete this.$CachedDOMImageSizePool7[l];};i.prototype.$CachedDOMImageSizePool5=function(){"use strict";var j=Date.now(),k=this.$CachedDOMImageSizePool0,l=this.$CachedDOMImageSizePool2,m=this.$CachedDOMImageSizePool1;for(var n in k){var o=k[n];if((j-o.lastAccessTime)>m){delete k[n];l--;}}this.$CachedDOMImageSizePool2=l;};e.exports=i;},null);
__d("BackgroundImage.react",["CachedDOMImageSizePool","React","ReactPropTypes","XUISpinner.react","cx","invariant","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n='(-?(\\d+\\.)?\\d+(px|\\%))',o=new RegExp('^'+n+'?(\\s'+n+')?$','g'),p=new g(50,10*60*1000),q=h.createClass({displayName:'BackgroundImage',propTypes:{src:i.string,width:i.number.isRequired,height:i.number.isRequired,backgroundSize:i.oneOf(['contain','cover','containinside','coverinside']),loadingIndicatorStyle:i.oneOf(['none','large','small']),backgroundPosition:function(r,s,t){var u=r[s];if(u){l(typeof u==='string');l(u.match(o));}},onImageLoad:i.func,optimizeResizeSpeed:i.bool,onContextMenu:i.func},getInitialState:function(){return {imageWidth:null,imageHeight:null,imageSrc:this.props.src,loading:true};},getDefaultProps:function(){return {optimizeResizeSpeed:false,loadingIndicatorStyle:'none'};},componentDidMount:function(){this._resolveImageSize();},componentDidUpdate:function(r){if(this.props.src!==this.state.imageSrc)this.setState({imageWidth:0,imageHeight:0,imageSrc:this.props.src,loading:true},this._resolveImageSize);},_resolveImageSize:function(){var r=this.state.imageSrc;if(r)p.get(r,this._onImageSizeResolved,this);},render:function(){var r={width:this.props.width+'px',height:this.props.height+'px'},s=m(this.props.className,"_5f0d");return (h.createElement("div",Object.assign({},this.props,{className:m(this.props.className,s),style:Object.assign({},(this.props.style||{}),r),onContextMenu:this.props.onContextMenu}),this._renderImage(),this._renderContent(),this._renderLoadingIndicator()));},_renderLoadingIndicator:function(){if(!this.state.loading||this.props.loadingIndicatorStyle==='none')return null;return (h.createElement("div",{className:"_1qe- _5lar"},h.createElement("div",{className:"_1qe_"},h.createElement("div",{className:"_1qf0"},h.createElement(j,{size:this.props.loadingIndicatorStyle})))));},_renderContent:function(){if(this.props.children)return (h.createElement("div",{className:"_1qe-"},h.createElement("div",{className:"_1qe_"},h.createElement("div",{className:"_1qf0"},this.props.children))));},_renderImage:function(){if(!this.state.imageWidth||!this.state.imageHeight)return;var r=this.props.width,s=this.props.height,t,u;switch(this.props.backgroundSize){case 'cover':t='cover';u=false;break;case 'coverinside':t='cover';u=true;break;case 'contain':t='contain';u=false;break;case 'containinside':t='contain';u=true;}var v=this.state.imageWidth,w=this.state.imageHeight,x=r/s,y=v/w;if(t==='contain')if((v>r||!u)&&y>=x){v=r;w=v/y;}else if(w>s||!u){w=s;v=w*y;}if(t==='cover')if((v>r||!u)&&y>=x){w=s;v=w*y;}else if(w>s||!u){v=r;w=v/y;}var z=this._getImageStyle(v,w);return (h.createElement("img",{alt:"",className:(("_5i4g")+(this.props.optimizeResizeSpeed?' '+"_5sjv":'')),style:z,src:this.state.imageSrc}));},_getImageStyle:function(r,s){var t;if(this.props.backgroundPosition){t=this.props.backgroundPosition.split(' ');}else t=['50%','50%'];return {width:Math.round(r)+'px',height:Math.round(s)+'px',left:this._getBackgroundPositionPxValue('left',t[0],r,s),top:this._getBackgroundPositionPxValue('top',t[1]||t[0],r,s)};},_getBackgroundPositionPxValue:function(r,s,t,u){var v=parseFloat(s),w=s.substr(v.toString().length);if(w==='px')return s;if(r==='left'){return Math.round((this.props.width-t)*(v/100))+'px';}else return Math.round((this.props.height-u)*(v/100))+'px';},_onImageSizeResolved:function(r,s,t){if(!this.isMounted()||this.state.imageSrc!==t)return;var u=this.props.onImageLoad?this.props.onImageLoad.bind(null,r,s):null;this.setState({imageWidth:r,imageHeight:s,loading:false},u);}});e.exports=q;},null);
__d("ContextualLayer.react",["ContextualLayer","React","ReactLayer","Style"],function(a,b,c,d,e,f,g,h,i,j){var k=h.PropTypes,l=i.createClass({propTypes:{contextRef:k.string,context:function(m,n,o){if((m.context==null)==(m.contextRef==null))return new Error(("Exactly one of `context` or `contextRef` must be set on `")+(o+"`."));var p=m[n];if(p!=null){if(typeof p!=='object')return new Error(("Invalid `"+n+"` supplied to `"+o+"`, ")+("expected a React component."));if(h.isValidComponent(p))return new Error(("Invalid `"+n+"` supplied to `"+o+"`, ")+("expected a React component instance. You're passing a React ")+("descriptor."));}}},immutableProps:{modal:null},createLayer:function(m){var n=this._getContextNode(),o={context:n,contextBounds:this.props.contextBounds,position:this.props.position,alignment:this.props.alignment,offsetX:this.props.offsetX,offsetY:this.props.offsetY,addedBehaviors:this.enumerateBehaviors(this.props.behaviors),shouldSetARIAProperties:this.props.shouldSetARIAProperties},p=new g(o,m);this._node=m;this._matchContextSize(this.props);if(this.props.contextBounds)p.setContextWithBounds(n,this.props.contextBounds);p.conditionShow(this.props.shown);return p;},receiveProps:function(m){this.updateBehaviors(m.behaviors);var n=this._getContextNode();if(m.contextBounds){this.layer.setContextWithBounds(n,m.contextBounds);}else this.layer.setContext(n);this._matchContextSize(m);this.layer.setPosition(m.position);this.layer.setAlignment(m.alignment);this.layer.setOffsetX(m.offsetX);this.layer.setOffsetY(m.offsetY);this.layer.conditionShow(m.shown);},_getContextNode:function(){var m;if(this.props.context){m=this.props.context.getDOMNode();}else if(this.props.contextRef)m=this.getNodeForOwnerRef(this.props.contextRef);return m;},_matchContextSize:function(m){var n=this._node,o=this._getContextNode();if(m.containerWidthMatchContext)j.set(n,'width',o.offsetWidth+'px');if(m.containerHeightMatchContext)j.set(n,'height',o.offsetHeight+'px');}});e.exports=l;},null);
__d("MenuSeparator.react",["MenuSeparator"],function(a,b,c,d,e,f,g){function h(j){j.isReactLegacyFactory={};j.type=j;}var i=g;h(i);e.exports=i;},null);
__d("TypeaheadView.react",["React","cx","merge"],function(a,b,c,d,e,f,g,h,i){var j=g.createClass({displayName:'TypeaheadView',propTypes:{entries:g.PropTypes.array.isRequired,extraRendererProps:g.PropTypes.object,highlightedEntry:g.PropTypes.object,isVisible:g.PropTypes.bool,queryString:g.PropTypes.string,Renderer:g.PropTypes.func.isRequired,selectedEntry:g.PropTypes.object},_onSelect:function(k,l){if(this.props.onSelect)this.props.onSelect(k,l);},_onHighlight:function(k){this.props.onHighlight(k);},render:function(){var k=((!this.props.isVisible?"hidden_elem":'')),l=i({highlightedEntry:this.props.highlightedEntry,selectedEntry:this.props.selectedEntry,entries:this.props.entries,onSelect:this._onSelect,onHighlight:this._onHighlight,onRenderHighlight:this.props.onRenderHighlight,ariaOwneeID:this.props.ariaOwneeID,queryString:this.props.queryString},this.props.extraRendererProps),m=this.props.Renderer;return (g.createElement("div",{className:k},g.createElement(m,Object.assign({},l))));}});e.exports=j;},null);
__d("AbstractTypeahead.react",["AbstractTextFieldMixin.react","ContextualLayer.react","InputSelection","React","ReactLayeredComponentMixin","SearchableTextInput.react","TypeaheadNavigation","TypeaheadView.react","cx","getOrCreateDOMID","joinClasses","merge","uniqueID"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=[],u=10,v=j.createClass({displayName:'AbstractTypeahead',mixins:[k],propTypes:r(g.propTypes,{inputClassName:j.PropTypes.string,inputID:j.PropTypes.string,autoCapitalize:j.PropTypes.string,autoComplete:j.PropTypes.string,autoCorrect:j.PropTypes.string,queryString:j.PropTypes.string,searchSource:j.PropTypes.object.isRequired,searchSourceOptions:j.PropTypes.object,excludedEntries:j.PropTypes.object,presenter:j.PropTypes.object.isRequired,onSelectAttempt:j.PropTypes.func,onEnterWithoutSelection:j.PropTypes.func,autoHighlight:j.PropTypes.bool,showEntriesOnFocus:j.PropTypes.bool,selectOnBlur:j.PropTypes.bool,selectOnTab:j.PropTypes.bool,focusedOnInit:j.PropTypes.bool,hideViewWithEntries:j.PropTypes.bool,disabled:j.PropTypes.bool,entriesWidthMatchContext:j.PropTypes.bool,selectedEntry:j.PropTypes.object,onTypeaheadVisibilityChanged:j.PropTypes.func,onPaste:j.PropTypes.func}),getDefaultProps:function(){return {autoComplete:'off',autoCorrect:'off',selectOnBlur:false,selectOnTab:true,hideViewWithEntries:true,entriesWidthMatchContext:true};},getInitialState:function(){return {highlightedEntry:null,isAutoHighlight:this.props.autoHighlight,activeDescendant:null,ariaOwneeID:s(),activeEntries:null,focused:!!this.props.focusedOnInit,viewIsVisible:!!this.props.focusedOnInit};},_onRenderHighlight:function(w){var x=p(w);this.setState({activeDescendant:x});},_determineViewVisibility:function(w,x){if(!w)return false;var y=w.length>0&&(this.props.showEntriesOnFocus||this.props.queryString.length>0);return !!(x&&(this.props.presenter.alwaysVisibleOnFocus||y));},_onEntriesFound:function(w){if(!this.isMounted())return;if(this.props.excludedEntries){var x=this.props.excludedEntries;w=w.filter(function(fa){return !x.hasOwnProperty(fa.getUniqueID());});}var y=this.props.presenter,z=typeof y.sortEntries=='function'?y.sortEntries(w):w,aa=z.slice(0,y.maxEntries||u),ba=this._determineViewVisibility(aa,this.state.focused);if(!aa.length){this.setState({activeDescendant:null,activeEntries:aa,highlightedEntry:null,isAutoHighlight:this.props.autoHighlight});this._setViewIsVisible(ba);return;}var ca=this.state.highlightedEntry,da=ca&&aa.indexOf(ca)!==-1;if(!this.props.autoHighlight){this.setState({activeEntries:aa,highlightedEntry:da?ca:null});if(ba)this._setViewIsVisible(true);return;}var ea=this.state.isAutoHighlight;if(ea){ca=aa[0];}else{ca=da?ca:aa[0];ea=!da;}this.setState({activeEntries:aa,highlightedEntry:ca,isAutoHighlight:ea});if(ba)this._setViewIsVisible(true);},_onInputFocus:function(){var w=this._determineViewVisibility(this.state.activeEntries,true);if(w)this._setViewIsVisible(true);this.setState({focused:true});this.props.onFocus&&this.props.onFocus();},_onInputBlur:function(){if(this.props.hideViewWithEntries)this._close();if(this.props.selectOnBlur&&this.state.highlightedEntry)this.props.onSelectAttempt(this.state.highlightedEntry);this.setState({focused:false});this.props.onBlur&&this.props.onBlur();},_onInputClick:function(){var w=this.getTextFieldDOM(),x=i.get(w);if(x&&x.start==x.end)w.select();this.props.onClick&&this.props.onClick();},_onEscape:function(){this._close();this.blurInput();this.setState({focused:false});this.props.onEscape&&this.props.onEscape();},_onEnter:function(event){if(this.props.onEnterWithoutSelection&&(!this.state.viewIsVisible||!this.state.highlightedEntry)){this.props.onEnterWithoutSelection(event);return;}if(!this.state.viewIsVisible)return;if(!this.state.highlightedEntry){event.preventDefault();return;}if(this.props.hideViewWithEntries)this._setViewIsVisible(false);if(this.props.onSelectAttempt)this.props.onSelectAttempt(this.state.highlightedEntry);event.preventDefault();},_onTab:function(event){if(this.props.selectOnTab&&this.state.viewIsVisible&&this.props.onSelectAttempt&&this.state.highlightedEntry){if(this.props.hideViewWithEntries){this._setViewIsVisible(false);event.preventDefault();}this.props.onSelectAttempt(this.state.highlightedEntry);}},_onDownArrow:function(event){event.preventDefault();m.moveDown(this.state.activeEntries||t,this.state.highlightedEntry,this._setHighlight);},_onUpArrow:function(event){event.preventDefault();m.moveUp(this.state.activeEntries||t,this.state.highlightedEntry,this._setHighlight);},_setHighlight:function(w){this.setState({highlightedEntry:w,isAutoHighlight:!w});},_onInputChange:function(event){if(this.props.onChange)this.props.onChange(event);this._setViewIsVisible(this.state.focused&&(this.props.showEntriesOnFocus||event.target.value.length>0)&&(this.state.activeEntries!=null&&this.state.activeEntries.length>0));},_onViewHighlight:function(w){this.setState({highlightedEntry:w,isAutoHighlight:false});},_getView:function(){return (j.createElement(n,{Renderer:this.props.presenter.ViewRenderer,extraRendererProps:this.props.presenter.extraRendererProps,highlightedEntry:this.state.highlightedEntry,selectedEntry:this.props.selectedEntry,isVisible:this.state.viewIsVisible,ariaOwneeID:this.state.ariaOwneeID,onHighlight:this._onViewHighlight,onRenderHighlight:this._onRenderHighlight,onSelect:this.props.onSelectAttempt,entries:this.state.activeEntries||t,queryString:this.props.queryString}));},_setViewIsVisible:function(w){if(w!==this.state.viewIsVisible){if(this.props.onTypeaheadVisibilityChanged)this.props.onTypeaheadVisibilityChanged(w,this.state.activeEntries||t);this.setState({viewIsVisible:w});}},componentWillReceiveProps:function(w){if(!w.queryString&&!this.props.showEntriesOnFocus)this.clearActiveEntries();},componentDidUpdate:function(){var w=this._determineViewVisibility(this.state.activeEntries,this.state.focused);if(w)this._setViewIsVisible(true);},renderLayers:function(){if(!this.props.presenter.useLayer)return {};var w=null,x=null;if(this.props.context){w=this.props.context;}else x='input';return {typeaheadView:j.createElement(h,{behaviors:this.props.presenter.layerBehaviors,containerWidthMatchContext:this.props.entriesWidthMatchContext,contextRef:x,context:w,position:"below",shown:this.state.viewIsVisible,shouldSetARIAProperties:false},this._getView())};},render:function(){var w=j.createElement(l,{'aria-activedescendant':this.state.activeDescendant,'aria-autocomplete':"list",'aria-owns':this.state.ariaOwneeID,ref:"input",autoCapitalize:this.props.autoCapitalize,autoComplete:this.props.autoComplete,autoCorrect:this.props.autoCorrect,className:this.props.inputClassName,id:this.props.inputID,queryString:this.props.queryString,placeholder:this.props.placeholder,searchSource:this.props.searchSource,searchSourceOptions:this.props.searchSourceOptions,searchOnFocus:!!this.props.showEntriesOnFocus,disabled:this.props.disabled,onEntriesFound:this._onEntriesFound,onEscape:this._onEscape,onBlur:this._onInputBlur,onFocus:this._onInputFocus,onChange:this._onInputChange,onDownArrow:this._onDownArrow,onUpArrow:this._onUpArrow,onTab:this._onTab,onEnter:this._onEnter,onBackspace:this.props.onBackspace,onPaste:this.props.onPaste,onClick:this._onInputClick}),x=null;if(!this.props.presenter.useLayer)x=this._getView();return (j.createElement("span",Object.assign({},this.props,{className:q(this.props.className,"_58ah"),onBlur:null,onClick:null,onFocus:null}),{searchableInput:w,view:x}));},componentDidMount:function(){if(this.props.focusedOnInit)this.refs.input.focusInput();},clearActiveEntries:function(){this.setState({activeDescendant:null,activeEntries:null,highlightedEntry:null});},focusInput:function(){this.refs.input.focusInput();},blurInput:function(){if(this.refs.input.blur){this.refs.input.blur();}else if(this.refs.input.blurInput)this.refs.input.blurInput();},hideView:function(){this._setViewIsVisible(false);},_close:function(){this._setViewIsVisible(false);this.clearActiveEntries();},getTextFieldDOM:function(){return this.refs.input.getTextFieldDOM();}});e.exports=v;},null);
__d("Dock",["Event","shield","Arbiter","ArbiterMixin","ChatQuietLinks","CSS","DataStore","DOM","Parent","Style","Toggler","Vector","copyProperties","csx","emptyFunction","WebMessengerWidthControl"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b('WebMessengerWidthControl');function v(){}s(v,j,{MIN_HEIGHT:140,INITIAL_FLYOUT_HEIGHT_OFFSET:10,init:function(w){this.init=u;this.rootEl=w;this.calculateViewportDimensions();this.calculateFlyoutHeightOffset();k.removeEmptyHrefs(this.rootEl);g.listen(w,'click',this._onClick.bind(this));g.listen(window,'resize',this._onWindowResize.bind(this));q.subscribe(['show','hide'],function(x,y){var z=y.getActive();if(!n.contains(w,z))return;if(l.hasClass(z,'fbNub')){this.notifyNub(z,x);if(x==='show')this._resizeNubFlyout(z);}else{var aa=o.byClass(z,'fbNubFlyout');if(aa)l.conditionClass(aa,'menuOpened',x==='show');}}.bind(this));this.inform('init',{},i.BEHAVIOR_PERSISTENT);},calculateViewportDimensions:function(){return (this.viewportDimensions=r.getViewportDimensions());},calculateFlyoutHeightOffset:function(){this.flyoutHeightOffset=this.INITIAL_FLYOUT_HEIGHT_OFFSET+r.getElementDimensions(this.rootEl).y;var w=n.scry(document,"div._4f7n")[0];if(w){var x=p.isFixed(w)?'viewport':'document';this.flyoutHeightOffset+=r.getElementPosition(w,x).y+r.getElementDimensions(w).y;}},toggle:function(w){var x=this._findFlyout(w);if(!x)return;this.subscribe('init',function(){q.toggle(w);});},show:function(w){this.subscribe('init',function(){q.show(w);});},showNub:function(w){l.show(w);},hide:function(w){this.subscribe('init',function(){var x=q.getInstance(w);n.contains(w,x.getActive())&&x.hide();});},hideNub:function(w){l.hide(w);this.hide(w);},setUseMaxHeight:function(w,x){l.conditionClass(w,'maxHeight',x!==false);this._resizeNubFlyout(w);},_resizeNubFlyout:function(w){var x=this._findFlyout(w);if(!x||!(l.hasClass(w,'openToggler')||l.hasClass(w,'opened')))return;var y=n.find(x,'div.fbNubFlyoutOuter'),z=n.find(y,'div.fbNubFlyoutInner'),aa=n.find(z,'div.fbNubFlyoutBody'),ba=aa.scrollTop,ca=aa.offsetHeight;p.set(aa,'height','auto');var da=r.getElementDimensions(x),ea=r.getElementDimensions(aa),fa=this.getMaxFlyoutHeight(w);p.set(x,'max-height',fa+'px');p.set(y,'max-height',fa+'px');da=r.getElementDimensions(x);var ga=r.getElementDimensions(z),ha=ga.y-ea.y,ia=da.y-ha,ja=parseInt(aa.style.height||aa.clientHeight,10),ka=ia!==ja;if(da.y>ha&&ka)p.set(aa,'height',ia+'px');l.removeClass(x,'swapDirection');var la=r.getElementPosition(x).x;l.conditionClass(x,'swapDirection',function(){if(la<0)return true;return (la+da.x>this.viewportDimensions.x);}.bind(this)());if(ka&&ba+ca>=ea.y){aa.scrollTop=aa.scrollHeight;}else aa.scrollTop=ba;this.notifyNub(w,'resize');},getMaxFlyoutHeight:function(w){var x=this._findFlyout(w),y=r.getElementPosition(x,'viewport'),z=r.getElementDimensions(x),aa=Math.max(this.MIN_HEIGHT,this.viewportDimensions.y-this.flyoutHeightOffset)-(this.viewportDimensions.y-y.y-z.y);return Math.max(aa,0);},resizeAllFlyouts:function(){var w=this._getAllNubs(),x=w.length;while(x--)this._resizeNubFlyout(w[x]);},hideAllFlyouts:function(){var w=this._getAllNubs(),x=w.length;while(x--)this.hide(w[x]);},_getAllNubs:function(){var w=n.scry(this.rootEl,"div._50-v.openToggler");return w.concat(n.scry(this.rootEl,"div._50-v.opened"));},_onClick:function(event){var w=event.getTarget(),x=o.byClass(w,'fbNub');if(x){if(o.byClass(w,'fbNubFlyoutTitlebar')){var y=o.byTag(w,'a'),z=w.nodeName=='INPUT'&&w.getAttribute('type')=='submit';if(!y&&!z){this.hide(x);return false;}}this.notifyNub(x,'click');}},_onWindowResize:function(event){this.calculateViewportDimensions();this.resizeAllFlyouts();},_findFlyout:function(w){return l.hasClass(w,'fbNubFlyout')?w:n.scry(w,'div.fbNubFlyout')[0]||null;},registerNubController:function(w,x){m.set(w,'dock:nub:controller',x);x.subscribe('nub/button/content-changed',h(this.inform,this,'resize',w));x.subscribe('nub/flyout/content-changed',h(this._resizeNubFlyout,this,w));},unregisterNubController:function(w){m.remove(w,'dock:nub:controller');},notifyNub:function(w,x,y){var z=m.get(w,'dock:nub:controller');z&&z.inform(x,y);}});e.exports=a.Dock||v;},null);
__d("NubController",["ArbiterMixin","Dock","copyProperties"],function(a,b,c,d,e,f,g,h,i){function j(){}i(j.prototype,g,{init:function(k){this.el=k;h.registerNubController(k,this);return this;},buttonContentChanged:function(){this.inform('nub/button/content-changed');},flyoutContentChanged:function(){this.inform('nub/flyout/content-changed');},hide:function(){h.hide(this.el);},show:function(){h.show(this.el);}});e.exports=j;},null);
__d("arraySort",["invariant"],function(a,b,c,d,e,f,g){function h(i,j){g(Array.isArray(i));var k=i.slice();if(j)return k.sort(j);return k.sort();}e.exports=h;},null);
__d("OrderedMap",["invariant"],function(a,b,c,d,e,f,g){"use strict";var h='key:';function i(p,q){var r={};for(var s=0;s<p.length;s++){var t=p[s],u=q(t);k(u);var v=h+u;g(!(v in r));r[v]=t;}return r;}function j(p,q){this._normalizedObj=p;this._computedPositions=null;this.length=q;}function k(p){g(p!==''&&(typeof p==='string'||typeof p==='number'));}function l(p,q,r){g(typeof p==='number'&&typeof q==='number'&&q>=0&&p>=0&&p+q<=r);}function m(p,q){g(p&&p.constructor===Object&&(!q||q.constructor===Object));var r={},s=0,t;for(t in p)if(p.hasOwnProperty(t)){r[t]=p[t];s++;}for(t in q)if(q.hasOwnProperty(t)){if(!(t in r))s++;r[t]=q[t];}return new j(r,s);}var n={has:function(p){k(p);var q=h+p;return q in this._normalizedObj;},get:function(p){k(p);var q=h+p;return this.has(p)?this._normalizedObj[q]:undefined;},merge:function(p){g(p instanceof j);return m(this._normalizedObj,p._normalizedObj);},map:function(p,q){return this.mapRange(p,0,this.length,q);},mapRange:function(p,q,r,s){var t=this._normalizedObj,u={},v=0;l(q,r,this.length);var w=q+r-1;for(var x in t)if(t.hasOwnProperty(x)){if(v>=q){if(v>w)break;var y=t[x];u[x]=p.call(s,y,x.substr(h.length),v);}v++;}return new j(u,r);},filter:function(p,q){return this.filterRange(p,0,this.length,q);},filterRange:function(p,q,r,s){var t={},u=0;this.forEachRange(function(v,w,x){if(p.call(s,v,w,x)){var y=h+w;t[y]=v;u++;}},q,r);return new j(t,u);},forEach:function(p,q){this.forEachRange(p,0,this.length,q);},forEachRange:function(p,q,r,s){l(q,r,this.length);var t=this._normalizedObj,u=0,v=q+r-1;for(var w in t)if(t.hasOwnProperty(w)){if(u>=q){if(u>v)break;var x=t[w];p.call(s,x,w.substr(h.length),u);}u++;}},mapKeyRange:function(p,q,r,s){var t=this.indexOfKey(q),u=this.indexOfKey(r);g(t!==undefined&&u!==undefined);g(u>=t);return this.mapRange(p,t,(u-t)+1,s);},forEachKeyRange:function(p,q,r,s){var t=this.indexOfKey(q),u=this.indexOfKey(r);g(t!==undefined&&u!==undefined);g(u>=t);this.forEachRange(p,t,(u-t)+1,s);},keyAtIndex:function(p){var q=this._getOrComputePositions(),r=q.keyByIndex[p];return r?r.substr(h.length):undefined;},keyAfter:function(p){return this.nthKeyAfter(p,1);},keyBefore:function(p){return this.nthKeyBefore(p,1);},nthKeyAfter:function(p,q){var r=this.indexOfKey(p);g(r!==undefined);return this.keyAtIndex(r+q);},nthKeyBefore:function(p,q){return this.nthKeyAfter(p,-q);},indexOfKey:function(p){k(p);var q=h+p,r=this._getOrComputePositions(),s=r.indexByKey[q];return s===undefined?undefined:s;},toArray:function(){var p=[],q=this._normalizedObj;for(var r in q)if(q.hasOwnProperty(r))p.push(q[r]);return p;},_getOrComputePositions:function(){var p=this._computedPositions;if(!p)this._computePositions();return this._computedPositions;},_computePositions:function(){this._computedPositions={keyByIndex:{},indexByKey:{}};var p=this._computedPositions.keyByIndex,q=this._computedPositions.indexByKey,r=0,s=this._normalizedObj;for(var t in s)if(s.hasOwnProperty(t)){p[r]=t;q[t]=r;r++;}}};Object.assign(j.prototype,n);var o={from:function(p){g(p instanceof j);return m(p._normalizedObj,null);},fromArray:function(p,q){g(Array.isArray(p));g(typeof q==='function');return new j(i(p,q),p.length);}};e.exports=o;},null);
__d("AbstractAsyncSearchSource",["AbstractSearchSource","SearchSourceCallbackManager","SearchableEntry","TokenizeUtil","copyProperties","emptyFunction","isValidUniqueID"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){for(var n in g)if(g.hasOwnProperty(n))p[n]=g[n];var o=g===null?null:g.prototype;p.prototype=Object.create(o);p.prototype.constructor=p;p.__superConstructor__=g;function p(q,r,s){"use strict";this.$AbstractAsyncSearchSource0=q.bootstrapRequests;this.$AbstractAsyncSearchSource1=q.queryRequests;this.$AbstractAsyncSearchSource2=q.auxiliaryFields;this.$AbstractAsyncSearchSource3=q.asyncErrorHandler||l;this.$AbstractAsyncSearchSource4=q.packageFn||this.$AbstractAsyncSearchSource5;this.$AbstractAsyncSearchSource6=q.getAllForEmptyQuery;this.$AbstractAsyncSearchSource7=[];this.$AbstractAsyncSearchSource8=new h({parseFn:j.parse,matchFn:j.isQueryMatch,indexFn:q.indexFn});this.$AbstractAsyncSearchSource9=r;this.$AbstractAsyncSearchSourcea=s;}p.prototype.bootstrapImpl=function(q){"use strict";if(!this.$AbstractAsyncSearchSource0||!this.$AbstractAsyncSearchSource0.length){q();return;}var r=this.$AbstractAsyncSearchSource0.length,s=0;this.$AbstractAsyncSearchSource0.forEach(function(t){this.$AbstractAsyncSearchSourceb({},t,function(u){this.$AbstractAsyncSearchSource8.addLocalEntries(u);this.$AbstractAsyncSearchSource7=this.$AbstractAsyncSearchSource7.concat(u);s++;if(s===r){q();q=null;}}.bind(this));}.bind(this));};p.prototype.searchImpl=function(q,r,s){"use strict";if(this.$AbstractAsyncSearchSource6&&q===''){this.getBootstrappedEntries(function(y){r(y,q);});return;}var t=null,u={},v=this.$AbstractAsyncSearchSource8.search(q,function(y){if(!t){t=y;t.forEach(function(z){u[z.getUniqueID()]=true;});}else y.forEach(function(z){var aa=z.getUniqueID();if(!u[aa]){t.push(z);u[aa]=true;}});r(t,q);},s);if(!v||!this.$AbstractAsyncSearchSource1||!this.$AbstractAsyncSearchSource1.length)return;var w={value:q,existing_ids:t&&t.map(function(y){return y.getUniqueID();}).join(',')},x=this.$AbstractAsyncSearchSource1.length;this.$AbstractAsyncSearchSource1.forEach(function(y){this.$AbstractAsyncSearchSourceb(w,y,function(z){this.$AbstractAsyncSearchSourcec(z,q);x--;if(!x)this.$AbstractAsyncSearchSource8.setQueryStringAsExhausted(q);}.bind(this));},this);};p.prototype.getBootstrappedEntries=function(q){"use strict";return this.bootstrap(function(){return q(this.$AbstractAsyncSearchSource7||[]);}.bind(this));};p.prototype.getAllEntriesMap=function(){"use strict";return this.$AbstractAsyncSearchSource8.getAllEntriesMap();};p.prototype.$AbstractAsyncSearchSourceb=function(q,r,s){"use strict";this.$AbstractAsyncSearchSource9(q,r,function(t){return s(this.$AbstractAsyncSearchSourcea(t,this.$AbstractAsyncSearchSource4).filter(function(u){return !!u;}));}.bind(this),this.$AbstractAsyncSearchSource3);};p.prototype.$AbstractAsyncSearchSourced=function(q){"use strict";this.$AbstractAsyncSearchSource8.addLocalEntries(q);};p.prototype.$AbstractAsyncSearchSourcec=function(q,r){"use strict";if(q.length)this.$AbstractAsyncSearchSource8.addQueryEntries(q,r);};p.prototype.$AbstractAsyncSearchSource5=function(q,r){"use strict";var s=q.title||q.text,t=q.uniqueID||q.uid;if(!s||!m(t))return null;return new i({uniqueID:t,order:q.order||q.index||r,title:s,subtitle:q.subtitle||q.category||q.subtext,keywordString:q.keywordString||q.tokens,type:q.type,photo:q.photo,uri:q.uri||q.path,auxiliaryData:this.$AbstractAsyncSearchSourcee(q)});};p.prototype.$AbstractAsyncSearchSourcee=function(q){"use strict";var r;if(this.$AbstractAsyncSearchSource2){r={};for(var s in this.$AbstractAsyncSearchSource2){var t=this.$AbstractAsyncSearchSource2[s];r[s]=q[t];}}if(q.aux_data){r=r||{};k(r,q.aux_data);}return r;};e.exports=p;},null);
__d("DropdownContextualHelpLink",["DOM","ge"],function(a,b,c,d,e,f,g,h){var i={set:function(j){var k=h('navHelpCenter');if(k!==null)g.replace(k,j);}};e.exports=i;},null);
__d("ChatAutoSendPhotoUploader",["ArbiterMixin","AsyncUploadRequest","DOM","Event","FileForm","FileFormResetOnSubmit","FileInput","FormSubmitOnChange","JpegResizer","MercuryAttachmentType","PhotosMimeType","PhotosUploadID","SubscriptionsHandler","arrayContains","csx","getImageSize","getObjectValues","invariant","isEmpty","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){"use strict";function aa(){return 'upload_'+r.getNewID();}var ba=z(g);for(var ca in ba)if(ba.hasOwnProperty(ca))ea[ca]=ba[ca];var da=ba===null?null:ba.prototype;ea.prototype=Object.create(da);ea.prototype.constructor=ea;ea.__superConstructor__=ba;function ea(fa,ga,ha){this.$ChatAutoSendPhotoUploader0=ha;this.$ChatAutoSendPhotoUploader1=ga;this.$ChatAutoSendPhotoUploader2=new s();this.$ChatAutoSendPhotoUploader3={};this.$ChatAutoSendPhotoUploader4={};this.$ChatAutoSendPhotoUploader5=fa.getAttribute('action');this.$ChatAutoSendPhotoUploader6=new k(fa,[n,l]);this.$ChatAutoSendPhotoUploader6.setAllowCrossOrigin(true);this.$ChatAutoSendPhotoUploader6.setUploadInParallel(true);var ia=i.find(fa,"._4q60"),ja=i.find(ia,"._4q61");new m(ia,ja,ga);this.$ChatAutoSendPhotoUploader2.addSubscriptions(this.$ChatAutoSendPhotoUploader6.subscribe('submit',this.$ChatAutoSendPhotoUploader7.bind(this)),this.$ChatAutoSendPhotoUploader6.subscribe('success',this.$ChatAutoSendPhotoUploader8.bind(this)),this.$ChatAutoSendPhotoUploader6.subscribe('failure',this.$ChatAutoSendPhotoUploader9.bind(this)),this.$ChatAutoSendPhotoUploader6.subscribe('progress',this.$ChatAutoSendPhotoUploadera.bind(this)),j.listen(ja,'click',function(){if(this.$ChatAutoSendPhotoUploaderb)if(o.prepareResource)o.prepareResource();this.inform('open');}.bind(this)));this.$ChatAutoSendPhotoUploaderb=o.isSupported();if(this.$ChatAutoSendPhotoUploaderb)this.$ChatAutoSendPhotoUploader6.setPreprocessHandler(this.$ChatAutoSendPhotoUploaderc.bind(this));}ea.prototype.isUploading=function(){return !y(this.$ChatAutoSendPhotoUploader3);};ea.prototype.destroy=function(){this.$ChatAutoSendPhotoUploader2.release();this.$ChatAutoSendPhotoUploader6.destroy();this.$ChatAutoSendPhotoUploader3={};this.$ChatAutoSendPhotoUploader4={};};ea.prototype.$ChatAutoSendPhotoUploaderd=function(fa,ga){var ha=this.$ChatAutoSendPhotoUploadere(fa);if(ga){ha.preview_width=ga.width;ha.preview_height=ga.height;}return ha;};ea.prototype.$ChatAutoSendPhotoUploadere=function(fa){var ga={upload_id:fa,on_progress:function(ha){this.$ChatAutoSendPhotoUploader2.addSubscriptions(this.subscribe('progress',ha));}.bind(this),on_resizing_progress:function(ha){this.$ChatAutoSendPhotoUploader2.addSubscriptions(this.subscribe('resize_progress',ha));}.bind(this),on_success:function(ha){this.$ChatAutoSendPhotoUploader2.addSubscriptions(this.subscribe('success',ha));}.bind(this),upload_canceled:this.$ChatAutoSendPhotoUploaderf.bind(this),attach_type:p.PHOTO,preview_uploading:true};return ga;};ea.prototype.$ChatAutoSendPhotoUploaderc=function(fa,ga){var ha=fa.getFile();if(!q(ha.type).isJpeg())return ga(fa);o.getSingleton().resizeBlob(ha,function(ia,ja,ka){if(ja)fa.setFile(ja);ga(fa);},this.$ChatAutoSendPhotoUploaderg.bind(this,fa));};ea.prototype.$ChatAutoSendPhotoUploader7=function(){var fa=aa();this.$ChatAutoSendPhotoUploaderh(fa,this.$ChatAutoSendPhotoUploader1.files);};ea.prototype.$ChatAutoSendPhotoUploaderh=function(fa,ga){var ha={};if(typeof FileReader!=='undefined'&&FileReader.prototype.readAsArrayBuffer&&ga&&ga.length===1){this.$ChatAutoSendPhotoUploader3[fa]=fa;ha[fa]=ga[0];var ia=new FileReader();ia.onload=function(){this.inform('submit',{upload_id:fa,preview_attachments:[this.$ChatAutoSendPhotoUploaderd(fa,v(ia.result))]});}.bind(this);ia.onerror=function(){this.inform('submit',{upload_id:fa,preview_attachments:[this.$ChatAutoSendPhotoUploadere(fa)]});}.bind(this);ia.readAsArrayBuffer(ga[0]);}else{var ja=[];if(!ga){this.$ChatAutoSendPhotoUploader3[fa]=fa;this.$ChatAutoSendPhotoUploader0.value=fa;ja.push(this.$ChatAutoSendPhotoUploadere(fa));}else for(var ka=0;ka<ga.length;++ka){var la=aa();ha[la]=ga[ka];this.$ChatAutoSendPhotoUploader3[la]=fa;ja.push(this.$ChatAutoSendPhotoUploadere(la));}this.inform('submit',{upload_id:fa,preview_attachments:ja});}if(Object.keys(ha).length>0)this.$ChatAutoSendPhotoUploader6.setFiles(ha);};ea.prototype.$ChatAutoSendPhotoUploader8=function(event,fa){var ga=this.$ChatAutoSendPhotoUploaderi(fa);if(this.$ChatAutoSendPhotoUploader3[ga]){var ha=this.$ChatAutoSendPhotoUploader3[ga];delete this.$ChatAutoSendPhotoUploader3[ga];var ia=fa.response.getPayload();if(!this.$ChatAutoSendPhotoUploader4[ha])this.$ChatAutoSendPhotoUploader4[ha]=[];this.$ChatAutoSendPhotoUploader4[ha].push({id:ga,fbid:ia.metadata[0].image_id});this.inform('success',{upload_id:ga});if(!this.$ChatAutoSendPhotoUploaderj(ha))this.$ChatAutoSendPhotoUploaderk(ha);}};ea.prototype.$ChatAutoSendPhotoUploaderk=function(fa){x(!this.$ChatAutoSendPhotoUploaderj(fa));this.$ChatAutoSendPhotoUploader4[fa].sort(function(ha,ia){return ha.id<ia.id?-1:1;});var ga=this.$ChatAutoSendPhotoUploader4[fa].map(function(ha){return ha.fbid;});this.inform('all-uploads-completed',{upload_id:fa,image_ids:ga});delete this.$ChatAutoSendPhotoUploader4[fa];};ea.prototype.$ChatAutoSendPhotoUploadera=function(event,fa){this.inform('progress',{upload_id:fa.upload.getName(),event:fa.event});};ea.prototype.$ChatAutoSendPhotoUploaderg=function(fa,event){this.inform('resize_progress',{upload_id:fa.getName(),event:event});};ea.prototype.$ChatAutoSendPhotoUploaderj=function(fa){return t(w(this.$ChatAutoSendPhotoUploader3),fa);};ea.prototype.$ChatAutoSendPhotoUploader9=function(event,fa){var ga=this.$ChatAutoSendPhotoUploaderi(fa);this.$ChatAutoSendPhotoUploaderl(ga,'last-upload-failed');return false;};ea.prototype.$ChatAutoSendPhotoUploaderf=function(fa){this.$ChatAutoSendPhotoUploaderl(fa,'last-upload-canceled');};ea.prototype.$ChatAutoSendPhotoUploaderl=function(fa,ga){if(!this.$ChatAutoSendPhotoUploader3[fa])return;var ha=this.$ChatAutoSendPhotoUploader3[fa];delete this.$ChatAutoSendPhotoUploader3[fa];if(!this.$ChatAutoSendPhotoUploaderj(ha))if(this.$ChatAutoSendPhotoUploader4[ha]){this.$ChatAutoSendPhotoUploaderk(ha);}else this.inform(ga,{upload_id:ha});};ea.prototype.$ChatAutoSendPhotoUploaderi=function(fa){if(fa.upload){return fa.upload.getName();}else return fa.response.getPayload().uploadID;};ea.prototype.uploadFile=function(fa){var ga=aa(),ha={};ha[ga]=fa;var ia=new h(this.$ChatAutoSendPhotoUploader5).setAllowCrossOrigin(true).setRelativeTo(this.$ChatAutoSendPhotoUploader6.getRoot()).setFiles(ha);this.$ChatAutoSendPhotoUploader2.addSubscriptions(ia.subscribe('success',function(event,ja){this.$ChatAutoSendPhotoUploader8(event,{upload:ja,response:ja.getResponse()});}.bind(this)),ia.subscribe('failure',this.$ChatAutoSendPhotoUploader9.bind(this)));ia.send();this.$ChatAutoSendPhotoUploaderh(ga,[fa]);};e.exports=ea;},null);
__d("ChatThreadIsMutedTabSheet",["Event","ArbiterMixin","DOM","ChatTabTemplates","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k){function l(m,n,o){this._threadID=m;this._rootElement=n;this._sheetView=o;}k(l.prototype,h,{render:function(){var m=j[':fb:mercury:chat:tab-sheet:message-mute-sheet'].build();i.setContent(m.getNode('text'),i.tx._("This conversation is muted. Chat tabs will not pop up for it and push notifications are off."));i.setContent(this._rootElement,m.getRoot());g.listen(m.getNode('unmuteButton'),'click',function(){this.inform('clicked',this._threadID);}.bind(this));},isPermanent:function(){return false;},getType:function(){return 'chat-thread-is-muted';},open:function(){this._sheetView.open(this);},close:function(){this._sheetView.close(this);}});e.exports=l;},null);
__d("WebAsyncSearchSource",["AbstractAsyncSearchSource","AbstractSearchSource","AsyncRequest","copyProperties"],function(a,b,c,d,e,f,g,h,i,j){for(var k in h)if(h.hasOwnProperty(k))m[k]=h[k];var l=h===null?null:h.prototype;m.prototype=Object.create(l);m.prototype.constructor=m;m.__superConstructor__=h;function m(n){"use strict";this.$WebAsyncSearchSource0=new g(n,this.$WebAsyncSearchSource1,this.$WebAsyncSearchSource2);}m.prototype.bootstrapImpl=function(n){"use strict";this.$WebAsyncSearchSource0.bootstrap(n);};m.prototype.searchImpl=function(n,o,p){"use strict";this.$WebAsyncSearchSource0.search(n,o,p);};m.prototype.getBootstrappedEntries=function(n){"use strict";return this.$WebAsyncSearchSource0.getBootstrappedEntries(n);};m.prototype.getAllEntriesMap=function(){"use strict";return this.$WebAsyncSearchSource0.getAllEntriesMap();};m.prototype.$WebAsyncSearchSource1=function(n,o,p,q){"use strict";new i(o.uri).setData(j({},n,o.data)).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(true).setHandler(p).setErrorHandler(q).send();};m.prototype.$WebAsyncSearchSource2=function(n,o){"use strict";var p=n.getPayload(),q;if(Array.isArray(p)){q=p;}else if(p&&p.entries){q=p.entries;}else q=[];return q.map(o,this);};e.exports=m;},null);
__d("XUIAmbientNUXTheme",["cx"],function(a,b,c,d,e,f,g){var h={wrapperClassName:"_2x6q",arrowDimensions:{offset:14,length:18}};e.exports=h;},null);
__d("XStickerReplyNUXControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b("XControllerURIBuilder").create("\/stickers\/tooltip\/",{});},null);