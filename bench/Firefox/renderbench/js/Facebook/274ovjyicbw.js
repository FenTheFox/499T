/*!CK:726773117!*//*1413171578,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["F0e0y"]); }

__d("legacy:legacy-photo-upload",["doUpload"],function(a,b,c,d){a.doUpload=b('doUpload');},3);
__d("FacebarTypeaheadMagKeywordSearch",["csx","DOM","Event","FacebarGlobalOptions","FacebarKeywordSearchUtils","FacebarStructuredText","FacebarURI","FacebarResultStoreUtils","SubscriptionsHandler","URI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(r){"use strict";this._typeahead=r;this._core=r.getCore();this._data=r.getData();this._view=this._core.view;this._input=this._core.input;this._handler=new o();}q.prototype.enable=function(){"use strict";var r=h.find(document,"div._4f7n ._585_");this._handler.addSubscriptions(i.listen(r,'click',this._runQuery.bind(this)));};q.prototype.disable=function(){"use strict";this._handler.release();};q.prototype._focusInput=function(){"use strict";this._input.input.focus();};q.prototype._runQuery=function(){"use strict";if(this._view.index<0){this._focusInput();return;}var r=this._input.getValue(),s=this._data.getRawStructure(r);if(!s||s.is_empty){this._focusInput();return;}var t;if(!s.raw_text){t=n.getRawTextFromStructured(r.toArray());}else t=s.raw_text;if(j.keywordSearchEnabled){var u=k.makeFacebarEntry(t);return this._core.executeQuery(u);}var v=p(this._view.seeMoreSerpEndpoint).addQueryData('q',t).addQueryData('sid',this._core.getSessionID());v=m.getQualifiedURI(v);return this._core.executeQuery({uid:'see_more_serp',node:this._moreBar,structure:new l(),search:true,uri:v,type:'see_more_serp',text:t,selected:true,semantic:'seemore('+t+')'});};e.exports=q;},null);