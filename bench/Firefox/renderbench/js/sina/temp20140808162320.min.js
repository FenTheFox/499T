function base64encode(a){for(var b,c,d,e=a.length,f=0,g="";e>f;){if(b=255&a.charCodeAt(f++),f==e){g+=base64encodechars.charAt(b>>2),g+=base64encodechars.charAt((3&b)<<4),g+="==";break}if(c=a.charCodeAt(f++),f==e){g+=base64encodechars.charAt(b>>2),g+=base64encodechars.charAt((3&b)<<4|(240&c)>>4),g+=base64encodechars.charAt((15&c)<<2),g+="=";break}d=a.charCodeAt(f++),g+=base64encodechars.charAt(b>>2),g+=base64encodechars.charAt((3&b)<<4|(240&c)>>4),g+=base64encodechars.charAt((15&c)<<2|(192&d)>>6),g+=base64encodechars.charAt(63&d)}return g}function base64decode(a){for(var b,c,d,e,f=a.length,g=0,h="";f>g;){do b=base64decodechars[255&a.charCodeAt(g++)];while(f>g&&-1==b);if(-1==b)break;do c=base64decodechars[255&a.charCodeAt(g++)];while(f>g&&-1==c);if(-1==c)break;h+=String.fromCharCode(b<<2|(48&c)>>4);do{if(d=255&a.charCodeAt(g++),61==d)return h;d=base64decodechars[d]}while(f>g&&-1==d);if(-1==d)break;h+=String.fromCharCode((15&c)<<4|(60&d)>>2);do{if(e=255&a.charCodeAt(g++),61==e)return h;e=base64decodechars[e]}while(f>g&&-1==e);if(-1==e)break;h+=String.fromCharCode((3&d)<<6|e)}return h}/*!
 * author: lida@jd.com dongyingzi@jd.com
 * editlastTime:2014-07-08
 */
function QueryString(){var a,b,c,d=location.search,e=d.indexOf("?");d=d.substr(e+1);var f=d.split("&");for(c=0;c<f.length;c++)e=f[c].indexOf("="),e>0&&(a=f[c].substring(0,e),b=f[c].substr(e+1),this[a]=b)}function adInfo(){this.AdId="",this.Unit="",this.UnionId="",this.Mat="",this.Jtype="",this.Jprice=""}function skuObj(){this.Id="",this.SkuId="",this.Name="",this.Img="",this.Price="",this.Ptype="",this.Yprice="",this.Discount="",this.Tstart="",this.Tend="",this.Zk="",this.Ad=null,this.Tag="",this.sanTags="",this.Day="",this.Index=-1,this.ORI="",this.click_url="",this.buy_url="",this.exposal_url="",this.data_monitor_url="",this.is_new_ad="1"}function getdxdatasource(a){for(var b=[],c=0;c<a.length;c++)b[c]=new skuObj,b[c].Id=a[c].Wid,b[c].Name=a[c].Name,b[c].Price=a[c].Price,b[c].Img=a[c].ImageUrl;return b}function getprice_callback(data){try{var myobj=eval(data);if(myobj.length>0){var strs=myobj[0].id.split("_"),t=document.getElementById("price_"+strs[1]);myobj[0].p>0?t.innerHTML=Math.round(myobj[0].p):(t.style.fontSize="12px",t.innerHTML="暂无报价",t.previousSibling.innerHTML="")}}catch(ex){}}function loadAllPrice(a){if(a&&a.length>0){for(var b=[],c=0;c<a.length;c++)b.push("J_"+(a[c].SkuId||a[c].Id));dspTools.jsonP({url:"http://p.3.cn/prices/mgets?skuids="+b.join(",")+"&type=1",callback:loadAllPriceCallback})}}function loadAllPriceCallback(_data){var priceObj=eval(_data);try{for(var i=0;i<priceObj.length;i++){var str=priceObj[i].id.split("_"),t=document.getElementById("price_"+str[1]);if(priceObj[i].p>0)t.innerHTML=parseFloat(priceObj[i].p).toFixed(2);else{var _parentElement=t.parentNode;_parentElement&&_parentElement.removeChild(t.previousSibling),t.innerHTML="已下架"}}}catch(ex){}}function getAddsku(a,b){var c=(new QueryString,document.createElement("script"));c.id="jad_tdscript",c.src="http://d.360buy.com/topsalebysortid/get?sortid="+a+"&num="+b+"&callback=getAddsku_callback",document.getElementsByTagName("head")[0].appendChild(c)}function getAddsku_callback(a){for(var b=formattddata(a),c=0;c<b.length;c++){var d="<a href='http://item.jd.com/"+b[c].Id+".html' target='_blank'><div class='p_img'><sub class='p_img_tag' id='zk_"+b[c].Id+"' style='display:none'></sub><img src='http://img11.360buyimg.com/n1/"+b[c].Img+"'/></div><div class='p_price'><span id='rprice_"+b[c].Id+"' style='display:none'></span><span class='tag_title'>￥</span><span class='tag_content' id='price_"+b[c].Id+"'></span></div><div class='p_promo'><span id='promInfo_"+b[c].Id+"' style='display:none'></span></div><div class='p_name'>"+b[c].Name+"</div><div class='clr'></div></a>",e=document.createElement("li");e.innerHTML=d,document.getElementById("list1").appendChild(e)}loadAllPrice(b)}function formattddata(a){for(var b=a,c=0,d=[],e=0;e<b.length;e++)d[c]=new skuObj,d[c].Id=b[e].skuId,d[c].Name=b[e].name||b[e].title,d[c].Img=b[e].imgurl,d[c].Ptype="6",d[c].is_new_ad="1",c++;return d}function gettdsku_callback(a){for(var b=formattddata(a),c=0;c<b.length;c++)for(var d=0;d<mainsl.length;d++)if(null==mainsl[d]){mainsl[d]=b[c];break}buildHtml(mainsl)}function loadAllPromo(a){loadAllPromoLabel(a)}function getpromoinfo(a){var b={skuId:"",info:"",tag:"",sanTags:""};if(b.skuId=a.skuId,a&&a.promotionInfoList&&a.promotionInfoList.length>0)for(var c=0;c<a.promotionInfoList.length>0;c++){var d=a.promotionInfoList[c];if(1==d.promoType&&d.userLevel<=50){if(null!=d.discount&&d.discount>0){b.info=b.info+"<div><span class='tag_title'>直降</span><sapn class='tag_content'>已优惠 ￥"+Math.round(d.discount)+"</span></div>";var e=parseInt(document.getElementById("price_"+b.skuId).innerHTML),f=Math.floor(e/(e+Math.round(d.discount))*100)/10;b.tag=f+"折"}if(null!=d.adwordCouponList&&d.adwordCouponList.length>0){var g=Math.round(d.adwordCouponList[0].couponQouta);b.info=b.info+"<div><span class='tag_title'>赠券</span><span class='tag_content'>赠"+g+"元"+(1==d.adwordCouponList[0].type?"京券":"东券")+"</span></div>",""==b.tag&&(b.tag="赠券")}if(null!=d.score&&d.score>0&&null!=d.adwordCouponList){var g=Math.round(d.adwordCouponList[0].couponQouta);b.info=b.info+"<div><span class='tag_title'>赠积分</span><span class='tag_content'>赠 "+d.score+"积分</span></div>",""==b.tag&&(b.tag="赠积分")}}4==d.promoType&&d.userLevel<=50&&null!=d.adwordGiftSkuList&&d.adwordGiftSkuList.length>0&&2==d.adwordGiftSkuList[0].giftType&&(b.info=b.info+"<div><span class='tag_title'>赠品</span><span class='tag_content'>"+d.adwordGiftSkuList[0].name+"</span></div>",""==b.tag&&(b.tag="赠品")),10==d.promoType&&(1==d.fullRefundType&&(d.needMondey>0&&d.reward>0&&(b.info=b.info+"<div><span class='tag_title'>满减</span><span class='tag_content'>满"+Math.round(d.needMondey)+"立减"+Math.round(d.reward)+"</span></div>",""==b.tag&&(b.tag="满减")),d.haveFullRefundGifts&&(b.info=b.info+"<div><span class='tag_title'>满赠</span><span class='tag_content'>满"+Math.round(d.needMondey)+"即赠商品</span></div>",""==b.tag&&(b.tag="满赠"))),2==d.fullRefundType&&(d.needMondey>0&&d.reward>0&&(b.info=b.info+"<div><span class='tag_title'>满减</span><span class='tag_content'>每满"+Math.round(d.needMondey)+"可减"+Math.round(d.reward)+"</span></div>",""==b.tag&&(b.tag="满减")),d.haveFullRefundGifts&&(b.info=b.info+"<div><span class='tag_title'>满赠</span><span class='tag_content'>满"+Math.round(d.needMondey)+"即赠商品</span></div>",""==b.tag&&(b.tag="满赠"))),4==d.fullRefundType&&d.needMondey>0&&d.addMoney>0&&(b.info=b.info+"<div><span class='tag_title'>加价购</span><span class='tag_content'>满"+Math.round(d.needMondey)+"加"+Math.round(d.addMoney)+"即赠</span></div>",""==b.tag&&(b.tag="加价购")))}return b}function getPromo(a){dspTools.jsonP({url:"http://jprice.360buy.com/pageadword/"+a+"-1-1.html",callback:getPromoCallback})}function getPromoCallback(a){var b=getpromoinfo(a);if(null!=b){if(""!=b.tag){var c=document.getElementById("zk_"+b.skuId);c.innerHTML=b.tag,c.style.display=""}if(""!=b.info){var c=document.getElementById("promInfo_"+b.skuId);c.innerHTML=b.info,c.style.display=""}}}function loadAllPromoLabel(a){if(a&&a.length>0){for(var b=[],c=0;c<a.length;c++)b.push("J_"+(a[c].SkuId||a[c].Id));dspTools.jsonP({url:"http://ad.3.cn/flags/mgets?skuids="+b.join(","),callback:loadAllPromoLabelCallback})}}function loadAllPromoLabelCallback(a){for(var b=0;b<a.length;b++){var c=a[b],d=c.pid,e=c.pf,f=[];if(e&&e.length>0)for(var g=0;g<e.length;g++){var h=promoLabelDict[e[g]];h&&f.push("<span class='tag_title'>"+h+"</span>")}if(f.length>0){var i=document.getElementById("promInfo_"+d);i.innerHTML="<div>"+f.join("")+"</div>",i.style.display=""}}}function setTimeRun(a){for(var b=0;b<a.length;b++){var c=new Date(Date.parse(a[b].Tstart.replace(/-/g,"/"))),d=c.getTime(),e=new Date(Date.parse(a[b].Tend.replace(/-/g,"/"))),f=e.getTime(),g=(f-d)/1e3;setTimeRun_item(g,a[b].Id)}}function setTimeRun_item(a,b){if(a>=0){var c=Math.floor(a/60/60);10>c&&(c="0"+c);var d=Math.floor(a/60%60);10>d&&(d="0"+d);var e=Math.floor(a%60);10>e&&(e="0"+e);var f="<b>"+c+"</b>小时<b>"+d+"</b>分钟<b>"+e+"</b>秒";document.getElementById("dsp_time_"+b).innerHTML=f,a-=1,setTimeout(function(){setTimeRun_item(a,b)},1e3)}else document.getElementById("dsp_time_"+b).innerHTML="已结束"}function formatDXData(a){var b=[],c=a.Query;for(var d in c)for(var e=c[d],f=0;f<e.length;f++){var g=e[f],h=new skuObj;h.Id=g.material_id,h.SkuId=g.sku_id,h.Name=g.ad_title,h.Img=g.image_url,h.Tag=g.sku_tag,h.sanTags=g.sanjifenlei_txt;var i=g.click_url;h.click_url=i;var j=i.match(new RegExp("[?&]ext=([^&]*)(&?)","i")),k=j?j[1]:j,l=base64decode(k),m=base64encode(l.substring(0,l.indexOf("&to"))+"&to=http://gate.jd.com/InitCart.aspx");h.buy_url=i.replace(/(ext=)([^&]*)/gi,"ext="+m),h.data_monitor_url=g.monitor_url,h.exposal_url=g.exposal_url,h.is_new_ad=0,h.Ad={AdId:g.pos_id,Unit:["ad_group_id"],UnionId:["unionid"],Jtype:["ad_type"],Jprice:["pos_id"],ORI:["pos_id"],Mat:["material_id"]},b.push(h)}return b}function map4render(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];b.push({data_skuid:d.SkuId,data_skuname:d.Name,data_skutag:d.Tag,data_skusantags:d.sanTags,data_skuimg:d.Img,data_skuurl:d.click_url,data_buyurl:d.buy_url,data_skudiscount:d.Discount,data_skuzk:d.Zk&&0!=d.Zk&&10!=d.Zk?d.Zk+"折":"直降",data_onclick:d.OnClick?d.OnClick:"void(0);"})}return b}function exposalAD(a){a&&setTimeout(function(){for(var b=0;b<a.length;b++)try{var c=a[b].exposal_url;c&&dspTools.getScript(c)}catch(d){}},1)}function runTags(){}var base64encodechars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",base64decodechars=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1),promoLabelDict={1:"直降",3:"赠券",4:"赠京豆",5:"赠品",11:"会员特享",22:"京豆优惠购"},dspTools={hasClass:function(a,b){return a.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)"))},addClass:function(a,b){this.hasClass(a,b)||(a.className+=" "+b)},removeClass:function(a,b){if(this.hasClass(a,b)){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");a.className=a.className.replace(c," ")}},getElementsByClass:function(a,b,c){var d=new Array,e=a.getElementsByTagName(c),f=e.length,g=new RegExp("\\b"+b+"\\b");for(i=0,j=0;f>i;i++)g.test(e[i].className)&&(d[j]=e[i],j++);return d},getChildNodes:function(a){var b=a.children||a.childNodes;childArrTem=new Array;for(var c=0,d=b.length;d>c;c++)1==b[c].nodeType&&childArrTem.push(b[c]);return childArrTem},inArray:function(a,b){if(b.length>0)for(var c=0;c<b.length;c++)if(a==b[c])return!0;return!1},getScript:function(a,b){var c=document.createElement("script");c.type="text/javascript",c.src=a,c.onload=c.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(this.onload=this.onreadystatechange=null,document.getElementsByTagName("head")[0].removeChild(this),b&&b())},document.getElementsByTagName("head")[0].appendChild(c)},timeStamp:+new Date,jsonP:function(a,b){b=!!b||"callback";var b=(a.data||{},"dsp_"+this.timeStamp++);window[b]=function(b){a.callback(b)};var c=a.url.indexOf("?"),d=a.url+(c>-1?"&":"?")+"callback="+b+"&r="+ +new Date;this.getScript(d,function(){window[b]=void 0;try{delete window[b]}catch(a){}})}},Cookie={set:function(a,b,c){var c=c||{};if(c.domain=c.domain||"",c.path=c.path||"/",c.expires=c.expires||31536e6,"number"==typeof c.expires){var d=new Date;d.setTime(d.getTime()+c.expires)}document.cookie=a+"="+encodeURIComponent(b)+";expires="+d.toGMTString()+(c.domain?";domain="+c.domain:"")+";path="+c.path},get:function(a){var b,c=encodeURIComponent(a)+"=",d=document.cookie.indexOf(c),e=null;return d>-1&&(b=document.cookie.indexOf(";",d),-1==b&&(b=document.cookie.length),e=decodeURIComponent(document.cookie.substring(d+c.length,b))),e},remove:function(a){this.set(a,"",{expires:-3600})}};!function(){var a,b,c,d,e,f,g,h,i,j,k=this;k._,a={},b=Array.prototype,c=Object.prototype,d=Function.prototype,b.push,e=b.slice,b.concat,c.toString,c.hasOwnProperty,Array.isArray,Object.keys,d.bind,f=function(a){return a instanceof f?a:this instanceof f?void(this._wrapped=a):new f(a)},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=f),exports._=f):k._=f,f.each=f.forEach=function(b,c,d){var e,g,h;if(null==b)return b;if(b.length===+b.length){for(e=0,g=b.length;g>e;e++)if(c.call(d,b[e],e,b)===a)return}else for(h=f.keys(b),e=0,g=h.length;g>e;e++)if(c.call(d,b[h[e]],h[e],b)===a)return;return b},f.defaults=function(a){return f.each(e.call(arguments,1),function(b){if(b)for(var c in b)void 0===a[c]&&(a[c]=b[c])}),a},f.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},g=/(.)^/,h={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},i=/\\|'|\r|\n|\u2028|\u2029/g,j=function(a){return"\\"+h[a]},f.template=function(a,b,c){var d,e,h,k,l,m;c=f.defaults({},c,f.templateSettings),d=new RegExp([(c.escape||g).source,(c.interpolate||g).source,(c.evaluate||g).source].join("|")+"|$","g"),e=0,h="__p+='",a.replace(d,function(b,c,d,f,g){return h+=a.slice(e,g).replace(i,j),e=g+b.length,c?h+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?h+="'+\n((__t=("+d+"))==null?'':__t)+\n'":f&&(h+="';\n"+f+"\n__p+='"),b}),h+="';\n",c.variable||(h="with(obj||{}){\n"+h+"}\n"),h="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+h+"return __p;\n";try{k=new Function(c.variable||"obj","_",h)}catch(n){throw n.source=h,n}return b?k(b,f):(l=function(a){return k.call(this,a,f)},m=c.variable||"obj",l.source="function("+m+"){\n"+h+"}",l)}}.call(this),runTags.prototype={jdAdBox:null,tagsId:null,tagsList:null,adInfoId:null,adInfoList:null,index:0,play:null,playSet:"auto",count:0,timeInterval:0,timer:0,$:function(a){return"string"==typeof a?a.indexOf("#")>=0?(a=a.replace("#",""),document.getElementById(a)?document.getElementById(a):(alert("没有容器"+a),null)):document.createElement(a):a},info:function(a,b,c,d,e,f){this.cont=e,this.boxid=f,this.playSet=d,this.timeInterval=c,this.jdAdBox=this.$("#jdAdBox"),this.tagsId=this.$(a),this.tagsList=this.tagsId.getElementsByTagName("li"),this.tagsList[0].className="select",this.adInfoId=this.$(b),this.adInfoList=dspTools.getElementsByClass(this.adInfoId,"jdContInner","div"),this.action(this.boxid)},action:function(a){this.jdAdBox=this.$(a),"auto"==this.playSet&&this.autoplay(),this.mouseoverout(this.jdAdBox,this.tagsList)},imgshow:function(a,b,c){this.index=a;for(var d=0;d<b.length;d++)b[d].className="";b[this.index].className="select",clearInterval(this.timer);for(var e=0;e<c.length;e++)c[e].style.display="none";c[this.index].style.display="block"},autoplay:function(){var a=this;a.play=setInterval(function(){a.index++,a.index>a.adInfoList.length-1&&(a.index=0),a.imgshow(a.index,a.tagsList,a.adInfoList)},a.timeInterval)},mouseoverout:function(a,b){var c=this;a.onmouseover=function(){clearInterval(c.play)},a.onmouseout=function(){c.autoplay(c.index)};for(var d=0;d<b.length;d++)b[d].index=d,b[d].onmouseover=function(){c.imgshow(this.index,c.tagsList,c.adInfoList)}}};