KISSY.add("widget/advertconfig/index",function(a){function b(){}var c={viewZoom:{cacheWidth:function(b){var c=a.DOM;return b._ks_lazy_width?b._ks_lazy_width:b._ks_lazy_width=c.outerWidth(b)},cacheHeight:function(b){var c=a.DOM;return b._ks_lazy_height?b._ks_lazy_height:b._ks_lazy_height=c.outerHeight(b)},isCross:function(a,b){var c={};return c.top=Math.max(a.top,b.top),c.bottom=Math.min(a.bottom,b.bottom),c.left=Math.max(a.left,b.left),c.right=Math.min(a.right,b.right),c.bottom>=c.top&&c.right>=c.left},elementInViewport:function(b){var c=this,d=a.DOM;if(!b.offsetWidth)return!1;var e,f=c.getBoundingRect(),g=d.offset(b),h=g.left,i=g.top,j={left:h,top:i,right:h+c.cacheWidth(b),bottom:i+c.cacheHeight(b)};return e=c.isCross(f,j)},_diff:{top:500,bottom:500},setDiff:function(b){return a.merge(this._diff,b)},getBoundingRect:function(){var b,c,d,e,f=a.DOM;b=f.viewportHeight(),c=f.viewportWidth(),d=f.scrollLeft(),e=f.scrollTop();var g=this._diff,h=g.left||0,i=g.right||0,j=g.top||0,k=g.bottom||0,l=d+c,m=e+b;return d-=h,l+=i,e-=j,m+=k,{left:d,top:e,right:l,bottom:m}}},lazyLoad:{_callbacks:{},getCallbackKey:function(b,c){var d,e;return(d=b.id)||(d=b.id=a.guid("ks-lazyload")),(e=c.ksLazyloadId)||(e=c.ksLazyloadId=a.guid("ks-lazyload")),d+e},addCallback:function(b,d){var e=a.DOM,f=this,g=f._callbacks;b=e.get(b);var h=f.getCallbackKey(b,d);g[h]={el:b,fn:d};var i=!1;c.viewZoom.elementInViewport(b)&&(i=d.call(b)),i!==!1&&(g[h]=null,delete g[h])},removeCallback:function(b,c){var d=this,e=a.DOM;if(b){var f=d._callbacks;b=e.get("el");var g=b.id+c.ksLazyloadId;f[g]&&(f[g]=null,delete f[g])}else d._callbacks={}},_loadFn:null,bindScroll:function(){var b=this,c=function(){b.fireCallbacks()};b._loadFn=a.buffer(c,"100",b),b._loadFn(),a.use("event",function(a,c){c.on(window,"scroll",b._loadFn)})},fireCallbacks:function(){var b=this,d=b._callbacks;a.each(d,function(a,b){var e=a.el,f=!1,g=a.fn;c.viewZoom.elementInViewport(e)&&(f=g.call(e)),f!==!1&&delete d[b]})}},measure:{highlight:function(b,c){var d=/[-\\\/?!.*+^$\[\]\(\)\{\}\<\>=:|]/gi;if(a.isArray(b)&&(b=b.join(" ")),""===a.trim(b))return c;try{b=b.replace(d,function(a){return"\\"+a}),b=a.trim(b).replace(/\s+/gi,"|"),c=c.replace(new RegExp("("+b+")","ig"),'<span class="H">$1</span>')}catch(e){}return c},getRankByGrade:function(a){for(var b=[4,10,40,90,150,500,1e3,2e3,5e3,1e4,2e4,5e4,1e5,2e5,5e5,1e6,2e6,5e6,1e7],c=0,d=b.length;d>c;c++)if(a<b[c])return c+1;return b.length},getTitleByRank:function(a){if(a=parseInt(a,10),!a||0>a||a>20)return null;var b="\u4e94\u4e00\u4e8c\u4e09\u56db".split(""),c="\u5fc3\u7ea7,\u84dd\u94bb,\u7687\u51a0,\u81f3\u5c0a".split(",");return b[a%5]+c[Math.floor((a-1)/5)]+"\u5356\u5bb6"}}},d={J_shopkeeper:{name:["__p4p_sidebar__","__p4p_bottom__"],api:function(b){var c={sourceUrl:"http://tmatch.simba.taobao.com/?name={name}&o={o}&count={count}&offset={offset}&rct={rct}&pid={pid}&p4p={p4p}&layoutid={layoutid}&elemtid={elemtid}&keyword={keyword}&catid={catid}&propertyid={propertyid}&ip={ip}&frontcatid={frontcatid}&loc={loc}&gprice={gprice}&sort={sort}&sbid={sbid}&q2cused={q2cused}&pushleft={pushleft}&refpid={refpid}&se={rn}&ismall={ismall}&tags={tags}",rightTitleUrl:"http://re.taobao.com/search?keyword={keyword}&refpid={pid}&isinner={isinner}",rightTitle:"\u638c\u67dc\u70ed\u5356",rightMoreUrl:"http://re.taobao.com/search?keyword={keyword}&refpid={pid}&isinner={isinner}",rightMore:"\u66f4\u591a\u70ed\u5356",bottomTitleUrl:"http://re.taobao.com/search?keyword={keyword}&refpid={pid}&isinner={isinner}",bottomTitle:"\u638c\u67dc\u70ed\u5356",bottomMoreUrl:"http://re.taobao.com/search?keyword={keyword}&refpid={pid}&isinner={isinner}",bottomMore:"\u66f4\u591a\u70ed\u5356",bottomApplyUrl:"http://zhitongche.taobao.com",bottomApply:"\u6211\u4e5f\u8981\u51fa\u73b0\u5728\u8fd9\u91cc"};1==b.xmatch&&(c.sourceUrl=c.sourceUrl.replace("tmatch","xmatch"));var d=b.pid.split(","),e=b.keyword,f=b.isinner;return c.sourceUrl=a.substitute(c.sourceUrl,b),c.rightTitleUrl=a.substitute(c.rightTitleUrl,{keyword:e,isinner:f,pid:d[0]}),c.rightMoreUrl=a.substitute(c.rightMoreUrl,{keyword:e,isinner:f,pid:d[0]}),c.bottomTitleUrl=a.substitute(c.bottomTitleUrl,{keyword:e,isinner:f,pid:d[1]}),c.bottomMoreUrl=a.substitute(c.bottomMoreUrl,{keyword:e,isinner:f,pid:d[1]}),c},promise:function(a){var b=a.placeholder,d="210x210.jpg",e="s210";b&&(e="");var f={"RESOURCEID:nid":!0,"GOODSPRICE:price":function(a){return(a/100).toFixed(2)},"TITLE:holder":function(a){return a},"TITLE:title":function(a,b,d){var b=d.REDKEYS||d.REDKEY;return c.measure.highlight(b,a)},"LOCATION:location":function(b){var c=a.loc;return c?b:!1},"ISMALL:ismall":function(a){return"1"!==a?!1:!0},"ISJU:isju":function(a){return"1"!==a?!1:!0},"GOLDENSELLER:isgold":function(a){return"1"!==a?!1:!0},"EURL:url":!0,"TBGOODSLINK:src":function(a){return a.replace(/sum.jpg$/,d)},imgcls:function(){return e},imgsize:function(){return d},"SELL:biz30day":!0,"SELLERID:uid":!0,"ADGEXTENSION:freepost":function(a){return a?!("1"!=a.split("isPostFree:")[1].slice(0,1)):!1},placeholder:function(){return b}};return f},data:function(b,c){{var d=["",""],e=!1,f=b.sbid;a.isNumber(f)?f:f.split(",")[0]}return d=["p4psearch-shopkeeper-bts1","p4psearch-shopkeeper-bottom-bts1"],e=!0,c.right.bts=e,c.bottom.bts=e,c.right.containerCls="p4psearch p4psearch-shopkeeper "+d[0],c.bottom.containerCls="p4psearch p4psearch-shopkeeper-bottom "+d[1],c},pids:{empty:["420436_1006","420437_1006"],normal:["420434_1006","420435_1006"],tbsy:["420984_1006","420980_1006"],haiwaigou:["430008_1006","430009_1006"],spu_market_list:["430342_1006","430344_1006"],spu_market_detail:["430345_1006","430347_1006"],lsrp:["430352_1006","430353_1006"],festival:["430356_1006","430358_1006"]},param:function(b){var c={keyword:"",loc:"",ip:"",sbid:"",catid:"",propertyid:"",frontcatid:"",q2cused:0,sort:"",gprice:""};a.mix(c,b),c.keyword=b.keywordGBK,c.name="tbuad",c.o="j",c.p4p=this.getName().join(","),c.isinner=0,c.pushleft="",c.layouttid="",c.elemtid="",c.count=5;var d=["spuapisrp","detailsrp","productcompare","productdetailtrustsrp","productcomparesrp","productdetailsrp","productdetailcommentsrp","productdetailparamsrp","verticaltrustsrp"];c.rct=a.indexOf(b.srp,d)>-1?11:12;var e=b.offset||0,f=b.pageNum||1,g=c.count+c.rct;f>2&&b.b2b_show&&(g-=5),c.offset=e+(f-1)*g;var h,i=this.getPids();switch(b.source){case"tbsy":h=i.tbsy;break;case"haiwaigou":h=i.haiwaigou,""===b.keyword&&(h=i.empty);break;case"spu_market_list":h=i.spu_market_list;break;case"spu_market_detail":h=i.spu_market_detail;break;case"lsrp":h=i.lsrp;break;case"festival":h=i.festival;break;default:h=i.normal,""===b.keyword&&(h=i.empty)}return c.refpid=b.refpid||"",b.refpid_right=h[0],b.refpid_bottom=h[1],c.pid=h.join(","),c}},J_shopfeature:{api:function(b){var c={sourceUrl:"http://tmatch.simba.taobao.com/?name={name}&o={o}&count={count}&rct={rct}&offset={offset}&pid={pid}&p4p={p4p}&layoutid={layoutid}&elemtid={elemtid}&keyword={keyword}&catid={catid}&ip={ip}&frontcatid={frontcatid}&sbid={sbid}&q2cused={q2cused}&otsdk={otsdk}&refpid={refpid}&se={rn}",title:"\u5e97\u5bb6\u7cbe\u9009",moreUrl:"http://re.taobao.com/shopsearch?frontcatid={frontcatid}&keyword={keyword}&refpid={pid}&isinner={isinner}",more:"\u66f4\u591a\u70ed\u5356"};return 1==b.xmatch&&(c.sourceUrl=c.sourceUrl.replace("tmatch","xmatch")),c.sourceUrl=a.substitute(c.sourceUrl,b),c.moreUrl=a.substitute(c.moreUrl,b),c},name:"__p4p_sidebar_shop__",pids:{empty:"420931_1006",normal:"420930_1006",tbsy:"430011_1006",haiwaigou:"420930_1006",spu_market_list:"430343_1006",spu_market_detail:"430346_1006",lsrp:"430354_1006",festival:"430359_1006"},param:function(b){var c={keyword:"",catid:"",ip:"",sbid:"",propertyid:"",frontcatid:"",q2cused:0};a.mix(c,b),c.keyword=b.keywordGBK,c.name="dpad",c.o="j",c.p4p=this.getName(),c.count=3,c.rct=0;var d=b.pageNum||1;c.offset=(d-1)*c.count;var e,f=this.getPids();switch(b.source){case"tbsy":e=f.tbsy;break;case"haiwaigou":e=f.haiwaigou,""===b.keyword&&(e=f.empty);break;case"spu_market_list":e=f.spu_market_list;break;case"spu_market_detail":e=f.spu_market_detail;break;case"lsrp":e=f.lsrp;break;case"festival":e=f.festival;break;default:e=f.normal,""===b.keyword&&(e=f.empty)}return b.refpid=c.refpid=b.refpid||"",b.pid=c.pid=e,c.isinner=0,c.otsdk=1,c.layouttid=234,c.elemtid=7,c.pushleft="",c},promise:function(a){var b=a.placeholder,d="315x315.jpg",e="s315";b&&(e="");var f={"SELLERID:nid":!0,holder:function(a,b,c){return c.CREATIVEELEMENTS.TITLE},title:function(a,b,d){var b=d.REDKEYS||d.REDKEY;return c.measure.highlight(b,d.CREATIVEELEMENTS.TITLE)},"ISMALL:ismall":function(a){return"1"===a?!0:!1},"EURL:url":!0,"WANGWANGID:wangwangId":!0,src:function(a,b,c){return c.CREATIVEELEMENTS.IMGURL.replace(/sum.jpg$/,d)},gradetitle:function(a,b,d){if("0"===d.ISMALL&&"0"!==d.GRADE){var e=c.measure.getRankByGrade(+d.GRADE);return c.measure.getTitleByRank(e)}},grade:function(a,b,d){var e=d.GRADE;if("0"===d.ISMALL&&"0"!==e){var f=c.measure.getRankByGrade(+e),g=["icon-supple-level-xin","icon-supple-level-zuan","icon-supple-level-guan","icon-supple-level-jinguan"],h=f%5,i=Math.floor(f/5),e=[];for(0==h&&(h=5,i--);h--;)e.push(g[i]);return e}},imgcls:function(){return e},imgsize:function(){return d},placeholder:function(){return b}};return f}}};return b.prototype={constructor:b,_mods:{},utils:c,getModule:function(b){var c=this,e=c._mods;if(e[b])return e[b];var f=d[b],g={};return f?(a.each(f,function(b,c){var d,e="get"+a.ucfirst(c);d=a.isFunction(b)?function(){return b.apply(g,arguments)}:function(){return b},g[e]=d}),g):void a.log("\u4e0d\u5b58\u5728\u8be5P4P\u6a21\u5757\uff01")}},new b}),KISSY.add("widget/advertindex/index",function(a){function b(b,c){var d=l.getModule("J_shopkeeper"),e=d.getParam(b),f=d.getApi(e),g=d.getName();a.getScript(f.sourceUrl,function(){var a={};a[g[0]]=window[g[0]],a[g[1]]=window[g[1]],c(a)})}function c(c){var e=this;window.MBOX={},document.createElement("tbcc"),MBOX.getWidth=h,a.mix(e.cfg,c);var f=e.cfg.param;f&&(j="p4p_bts1"===f.p4p_btsinfo,j?(e.cfg.readyFn&&e.cfg.readyFn(),e.cfg.readyFn=function(){},e.init(f),d(f,e)):(window.sendP4PError95=function(a){"0.0001"===Math.random().toFixed(4)&&((new Image).src="http://gm.mmstat.com/ued.1.1.2?type=9&id=jstracker&v=1&nick=&msg=%5Br10000%5D%5Buhttp%3A%2F%2Fp4p.s.taobao.com%5D"+encodeURIComponent(a)+"&file=&ua="+encodeURIComponent(navigator.userAgent)+"&line=&scrolltop=&screen=&t="+ +new Date)},b(f,function(a){k=a,e.init(f)})))}function d(b,c){window._ent=[],MBOX.getScript=f,b.pageNum=b.pageNum||1,b.offset=b.offset||0,MBOX.sendP4PError=g;var d=MBOX.shopToBottom?14*((b.pageNum||1)-1)+b.offset:16*((b.pageNum||1)-1)+b.offset,j=d+(MBOX.shopToBottom?14:11),k=i(b),m=a.merge(a.clone(b),{type:"right",pid:k[0],id:"J_shopkeeper",chaodi_template:MBOX.shopToBottom?"http://strip.taobaocdn.com/tfscom/TB12nxGGXXXXXXjXVXXdutXFXXX.js":"http://strip.taobaocdn.com/tfscom/TB1KC4BGXXXXXaqaXXXdutXFXXX.js",chaodi_creation_path:MBOX.shopToBottom?"2014_8/145663":"2014_8/145666",width:b.rightWidth||h("right"),count:11,offset:d,_offset:b.offset,pageNum:b.pageNum,callback:function(){a.get("#J_shopkeeper").style.height="auto",MBOX.shopToBottom&&KISSY.all("#J_shopfeature").hide(),c.registerPlugin(a.require("widget/shopfeature/"),"J_shopfeature"),c.runPlugins()}});e(m,c),MBOX.showBottomP4P=function(){l.utils.lazyLoad.addCallback(a.get("#J_shopkeeper_bottom")||a.get(".tb-bottom"),function(){var d=a.merge(a.clone(b),{type:"bottom",pid:k[1],id:"J_shopkeeper_bottom",chaodi_template:"http://strip.taobaocdn.com/tfscom/TB13sFLGXXXXXcsXpXXdutXFXXX.js",chaodi_creation_path:"2014_8/145665",width:b.pageWidth||h("bottom"),count:5,offset:j,_offset:b.offset,pageNum:b.pageNum,callback:function(){}});e(d,c)})},MBOX.shopToBottom||MBOX.showBottomP4P()}function e(a){KISSY.ready(function(){KISSY.use("ajax",function(b,c){function d(b,c){(!b||b.rstCode||"timeout"===c)&&(MBOX.shopToBottom||g("timeout"===c?"MBOX\u8d85\u65f6":"MBOX\u9519\u8bef"),b={creation_path:a.chaodi_creation_path,qs:[e,h],template:a.chaodi_template}),b&&b.qs&&"right"===a.type&&(MBOX.offset_bottom=b.qs[0].offset_bottom);var d=b.creation_path,i=MBOX[d]={};i.data=b.data,i.qs=[e,h],i.type=a.type,i.width=a.width;var j="c"+d.replace(/[^-a-z0-9]/gi,"-")+"-"+ +new Date;document.getElementById(a.id).innerHTML='<tbcc id="tbcc-c-'+j+'" style="display:none"><tbcc></tbcc></tbcc>',f(b.template,function(){_ent.use("cc/show",function(b){b.show(d,j).on("render",function(){i.rendered||(i.rendered=!0,a.callback())})})})}var e={sbid:a.sbid+(MBOX.shopToBottom?",2":",1"),frontcatid:a.frontcatid,keyword:a.keywordGBK,pid:a.pid,refpid:a.refpid,offset:a.offset,propertyid:a.propertyid,gprice:a.gprice,loc:a.loc,sort:a.sort,q2cused:a.q2cused,se:a.rn,ismall:a.ismall,tags:a.tags},h={pid:"419110_1006",keyword:a.keywordGBK,catid:a.frontcatid};if(MBOX.shopToBottom)d();else{"right"===a.type?e=b.merge(e,{_offset:a._offset,pagenum:a.pageNum,count_bottom:5}):(MBOX.offset_bottom||g("\u6ca1\u6709\u62ff\u5230qs\u4e2d\u7684offset_bottom"),e=b.merge(e,{offset:MBOX.offset_bottom||a.offset}));var i="";for(var j in e)i+=j+"="+e[j]+"&";new c({dataType:"jsonp",url:"http://mbox.re.taobao.com/gt",data:{pid:a.pid,qs1:i,isMainSearch:!0,buckid:b.unparam(location.href).mboxBuckid||""},jsonp:"cb",timeout:2,complete:d})}})})}function f(a,b,c){if(a){var d=document.head||document.getElementsByTagName("head")[0]||document.documentElement,e=document.createElement("script");e.src=a,e.async=!0,e.charset=c||"utf-8",e.onload=e.onreadystatechange=function(){(!e.readyState||/loaded|complete/.test(e.readyState))&&(e.parentNode.removeChild(e),e.onload=e.onreadystatechange=null,e=null,b&&"function"==typeof b&&b())},d.appendChild(e)}}function g(a){"0.001"===Math.random().toFixed(3)&&((new Image).src="http://gm.mmstat.com/ued.1.1.2?type=9&id=jstracker&v=1&nick=&msg=%5Br1000%5D%5Buhttp%3A%2F%2Fmbox.p4p.s.taobao.com%5D"+encodeURIComponent(a)+"&file=&ua="+encodeURIComponent(navigator.userAgent)+"&line=&scrolltop=&screen=&t="+ +new Date)}function h(b){var c=a.one("body").attr("class"),d=c?(c.match(/(?:range-1-|^w)(\w+)/)||[,"ie6"])[1].toLowerCase():"normal",e={small:200,normal:240,large:270,ie6:230},f={small:1e3,normal:1190,large:1350,ie6:1180};return("right"===b?e:f)[d]}function i(a){var b,c={empty:["420436_1006","420437_1006"],normal:["420434_1006","420435_1006"],tbsy:["420984_1006","420980_1006"],haiwaigou:["430008_1006","430009_1006"],spu_market_list:["430342_1006","430344_1006"],spu_market_detail:["430345_1006","430347_1006"],lsrp:["430352_1006","430353_1006"],festival:["430356_1006","430358_1006"]};switch(a.source){case"tbsy":b=c.tbsy;break;case"haiwaigou":b=c.haiwaigou,""===a.keyword&&(b=c.empty);break;case"spu_market_list":b=c.spu_market_list;break;case"spu_market_detail":b=c.spu_market_detail;break;case"lsrp":b=c.lsrp;break;case"festival":b=c.festival;break;default:b=c.normal,""===a.keyword&&(b=c.empty)}return b}var j,k,l=a.require("widget/advertconfig/");return c.prototype={constructor:c,subject:null,cfg:{placeholder:"http://a.tbcdn.cn/kissy/1.0.0/build/imglazyload/spaceball.gif",callbacks:{},param:{},readyFn:null},_ready:!1,init:function(b){var c=this,d=c.cfg,e=["widget/asubject/","widget/shopkeeper/","widget/shopfeature/","core"];a.use(e.join(","),function(a){a.ready(function(){if(!c._ready){d.readyFn&&d.readyFn(),c._ready=!0,l.utils.lazyLoad.bindScroll(),d.param=b;var e=a.require("widget/asubject/");c.subject=new e,c.registerPlugins(),c.runPlugins()}})})},registerPlugin:function(a,b,c,d){var e=this,f=e.cfg,g=f.param,h=f.callbacks,i=new a({param:g,key:b,data:d,refer:c,callback:h[b],autoRender:!1});e.subject.attach(i)},registerPlugins:function(){var b=this,c=b.cfg,d=c.placeholder,e=c.param;e.placeholder=d,e.keyword=decodeURI(e.keyword);var f=a.require("widget/shopkeeper/");j||(b.registerPlugin(f,"J_shopkeeper",!1,k),b.registerPlugin(a.require("widget/shopfeature/"),"J_shopfeature"))},runPlugins:function(){var a=this,b=a.subject;b&&b.renderAll()},refresh:function(a){var b=this,c=b.subject;c&&c.destroy(),b.init(a)},resize:function(b){a.each(window.MBOX,function(a){a&&a.resize&&a.resize("right"===a.type?b.rightWidth:b.pageWidth)})}},c}),KISSY.add("widget/aobserver/index",function(a){function b(){b.superclass.constructor.apply(this,arguments),this._init()}var c=a.require("base"),d=a.require("widget/resolver/"),e=a.require("widget/advertconfig/"),f=new d,g=function(){};return b.ATTRS={key:{},refer:{},param:{},poolObj:{valueFn:function(){return e.getModule(this.get("key"))}},autoRender:{value:!1},callback:{}},a.extend(b,c,{_init:function(){var a=this;a.get("autoRender")&&a.render()},_destroy:!1,fetchAll:function(a,b,c){var d=this,e=function(a){return d._destroy?void(d._destroy=!1):void b(a)},g=function(a){c(a)};f.fetchAll(a,e,g,!1)},addCallback:function(a,b){e.utils.lazyLoad.addCallback(a,b)},removeCallback:function(a,b){e.utils.lazyLoad.removeCallback(a,b)},_syncOpt:function(){var a=this,b=a.get("poolObj"),c=b.getName(),d=b.getParam(a.get("param")),e=b.getApi(d);a.name=c,a.api=e,b.getPromise&&(a.promise=b.getPromise(d))},render:function(a){var b=this,c=b.get("key"),d=b.get("refer"),e=b.success||g,f=b.error||g;if(a){var h=function(){e.apply(b,arguments);var d=setTimeout(function(){clearTimeout(d),a.fireRender(c)},5)},i=function(){f.apply(b,arguments)};a.render(d,function(){b._syncOpt(),b.syncOpt()!==!1&&b.renderUI(h,i)},b)}else{b._syncOpt();var h=function(){e.apply(b,arguments)},i=function(){f.apply(b,arguments)};b.syncOpt()!==!1&&b.renderUI(h,i)}},syncOpt:g,renderUI:g,success:g,err:g,destroy:function(){var a=this;a.removeCallback(),a._destroy=!0},html:function(a,b){return Mustache.to_html(a,b)},parse:function(a,b,c){return f.parse(a,b,c)}}),b},{requires:["../resolver/","../advertconfig/","core"]}),KISSY.add("widget/asubject/index",function(a){function b(){b.superclass.constructor.apply(this,arguments),this.destroy()}var c=a.require("base");return a.extend(b,c,{observers:[],attach:function(a){this.observers.push(a)},renderAll:function(){for(var a=this,b=a.observers,c=0,d=b.length;d>c;c++)b[c].render(a)},render:function(a,b,c){this.readyRender(a,function(){b()},c)},renderList:[],readyRender:function(a,b,c){var d=this.renderList;c=c||this,a?d.push({refer:a,callback:b,context:c}):b.call(c)},fireRender:function(a){for(var b=this.renderList,c=[],d=0,e=b.length;e>d;d++){var f=b[d],g=f.refer;g===a?f.callback.call(f.context):c.push(f)}this.renderList=c},destroy:function(){for(var a=this,b=a.observers,c=0,d=b.length;d>c;c++)b[c].destroy();a.observers=[],a.renderList=[]}}),b},{requires:["base"]}),KISSY.add("widget/resolver/index",function(a){function b(){}var c=a.require("io");return b.prototype={$data:{},getData:function(){return this.$data},setData:function(a,b){this.$data[a]=b},fetchAll:function(b,d,e,f,g){function h(a,b,c){return c?c.call(i,a,b):i.parse(a,b,!0)}var i=this,j=i._synOpts(b);if(j){var k=j.options,l={success:function(b){if("getScript"===k.type){var c=j.name.split(",");if(!b)for(var e={},l=c.length;l--;)e[c[l]]=window[c[l]]||[]}if(g!==!1){var m=k.promise;if(g=g||k.parse,e){for(var n in e)window[n]=e[n]=h(e[n],m,g);b=e}else b=h(b,m,g)}f&&i.setData(j.name,b),a.ready(function(){d&&d.call(i,b)})},error:function(a){e.call(i,a)}};"getScript"===k.type?a.getScript(k.url+"&"+k.param+"&t="+a.now(),l):(k.url+="&t="+a.now(),c(a.mix(k,l)))}},_synOpts:function(b){var c;if(a.isString(b)){var d=b.split(":");2===d.length&&(c={name:d[0],options:{url:d[1],type:"get",dataType:"jsonp",param:""}})}else if(a.isObject(b)){var e=b.options;e.url=e.url,e.type=e.type||"get",e.data=e.param||"",e.param="",e.dataType=e.dataType||"json",e.jsonp=e.jsonp||"callback",c={name:b.name,options:e}}return c},parse:function(b,c,d){function e(b){var e,f,g,i,j,k;for(e=h.length;e--;){if(f=h[e],i=f.substr(0,f.lastIndexOf(".")),j=f.substr(f.lastIndexOf(".")+1),g=b[f].old_data,j=j.split(":"),k=2===j.length?j[1]:j[0],a.isObject(g))g=b[f].new_data;else if(d){var l,m=f.split(".");l=c[m[0]];for(var n=1,o=m.length;o>n;n++)l=l[m[n]];a.isFunction(l)?g=b[f].new_data=l(g,k,b[i].old_data):b[f].new_data=g}else b[f].new_data=g;b[i].new_data||(b[i].new_data={}),b[i].new_data[k]=g}return b[""].new_data}function f(){for(var a=b.length;a--;){i={};for(var c=0,d=h.length;d>c;c++){var f=h[c],g=f.lastIndexOf(".");-1===g&&(i[""]={old_data:b[a]});var k=f.substr(0,g),l=f.substr(g+1);l=l.split(":"),i[f]={};var m=i[k].old_data;m&&(i[f].old_data=m[l[0]])}j[a]=e(i)}}if(c){if(!a.isArray(b)){var g=!0;b=[b]}var h,i,j=[];return h=a.isString(c)?c.split(","):a.isObject(c)?this.preOrderPromise(c):c,f(),g?j[0]:j}},preOrderPromise:function(b,c,d){!b.length&&a.isObject(b)&&(b=[b]),c=c||[],d=d||0;for(var e,f,g=[],h=b.length,i=0;h>i;i++)if(e=b[i],f=d?c[d+i-1]+".":"",a.isObject(e))for(var j in e)c.push(f+j),g.push(e[j]);return g.length?this.preOrderPromise(g,c,d+h):c}},b},{requires:["io"]}),KISSY.add("widget/shopfeature/index",function(a){function b(){b.superclass.constructor.apply(this,arguments)}var c=a.require("dom"),d=a.require("widget/aobserver/"),e=['<div class="{{containerCls}}">','<div class="hd">',"<h3>{{title_text}}</h3>","</div>",'<div class="bd">',"{{#item_list}}",'<div class="item">','<div class="item-box">','<div class="pic">','<p class="pic-box">','<a title="{{holder}}" href="{{url}}" target="_blank" class="{{imgcls}}">',"<span>","{{#placeholder}}",'<img src="{{placeholder}}" _placeholder="{{src}}" />',"{{/placeholder}}","{{^placeholder}}",'<img src="{{src}}" />',"{{/placeholder}}","</span>","</a>","</p>","</div>",'<div class="extend-desc">','<div class="subtitle"><a target="_blank" href="{{url}}" title="{{holder}}">{{{title}}}</a></div>','{{#wangwangId}}<div class="act-info">','{{#ismall}}<a target="_blank" title="\u5546\u57ce" class="seller" href="{{url}}"><span class="icon-service-tianmao">\u5546\u57ce</span></a>{{/ismall}}',"{{^ismall}}",'{{^gradetitle}}<a href="http://www.etao.com" class="seller" target="_blank"><span class="icon-service-etaosale">\u5b98\u7f51\u7279\u5356</span></a>{{/gradetitle}}','{{#gradetitle}}<a target="_blank" href="{{url}}"  class="seller" title="{{gradetitle}}">{{#grade}}<span class="{{.}}"></span>{{/grade}}</a>{{/gradetitle}}',"{{/ismall}}",'<a href="{{url}}" target="_blank" class="nick">{{wangwangId}}</a>',"</div>","{{/wangwangId}}","</div>","</div>","</div>","{{/item_list}}","</div>",'<div class="ft">','<a target="_blank" href="{{more_url}}" class="p4p-more" >{{more_text}}<span class="p4p-more-arror"></span></a>',"</div>","</div>"].join("");return a.extend(b,d,{container:null,behaviored:!1,sync:null,syncOpt:function(){var b=this,c=b.get("key"),d=b.name,e=b.api,f=b.promise;return b.container=a.one("#"+c),b.container?(b.behaviored=b.container.attr("_behaviored"),void(b.sync={name:d,options:{url:e.sourceUrl,type:"getScript",promise:f}})):!1},renderUI:function(b,c){if(window.MBOX&&MBOX.shopToBottom){var d=this.userConfig.param,e={sbid:d.sbid+",2",keyword:d.keywordGBK,frontcatid:d.frontcatid,pid:d.pid,refpid:d.refpid,offset:6*((d.pageNum||1)-1),otsdk:1,se:d.rn},f={pid:"419110_1006",keyword:d.keywordGBK,catid:d.frontcatid},g={creation_path:"2014_8/143901",qs:[e,f],template:"http://strip.taobaocdn.com/tfscom/TB1a1lEFVXXXXbAXVXXdutXFXXX.js"},h=g.creation_path,i=MBOX[h]={};i.data=g.data,i.qs=[e,f],i.type="bottom",i.width=d.pageWidth||MBOX.getWidth("bottom");var j="c"+h.replace(/[^-a-z0-9]/gi,"-")+"-"+ +new Date;return document.getElementById("J_shopkeeper_bottom").innerHTML='<tbcc id="tbcc-c-'+j+'" style="display:none"><tbcc></tbcc></tbcc>',void MBOX.getScript(g.template,function(){_ent.use("cc/show",function(b){b.show(h,j).on("render",function(){a.all("#J_shopkeeper_bottom ul").length||(MBOX.sendP4PError("\u5e95\u90e8\u5e97\u94fa\u4e0d\u591f6\u4e2a"),MBOX.showBottomP4P())})})})}var k=this;if(k.behaviored)return void k._bindUI();var l=k.sync,g=k.get("data");g?(b(g),k._bindUI()):k.addCallback(k.container,function(){k.fetchAll(l,function(a){b(a),k._bindUI()},function(a){c(a)})})},_bindUI:function(){var a=this;a.container.delegate("mouseenter",".item",function(a){c.addClass(a.currentTarget,".item-hover")}),a.container.delegate("mouseleave",".item",function(a){c.removeClass(a.currentTarget,".item-hover")})},success:function(b){var c=this.name;if(b=b[c],!b)return this.container.hide(),sendP4PError95("\u5e97\u94fa\u7cbe\u9009\u6570\u636e\u83b7\u53d6\u5931\u8d25"),void a.log("\u5e97\u94fa\u7cbe\u9009\u6570\u636e\u83b7\u53d6\u5931\u8d25");if(!b.length)return this.container.hide(),sendP4PError95("\u5e97\u94fa\u7cbe\u9009\u65e0\u5339\u914d\u5e7f\u544a"),void a.log("\u5e97\u94fa\u7cbe\u9009\u65e0\u5339\u914d\u5e7f\u544a");var d=this,f=d.get("callback"),c=d.name,g=d.api,h={item_list:b,containerCls:"p4psearch p4psearch-shopfeature",title_text:g.title,more_url:g.moreUrl,more_text:g.more};d.container.css("height","auto"),d.container.html(d.html(e,h)),h=null,b=null,f&&f(null,d.container)},error:function(b){var c=this,d=c.get("callback");c.container.hide(),sendP4PError95("\u5e97\u94fa\u7cbe\u9009\u6570\u636e\u83b7\u53d6\u5931\u8d25"),a.log("\u5e97\u94fa\u7cbe\u9009\u6570\u636e\u83b7\u53d6\u5931\u8d25"),d&&d(b,null)}}),b},{requires:["../aobserver/","core"]}),function(a,b,c){function d(a){var b=a.match(k);return(b?b[0]:".")+"/"}function e(a,b){var c;return 0===a.indexOf("./")?(a=a.substr(2),b=d(b),c=b+a):0===a.indexOf("../")&&(a=a.substr(3),b=d(d(b).replace(/\/$/,"")),c=b+a),"."===a.charAt(0)?e(a,b):c||a}function f(a){return"/"!==a.charAt(0)&&(a="/"+a),a}function g(a,b,c){function d(a){var b=i.resolve(a,e.id),c=o[b];return c?c.exports||c._compile():console.log("_ent shouts: Module missing!",c),c.exports}var e=this;this.id=a,this.dependencies=b,this.factory=c,this.require=d,d.async=d.load=function(a,b){e._use(a,b)}}function h(a,b){i.mix(b,i,!0,"mix iF iA iS iPO fetch".split(" ")),b.substitute=function(a,d,e,f){return b.iS(a)&&b.iPO(d)?a.replace(e||/\\?\{([^{}]+)\}/g,function(a,b){return"\\"===a.charAt(0)?a.slice(1):d[b]!==c?d[b]:f?a:""}):a}}if(!b||!/cyj.me\/ent/.test(b.about)){b=a._ent={about:"http://cyj.me/ent",util:{},config:{timeout:3e4,charset:"utf-8"},cache:{}};var i=b.util,j=b.config;!function(){function d(a,b){"SCRIPT"===a.nodeName?e(a,b):f(a,b)}function e(a,b){a.onload=a.onerror=a.onreadystatechange=function(){p.test(a.readyState)&&(a.onload=a.onerror=a.onreadystatechange=null,a=c,b())}}function f(a,b){r||s?(i.log("Start poll to fetch css"),setTimeout(function(){g(a,b)},1)):a.onload=a.onerror=function(){a.onload=a.onerror=null,a=c,b()}}function g(a,b){var c;if(r)a.sheet&&(c=!0);else if(a.sheet)try{a.sheet.cssRules&&(c=!0)}catch(d){"NS_ERROR_DOM_SECURITY_ERR"===d.name&&(c=!0)}setTimeout(function(){c?b():g(a,b)},1)}function h(){}var i=b.util,j=a.document;if(j){var k,l,m=j.head||j.getElementsByTagName("head")[0]||j.documentElement,n=m.getElementsByTagName("base")[0],o=/\.css(?:\?|$)/i,p=/loaded|complete|undefined/;i.fetch=function(a,b,c){var e=o.test(a),f=document.createElement(e?"link":"script");if(c){var g=i.iF(c)?c(a):c;g&&(f.charset=g)}d(f,b||h),e?(f.rel="stylesheet",f.href=a):(f.async="async",f.src=a),k=f,n?m.insertBefore(f,n):m.appendChild(f),k=null},i.getCurrentScript=function(){if(k)return k;if(l&&"interactive"===l.readyState)return l;for(var a=m.getElementsByTagName("script"),b=0;b<a.length;b++){var c=a[b];if("interactive"===c.readyState)return l=c,c}},i.getScriptAbsoluteSrc=function(a){return a.hasAttribute?a.src:a.getAttribute("src",4)},i.importStyle=function(a,b){if(!b||!j.getElementById(b)){var c=j.createElement("style");b&&(c.id=b),m.appendChild(c),c.styleSheet?c.styleSheet.cssText=a:c.appendChild(j.createTextNode(a))}},i.scriptOnload=e;var q=navigator.userAgent,r=Number(q.replace(/.*AppleWebKit\/(\d+)\..*/,"$1"))<536,s=q.indexOf("Firefox")>0&&!("onload"in document.createElement("link"))}}();var k=/.*(?=\/.*$)/,l=a.location;if(l){var m=l.protocol+"//"+l.host+f(l.pathname);i.pageUri=m}i.resolve=e;var n=i.mix=function(a,b,d,e){if(!a||!b)return a;d===c&&(d=!0);var f,g,h;if(e&&(h=e.length))for(f=0;h>f;f++)g=e[f],g in b&&(d||!(g in a))&&(a[g]=b[g]);else for(g in b)!d&&g in a||(a[g]=b[g]);return a};n(i,function(){var b=Object.prototype.toString,c={iF:function(a){return"[object Function]"===b.call(a)},iA:function(a){return"[object Array]"===b.call(a)},iS:function(a){return"[object String]"===b.call(a)},iPO:function(a){return a&&"[object Object]"===b.call(a)&&!a.nodeType&&!a.setInterval}};return a.console||(a.console={}),console.log||(console.log=function(){}),c}());var o=b.cache={};i.mix(g.prototype,{_use:function(a,b){if(i.iS(a)&&0===a.indexOf("http://"))i.fetch(a,b,j.charset);else{var c=this;i.iS(a)&&(a=[a]);var d,e=[];for(d=0;d<a.length;d++)e[d]=c.require(a[d],c.id);i.iF(b)&&b.apply(null,e)}},_compile:function(){var a,b=this,d=b.factory;b.exports={},delete b.factory,i.iF(d)?(a=d(b.require,b.exports,b),a!==c&&(b.exports=a)):d!==c&&(b.exports=d)}});var p=new g(i.pageUri);b.define=function(a,b,c){(i.iF(b)||i.iPO(b))&&(c=b,b=[]);var d=new g(a,b,c);o[a]=d},b.use=function(a,b){p._use(a,b)},b.define("ent",[],h),"function"==typeof define&&define("ent",[],h)}}(this,this._ent),_ent.define("cc/util/select",[],function(){return function(a,b,c){var d=[];for(var e in a){var f=a[e];f&&d.push(c?c.call(f,f[b]):f[b])}return d}}),_ent.define("cc/templets/p4p/tb/staobao_jizhun2_right",["cc/mustache","cc/templets/meta","cc/dataservice","cc/util/hlight","cc/util/params","cc/util/tps","cc/util/select"],function(a,b){function c(a,b){var c=g.to_html(n,a),d=a.data.ds1.items;a.sHTML=j.light(c,d);var e=d.length;KISSY.each(a.data.ds1.items,function(a){a["z-index"]="z-index:"+e--}),a.renderer.render(a),a.css=m,h.attachStyle(a),b()}function d(a){KISSY.use("node",function(b){var c=a.uid,d=function(a,d){return b.all("string"==typeof a?a.replace(/\./g,"."+c+"-"):a,d)};d(".scores").on("mouseenter",function(){d(".scorelist",this).show()}).on("mouseleave",function(){d(".scorelist",this).hide()}),d(".item").on("mouseenter",function(){d(this).addClass(c+"-item-hover")}).on("mouseleave",function(){d(this).removeClass(c+"-item-hover")})})}function e(a,b){KISSY.use("node",function(c){var d=a.uid,e=function(a,b){return c.all("string"==typeof a?a.replace(/\./g,"."+d+"-"):a,b)};e(".item .imglink img").each(function(){this.attr("src",l.addSize(this.attr("src"),b-20))}),e(".global").removeClass("w200 w240 w270").addClass("w"+b)})}function f(){var b=a("cc/util/select"),c=a("cc/mustache"),d="http://show.re.taobao.com/feature_v1.htm?auction_ids={{auction_ids}}&user_ids={{user_ids}}&feature_names={{feature_names}}&cb={{cb}}";return{merge:function(e,f,g){function h(a){try{delete window[a]}catch(b){window[a]=null}}var i=e.data[f].items;if(!i||!i.length)return g();var j=b(i,"ds_itemid"),k=b(i,"ds_sellerid"),l=["promoPrice","dsrDescribe","dsrService","dsrDeliver","dsrDescribeGap","dsrServiceGap","dsrDeliverGap"],m="tbcc_p4p_trident_"+(e.uid||"").replace(/[^a-z0-9]/gi,"_")+ +new Date,n=c.to_html(d,{auction_ids:j,user_ids:k,feature_names:l,cb:m}),o={};window[m]=function(a){var b=a.auction.concat(a.user);KISSY.each(i,function(a){KISSY.each(b,function(b){if(b.user_id===a.ds_sellerid||b.auction_id===a.ds_itemid)for(var c in b)if("user_id"!==c&&"auction_id"!==c){var d=o[c]?o[c]:"ds_"+c,e=b[c];("dsrDescribeGap"===c||"dsrServiceGap"===c||"dsrDeliverGap"===c)&&(e=+e>=0?"morethan":"lessthan"),a[d]=e}})}),g(),h(m)},a.async(n,function(){window[m]&&(h(m),MBOX.sendP4PError("trident\u9519\u8bef"))})}}}var g=a("cc/mustache"),h=a("cc/templets/meta"),i=a("cc/dataservice"),j=a("cc/util/hlight"),k=a("cc/util/params"),l=a("cc/util/tps"),m=".global {background: #fff;text-align: left;margin-bottom: 20px;font: 12px/1.5 tahoma,arial,\\5b8b\\4f53;border: 1px solid #EDEDED;}.global em,.global div,.global ul,.global li,.global p,.global span,.global a {margin: 0;padding: 0;}.global img {border: 0;}.global ul, .global li {list-style: none;}.global a {text-decoration: none;}.global em {font-style: normal;}.banner {position: relative;height: 40px;line-height: 40px;background-color: #F2F2F2;text-indent: 20px;}.banner a {color: #9D9D9D;}.banner a:hover {color: #555;text-decoration: underline;}.item-list {position: relative;z-index: 1;}.item-list .item {position: relative;padding: 8px 8px 11px 8px;-padding: 8px 6px 11px 6px;border-bottom: solid 1px #e8e8e8;}.item-list .item:last-child {border-bottom: solid 1px #fff;}.item-list .item.item-hover {background-color: #F6F6F6;border-bottom: solid 1px #e8e8e8;}.imgwrap {overflow: hidden;border: 1px solid #e5e5e5;background-color: #fff;text-align: center;}.global\\.w270 .imgwrap{height: 250px;}.global\\.w240 .imgwrap{height: 220px;}.global\\.w230 .imgwrap{height: 210px;}.global\\.w200 .imgwrap{height: 180px;}.imglink {display: table-cell;overflow: hidden;vertical-align: middle;text-align: center;*display: block;*font: normal 12px/1 arial;*font-size: 193px;}.global\\.w270 .imglink{width: 250px;height: 250px;*font-size: 219px;}.global\\.w240 .imglink{width: 220px;height: 220px;*font-size: 193px;}.global\\.w230 .imglink{width: 210px;height: 210px;*font-size: 183px;}.global\\.w200 .imglink{width: 180px;height: 180px;*font-size: 157px;}.item img {vertical-align: middle;}.item .line1{height: 16px;margin: 7px 0;}.line1 .mall {float: left;display: block;width: 16px;height: 16px;background-position: -83px -130px;margin-right: 6px;}.line1 .gold {float: left;display: block;width: 16px;height: 16px;background-position: -187px -57px;margin-right: 6px;}.line1 .redtitle {display: block;overflow: hidden;color: #3d3d3d;height: 16px;line-height: 16px;}.line1 .redtitle:hover {color: #f40;text-decoration: underline;}.redtitle span {color: #f40;}.item .line2 {height: 18px;line-height: 18px;overflow: hidden;}.item .price {float: left;color: #f40;text-align: center;font: 700 18px Verdana,Arial;line-height: 18px;}.global\\.w200 .item .price{font: 700 16px Verdana,Arial;}.item .price:hover {color: #f40;}.price em {font-family: Arial;font-weight: normal;margin-right: 3px;}.price .price-old {margin-left: 8px;}.price .price-old,.price .price-old em {color: #AAA;text-decoration: line-through;font-weight: normal;font-size: 12px;}.item .postfree {float: right;display: block;width: 37px;color: #999}.item .postfree:hover {color: #f40;text-decoration: underline;}.item .line3 {position: relative;margin: 8px 0 0 0;height: 18px;}.item .sell {float: left;display: block;height: 18px;line-height: 18px;color: #888;}.item .sell:hover {color: #f40;text-decoration: underline;}.item .scores {position: relative;float: right;width: 99px;height: 18px;}.scores .score-desc {position: absolute;top: 0;left: 0;display: block;padding-left: 5px;width: 94px;height: 16px;border: 1px solid #CCC;color: #999;text-decoration: none;line-height: 16px;}.score-desc .arrow{background-position: -107px -285px;}.scores .scorelist {position: absolute;top: 0;left: 0;display: none;width: 99px;height: 54px;border: 1px solid #CCC;background-color: #fff;}.scorelist .score {position: relative;display: block;margin-bottom: 2px;padding-left: 5px;width: 94px;height: 16px;color: #999;text-decoration: none;line-height: 16px;}.score .arrow {background-position: -122px -285px;}.scorelist .lessthan {color: #20730f;}.scorelist .morethan {color: #b30f00;}.global .foot {position: relative;height: 45px;}.foot a {position: absolute;right: 10px;width: 66px;height: 25px;border-radius: 1px;background: #F40;color: #FFF;text-align: center;text-decoration: none;line-height: 25px;top: 9px;}.foot a:hover {background: #f82800;}.gold, .mall {background: url(http://g.tbcdn.cn/tb/bsrp/0.12.0/assets/images/normal/service.png);-background-image: url(http://g.tbcdn.cn/tb/bsrp/0.12.0/assets/images/png8/service.png);}.score-desc .arrow,.score .arrow {position: absolute;top: 7px;right: 8px;width: 5px;height: 3px;background-image: url(http://g.tbcdn.cn/tb/bsrp/0.6.2/assets/images/normal/btn.png);-background-image: url(http://g.tbcdn.cn/tb/bsrp/0.6.2/assets/images/png8/btn.png);}",n='<div class="{{uid}}-global w{{width}}"><div class="{{uid}}-banner"><a href="http://re.taobao.com/search?keyword={{keyword}}&frontcatid={{frontcatid}}&isinner=1&refpid={{refpid}}" target="_blank">\u638c\u67dc\u70ed\u5356</a></div><ul class="{{uid}}-item-list">{{#data}}{{#ds1}}{{#items}}<li class="{{uid}}-item" style="{{z-index}}"><div class="{{uid}}-imgwrap"><a class="{{uid}}-imglink" target="_blank" href="{{ds_clickurl}}" title="{{ds_title}}">{{#ds_img}}<img src="{{src}}">{{/ds_img}}</a></div><div class="{{uid}}-line1">{{#ds_istmall}}<a class="{{uid}}-mall" target="_blank" href="{{ds_clickurl}}" title="\u5929\u732b"></a>{{/ds_istmall}}{{#ds_isgold}}<a class="{{uid}}-gold" target="_blank" href="{{ds_clickurl}}" title="\u91d1\u724c\u5356\u5bb6"></a>{{/ds_isgold}}<a target="_blank" class="{{uid}}-redtitle" href="{{ds_clickurl}}" title="{{ds_title}}">{{ds_title}}</a></div><div class="{{uid}}-line2"><a target="_blank" href="{{ds_clickurl}}" class="{{uid}}-price">{{#ds_promoPrice}}<span><em>&yen;</em>{{ds_promoPrice}}</span><span class="{{uid}}-price-old"><em>&yen;</em>{{ds_price}}</span>{{/ds_promoPrice}}{{^ds_promoPrice}}<span><em>&yen;</em>{{ds_price}}</span>{{/ds_promoPrice}}</a>{{#ds_free}}<a class="{{uid}}-postfree" target="_blank" href="{{ds_clickurl}}">\u514d\u8fd0\u8d39</a>{{/ds_free}}</div><div class="{{uid}}-line3"><a target="_blank" href="{{ds_clickurl}}" class="{{uid}}-sell">\u9500\u91cf: <em>{{ds_sell}}</em></a>{{#ds_dsrDescribe}}<div class="{{uid}}-scores"><div class="{{uid}}-score-desc" href="javascript:;"><span>\u5982\u5b9e\u63cf\u8ff0: </span><span class="{{uid}}-num">{{ds_dsrDescribe}}</span><span class="{{uid}}-arrow"></span></div><div class="{{uid}}-scorelist"><div class="{{uid}}-score {{uid}}-{{ds_dsrDescribeGap}}"><span>\u5982\u5b9e\u63cf\u8ff0: </span><span class="{{uid}}-num">{{ds_dsrDescribe}}</span><span class="{{uid}}-arrow"></span></div><div class="{{uid}}-score {{uid}}-{{ds_dsrServiceGap}}"><span>\u670d\u52a1\u6001\u5ea6: </span><span class="{{uid}}-num">{{ds_dsrService}}</span></div><div class="{{uid}}-score {{uid}}-{{ds_dsrDeliverGap}}"><span>\u53d1\u8d27\u901f\u5ea6: </span><span class="{{uid}}-num">{{ds_dsrDeliver}}</span></div></div></div>{{/ds_dsrDescribe}}</div></li>{{/items}}{{/ds1}}{{/data}}</ul><div class="{{uid}}-foot"><a href="http://re.taobao.com/search?keyword={{keyword}}&frontcatid={{frontcatid}}&isinner=1&refpid={{refpid}}" target="_blank">\u66f4\u591a\u70ed\u5356</a></div></div>';
b.render=function(a,g){var h=a.datasource.ds1,j=a.id;if(window.MBOX&&MBOX[j]){var l=MBOX[j];l.reload=function(){b.render(a,g)},l.resize=function(b){e(a,b)},a.width=l.width;var m={270:250,240:220,200:180,230:210};h.qp_imgsize=m[l.width]}else h.ds_host=k.replace(h.ds_host,{keyword:"%C1%AC%D2%C2%C8%B9"}),a.width=270;i.getData(a,"ds1",function(){c(a,g),a.qs&&(a.keyword=a.qs[0].keyword,a.refpid=a.qs[0].pid,a.frontcatid=a.qs[0].frcatid),f().merge(a,"ds1",function(){c(a,g),d(a)})})}}),_ent.define("cc/templets/p4p/tb/staobao_07_09_bottom",["cc/mustache","cc/templets/meta","cc/dataservice","cc/util/hlight","cc/util/params","cc/util/tps"],function(a,b){function c(a,b){var c=f.to_html(m,a),d=a.data.ds1.items;a.sHTML=i.light(c,d),a.renderer.render(a),a.css=l,g.attachStyle(a),b()}function d(a){KISSY.use("node",function(b){var c=a.uid,d=function(a,d){return b.all("string"==typeof a?a.replace(/\./g,"."+c+"-"):a,d)};d(".item").on("mouseenter",function(){d(this).addClass("item-hover")}).on("mouseleave",function(){d(this).removeClass("item-hover")})})}function e(a,b){KISSY.use("node",function(c){var d=a.uid,e=function(a,b){return c.all("string"==typeof a?a.replace(/\./g,"."+d+"-"):a,b)},f={1350:250,1190:220,1e3:180,1180:220};e(".item .imglink img").each(function(){this.attr("src",k.addSize(this.attr("src"),f[b]))}),e(".global").removeClass("w1350 w1190 w1000").addClass("w"+b)})}var f=a("cc/mustache"),g=a("cc/templets/meta"),h=a("cc/dataservice"),i=a("cc/util/hlight"),j=a("cc/util/params"),k=a("cc/util/tps"),l=".global {background: #fff;text-align: left;margin: 20px 0;font: 12px/1.5 tahoma,arial,\\5b8b\\4f53;border: 1px solid #EDEDED;}.global\\.w1350 {height: 500px;}.global\\.w1190 {height: 440px;}.global\\.w1180 {height: 440px;}.global\\.w1000 {height: 400px;}.global em,.global div,.global ul,.global li,.global p,.global span,.global a {margin: 0;padding: 0;}.global img {border: 0;}.global ul, .global li {list-style: none;}.global a {text-decoration: none;}.global em {font-style: normal;font-family: Arial;}.global .textlink-bar {overflow: hidden;padding: 0 10px;height: 35px;line-height: 35px;background: #f5f5f5;}.textlink-bar .banner {float: left;height: 35px;text-indent: 4px;line-height: 35px;}.banner a {color: #f40;font-weight: 600;font-size: 15px;}.banner a:hover {color: #f40;}.textlink-bar .textlink {float: left;overflow: hidden;margin-left: 30px;width: 400px;height: 35px;}.global\\.w1350 .textlink-bar .textlink {width: 1000px;}.global\\.w1190 .textlink-bar .textlink {width: 800px;}.global\\.w1180 .textlink-bar .textlink {width: 800px;}.global\\.w1000 .textlink-bar .textlink {width: 600px;}.textlink li {float: left;margin-right: 25px;}.textlink a:link,.textlink a:visited {color: #000;}.textlink a:hover,.textlink a:active {color: #f40;}.textlink-bar .zhitongche {color: #000;position: relative;float: right;height: 35px;line-height: 35px;}.zhitongche a {color: #000;}.zhitongche a:hover {color: #000;}.global .line {margin-bottom: 10px;width: 100%;height: 2px;font-size: 0;}.line .left {float: left;width: 88px;height: 2px;background: #f40;}.line .right {height: 2px;background: #dedede;}.global .item-list {position: relative;z-index: 1;margin-right: -50px;padding: 0 14px;}.global\\.w1350 .item-list{height: 380px;}.global\\.w1190 .item-list{height: 350px;}.global\\.w1180 .item-list{height: 350px;}.global\\.w1000 .item-list{height: 305px;}.item-list .item {position: relative;border: 1px solid #EDEDED;float: left;}.item-list .item\\.item-hover {border: 1px solid #f40;transition: border-color 0.2s ease-in;}.global\\.w1350 .item{width: 250px;margin-right: 15px;}.global\\.w1190 .item{width: 220px;margin-right: 13px;}.global\\.w1180 .item{width: 220px;margin-right: 10px;}.global\\.w1000 .item{width: 180px;margin-right: 15px;}.imgwrap {overflow: hidden;background-color: #fff;text-align: center;}.global\\.w1350 .imgwrap{height: 250px;}.global\\.w1190 .imgwrap{height: 220px;}.global\\.w1180 .imgwrap{height: 220px;}.global\\.w1000 .imgwrap{height: 180px;}.imglink {display: table-cell;overflow: hidden;vertical-align: middle;text-align: center;*display: block;*font: normal 12px/1 arial;*font-size: 193px;}.global\\.w1350 .imglink{width: 250px;height: 250px;*font-size: 219px;}.global\\.w1190 .imglink{width: 220px;height: 220px;*font-size: 193px;}.global\\.w1000 .imglink{width: 180px;height: 180px;*font-size: 157px;}.item img {vertical-align: middle;}.item .line2{height: 30px;margin: 0 10px;}.line2 .redtitle {display: block;overflow: hidden;color: #3d3d3d;height: 30px;line-height: 15px;}.line2 .redtitle:hover {color: #f40;text-decoration: underline;}.redtitle span {color: #f40;}.item .line1 {height: 18px;line-height: 18px;margin: 10px;overflow: hidden;}.item .price {float: left;color: #f40;text-align: center;font: 700 18px Verdana,Arial;line-height: 18px;}.global\\.w1000 .item .price{font: 700 16px Verdana,Arial;}.item .price:hover {color: #f40;}.price em {font-family: Arial;font-weight: normal;margin-right: 3px;}.global\\.w1000 .price em {font-size: 16px;}.price .price-old {margin-left: 8px;}.price .price-old,.price .price-old em {color: #AAA;text-decoration: line-through;font-weight: normal;font-size: 12px;}.item .postfree {float: right;display: block;margin-top: 2px;width: 27px;height: 14px;background-position: -5px -79px;}.item .line3 {position: relative;margin: 7px 10px;height: 18px;overflow: hidden;}.item .sell {float: right;display: block;height: 18px;line-height: 18px;color: #888;}.item .shop {float: left;display: block;height: 18px;line-height: 18px;color: #888;text-decoration: underline;}.global\\.w270 .shop{max-width: 180px;}.global\\.w240 .shop{max-width: 150px;}.global\\.w230 .shop{max-width: 140px;}.global\\.w200 .shop{max-width: 110px;}.item .sell:hover {color: #888;}.item .line4{margin: 10px;height: 16px;width: 50px;overflow: hidden;}.line4 .mall {float: left;display: block;width: 16px;height: 16px;background-position: -83px -130px;margin-right: 6px;}.line4 .gold {float: left;display: block;width: 16px;height: 16px;background-position: -187px -57px;margin-right: 6px;}.line4 .hot {float: left;display: block;width: 50px;height: 16px;background-position: -5px -53px;margin-right: 6px;}.global .foot {position: relative;margin-top: 15px;height: 45px;}.foot a {position: absolute;right: 12px;width: 66px;height: 25px;border-radius: 1px;background: #F40;color: #FFF;text-align: center;text-decoration: none;line-height: 25px;}.foot a:hover {background: #f82800;}.postfree, .mall, .gold, .hot {background: url(http://g.tbcdn.cn/tb/bsrp/0.10.0/assets/images/normal/service.png);-background-image: url(http://g.tbcdn.cn/tb/bsrp/0.10.0/assets/images/png8/service.png);}",m='<div class="{{uid}}-global w{{width}}"><div class="{{uid}}-textlink-bar"><div class="{{uid}}-banner"><a href="http://re.taobao.com/search?keyword={{keyword}}&frontcatid={{frontcatid}}&isinner=1&refpid={{refpid}}" target="_blank">\u638c\u67dc\u70ed\u5356</a></div><div class="{{uid}}-zhitongche"><a href="http://zhitongche.taobao.com" target="_blank">\u6211\u4e5f\u8981\u51fa\u73b0\u5728\u8fd9\u91cc</a></div><div id="j-{{uid}}-textlink" class="{{uid}}-textlink">{{#data}}{{#ds2}}<ul>{{#keywords}}<li><a href="{{ds_clickurl}}" target="_blank">{{ds_title}}</a></li>{{/keywords}}</ul>{{/ds2}}{{/data}}</div></div><div class="{{uid}}-line"><div class="{{uid}}-left"></div><div class="{{uid}}-right"></div></div><ul class="{{uid}}-item-list">{{#data}}{{#ds1}}{{#items}}<li class="{{uid}}-item"><div class="{{uid}}-imgwrap"><a class="{{uid}}-imglink" target="_blank" href="{{ds_clickurl}}" title="{{ds_title}}">{{#ds_img}}<img src="{{src}}">{{/ds_img}}</a></div><div class="{{uid}}-line1"><a target="_blank" href="{{ds_clickurl}}" class="{{uid}}-price">{{#ds_promo}}<span><em>&yen;</em>{{ds_promo}}</span><span class="{{uid}}-price-old"><em>&yen;</em>{{ds_price}}</span>{{/ds_promo}}{{^ds_promo}}<span><em>&yen;</em>{{ds_price}}</span>{{/ds_promo}}</a>{{#ds_free}}<a class="{{uid}}-postfree" target="_blank" href="{{ds_clickurl}}" title="\u5305\u90ae"></a>{{/ds_free}}</div><div class="{{uid}}-line2"><a target="_blank" class="{{uid}}-redtitle" href="{{ds_clickurl}}" title="{{ds_title}}">{{ds_title}}</a></div><div class="{{uid}}-line3"><a target="_blank" href="{{ds_clickurl}}" class="{{uid}}-sell">\u9500\u91cf: <em>{{ds_sell}}</em></a><a target="_blank" href="{{ds_clickurl}}" class="{{uid}}-shop">{{ds_wangwang}}</a></div><div class="{{uid}}-line4">{{#ds_istmall}}<a class="{{uid}}-mall" target="_blank" href="{{ds_clickurl}}" title="\u5929\u732b"></a>{{/ds_istmall}}{{#ds_isgold}}<a class="{{uid}}-gold" target="_blank" href="{{ds_clickurl}}" title="\u91d1\u724c\u5356\u5bb6"></a>{{/ds_isgold}}<div><a class="{{uid}}-hot" target="_blank" href="{{ds_clickurl}}" title="\u638c\u67dc\u70ed\u5356\u5b9d\u8d1d"></a></div></div></li>{{/items}}{{/ds1}}{{/data}}</ul><div class="{{uid}}-foot"><a href="http://re.taobao.com/search?keyword={{keyword}}&frontcatid={{frontcatid}}&isinner=1&refpid={{refpid}}" target="_blank">\u66f4\u591a\u70ed\u5356</a></div></div>';b.render=function(a,f){var g=a.datasource.ds1,i=a.datasource.ds2,k=a.id;if(window.MBOX&&MBOX[k]){var l=MBOX[k];l.reload=function(){b.render(a,f)},l.resize=function(b){e(a,b)},a.width=l.width;var m={1350:250,1190:220,1e3:180,1180:220};g.qp_imgsize=m[l.width]}else g.ds_host=j.replace(g.ds_host,{keyword:"%C1%AC%D2%C2%C8%B9"}),i.ds_host=j.replace(i.ds_host,{keyword:"%C1%AC%D2%C2%C8%B9",pid:1}),a.width=1190;h.getData(a,"ds1",function(){a.qs&&(a.keyword=a.qs[0].keyword,a.refpid=a.qs[0].pid,a.frontcatid=a.qs[0].frcatid),c(a,f),h.getData(a,"ds2",function(){c(a,f),d(a)})})}}),_ent.define("cc/datasource/p4p/textlink_search",["cc/util/params"],function(a,b){function c(a){var b,c,d,e,f=a.columns,g=a.data,h=[];for(b=0;b<g.length;b++){for(c=g[b],e={},d=0;d<f.length;d++)e[f[d]]=c[d];e.ds_hot="1"==e.ds_hot,h[b]=e}return h}var d=a("ent"),e=a("cc/util/params");b.getData=function(b,f,g){function h(a){try{delete window[a]}catch(b){window[a]=null}}var i=b.id,j=b.datasource[f],k=f.match(/\d+/)[0],l=d.substitute(j.ds_host,j),m="tbcc_hotword_fn"+(b.uid||"").replace(/[^a-z0-9]/gi,"_")+ +new Date;window.MBOX&&MBOX[i].qs&&(b.qs=MBOX[i].qs,l=e.replace(l,b.qs[k-1])),l=e.replace(l,{callback:m}),window[m]=function(a){b.data||(b.data={});var d=b.data[f];d||(d=b.data[f]={}),d.keywords=d.items=c(a),g(),h(m)},a.async(l,function(){window[m]&&(h(m),g())},"gbk")}}),_ent.define("cc/datasource/b2b",["cc/util/tps","cc/util/params","./p4p/rosetta"],function(a,b){{var c=(a("cc/util/tps"),a("ent")),d=a("cc/util/params");a("./p4p/rosetta")}b.getData=function(b,e,f){function g(a){var c=b.datasource[e].qp_imgsize;return h(a,function(a){return a.ds_title=a.TITLE,a.ds_raw_title=a.TITLE.replace(/<[^>]*>/gi,""),a.ds_clickurl=a.EURL,a.ds_price=a.GOODSPRICE?(a.GOODSPRICE/100).toFixed(2):"\u4ef7\u683c\u9762\u8bae",a.ds_img={src:a.TBGOODSLINK.replace(/\d+x\d+.jpg$/,c+"x"+c+".jpg")},a})}function h(a,b){if(a.map)return a.map(b);for(var c=Object(a),d=c.length>>>0,e=Array(d),f=0;d>f;f++)f in c&&(e[f]=b.call(a,c[f],f,c));return e}var i=b.id,j=b.uid,k=b.datasource[e],l=e.match(/\d+/)[0],m="tbcc_p4p_"+j.replace(/[^a-z0-9]/gi,"_")+ +new Date,n=c.substitute(k.ds_host,{qp_callback:m});if(window.MBOX&&MBOX[i].qs){b.qs=MBOX[i].qs;var o=b.qs[l-1];n=d.replace(n,{curpage:o.curpage,query:o.query,pageid:o.pageid})}window[m]=function(a){window[m]=a.data},a.async(n,function(){b.data=b.data||{},b.data[e]=b.data[e]||{},b.data[e].items=g(window[m]);try{delete window[m]}catch(a){window[m]=null}b.data[e].items?f():b.emit("render",b)})}}),_ent.define("cc/templets/p4p/tb/staobao_09_10_bottom",["cc/mustache","cc/templets/meta","cc/dataservice","cc/util/params"],function(a,b){function c(a,b){var c=f.to_html(k,a);a.data.ds1.items+""&&(a.sHTML=c,document.getElementById("J_shopkeeper_bottom")&&(document.getElementById("J_shopkeeper_bottom").innerHTML='<tbcc id="tbcc-c-'+a.uid+'" style="display:none"><tbcc></tbcc></tbcc>'),a.renderer.render(a),a.css=j,g.attachStyle(a),b())}function d(a){KISSY.use("node",function(b){var c=a.uid,d=function(a,d){return b.all("string"==typeof a?a.replace(/\./g,"."+c+"-"):a,d)};d(".item").on("mouseenter",function(){d(this).addClass("item-hover")}).on("mouseleave",function(){d(this).removeClass("item-hover")})})}function e(a,b){KISSY.use("node",function(c){var d=a.uid,e=function(a,b){return c.all("string"==typeof a?a.replace(/\./g,"."+d+"-"):a,b)},f={1350:250,1190:220,1e3:180,1180:220};e(".item .imglink img").each(function(){this.attr("src",this.attr("src").replace(/\d+x\d+.jpg$/,f[b]+"x"+f[b]+".jpg"))}),e(".global").removeClass("w1350 w1190 w1000").addClass("w"+b)})}var f=a("cc/mustache"),g=a("cc/templets/meta"),h=a("cc/dataservice"),i=a("cc/util/params"),j=".global {background: #fff;text-align: left;margin: 20px 0;font: 12px/1.5 tahoma,arial,\\5b8b\\4f53;border: 1px solid #EDEDED;}.global\\.w1350 {height: 450px;}.global\\.w1190 {height: 390px;}.global\\.w1180 {height: 390px;}.global\\.w1000 {height: 350px;}.global em,.global div,.global ul,.global li,.global p,.global span,.global a {margin: 0;padding: 0;}.global img {border: 0;}.global ul, .global li {list-style: none;}.global a {text-decoration: none;}.global em {font-style: normal;font-family: Arial;}.global .textlink-bar {overflow: hidden;padding: 0 10px;height: 35px;line-height: 35px;background: #f5f5f5;}.textlink-bar .banner {float: left;height: 35px;text-indent: 4px;line-height: 35px;}.banner a {color: #f40;font-weight: 600;font-size: 15px;}.banner a:hover {color: #f40;}.textlink-bar .textlink {float: left;overflow: hidden;margin-left: 30px;width: 400px;height: 35px;}.global\\.w1350 .textlink-bar .textlink {width: 1000px;}.global\\.w1190 .textlink-bar .textlink {width: 800px;}.global\\.w1180 .textlink-bar .textlink {width: 800px;}.global\\.w1000 .textlink-bar .textlink {width: 600px;}.textlink li {float: left;margin-right: 25px;}.textlink a:link,.textlink a:visited {color: #000;}.textlink a:hover,.textlink a:active {color: #f40;}.textlink-bar .zhitongche {color: #000;position: relative;float: right;height: 35px;line-height: 35px;}.zhitongche a {color: #000;}.zhitongche a:hover {color: #000;}.global .line {margin-bottom: 10px;width: 100%;height: 2px;font-size: 0;}.line .left {float: left;width: 88px;height: 2px;background: #f40;}.line .right {height: 2px;background: #dedede;}.global .item-list {position: relative;z-index: 1;margin-right: -50px;padding: 0 14px;}.global\\.w1350 .item-list{height: 325px;}.global\\.w1190 .item-list{height: 295px;}.global\\.w1180 .item-list{height: 295px;}.global\\.w1000 .item-list{height: 245px;}.item-list .item {position: relative;border: 1px solid #EDEDED;float: left;}.item-list .item\\.item-hover {border: 1px solid #f40;transition: border-color 0.2s ease-in;}.global\\.w1350 .item{width: 250px;margin-right: 15px;}.global\\.w1190 .item{width: 220px;margin-right: 13px;}.global\\.w1180 .item{width: 220px;margin-right: 10px;}.global\\.w1000 .item{width: 180px;margin-right: 15px;}.imgwrap {overflow: hidden;background-color: #fff;text-align: center;}.global\\.w1350 .imgwrap{height: 250px;}.global\\.w1190 .imgwrap{height: 220px;}.global\\.w1180 .imgwrap{height: 220px;}.global\\.w1000 .imgwrap{height: 180px;}.imglink {display: table-cell;overflow: hidden;vertical-align: middle;text-align: center;*display: block;*font: normal 12px/1 arial;*font-size: 193px;}.global\\.w1350 .imglink{width: 250px;height: 250px;*font-size: 219px;}.global\\.w1190 .imglink{width: 220px;height: 220px;*font-size: 193px;}.global\\.w1180 .imglink{width: 220px;height: 220px;*font-size: 193px;}.global\\.w1000 .imglink{width: 180px;height: 180px;*font-size: 157px;}.item img {vertical-align: middle;}.item .line2{height: 30px;margin: 10px 10px;}.line2 .redtitle {display: block;overflow: hidden;color: #3d3d3d;height: 30px;line-height: 15px;}.line2 .redtitle:hover {color: #f40;text-decoration: underline;}.redtitle span {color: #f40;}.item .line1 {height: 18px;line-height: 18px;margin: 10px;overflow: hidden;}.item .price {float: left;color: #f40;text-align: center;font: 700 18px Verdana,Arial;line-height: 18px;}.global\\.w1000 .item .price{font: 700 16px Verdana,Arial;}.item .price:hover {color: #f40;}.price em {font-family: Arial;font-weight: normal;margin-right: 3px;}.global\\.w1000 .price em {font-size: 16px;}.price .price-old {margin-left: 8px;}.price .price-old,.price .price-old em {color: #AAA;text-decoration: line-through;font-weight: normal;font-size: 12px;}.global .foot {position: relative;margin-top: 15px;height: 45px;}.foot a {position: absolute;right: 12px;width: 66px;height: 25px;border-radius: 1px;background: #F40;color: #FFF;text-align: center;text-decoration: none;line-height: 25px;}.foot a:hover {background: #f82800;}",k='<div class="{{uid}}-global w{{width}}"><div class="{{uid}}-textlink-bar"><div class="{{uid}}-banner"><a href="http://re.taobao.com/search?keyword={{keyword}}&frontcatid={{frontcatid}}&isinner=1&refpid={{refpid}}" target="_blank">\u6211\u8981\u8fdb\u8d27</a></div><div class="{{uid}}-zhitongche"><a href="http://pro.1688.com" target="_blank">\u6211\u4e5f\u8981\u51fa\u73b0\u5728\u8fd9\u91cc</a></div><div id="j-{{uid}}-textlink" class="{{uid}}-textlink">{{#data}}{{#ds2}}<ul>{{#keywords}}<li><a href="{{ds_clickurl}}" target="_blank">{{ds_title}}</a></li>{{/keywords}}</ul>{{/ds2}}{{/data}}</div></div><div class="{{uid}}-line"><div class="{{uid}}-left"></div><div class="{{uid}}-right"></div></div><ul class="{{uid}}-item-list">{{#data}}{{#ds1}}{{#items}}<li class="{{uid}}-item"><div class="{{uid}}-imgwrap"><a class="{{uid}}-imglink" target="_blank" href="{{ds_clickurl}}" title="{{ds_raw_title}}">{{#ds_img}}<img src="{{src}}">{{/ds_img}}</a></div><div class="{{uid}}-line1"><a target="_blank" href="{{ds_clickurl}}" class="{{uid}}-price"><span><em>&yen;</em>{{ds_price}}</span></a>{{#ds_free}}<a class="{{uid}}-postfree" target="_blank" href="{{ds_clickurl}}" title="\u5305\u90ae"></a>{{/ds_free}}</div><div class="{{uid}}-line2"><a target="_blank" class="{{uid}}-redtitle" href="{{ds_clickurl}}" title="{{ds_raw_title}}">{{{ds_title}}}</a></div></li>{{/items}}{{/ds1}}{{/data}}</ul><div class="{{uid}}-foot"><a href="http://re.taobao.com/search?keyword={{keyword}}&frontcatid={{frontcatid}}&isinner=1&refpid={{refpid}}" target="_blank">\u66f4\u591a\u70ed\u5356</a></div></div>';b.render=function(a,f){var g=a.datasource.ds1,j=a.datasource.ds2,k=a.id;if(window.MBOX&&MBOX[k]){var l=MBOX[k];l.reload=function(){b.render(a,f)},l.resize=function(b){e(a,b)},a.width=l.width;var m={1350:250,1190:220,1e3:180,1180:220};g.qp_imgsize=m[l.width]}else g.ds_host=i.replace(g.ds_host,{keyword:"%C1%AC%D2%C2%C8%B9"}),j.ds_host=i.replace(j.ds_host,{keyword:"%C1%AC%D2%C2%C8%B9",pid:1}),a.width=a.info.width;h.getData(a,"ds1",function(){a.qs&&(a.keyword=a.qs[0].keyword,a.refpid=a.qs[0].refpid,a.frontcatid=a.qs[0].frcatid),c(a,f),h.getData(a,"ds2",function(){c(a,f),d(a)})})}}),_ent.define("cc/util/grade",[],function(a,b){var c="b_red_1.gif";b.getGrade=function(a,b){10>=a?(c="b_red_1.gif",b=1):40>=a?(c="b_red_2.gif",b=2):90>=a?(c="b_red_3.gif",b=3):150>=a?(c="b_red_4.gif",b=4):250>=a?(c="b_red_5.gif",b=5):500>=a?(c="s_blue_1.gif",b=6):1e3>=a?(c="s_blue_2.gif",b=7):2e3>=a?(c="s_blue_3.gif",b=8):5e3>=a?(c="s_blue_4.gif",b=9):1e4>=a?(c="s_blue_5.gif",b=10):2e4>=a?(c="s_cap_1.gif",b=11):5e4>=a?(c="s_cap_2.gif",b=12):1e5>=a?(c="s_cap_3.gif",b=13):2e5>=a?(c="s_cap_4.gif",b=14):5e5>=a?(c="s_cap_5.gif",b=15):1e6>=a?(c="s_crown_1.gif",b=16):2e6>=a?(c="s_crown_2.gif",b=17):5e6>=a?(c="s_crown_3.gif",b=18):1e7>=a?(c="s_crown_4.gif",b=19):a>1e7&&(c="s_crown_5.gif",b=20);var d="http://pics.taobaocdn.com/newrank/"+c;return b?[d,b]:d}}),_ent.define("cc/datasource/p4p/rosetta",["cc/util/tps","cc/util/grade"],function(require,exports){function str2obj(a){var b,c,d=a.split(";")||"",e={};if(!d)return e;for(b=0;b<d.length;b++)c=d[b].split(":"),e[c[0]]=c[1]||"";return e}function ds_format_item(o,config){var k,v,r={},size,width,height,img,imgsize=config.imgsize,decimal=config.decimal,adgextension=str2obj(o.ADGEXTENSION||""),sellerextension=str2obj(o.SELLEREXTENSION||""),tps_alias=_tps.alias(imgsize);"undefined"==typeof decimal&&(decimal=2);for(k in DS_MAP)if(v=DS_MAP[k],"ds_img"==v&&o[k])img=r[v]={},img.src=imgsize?_tps.addSize(o[k],imgsize):o[k],o.DISPLAY_RESOLUTION&&(size=o.DISPLAY_RESOLUTION.split("*"),width=parseInt(size[0],10),height=parseInt(size[1],10),img.width=width||0,img.height=height||0);else if("ds_price"==v)r[v]=o[k]&&NUMBER_PTN.test(o[k])?(o[k]/100).toFixed(decimal):o[k];else if("ds_free"==v)r[v]=+adgextension[k]||"";else if("ds_rank"==v){var grade=_grade.getGrade(o[k],!0);r[v]=grade[0],r.ds_grade=grade[1]}else if("ds_mall"==v)r[v]=o[k],r.ds_istmall="1"===o[k];else if("ds_isglobal"==v)r[v]="1"===o[k];else if("ds_isgold"==v)r[v]="1"===o[k];else if("ds_sevenday"==v)r[v]=+sellerextension[k]||"";else if("ds_matchScore"==v)r[v]=sellerextension[k]||"";else if("ds_creatives"===v){var JSON=window.JSON,tmp;o[k]&&(o[k].niutiedata||o[k].NIUTIEDATA)&&(tmp=o[k].niutiedata||o[k].NIUTIEDATA||"{}",JSON&&JSON.parse?r.ds_niutiedata=JSON.parse(window.unescape(tmp).replace(/&quot;/g,'"')):(eval("var niutieData = "+window.unescape(tmp).replace(/&quot;/g,'"')),r.ds_niutiedata=niutieData)),!img&&o[k].IMGURL&&(r.ds_img={src:o[k].IMGURL.replace(/[^_]+\.(jpg|gif)$/,"")+tps_alias+".jpg"},r.ds_title=o[k].TITLE),r[v]={}}else r[v]=o[k];return r}function ds_format(a,b){var c,d=[];if(!ent.iA(a))return a;for(c=0;c<a.length;c++)d.push(ds_format_item(a[c],b));return d}var ent=require("ent"),_tps=require("cc/util/tps"),_grade=require("cc/util/grade"),DS_MAP={TBGOODSLINK:"ds_img",EURL:"ds_clickurl",TITLE:"ds_title",GOODSPRICE:"ds_price",SALEPRICE:"ds_promo",GOLDENSELLER:"ds_isgold",SELL:"ds_sell",isPostFree:"ds_free",LOCATION:"ds_location",WANGWANGID:"ds_wangwang",sevendaysRefundment:"ds_sevenday",ISMALL:"ds_mall",RESOURCEID:"ds_itemid",SHOPID:"ds_shopid",SELLERID:"ds_sellerid",ISGLOBAL:"ds_isglobal",REDKEYS:"ds_redkeys",REDKEY:"ds_redkeys",matchScore:"ds_matchScore",STATICSCORE:"ds_score",NIUTIEDATA:"ds_niutiedata",SWORD:"ds_sword",SWURL:"ds_swurl",CREATIVEELEMENTS:"ds_creatives",GRADE:"ds_rank",COMMENT:"ds_comment"},NUMBER_PTN=/^\d+$/;exports.format=ds_format}),_ent.define("cc/datasource/mbox_staobao",["cc/util/tps","cc/util/params","./p4p/rosetta"],function(a,b){var c=(a("cc/util/tps"),a("ent")),d=a("cc/util/params"),e=a("./p4p/rosetta");b.getData=function(b,f,g){function h(a){var c={imgsize:b.datasource[f].qp_imgsize};return e.format(a,c)}var j=b.id,k=b.uid;if(window.MBOX&&MBOX[j].data){b.data=MBOX[j].data;for(i in b.data){var l=b.data[i];b.data[i]={items:h(l)}}b.qs=MBOX[j].qs,MBOX[j].data=null,g()}else{var m=b.datasource[f],n=f.match(/\d+/)[0],o="tbcc_p4p_"+k.replace(/[^a-z0-9]/gi,"_")+ +new Date,p=c.substitute(m.ds_host,{qp_count:m.qp_count,qp_callback:o}),q=document.getElementById("tbcc-c-"+b.uid).getAttribute("data-args");q&&(p=d.replace(p,d.get(q))),window.MBOX&&MBOX[j].qs&&(b.qs=MBOX[j].qs,p=d.replace(p,b.qs[n-1])),a.async(p,function(){b.data=b.data||{},b.data[f]=b.data[f]||{},b.data[f].items=h(window[o]);try{delete window[o]}catch(a){window[o]=null}b.data[f].items?g():b.emit("render",b)})}}}),_ent.define("cc/util/tps",[],function(a,b){function c(a,c){return a.replace(/(jpg|gif|png|jpeg)_[^_]+\.(?:jpg|gif|png|jpeg)(?:_.webp)?$/,"$1")+"_"+b.alias(c)+".jpg"+(e?"_.webp":"")}var d=new Image;d.src="data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA";var e=1===d.height,f=[[24,24],[30,30],[40,40],[60,60],[63,63,"60x30"],[70,70],[80,80,"sum"],[65,65,"81x65"],[84,84,"80x40"],[90,90,"110x90"],[100,100],[110,110],[120,120,"m"],[130,130],[145,145],[160,160],[170,170],[180,180],[190,190],[200,200],[210,210],[220,220],[230,230],[240,240],[250,250],[270,270],[300,300],[310,310],[315,315],[320,320],[620,620,"620x10000"],[670,670]];b.alias=function(a){var b,c,d=f,e=d.length,g=parseInt(a,10);for(b=0;e>b&&(c=d[b],c[0]!=g);b++);return b===e?"":c[2]||g+"x"+g},b.addSize=function(a,b){if(!a)return a;if(!a.push)return c(a,b);for(var d=0;l=a.length,l>d;d++)a[d].src=c(a[d].src,b)}}),_ent.define("cc/util/params",[],function(a,b){var c=a("ent");b.replace=function(a,b,d){if(!b)return a;var e,f,g,h,i,j="=",k="?",l="&",m="#",n=!!d&&!!d.force,o=a.split(k),p=o[0],q=(o[1]||"").split(m),r=q[1]||"";for(b=c.mix({},b),q=(q[0]||"").split(l),g=0;g<q.length;g++){e=q[g].split(j);for(h in b)if(i=b[h]||"",f=e[0]===h){i=c.iF(i)?i(e[1]):i,(i||n)&&(e[1]=i),q[g]=e.join(j);break}f&&delete b[h]}for(h in b)i=b[h]||"",i=c.iF(i)?i(""):i,!i||(e=h+j+i,q.push(e));return a=p+k+q.join(l),r&&(a+=m+r),a},b.get=function(a,b){var d,e,f,g,h=a.split("#")[0].split("?")[1]||"",i=h.split("&"),j=c.iS(b),k=j?"":{};if(!h)return k;for(f=0;f<i.length;f++)if(d=i[f],e=d.split("="),d)if(b)if(j&&e[0]===b)k=e[1];else for(g=0;g<b.length;g++)e[0]===b[g]&&(k[e[0]]=e[1]||"");else k[e[0]]=e[1]||"";return k}}),_ent.define("cc/util/et",[],function(a,b,c){function d(){}function e(a,b){return!!a&&a.nodeType==b}var f=a("ent"),g=1;f.mix(d,{is:e,addClass:function(a,b){return e(a,g)&&b?a.className?void(d.hasClass(a,b)||(a.className+=" "+b)):void(a.className=b):void 0},removeClass:function(a,b){if(e(a,g)&&a.className&&b){var c,d=a.className.split(" ");for(c=0;c<d.length&&b!==d[c];c++);d.splice(c,1),a.className=d.join(" ")}},hasClass:function(a,b){if(!e(a,g)||!a.className||!b)return!1;var c,d=a.className.split(" ");for(c=0;c<d.length;c++)if(d[c]===b)return!0;return!1},siblings:function(a,b){if(e(a,g)){for(var c=a.nextSibling;c;)e(c,g)&&b(c),c=c.nextSibling;for(c=a.previousSibling;c;)e(c,g)&&b(c),c=c.previousSibling}},children:function(a){if(e(a,g)){var b,c,d=a.childNodes,f=d.length,h=[];for(b=0;f>b;b++)c=d[b],e(c,g)&&h.push(c);return h}},index:function(a){if(!e(a,g)||!a.parentNode)return-1;for(var b=0,c=a.parentNode.firstChild;c!==a;)e(c,g)&&b++,c=c.nextSibling;return b},css:function(a,b){if(e(a,g)&&f.iPO(b)){var c;for(c in b)b.hasOwnProperty(c)&&(a.style[c]=b[c])}},first:function(a){var b,c=0;do if(b=a[c++],e(b,g))return b;while(c<a.length)},last:function(a){var b,c=a.length-1;do if(b=a[c--],e(b,g))return b;while(c>=0)},find:function(a,b){return a.getElementsByTagName(b)},text:function(a,b){return"undefined"==typeof b?a.innerText||a.textContent:void("undefined"==typeof a.innerText?a.innerText=b:a.textContent=b)},html:function(a,b){return"undefined"==typeof b?a.innerHTML:void(a.innerHTML=b)},next:function(a,b){for(;(a=a.nextSibling)&&(!e(a,g)||b&&!d.match(a,b)););return a},match:function(a,b){return a.tagName.toLowerCase()===b},version:"0.1"}),c.exports=d}),_ent.define("cc/util/hlight",["cc/util/et"],function(a,b){function c(a){return a.replace(/^\s*|\s*$/g,"")}function d(a,b,d){var e=/[-\\\/?!.*+^$\[\]\(\)\{\}\<\>=:|]/gi;if(f.iA(b)&&(b=b.join(" ")),""===c(b))return a;try{b=b.replace(e,function(a){return"\\"+a}),b=c(b).replace(/\s+/gi,"|"),a=a.replace(new RegExp("("+b+")","ig"),d)}catch(g){}return a}var e=a("cc/util/et"),f=a("ent");b.light=function(a,b){if(!b||!b.length)return a;var c,f,g,h=b[0].ds_redkeys;if(!h||!h.length)return a;for(f=document.createElement("div"),e.html(f,a),g=e.find(f,"a"),c=0;c<g.length;c++)g[c].className.indexOf("redtitle")>-1&&e.html(g[c],d(g[c].innerHTML,h,'<span class="redkey">$1</span>'));return f.innerHTML}}),_ent.define("cc/dataservice",[],function(a,b){b.getData=function(b,c,d){var e="cc/datasource/"+b.datasource[c].ds_sn;a.async(e,function(a){a.getData(b,c,function(){b.emit("getData",b,c),d()})})}}),_ent.define("cc/templets/meta",[],function(a,b){function c(a,b){b=b||{};for(var d=a.css.length,e="",f="",g="",h=0,i=0;d>i;i++){var j=a.css.charAt(i);switch(j){case"{":h++,f+=j;break;case"}":h--,f+=j,0===h&&(e=b.asIs?e.replace(/\./g,"#tbcc-c-"+a.uid+" ."):e.replace(/\./g,"."+a.uid+"-"),/^@media/.test(e)&&(f="{"+c({css:f.replace(/^\{|\}$/g,""),uid:a.uid})+"}"),g+=e+f+"\n",e=f="");break;default:h>0?f+=j:e+=j}}return g.replace(RegExp("\\\\\\."+a.uid+"-","g"),".")}b.attachStyle=function(a,b){var d=a.uid,e="j-"+d+"-css",f=a.doc||document,g=f.getElementsByTagName("body")[0],h=f.createElement("style"),i=f.getElementById(e),j=c(a,b),k=f.createElement("div");i&&i.parentNode.removeChild(i),h.type="text/css",h.id=e,k.appendChild(h),h.styleSheet?h.styleSheet.cssText=j:h.appendChild(f.createTextNode(j)),g.appendChild(k)}});var Mustache=function(){var a=function(){};return a.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":!0},context:{},render:function(a,b,c,d){if(d||(this.context=b,this.buffer=[]),!this.includes("",a))return d?a:void this.send(a);a=this.render_pragmas(a);var e=this.render_section(a,b,c);return d?this.render_tags(e,b,c,d):void this.render_tags(e,b,c,d)},send:function(a){""!=a&&this.buffer.push(a)},render_pragmas:function(a){if(!this.includes("%",a))return a;var b=this,c=new RegExp(this.otag+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+this.ctag);return a.replace(c,function(a,c,d){if(!b.pragmas_implemented[c])throw{message:"This implementation of mustache doesn't understand the '"+c+"' pragma"};if(b.pragmas[c]={},d){var e=d.split("=");b.pragmas[c][e[0]]=e[1]}return""})},render_partial:function(a,b,c){if(a=this.trim(a),!c||void 0===c[a])throw{message:"unknown_partial '"+a+"'"};return"object"!=typeof b[a]?this.render(c[a],b,c,!0):this.render(c[a],b[a],c,!0)},render_section:function(a,b,c){if(!this.includes("#",a)&&!this.includes("^",a))return a;var d=this,e=new RegExp(this.otag+"(\\^|\\#)\\s*(.+)\\s*"+this.ctag+"\n*([\\s\\S]+?)"+this.otag+"\\/\\s*\\2\\s*"+this.ctag+"\\s*","mg");return a.replace(e,function(a,e,f,g){var h=d.find(f,b);return"^"==e?!h||d.is_array(h)&&0===h.length?d.render(g,b,c,!0):"":"#"==e?d.is_array(h)?d.map(h,function(a){return d.render(g,d.create_context(a),c,!0)}).join(""):d.is_object(h)?d.render(g,d.create_context(h),c,!0):"function"==typeof h?h.call(b,g,function(a){return d.render(a,b,c,!0)}):h?d.render(g,b,c,!0):"":void 0})},render_tags:function(a,b,c,d){for(var e=this,f=function(){return new RegExp(e.otag+"(=|!|>|\\{|%)?([^\\/#\\^]+?)\\1?"+e.ctag+"+","g")},g=f(),h=function(a,d,h){switch(d){case"!":return"";case"=":return e.set_delimiters(h),g=f(),"";case">":return e.render_partial(h,b,c);case"{":return e.find(h,b);default:return e.escape(e.find(h,b))}},i=a.split("\n"),j=0;j<i.length;j++)i[j]=i[j].replace(g,h,this),d||this.send(i[j]);return d?i.join("\n"):void 0},set_delimiters:function(a){var b=a.split(" ");this.otag=this.escape_regex(b[0]),this.ctag=this.escape_regex(b[1])},escape_regex:function(a){if(!arguments.callee.sRE){var b=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];arguments.callee.sRE=new RegExp("(\\"+b.join("|\\")+")","g")}return a.replace(arguments.callee.sRE,"\\$1")},find:function(a,b){function c(a){return a===!1||0===a||a}a=this.trim(a);var d;return c(b[a])?d=b[a]:c(this.context[a])&&(d=this.context[a]),"function"==typeof d?d.apply(b):void 0!==d?d:""},includes:function(a,b){return-1!=b.indexOf(this.otag+a)},escape:function(a){return a=String(null===a?"":a),a.replace(/&(?!\w+;)|["<>\\]/g,function(a){switch(a){case"&":return"&amp;";case"\\":return"\\\\";case'"':return'"';case"<":return"&lt;";case">":return"&gt;";default:return a}})},create_context:function(a){if(this.is_object(a))return a;var b=".";this.pragmas["IMPLICIT-ITERATOR"]&&(b=this.pragmas["IMPLICIT-ITERATOR"].iterator);var c={};return c[b]=a,c},is_object:function(a){return a&&"object"==typeof a},is_array:function(a){return"[object Array]"===Object.prototype.toString.call(a)},trim:function(a){return a.replace(/^\s*|\s*$/g,"")},map:function(a,b){if("function"==typeof a.map)return a.map(b);for(var c=[],d=a.length,e=0;d>e;e++)c.push(b(a[e]));return c}},{name:"mustache.js",version:"0.3.0",to_html:function(b,c,d,e){var f=new a;return e&&(f.send=e),f.render(b,c,d),e?void 0:f.buffer.join("\n")}}}();_ent.define("cc/mustache",[],function(a,b){b.name=Mustache.name,b.version=Mustache.version,b.to_html=function(){return Mustache.to_html.apply(this,arguments)}}),_ent.define("cc/templets/p4p/tb/staobao_08_20_right",["cc/mustache","cc/templets/meta","cc/dataservice","cc/util/hlight","cc/util/params","cc/util/tps"],function(a,b){function c(a,b){var c=f.to_html(m,a,{item:n}),d=a.data.ds1.items;
a.sHTML=i.light(c,d),a.renderer.render(a),a.css=l,g.attachStyle(a),b()}function d(a){KISSY.use("node",function(b){var c=a.uid,d=function(a,d){return b.all("string"==typeof a?a.replace(/\./g,"."+c+"-"):a,d)};d(".item").on("mouseenter",function(){d(this).addClass("item-hover")}).on("mouseleave",function(){d(this).removeClass("item-hover")}),KISSY.use("datalazyload",function(b,c){c(a.outerEle)})})}function e(a,b){KISSY.use("node",function(c){var d=a.uid,e=function(a,b){return c.all("string"==typeof a?a.replace(/\./g,"."+d+"-"):a,b)};e(".item .imglink img").each(function(){var a=this.attr("src");/imglazyload/.test(a)?this.attr("data-ks-lazyload",k.addSize(this.attr("data-ks-lazyload"),b)):this.attr("src",k.addSize(a,b))}),e(".global").removeClass("w200 w240 w270").addClass("w"+b)})}var f=a("cc/mustache"),g=a("cc/templets/meta"),h=a("cc/dataservice"),i=a("cc/util/hlight"),j=a("cc/util/params"),k=a("cc/util/tps"),l=".global {position: relative;background: #fff;text-align: left;font: 12px/1.5 tahoma,arial,\\5b8b\\4f53;}.global em,.global div,.global ul,.global li,.global p,.global span,.global a {margin: 0;padding: 0;}.global img {border: 0;}.global ul,.global li {list-style: none;}.global a {text-decoration: none;}.global em {font-style: normal;font-family: Arial;}.global .banner {position: relative;padding-top: 9px;height: 34px;line-height: 34px;border-bottom: 1px solid #E8E8E8;margin-bottom: 13px;font-weight: 600;font-size: 16px;}.banner a {color: #555;}.banner a:hover {color: #555;}.global .item-list {position: relative;}.item-list .item {position: relative;border: 1px solid #e5e5e5;margin-bottom: 10px;_height: 303px;overflow: hidden;}.global\\.w270 .item-list .item {_height: 303px;}.global\\.w240 .item-list .item {_height: 273px;}.global\\.w230 .item-list .item {_height: 263px;}.global\\.w200 .item-list .item {_height: 233px;}.item-list .item\\.item-hover {border: 1px solid #f40;}.imgwrap {overflow: hidden;background-color: #fff;text-align: center;}.global\\.w270 .imgwrap{height: 270px;}.global\\.w240 .imgwrap{height: 240px;}.global\\.w230 .imgwrap{height: 230px;}.global\\.w200 .imgwrap{height: 200px;}.imglink {display: table-cell;overflow: hidden;vertical-align: middle;text-align: center;*display: block;*font: normal 12px/1 arial;}.global\\.w270 .imglink{width: 268px;height: 270px;*font-size: 236px;}.global\\.w240 .imglink{width: 238px;height: 240px;*font-size: 219px;}.global\\.w230 .imglink{width: 228px;height: 230px;*font-size: 201px;}.global\\.w200 .imglink{width: 198px;height: 200px;*font-size: 175px;}.item img {vertical-align: middle;}.item .redtitle {padding: 0 10px;height: 32px;color: #000;line-height: 32px;overflow: hidden;display: block;}.item .redtitle:hover {color: #f40;}.redtitle span {color: #f40;}.item .line1 {overflow: hidden;height: 18px;line-height: 18px;margin: 5px 10px;}.item .red {position: absolute;bottom: 28px;*bottom: 31px;left: 0;overflow: hidden;height: 35px;width: 100%;display: none;}.red .bgred {position: absolute;top: 0;left: 0;width: 100%;height: 35px;background: #f40;opacity: .6;filter: alpha(opacity=60);}.red .hover {position: absolute;top: 0;left: 0;height: 35px;line-height: 35px;padding: 0 5px;cursor: pointer;color: #fff;}.red .hover:hover{color:#fff;}.item .price {color: #f40;font: 700 18px Verdana,Arial;float: left;height: 18px;line-height: 18px;}.global\\.w200 .item .price {font: 700 16px Verdana,Arial;}.item .price:hover {color: #f40;}.price em {font-family: Arial;font-weight: normal;margin-right: 3px;}.price .price-old {margin-left: 8px;}.price .price-old,.price .price-old em {color: #fff;text-decoration: line-through;font-weight: normal;font-size: 12px;}.item\\.item-hover .red {display: block;}.item .sell {color: #555;float: right;}.item .sell:hover {color: #555;}.item .sell em {font-weight: bold;}.item .mall {float: left;display: block;width: 16px;height: 16px;background-position: -83px -130px;margin-right: 6px;margin-top: 2px;}.item .gold {float: left;display: block;width: 16px;height: 16px;background-position: -187px -57px;margin-right: 6px;margin-top: 2px;}.mall, .gold {background: url(http://g.tbcdn.cn/tb/bsrp/0.10.0/assets/images/normal/service.png);-background-image: url(http://g.tbcdn.cn/tb/bsrp/0.10.0/assets/images/png8/service.png);}.global .foot {position: relative;margin-top: 0px;height: 35px;}.foot a {position: absolute;right: 10px;width: 66px;height: 25px;border-radius: 1px;background: #F40;color: #FFF;text-align: center;text-decoration: none;line-height: 25px;}.foot a:hover {background: #f82800;}",m='<div class="{{uid}}-global w{{width}}">{{#data}}{{#ds1}}<div class="{{uid}}-banner"><a href="http://re.taobao.com/search?keyword={{keyword}}&frontcatid={{frontcatid}}&isinner=1&refpid={{refpid}}" target="_blank">\u638c\u67dc\u70ed\u5356</a></div><ul class="{{uid}}-item-list">{{#items}}{{>item}}{{/items}}</ul>{{/ds1}}{{/data}}<div class="{{uid}}-foot"><a href="http://re.taobao.com/search?keyword={{keyword}}&frontcatid={{frontcatid}}&isinner=1&refpid={{refpid}}" target="_blank">\u66f4\u591a\u70ed\u5356</a></div></div>',n='<li class="{{uid}}-item"><div class="{{uid}}-imgwrap"><a class="{{uid}}-imglink" target="_blank" href="{{ds_clickurl}}" title="{{ds_title}}">{{#ds_img}}<img data-ks-lazyload="{{src}}">{{/ds_img}}</a></div><div class="{{uid}}-line1">{{#ds_isgold}}<a target="_blank" href="{{ds_clickurl}}" class="{{uid}}-gold" title="\u91d1\u724c\u5356\u5bb6"> </a>{{/ds_isgold}}{{#ds_istmall}}<a target="_blank" href="{{ds_clickurl}}" class="{{uid}}-mall" title="\u5929\u732b"></a>{{/ds_istmall}}{{#ds_promo}}<a target="_blank" href="{{ds_clickurl}}" class="{{uid}}-price"><em>&yen;</em>{{ds_promo}}</a>{{/ds_promo}}{{^ds_promo}}<a target="_blank" href="{{ds_clickurl}}" class="{{uid}}-price"><em>&yen;</em>{{ds_price}}</a>{{/ds_promo}}<div><a target="_blank" href="{{ds_clickurl}}" class="{{uid}}-sell">\u9500\u91cf: <em>{{ds_sell}}</em></a></div></div><div class="{{uid}}-red"><div class="{{uid}}-bgred"></div><a target="_blank" href="{{ds_clickurl}}" class="{{uid}}-hover" title="{{ds_title}}">{{ds_title}}</a></div></li>';b.render=function(a,f){var g=a.datasource.ds1,i=a.id;if(window.MBOX&&MBOX[i]){var k=MBOX[i];k.reload=function(){b.render(a,f)},k.resize=function(b){e(a,b)},a.width=k.width,g.qp_imgsize=k.width}else g.ds_host=j.replace(g.ds_host,{keyword:"%C1%AC%D2%C2%C8%B9"}),a.width=270;h.getData(a,"ds1",function(){a.qs&&(a.keyword=a.qs[0].keyword,a.refpid=a.qs[0].pid,a.frontcatid=a.qs[0].frcatid),c(a,f),d(a)})}}),_ent.define("cc/renderer/tbcc",[],function(a,b){b.render=function(a){var b,c=document.getElementById("tbcc-c-"+a.uid),d=a.info,e="";c&&(d.RWD||(d.width>0&&(e+="width:"+d.width+"px;"),d.height>0&&(e+="height:"+d.height+"px;")),d.overflow||(e+="overflow:hidden;"),c.style.cssText=e+"display:block;*zoom:1;",c.setAttribute("tbcc-templet",a.info.templet),b=c.firstElementChild||c.children[0],b.innerHTML=a.sHTML,a.outerEle=c,a.innerEle=b)}}),_ent.define("cc/show",[],function(a,b){function c(a){var b={};a.on=function(a,c){(b[a]=b[a]||[]).push(c)},a.off=function(a,c){var d=b[a];if(!a&&!c&&(b={}),d)if(c)for(var e=d.length-1;e>=0;e--)d[e]===c&&d.splice(e,1);else delete b[a]},a.emit=function(a){var c,d=b[a];if(d)for(d=d.slice();c=d.shift();)c.apply(null,[].slice.call(arguments,1))}}function d(b,c,d){var g="cc/templets/"+d.info.templet,h="cc/renderer/"+(window.tbcc_renderer||"tbcc"),i=d.info.hook,j=[g,h];!d.sans_hook&&i&&j.push("cc/vender/"+i),d.uid=c,d.id=b,a.async(j,function(a,b,c){for(var g in c)f.iF(c[g])&&d.on(g,c[g]);e(d,a,b)})}function e(a,b,c){a.renderer=c,b.render(a,function(){f.iF(b.bind)&&b.bind(a),f.iF(b.sync)&&b.sync(a),a.emit("render",a)})}var f=a("ent");b.show=function(b,e,g){return f.iPO(g)||(g={}),c(g),window.setTimeout(function(){f.iPO(g.info)?d(b,e,g):a.async("cc/creations/"+b,function(a){d(b,e,f.mix(g,a))})},0),g}}),_ent.define("cc/creations/2014_9/149127",[],{info:{width:270,height:3860,templet:"p4p/tb/staobao_08_20_right",RWD:!0,kissy:!0,templet_id:5493,xml:null},datasource:{ds1:{ds_sn:"mbox_staobao",ds_host:"http://tmatch.simba.taobao.com/?name=tbuad&o=j&pid=&count={qp_count}&keyword=&p4p={qp_callback}",qp_count:12,qp_imgsize:270}}}),_ent.define("cc/creations/2014_9/149128",[],{info:{width:1180,height:500,templet:"p4p/tb/staobao_09_10_bottom",RWD:!0,kissy:!0,templet_id:5638,xml:null},datasource:{ds1:{ds_sn:"b2b",ds_host:"http://cmweb.ilike.1688.com/cmweb/hollywood/product/handleJsonp.htm?callback={qp_callback}&prodid=983&pageid={initiative_id}&query={q}&curpage={s}",qp_count:5,qp_imgsize:220},ds2:{ds_sn:"p4p/textlink_search",ds_host:"http://textlink.simba.taobao.com/lk?catid=&pid=&keyword="}}}),_ent.define("cc/creations/2014_9/149129",[],{info:{width:1190,height:500,templet:"p4p/tb/staobao_07_09_bottom",RWD:!0,kissy:!0,templet_id:5081,xml:null},datasource:{ds1:{ds_sn:"mbox_staobao",ds_host:"http://tmatch.simba.taobao.com/?name=tbuad&o=j&pid=&count={qp_count}&keyword=&p4p={qp_callback}",qp_count:5,qp_imgsize:220},ds2:{ds_sn:"p4p/textlink_search",ds_host:"http://textlink.simba.taobao.com/lk?catid=&pid=&keyword="}}}),_ent.define("cc/creations/2014_9/149130",[],{info:{width:270,height:4e3,templet:"p4p/tb/staobao_jizhun2_right",RWD:!0,overflow:!0,kissy:!0,templet_id:5144,xml:null},datasource:{ds1:{ds_sn:"mbox_staobao",ds_host:"http://tmatch.simba.taobao.com/?name=tbuad&o=j&pid=&count={qp_count}&keyword=&p4p={qp_callback}",qp_count:11,qp_imgsize:250}}}),KISSY.add("widget/shopkeeper/index",function(a){function b(){b.superclass.constructor.apply(this,arguments)}var c=(a.require("dom"),a.require("widget/aobserver/"));return a.extend(b,c,{renderUI:function(){var b=this.userConfig.param,c={frontcatid:b.frontcatid,frcatid:b.frontcatid,keyword:b.keywordGBK,pid:b.refpid_right,refpid:b.refpid_right},d={normal:"419110_1006",lsrp:"430355_1006",festival:"430360_1006"},e={pid:d[b.source]||"419110_1006",keyword:b.keywordGBK,catid:b.frontcatid};if(window.__p4p_sidebar__&&__p4p_sidebar__.length){var f=["spuapisrp","detailsrp","productcompare","productdetailtrustsrp","productcomparesrp","productdetailsrp","productdetailcommentsrp","productdetailparamsrp","verticaltrustsrp"],g=a.indexOf(b.srp,f)>-1?"2014_9/149130":"2014_9/149127",h=MBOX[g]={};h.data={ds1:__p4p_sidebar__},h.qs=[c,e],h.type="right",h.width=b.rightWidth||MBOX.getWidth("right");var i="c"+g.replace(/[^-a-z0-9]/gi,"-")+"-"+ +new Date;document.getElementById("J_shopkeeper").innerHTML='<tbcc id="tbcc-c-'+i+'" style="display:none"><tbcc></tbcc></tbcc>',_ent.use("cc/show",function(b){b.show(g,i).on("render",function(){a.get("#J_shopkeeper").style.height="auto"})})}var c={frontcatid:b.frontcatid,frcatid:b.frontcatid,keyword:b.keywordGBK,pid:b.refpid_bottom,refpid:b.refpid_bottom};KISSY.use("datalazyload",function(){document.getElementById("J_shopkeeper_bottom").style.height="1px";var a=KISSY.DataLazyload({diff:800});a._filterItems(),a.addCallback("#J_shopkeeper_bottom",function(){if(document.getElementById("J_shopkeeper_bottom").style.height="auto",window.__p4p_bottom__&&__p4p_bottom__.length){var a="2014_9/149129",d=MBOX[a]={};d.data={ds1:__p4p_bottom__},d.qs=[c,e],d.type="bottom",d.width=b.pageWidth||MBOX.getWidth("bottom");var f="c"+a.replace(/[^-a-z0-9]/gi,"-")+"-"+ +new Date;document.getElementById("J_shopkeeper_bottom").innerHTML='<tbcc id="tbcc-c-'+f+'" style="display:none"><tbcc></tbcc></tbcc>',_ent.use("cc/show",function(c){c.show(a,f).on("render",function(){if(!d.rendered&&(d.rendered=!0,b.b2b_show)){var a={curpage:b.pageNum,query:b.keywordGBK,pageid:b.initiative_id,frontcatid:b.frontcatid,frcatid:b.frontcatid,keyword:b.keywordGBK,refpid:b.refpid_bottom},f="2014_9/149128",g="c"+f.replace(/[^-a-z0-9]/gi,"-")+"-"+ +new Date,h=MBOX[f]={};h.qs=[a,e],h.type="bottom",h.width=b.pageWidth||MBOX.getWidth("bottom"),c.show(f,g)}})})}})})}}),b},{requires:["../aobserver/","core"]});