function updateLsoSaverStatus(a){KISSY.log("flashStorage\u7684\u72b6\u6001\u662f"+a)}!function(a){a.config({combine:!0,packages:[{name:"srpbase",debug:"true",path:"http://g.tbcdn.cn/tb/srpbase/0.5.1"},{name:"components",debug:"true",path:"http://g.tbcdn.cn/tb/bsrp/0.21.1/publish"},{name:"tbc",path:"http://g.tbcdn.cn/tbc/",ignorePackageNameInUri:!0},{name:"esrp-3pc",base:"http://g.tbcdn.cn/etao/srp/1.0.5/components",debug:!0}]})}(KISSY),KISSY.config("modules",{"components/auto/combo/discoverbox/index":{requires:["brix/core/brick","srpbase/tab","srpbase/slide","components/utils/datalazyload","components/auto/combo/discoverbox/tpl","components/auto/combo/discoverbox/range","components/auto/combo/discoverbox/stateobserver","components/auto/combo/discoverbox/imgformatter","components/utils/goldsend","components/auto/combo/discoverbox/index.css","core"]},"components/utils/datalazyload":{requires:["core"]},"components/auto/combo/foundshop/index":{requires:["brix/core/brick"]},"components/auto/combo/guangbox/index":{requires:["brix/core/brick","components/auto/combo/guangbox/index.css"]},"components/auto/combo/phone-nav/index":{requires:["brix/core/brick","components/srpbase/dropdown/index","core"]},"components/srpbase/dropdown/index":{requires:["brix/core/brick"]},"components/auto/combo/product/grid/index":{requires:["brix/core/brick","components/auto/combo/product/grid/index.css"]},"components/auto/combo/product/infolist/index":{requires:["brix/core/brick","components/auto/combo/product/infolist/index.css"]},"components/auto/combo/product/list/index":{requires:["brix/core/brick","components/auto/combo/product/list/index.css"]},"components/auto/combo/scenebox/index":{requires:["brix/core/brick","components/auto/combo/scenebox/index.css"]},"components/auto/combo/tmsdiscountnav/index":{requires:["brix/core/brick"]},"components/auto/old-breadcrumbs/index":{requires:["brix/core/brick","components/auto/old-breadcrumbs/index.css"]},"components/auto/old-navigation/index":{requires:["brix/core/brick","components/utils/goldsend","components/auto/old-navigation/index.css","core"]},"components/auto/pricerange-bts/index":{requires:["brix/core/brick","components/srpbase/sform/index","components/utils/slider","core"]},"components/srpbase/sform/index":{requires:["brix/core/brick"]},"components/utils/slider":{requires:["core"]},"components/auto/shortcut/birthday/index":{requires:["brix/core/brick","components/utils/goldsend","components/auto/shortcut/birthday/index.css"]},"components/auto/shortcut/wenda/index":{requires:["brix/core/brick","srpbase/dialog","core","components/auto/shortcut/wenda/index.css"]},"components/auto/starshop/index":{requires:["srpbase/async/activity"]},"components/auto/textsearch/knowledge/index":{requires:["brix/core/brick","components/_utils_goldsend_/","components/auto/textsearch/knowledge/index.css"]},"components/auto/textsearch/maincss/index":{requires:["components/auto/textsearch/maincss/index.css"]},"components/auto/textsearch/qa/index":{requires:["brix/core/brick","components/_utils_goldsend_/","components/auto/textsearch/qa/index.css"]},"components/auto/textsearch/tsclist/index":{requires:["brix/core/brick","components/auto/textsearch/tsclist/index.css"]},"components/breadcrumbs/index":{requires:["srpbase/async/activity"]},"components/commands/imglazyload":{requires:["srpbase/com/imgmagic/","srpbase/async/context","event"]},"components/commands/initp4p":{requires:["widget/advertindex/","srpbase/async/context"]},"components/commands/set-response":{requires:["srpbase/com/domcls/","srpbase/async/context"]},"components/commands/setticktask":{requires:["srpbase/async/context","event"]},"components/commands/statinit":{requires:["srpbase/async/context","srpbase/com/statsend/"]},"components/festival/cstyle/index":{requires:["srpbase/async/activity"]},"components/festival/layer/index":{requires:["srpbase/async/activity"]},"components/festival/nav/index":{requires:["srpbase/async/activity","dom"]},"components/festival/shortcut/index":{requires:["srpbase/async/activity"]},"components/festival/sidebar/index":{requires:["srpbase/async/activity"]},"components/festival/tip/index":{requires:["srpbase/async/activity"]},"components/layout/festival/index":{requires:["srpbase/async/activity","dom","components/commands/checkbrowser","components/commands/globalinit","components/commands/imglazyload","components/commands/initp4p","components/commands/set-response","components/commands/setticktask","components/commands/statinit"]},"components/layout/vcombo/index":{requires:["srpbase/async/activity"]},"components/navigation/baby/index":{requires:["srpbase/async/activity","xtemplate","node","components/navigation/baby/params"]},"components/navigation/common/index":{requires:["srpbase/async/activity","xtemplate","node"]},"components/navigation/index":{requires:["srpbase/async/activity"]},"components/navigation/overlay/index":{requires:["srpbase/async/activity","components/navigation/overlay/layertpl","xtemplate","node"]},"components/newsrp/filter/index":{requires:["brix/core/brick","components/utils/resizebase","core"]},"components/utils/resizebase":{requires:["core"]},"components/newsrp/gridbase/index":{requires:["brix/core/brick","components/newsrp/gridbase/tpl","core"]},"components/newsrp/gridcontent-promotion/index":{requires:["components/newsrp/gridcontent-simple/index"]},"components/newsrp/gridcontent-simple/index":{requires:["components/newsrp/gridcontent/index"]},"components/newsrp/gridcontent/index":{requires:["components/newsrp/gridbase/index","components/newsrp/p4pblock/index"]},"components/newsrp/p4pblock/index":{requires:["core"]},"components/newsrp/gridcontent-store/index":{requires:["components/newsrp/gridcontent-simple/index"]},"components/newsrp/gridcontent-thumbs/index":{requires:["components/newsrp/gridcontent/index"]},"components/newsrp/gridcontent-u2i/index":{requires:["xtemplate","components/newsrp/gridcontent-u2i/tpl-js","components/newsrp/gridcontent/index","components/utils/resolver","srpbase/util/goldsend/","components/utils/datalazyload"]},"components/utils/resolver":{requires:["core"]},"components/newsrp/i2i/gridcontent/index":{requires:["components/newsrp/gridcontent-simple/index"]},"components/newsrp/i2i/listcontent/index":{requires:["components/newsrp/listcontent/index"]},"components/newsrp/listcontent/index":{requires:["components/newsrp/listbase/index","core"]},"components/newsrp/listbase/index":{requires:["brix/core/brick"]},"components/newsrp/i2i/sortbar/index":{requires:["components/newsrp/sortbar/index","components/srpbase/location/index"]},"components/newsrp/sortbar/index":{requires:["brix/core/brick","components/srpbase/pricerange/index","components/srpbase/location/index","components/utils/scrollbase","components/utils/resizebase","srpbase/util/goldsend/","core"]},"components/srpbase/pricerange/index":{requires:["brix/core/brick","components/srpbase/sform/index","core"]},"components/srpbase/location/index":{requires:["base","dom","event","xtemplate","components/srpbase/location/tpl","core"]},"components/utils/scrollbase":{requires:["core"]},"components/newsrp/listcontent-thumbs/index":{requires:["components/newsrp/listcontent/index"]},"components/newsrp/navigation/index":{requires:["brix/core/brick","components/utils/resizebase","components/utils/goldsend","core"]},"components/newsrp/pagination/index":{requires:["brix/core/brick"]},"components/newsrp/qrsort/index":{requires:["brix/core/brick","core"]},"components/newsrp/supplement-suggest/index":{requires:["brix/core/brick"]},"components/newsrp/supplement-tbalink/index":{requires:["brix/core/brick","xtemplate","components/newsrp/supplement-tbalink/wanke.tpl"]},"components/newsrp/tab2mysearch/gridcontent/lessgraph/index":{requires:["components/newsrp/tab2mysearch/gridcontent/index"]},"components/newsrp/tab2mysearch/gridcontent/lessgraph/tpl":{requires:["components/newsrp/tab2mysearch/gridcontent/tpl"]},"components/newsrp/tab2mysearch/gridcontent/lessrequery/index":{requires:["components/newsrp/tab2mysearch/gridcontent/index"]},"components/newsrp/tab2mysearch/gridcontent/lessrequery/tpl":{requires:["components/newsrp/tab2mysearch/gridcontent/tpl"]},"components/newsrp/tab2mysearch/index":{requires:["components/newsrp/tab2mysearch/ware/p4p/index","components/newsrp/tab2mysearch/ware/statsend/index","components/newsrp/tab2mysearch/ware/sidebar/index","components/newsrp/tab2mysearch/ware/gridlazy/index","components/newsrp/tab2mysearch/nav/index","components/newsrp/tab2mysearch/gridcontent/index","components/newsrp/tab2mysearch/gridcontent/lessgraph/index","components/newsrp/tab2mysearch/gridcontent/lessrequery/index","xtemplate","core"]},"components/newsrp/tab2mysearch/ware/p4p/index":{requires:["widget/advertindex/","esrp-3pc/tsrp/"]},"components/newsrp/tab2mysearch/nav/index":{requires:["srpbase/util/scrollbase/","srpbase/util/resizebase/","core"]},"components/newsrp/tabpage/index":{requires:["brix/core/brick","cookie"]},"components/newsrp/wrapper/index":{requires:["core"]},"components/srpbase/combobar/copy/index":{requires:["brix/core/brick","core"]},"components/srpbase/combobar/noquery/index":{requires:["brix/core/brick"]},"components/srpbase/combobar/noresult/index":{requires:["brix/core/brick"]},"components/srpbase/combobar/simple/index":{requires:["brix/core/brick"]},"components/srpbase/dialog/index":{requires:["components/srpbase/popup/index","dd","resizable","core"]},"components/srpbase/popup/index":{requires:["brix/core/brick","core"]},"components/srpbase/header/index":{requires:["brix/core/brick","tbc/search-suggest/1.3.5/index","tbc/search-suggest/1.3.5/plugin/history","tbc/search-suggest/1.3.5/plugin/cloud","tbc/search-suggest/1.3.5/plugin/history-magic","tbc/search-suggest/1.3.5/plugin/tab","xtemplate","cookie","components/srpbase/header/tpl","core","tbc/search-suggest/1.3.5/new_suggest.css"]},"components/srpbase/sidebar/index":{requires:["brix/core/brick","components/utils/resizebase","components/srpbase/dialog/index","core"]},"components/srpbase/statsend/index":{requires:["components/utils/goldsend","components/srpbase/statsend/functions","components/utils/localstorage","core"]},"components/utils/localstorage":{requires:["core"]},"components/srpbase/tab/index":{requires:["brix/core/brick","core"]},"components/tools/advice2visual/index":{requires:["tbc/mini-login/1.4.2/","components/tools/html2canvas/index","components/tools/advice2visual/tpl","core","components/tools/advice2visual/index.css"]},"components/tools/browser-updater/index":{requires:["components/utils/goldsend","core"]},"components/tools/proxy/index":{requires:["core"]},"components/tools/tiptools/index":{requires:["srpbase/common/freepopup/popup/","components/utils/resizebase","core"]},"components/utils/flashstorage":{requires:["core"]},"components/utils/wangwang":{requires:["base","dom","event","cookie","ajax"]},"components/vcombo/babyinfo/index":{requires:["components/vcombo/baseitem/index","io"]},"components/vcombo/baseitem/index":{requires:["srpbase/async/activity","srpbase/util/goldsend/"]},"components/vcombo/choosecar/index":{requires:["srpbase/async/activity","xtemplate","io","components/vcombo/choosecar/panel"]},"components/vcombo/compic/index":{requires:["components/vcombo/baseitem/index"]},"components/vcombo/cstyle/index":{requires:["srpbase/async/activity"]},"components/vcombo/dapei/index":{requires:["components/vcombo/baseitem/index"]},"components/vcombo/leftnav/index":{requires:["components/vcombo/baseitem/index"]},"components/vcombo/longpic/index":{requires:["components/vcombo/baseitem/index"]},"components/vcombo/nav/index":{requires:["srpbase/async/activity","event","dom"]},"components/vcombo/navpic/index":{requires:["components/vcombo/baseitem/index"]},"components/vcombo/rownav/index":{requires:["components/vcombo/baseitem/index"]},"components/vcombo/shaitu/index":{requires:["components/vcombo/baseitem/index"]},"components/vsrp/c/app/app-base":{requires:["components/vsrp/c/app/base","components/vsrp/c/app/env"]},"components/vsrp/c/app/base":{requires:["node","event"]},"components/vsrp/c/app/env":{requires:["components/vsrp/c/app/webp"]},"components/vsrp/c/app/mod-base":{requires:["components/vsrp/c/app/base"]},"components/vsrp/c/banner/index":{requires:["node","event","ua","dom","components/vsrp/c/app/mod-base","components/vsrp/c/banner/tpl/banner.jst"]},"components/vsrp/c/filterForm/index":{requires:["node","event","ua","components/vsrp/c/app/mod-base","components/vsrp/c/filterForm/tpl/filterForm.jst","components/vsrp/c/filterForm/tpl/location.jst"]},"components/vsrp/c/itemList/index":{requires:["gallery/datalazyload/1.0/index","anim","components/vsrp/c/app/mod-base","components/vsrp/c/itemList/mods/no-result/index.jst","components/vsrp/c/itemList/mods/grid/index","components/vsrp/c/itemList/mods/waterfall/index","components/vsrp/c/itemList/mods/shaitu/index","components/vsrp/c/itemList/mods/dapei/index"]},"components/vsrp/c/itemList/mods/grid/index":{requires:["components/vsrp/c/itemList/mods/grid/index.css","components/vsrp/c/itemList/mods/item.jst","components/vsrp/c/itemList/mods/grid/index.jst"]},"components/vsrp/c/itemList/mods/waterfall/index":{requires:["components/vsrp/c/itemList/mods/waterfall/index.jst","components/vsrp/c/itemList/mods/item.jst","gallery/waterfallx/1.0/index"]},"components/vsrp/c/itemList/mods/shaitu/index":{requires:["components/vsrp/c/itemList/mods/shaitu/index.jst"]},"components/vsrp/c/itemList/mods/dapei/index":{requires:["components/vsrp/c/itemList/mods/dapei/index.jst"]},"components/vsrp/c/page/index":{requires:["node","event","ua","components/vsrp/c/app/mod-base","components/vsrp/c/page/tpl/page.jst"]},"components/vsrp/c/tags/index":{requires:["node","event","ua","dom","components/vsrp/c/app/mod-base","components/vsrp/c/tags/tpl/tags.jst"]},"components/vsrp/p/mini/index":{requires:["components/vsrp/c/banner/index","components/vsrp/c/tags/index","components/vsrp/c/filterForm/index","components/vsrp/c/itemList/index","components/vsrp/c/page/index","components/vsrp/p/mini/item-requester","srpbase/util/goldsend/","components/vsrp/p/mini/tpl/layout.jst","components/vsrp/c/app/app-base"]}});var SEARCH=function(a){var b={};return a.mix(b,{define:function(b,c,d){var e=this,f=c(a,e);if(e[b]=f,d){var g=new f;for(var h in g)e[h]=g[h]}}}),b}(KISSY);SEARCH.define("Config",function(a){function b(){}var c="config input is not correct or not has this config.";return b.prototype={_configPool:{},config:function(b,d){var e=this,f=e._configPool;return a.isString(b)&&!d?f[b]:void(a.isString(b)&&d?e._configPool[b]=d:a.isPlainObject(b)?e._configPool=a.merge(f,b):a.log(c))}},b},!0),SEARCH.define("Controller",function(a){function b(){}var c="This is not a Command.",d="Command does not exist",e="Command already exists";return b.prototype={_runHistory:[],run:function(b){var d=this;d.isCommand(b)?b.execute():a.isString(b)?(d._runHistory.push(b),d.run(d.getCommand(b))):a.isArray(b)?a.each(b,function(a){d.run(a)}):a.log(c)},isCommand:function(b){return a.isFunction(b.execute)},_commands:{},getCommand:function(b){var c=this._commands[b];return c||a.log(d),this._commands[b]},addCommand:function(b,c){this._commands[b]?a.log(e):this._commands[b]=c}},b},!0),SEARCH.define("PageCheck",function(a){function b(){}var c="http://sandbox.search.taobao.com/jsmonitor?stats=",d={},e="",f=[";","|","-"],g=["=",":","_"],h=0,i=-1;return b.prototype={error:function(){},param:function(b){if(a.isEmptyObject(b))return!1;if(!a.isObject(b)&&!a.isArray(b))return e+=b+f[i],b;a.isObject(b)&&h++,i++;for(var c in b)a.isObject(b)&&(e+=c+g[h]),this.param(b[c]);a.isObject(b)&&h--,i>0&&i--,e=e.substr(0,e.length-1),e+=f[i]},log:function(b){var c=b.arr,d=b.text;if(c&&c.length>0){a.log("\u53d1\u73b0"+c.length+"\u4e2a\u95ee\u9898:");for(var e in c)a.log(d+":"+c[e])}else a.log("\u672a\u53d1\u73b0"+d+"\u7684\u95ee\u9898\n")},record:function(a,b){var c,e;if(b&&a.length>0)if(b.indexOf(".")>-1){var f=b.split("."),e=a.join("_");c=d[f[0]],c||(c={}),c[f[1]]=encodeURIComponent(e),d[f[0]]=c}else c=d[b],c||(e=a.join("|"),d[b]=e)},send:function(){var b=this;b.param(d),a.log(e);var f=new Image;f.src=c+e},getModule:function(){this._runHistory}},b},!0),SEARCH.define("GlobalBuilder",function(a,b){return{buildCommand:function(c,d){var e;e=a.isArray(d)?function(){b.run(d)}:d;var f={execute:e};b.addCommand(c,f)}}}),SEARCH.define("ReadyBuilder",function(a,b){var c={},d=[],e={},f=[];return b.addCommand("ready",{execute:function(){a.each(d,function(a){var b=c[a];f=f.concat(b.requires)}),a.use(f.join(","),function(){var b=arguments;a.ready(function(){for(var g=0,h=f.length;h>g;g++)e[f[g]]=b[g+1];a.each(d,function(b){var d=c[b],f=d.requires,g=[];a.each(f,function(a){g.push(e[a])}),d.func.apply(d,g)});var i="\n\nAngular;	Backbone;	Console;		Dir;			Express;	Fork;		Grunt;		Haslayout;		Iconfont;\nJsonp;		Kissy;		Localstorage;	Media query;	Npm;		Opacity;	Prototype;	Querystring;	Referer;\nSeajs;		Trim;		Underscore;		Vim;			Worker;		Xss;		Yslow;		Zepto;\n\n\u5982\u679c\u4f60\u5bf9\u4e0a\u976226\u4e2a\u5355\u8bcd\u90fd\u80fd\u8bf4\u51fa\u4e2a\u6240\u4ee5\u7136\u6765\uff0c\u4f60\u5c31\u662f\u6211\u4eec\u8981\u627e\u7684\u4eba\uff0c\u8d76\u5feb\u52a0\u5165\u6211\u4eec\u5427\uff01\n\n\u5b98\u7f51\u62db\u8058\u5165\u53e3\uff1ahttp://job.alibaba.com/zhaopin/position_detail.htm?positionId=5242\n\u9762\u8bd5\u5b98\u76f4\u90ae\uff1a%cyuchun@taobao.com\n\n";try{window.console.log(i,"color: red")}catch(j){window.__consoleJobError=1}d=[],e={},f=[]})})}}),{buildCommand:function(a,e,f){c[a]={requires:e,func:f};var g={execute:function(){d.push(a)}};b.addCommand(a,g)}}}),function(a,b){var c=b.GlobalBuilder;c.buildCommand("initResponsive",function(){var c={document:{"0-1260":{className:"range-1-small",imgSize:["s180","180x180.jpg"]},"1260-1440":{className:"range-1-normal",imgSize:["s220","220x220.jpg"]},"1440-10000":{className:"range-1-large",imgSize:["s250","250x250.jpg"]}}},d=a.require("srpbase/common/wrd/index"),e=new d({boxs:["page","J_SiteNavBd","layout-wrapper"],prefixCls:"s-page-",regions:c,autoAdapt:!0,autoDestroy:!1,autoRender:!1,delay:100,HDImgSize:!1,holderAttr:"data-ks-lazyload"});b.config("responsive",e)}),c.buildCommand("setSafeParam",function(){function c(a){var b;return b="string"==typeof a?a.replace(/[<>'"\s]/g,""):a}var d,e,f=window.__SafeUrl__||location.href,g=c(f),h=location.hash,i=g.slice(g.indexOf("?")+1),j=a.unparam(location.search);i.indexOf("#")>-1?(e=i.slice(0,g.indexOf("#")+1),d=a.unparam(e)):(e=i,d=a.unparam(e)),b.config("location",{safeUrl:g,href:g,safeUrlRequest:e,hash:h,search:i,param:d,originParam:j})}),c.buildCommand("minidetect",function(){PAGE_TIMER_FN()}),c.buildCommand("initSiteNav",function(){try{TB.Global.blacklist=["fn-cart","fn-webww"],TB.Global.init()}catch(b){a.log("\u540a\u9876\u521d\u59cb\u5316\u5931\u8d25")}}),c.buildCommand("preloadImgofLoading",function(){var a=new Image;a.onload=function(){a=null},a.src="http://img01.taobaocdn.com/tps/i1/T1Z6DDXllbXXbb3zDj-60-24.gif"}),c.buildCommand("getP4Pdata",function(){var c=b.config("responsive"),d=window.givenByFE||{};try{if(d.P4PConfig){var e="widget/advertindex/index,widget/advertindex/index.css,core";if(d.p4pstatic)e="widget/advertindex/index,core";else{var f=d.p4pstaticVersion||"0.9.0";a.config({modules:{"widget/advertindex/index":{fullpath:"http://g.tbcdn.cn/mm/staobao/"+f+"/index-min.js"},"widget/advertindex/index.css":{fullpath:"http://g.tbcdn.cn/mm/staobao/"+f+"/index-min.css"}}})}KISSY.use(e,function(a){var e=a.require("widget/advertindex/"),f=(a.require("srpbase/util/goldsend/"),new e({param:d.P4PConfig,placeholder:"http://a.tbcdn.cn/kissy/1.0.0/build/imglazyload/spaceball.gif",readyFn:function(){var b=a.one(".tb-wrapper-sub"),c=a.one(".tb-bottom");b.html('<div id="J_shopkeeper" style="height: 2000px;"></div><div id="J_shopfeature" style="height: 1000px;"></div>'),c.prepend('<div id="J_shopkeeper_bottom"></div>')},callbacks:{J_shopkeeper:function(b,d){a.ready(function(){b||a.each(d,function(a){var b=a.all("img");b.each(function(a){a.attr("resy-img","true"),c.addImage(a,a.attr("_placeholder"))})})})},J_shopfeature:function(a,b){if(!a){var d=b.all(".pic img");d.each(function(a){c.bindImg(a[0],a.attr("_placeholder")),a[0]._cls=""})}},J_p4pdiscount:function(b){if(!b){var c=[];a.all(".taogold-btn").each(function(a){var b=a.parent(".pic");c.push({effect:"bubble",eventType:"touch",el:b,trigger:b,box:a,bound:{height:30}})});var d=a.require("srpbase/common/freeanim/");new d({plugins:c})}},J_p4plink:function(){a.later(function(){var b=a.one(".tb-wrapper-sub"),c=a.one(".tb-container .tb-wrapper"),d=b.height()-c.height(),e=14,f=10,g=2*f*e;if(d>0&&g>d){var h=f-Math.floor(d/(2*e));b.all(".item-box").each(function(a){a.css({paddingTop:h,paddingBottom:h})})}},50)}}}));b.config("adConfig",!0),b.config("p4padvert",f)})}}catch(g){a.log("\u5f53\u524d\u9875\u9762-"+d.currentPage+": P4P\u52a0\u8f7d\u5931\u8d25\uff01")}}),c.buildCommand("setOldGlobalProperty",function(){window.SRP=window.SRP||{},window.SRP.stat=window.SRP.stat||{data:{},rule:{}},window.SRP.Icon=window.SRP.Icon||{},window.SRP.assetsUrl="http://assets.etao.net/apps/e/bsrp/",window.SRP.atbcdnUrl="http://a.tbcdn.cn/apps/e/bsrp/",window.SRP.version=window.SRP.version||"130110/",window.SRP.fastbuyForm="http://buy.taobao.com/auction/buy_now.htm",window.SRP.apiUrl="/search?app=api",location.pathname.indexOf("bsrp")>-1&&(window.SRP.apiUrl=location.pathname.indexOf("tb/bsrp")>-1?"/tb/bsrp/interface/search.php?app=api":"/bsrp/interface/search.php?app=api"),window.SRP.discountUrl="http://tbskip.taobao.com/limit_promotion_item.htm",window.SRP.wwlightUrl="http://a.tbcdn.cn/p/header/webww-min.js?t=20110629.js",window.Theme=window.Theme||{},window.Theme.UI=["gray","plain","humor","fashion"],window.Theme.type="fashion",window._IconLazy_=!0,window.matchPage=window.matchPage||{},window.matchPage.ZheKou=!1,window.matchPage.TDG=!0,window.PFORP=window.PFORP||{},window.PFORP.ids=window.PFORP.ids||[],window.PFORP.DiscountFlag=window.PFORP.DiscountFlag||!1,window.PFORP.DiscountLoad=!1,window.PFORP.DiscountUrl="http://show.re.taobao.com/feature.htm?cb=window.PFORP.renderDiscount&feature_names=promoName ,promoPrice,promoOtherNeed&from=taobao_search",window.PFORP.DiscountData=null,window.PFORP.TextLinkFlag=window.PFORP.TextLinkFlag||!1,window.PFORP.TextLinkId=window.PFORP.TextLinkId||"419110_1006",window.PFORP.TextLinkUrl="http://textlink.simba.taobao.com/lk?callback=window.PFORP.renderTextLink",window.PFORP.B2BLinkFlag=window.PFORP.B2BLinkFlag||!1,window.PFORP.B2BLinkUrl="http://cmweb.ilike.1688.com/cmweb/hollywood/product/handleJsonp.htm?prodid=983&callback=window.PFORP.renderB2BLink"}),c.buildCommand("setNewGlobalProperty",function(){a.mix(window.givenByFE,window.SRP);var c="/search?app=api";window.location.pathname.indexOf("bsrp")>-1&&(c="/bsrp/interface/search.php?app=api");var d=window.givenByFE,e=b.config("location"),f=e.param||{};b.config({apiurl:c,param:a.merge(f,d.Global),icondata:d.Icon,maidian:d.maidian,urlmap:{fastbuyForm:"http://buy.taobao.com/auction/buy_now.htm",discountUrl:"http://tbskip.taobao.com/limit_promotion_item.htm",wwlightUrl:"http://a.tbcdn.cn/p/header/webww-min.js?t=20110629.js"},urlobjectmap:[{name:"fastbuyForm",option:{uri:"fastbuyForm"}},{name:"discountUrl",option:{uri:"discountUrl"}},{name:"wwlightUrl",option:{uri:"wwlightUrl"}}]})}),c.buildCommand("initBrowserUpdater",function(){a.UA.ie<8&&(6==a.UA.ie&&a.DOM.addClass(document.body,"ie-6"),a.use("components/tools/browser-updater/",function(a,b){b.show({tbDownloadPid:"0080_2103"})}))})}(KISSY,SEARCH),function(a,b){var c=b.ReadyBuilder;c.buildCommand("renderResponsive",[],function(){}),c.buildCommand("initCoreMod",["brix/core/pagelet","components/utils/datalazyload","components/utils/localstorage","components/utils/resolver","components/utils/resizebase","components/utils/scrollbase","core","dd"],function(c,d,e,f,g,h){function i(b){a.use("components/utils/wangwang",function(a,c){c.light(b)})}window.givenByFE&&b.config(window.givenByFE);var j=b.config("param"),k=b.config("responsive"),l=d,m=e,n=f,o=g,p=h;m.set("param",j),n.setUrlMap(b.config("urlmap")),n.setUrlObjectMap(b.config("urlobjectmap")),l.on("loadArea",function(a){var b=a.el;i(b),k.addImages(b.all("img"))}),l.set("callbackFilter",function(a){i(a)}),k&&l.on("loadImg",function(a){k.bindImg(a.img,a.src)}),l.lazyFirstLoad(),b.config({datalazyload:l,localstorage:m,resolver:n,resizebase:o,scrollbase:p}),i()}),c.buildCommand("initImgScale",[],function(){}),c.buildCommand("initPagelet",["core"],function(){}),c.buildCommand("initStatsend",["srpbase/tool/statsend/"],function(a){var c=(window.maidian||b.config("maidian"),window.SRP.stat),d=(b.config("adConfig"),new a);c&&(c.rule=c.rule||window.givenByFE.tracerule,d.setStat(c)),window.maidian&&(d.send(window.maidian.replace("{p4p_isOK}",2),!1),window.maidian=void 0),SEARCH.matchIframe=d.matchIframe,d.initClickTrace(),d.iframeClickStat(),b.config("statsend",d),d.initSendTrace()}),c.buildCommand("initStatsendWithoutP4P",["srpbase/tool/statsend/"],function(a){var c,d=window.maidian||b.config("maidian"),e=new a;window.SRP&&(c=window.SRP.stat),c&&e.setStat(c),d&&(e.send(d,!1),window.maidian=void 0),SEARCH.matchIframe=e.matchIframe,e.initClickTrace(),e.iframeClickStat(),b.config("statsend",e)}),c.buildCommand("initFreepopup",["srpbase/common/freepopup/","srpbase/common/freeanim/","components/newsrp/wrapper/"],function(c,d,e){var f=b.config("apiurl"),g=b.config("icondata"),h=b.config("param"),i=new c({apiurl:f,param:h,icondata:g});if(b.config("freepopup",i),!(KISSY.UA.ie<8)){{var j=[];a.one(".widget-tabpage-el")}a.all(".similar-btns").each(function(a){var b=a.parent(".pic");j.push({effect:"bubble",eventType:"touch",el:b,trigger:b,box:a,bound:{height:30}})});{new d({plugins:j})}}var k=b.config("responsive"),l=new e({itemCls:".pic-imgs-hook",triggerCls:{prev:"icon-btn-prev-1",next:"icon-btn-next-1",prevDisable:"icon-btn-prev-1-disable",nextDisable:"icon-btn-next-1-disable"}});l.addWrappers(a.all(".feature-thumbs ul")),l.addWrappers(a.all(".newsrp-navbar-el .elem-nav-wrap dl"),".elem-link");var m=b.config("p4padvert");k.addCallBack("0-1260",function(){l.refresh(),m&&m.resize&&m.resize({pageWidth:1e3,rightWidth:200})}),k.addCallBack("1260-1440",function(){l.refresh(),m&&m.resize&&m.resize({pageWidth:1190,rightWidth:240})}),k.addCallBack("1440-10000",function(){l.refresh(),m&&m.resize&&m.resize({pageWidth:1350,rightWidth:270})});var n=setInterval(function(){a.one(".feature-icon-tgr")&&(l.addWrappersByCB(a.all(".feature-icon"),function(a){var b=a.one(".feature-icon-tgr");b&&b.addClass("n-w-tgr")}),clearInterval(n))},1e3);b.config("wrapper",l)}),c.buildCommand("initTiptools",["components/tools/tiptools/"],function(c){a.later(function(){var a=b.config("param"),d=document.getElementById("J_Tiptool_tpl");d&&(a.cat||(a.cat=""),a.bucketid||(a.bucketid="0"),new c({el:d.innerHTML,param:a}))},1e3)}),c.buildCommand("initFooter",[],function(){a.later(function(){var b=a.one("#J_FooterMore");b&&(b.on("mouseenter",function(){b.addClass("footer-more-hover")}),b.on("mouseleave",function(){b.removeClass("footer-more-hover")}),a.all("#J_Footer a").each(function(a){"javascript:void(0)"!=a.attr("href")&&a.attr("target","_blank")}))},2e3)}),c.buildCommand("initCheckSniff",[],function(){if(a.UA.ie<9){var b=document.createElement("iframe");b.style.position="absolute",b.style.visibility="hidden",b.style.width="0",b.style.height="0",b.src="http://www.taobao.com/go/act/search/check.html",document.body.appendChild(b),setTimeout(function(){document.body.removeChild(b)},3e4)}}),c.buildCommand("initDiscover",["datalazyload"],function(a){b.config("discover_datalazyload",new a({autoDestroy:!1}))}),c.buildCommand("eventBuffer",["event"," node"],function(b){function c(a){d&&d.push({dom:a.currentTarget,eventObj:a})}var d=[];b.delegate(document,"click",".nav-category-content a,.nav-pill a",c),Brix.ready(function(){Brix.pagelet.ready(function(){b.undelegate(document,"click",".nav-category-content a,.nav-pill a",c);for(var e;e=d.shift();)a.one(e.dom).fire("click");d=null})})}),c.buildCommand("ministart",["event"," node"],function(){}),c.buildCommand("initASyncNav",["srpbase/async/context"],function(b){function c(c,d,e){var f=[],g=e.js,h=e.tpl,i=(b.getData("renderNum"),[]);a.each(c,function(a){(-1!==a.indexOf("components")||-1!==a.indexOf("srpbase"))&&(i.push(a),f.push(a+g,a+h))}),a.use(f.join(","),function(){d(i,{})})}var d="components/navigation",e="components/breadcrumbs",f=window.givenByFE.navData;f&&(b.set("renderPrepare",c),b.setContainer(e,".tb-crumbs"),b.setContainer(d,".tb-navigation"),b.setData(d,f[d]),b.setData(e,f[e]),b.renderQueue([e,d]))}),c.buildCommand("listenIFrames",["event","json"],function(b){var c=window.givenByFE.listenIFrames;c&&b.on(window,"message",function(b){var c=b.originalEvent.data;if(c){var d=c.position,e=c.height;d&&e&&a.one(".sc-pos-"+d).css("height",e)}})}),function(){a.ready(function(){a.use("node,json",function(a,b,c){function d(){var a={};if(window.performance&&window.performance.timing){var b=window.performance.timing;a.dns=b.domainLookupEnd-b.domainLookupStart,a.con=b.connectEnd-b.connectStart,a.req=b.responseStart-b.requestStart,a.res=b.responseEnd-b.responseStart,a.dcl=b.domContentLoadedEventEnd-b.domLoading,a.onload=b.loadEventStart-b.domLoading,a.type=window.performance.navigation.type}return a}function e(b){var d=function(){var a=window.givenByFE&&givenByFE.currentPage||"",d=window.givenByFE&&givenByFE.Global&&givenByFE.Global.buckets||"",e=a+"_"+d;try{JSTracker.send({sampling:1e3,msg:c.stringify(b),category:e,url:"http://s.taobao.com/search"})}catch(f){}};window.JSTracker&&JSTracker.send?d():a.getScript("http://g.tbcdn.cn/tb/tracker/1.0.13/index.js",d)}var f=a.one(window);f.on("load",function(){var a;try{a=d()}catch(b){a={}}e(a)})})})}()}(KISSY,SEARCH),function(a){function b(b){"string"==typeof b&&(b=b.split(","));var e=[],f={},g=[],h={},i={};if(d=a.Config.debug,a.each(b,function(b){var d=a.Loader.Utils.createModuleInfo(a,b);c(d,e,g,f,h,i)}),e.length)if(a.config("combine")){for(var j=a.Config,k=j.comboPrefix,l=j.comboSep,m=j.comboMaxFileNum,n=j.comboMaxUrlLength,o="",p="",q=[],r=[],s=0;s<e.length;s++){var t=e[s],u=t.getPackage(),v=u.getPrefixUriForCombo(),w=t.getFullPath();if(u.isCombine()&&a.startsWith(w,v)){var x=w.slice(v.length).replace(/\?.*$/,"");q.push(t),r.push(x),1===q.length?(o=v+k,p="?t="+encodeURIComponent(u.getTag())):(r.length>m||o.length+r.join(l).length+p.length>n||q[0].getPackage()!=u)&&(q.pop(),r.pop(),document.writeln('<link href="'+(o+r.join(l)+p)+'"  rel="stylesheet"/>'),q=[],r=[],s--)}else document.writeln('<link href="'+w+'"  rel="stylesheet"/>')}r.length&&document.writeln('<link href="'+(o+r.join(l)+p)+'"  rel="stylesheet"/>')}else{var y='<style>\n@import "'+b.join('";\n@import "')+'";\n</style>';document.writeln(y)}}function c(b,e,f,g,h,i){var j=b.getName();if(d&&h[j])return void a.error("circular dependencies found: "+f);if(!i[j]){if(i[j]=1,"css"==b.getType())return void(g[j]||(b.status=4,e.push(b),g[j]=1));var k=b.getRequiredMods();d&&(h[j]=1,f.push(j)),a.each(k,function(a){c(a,e,f,g,h,i)}),d&&(f.pop(),delete h[j])}}var d=a.Config.debug;window.importStyle=b}(KISSY),function(a,b){window.givenByFE&&b.config(window.givenByFE);var c={srp:[]},d=b.config("currentPage"),e=[];if(d){var f,g=b.config("importStyle"),h=c[d]||[];g&&(h=h.concat(g)),h=h.concat(e),h.length>0&&(f="components/"+h.join("/index.css,components/")+"/index.css",importStyle(f))}}(KISSY,SEARCH),function(a,b){var c=b.GlobalBuilder,d="BODY_TOP",e="BODY_BOTTOM",f={"default":{BODY_TOP:["setSafeParam","initSiteNav","getP4Pdata","initBrowserUpdater","preloadImgofLoading","setNewGlobalProperty"],BODY_BOTTOM:["renderResponsive","initCoreMod","initStatsend","initFreepopup","initTiptools","ready"]},mainsrp:{BODY_TOP:["setSafeParam","initSiteNav","getP4Pdata","initBrowserUpdater","preloadImgofLoading","setNewGlobalProperty"],BODY_BOTTOM:["renderResponsive","initCoreMod","initStatsend","initFreepopup","initTiptools","initASyncNav","listenIFrames","ready"]},vsrp:{BODY_TOP:["setSafeParam","initSiteNav","initBrowserUpdater","preloadImgofLoading","setNewGlobalProperty"],BODY_BOTTOM:["renderResponsive","initCoreMod","initStatsend","initFreepopup","initTiptools","ready"]},i2isrp:{BODY_TOP:["setSafeParam","initSiteNav","initBrowserUpdater","preloadImgofLoading","setNewGlobalProperty"],BODY_BOTTOM:["renderResponsive","initCoreMod","initStatsend","initFreepopup","initTiptools","ready"]}},g=b.config("currentPage");
g in f?(c.buildCommand(d,f[g][d]),c.buildCommand(e,f[g][e])):(c.buildCommand(d,f["default"][d]),c.buildCommand(e,f["default"][e]))}(KISSY,SEARCH);KISSY.add("srpbase/common/freeanim/base/element",function(a){function b(){b.superclass.constructor.apply(this,arguments)}var c=a.require("base");return b.ATTRS={key:{},el:{},trigger:{},box:{},bound:{value:{}},prefixCls:{value:""}},a.extend(b,c,{initialize:function(){},accept:function(){},run:function(){},runByShiv:function(){}}),b},{requires:["base"]}),KISSY.add("srpbase/common/freeanim/base/vendor-less-min",function(){return Function.prototype.bind?void!function(a,b){function c(b){return a.less[b.split("/")[1]]}function d(a,b){"undefined"!=typeof console&&w.logLevel>=b&&console.log("less: "+a)}function e(a){return a.replace(/^[a-z-]+:\/+?[^\/]+/,"").replace(/^\//,"").replace(/\.[a-zA-Z]+$/,"").replace(/[^\.\w-]+/g,"-").replace(/\./g,":")}function f(a,c){var e="{line} {content}",f=a.filename||c,g=[],h=(a.type||"Syntax")+"Error: "+(a.message||"There is an error in your .less file")+" in "+f+" ",i=function(a,c,d){a.extract[c]!==b&&g.push(e.replace(/\{line\}/,(parseInt(a.line,10)||0)+(c-1)).replace(/\{class\}/,d).replace(/\{content\}/,a.extract[c]))};a.extract?(i(a,0,""),i(a,1,"line"),i(a,2,""),h+="on line "+a.line+", column "+(a.column+1)+":\n"+g.join("\n")):a.stack&&(h+=a.stack),d(h,z.errors)}function g(a,b,c){var f=b.href||"",g="less:"+(b.title||e(f)),h=document.getElementById(g),i=!1,j=document.createElement("style");if(j.setAttribute("type","text/css"),b.media&&j.setAttribute("media",b.media),j.id=g,j.styleSheet)try{j.styleSheet.cssText=a}catch(k){throw new Error("Couldn't reassign styleSheet.cssText.")}else j.appendChild(document.createTextNode(a)),i=null!==h&&h.childNodes.length>0&&j.childNodes.length>0&&h.firstChild.nodeValue===j.firstChild.nodeValue;var l=document.getElementsByTagName("head")[0];if(null===h||i===!1){var m=b&&b.nextSibling||null;m?m.parentNode.insertBefore(j,m):l.appendChild(j)}if(h&&i===!1&&h.parentNode.removeChild(h),c&&D){d("saving "+f+" to cache.",z.info);try{D.setItem(f,a),D.setItem(f+":timestamp",c)}catch(k){d("failed to save",z.errors)}}}function h(a){return w.postProcessor&&"function"==typeof w.postProcessor&&(a=w.postProcessor.call(a,a)||a),a}function i(a,c){var d,f,h="less-error-message:"+e(c||""),i='<li><label>{line}</label><pre class="{class}">{content}</pre></li>',j=document.createElement("div"),k=[],l=a.filename||c,m=l.match(/([^\/]+(\?.*)?)$/)[1];j.id=h,j.className="less-error-message",f="<h3>"+(a.type||"Syntax")+"Error: "+(a.message||"There is an error in your .less file")+'</h3><p>in <a href="'+l+'">'+m+"</a> ";var n=function(a,c,d){a.extract[c]!==b&&k.push(i.replace(/\{line\}/,(parseInt(a.line,10)||0)+(c-1)).replace(/\{class\}/,d).replace(/\{content\}/,a.extract[c]))};a.extract?(n(a,0,""),n(a,1,"line"),n(a,2,""),f+="on line "+a.line+", column "+(a.column+1)+":</p><ul>"+k.join("")+"</ul>"):a.stack&&(f+="<br/>"+a.stack.split("\n").slice(1).join("<br/>")),j.innerHTML=f,g([".less-error-message ul, .less-error-message li {","list-style-type: none;","margin-right: 15px;","padding: 4px 0;","margin: 0;","}",".less-error-message label {","font-size: 12px;","margin-right: 15px;","padding: 4px 0;","color: #cc7777;","}",".less-error-message pre {","color: #dd6666;","padding: 4px 0;","margin: 0;","display: inline-block;","}",".less-error-message pre.line {","color: #ff0000;","}",".less-error-message h3 {","font-size: 20px;","font-weight: bold;","padding: 15px 0 5px 0;","margin: 0;","}",".less-error-message a {","color: #10a","}",".less-error-message .error {","color: red;","font-weight: bold;","padding-bottom: 2px;","border-bottom: 1px dashed red;","}"].join("\n"),{title:"error-message"}),j.style.cssText=["font-family: Arial, sans-serif","border: 1px solid #e00","background-color: #eee","border-radius: 5px","-webkit-border-radius: 5px","-moz-border-radius: 5px","color: #e00","padding: 15px","margin-bottom: 15px"].join(";"),"development"==w.env&&(d=setInterval(function(){document.body&&(document.getElementById(h)?document.body.replaceChild(j,document.getElementById(h)):document.body.insertBefore(j,document.body.firstChild),clearInterval(d))},10))}function j(a,b){w.errorReporting&&"html"!==w.errorReporting?"console"===w.errorReporting?f(a,b):"function"==typeof w.errorReporting&&w.errorReporting("add",a,b):i(a,b)}function k(a){var b=document.getElementById("less-error-message:"+e(a));b&&b.parentNode.removeChild(b)}function l(){}function m(a){w.errorReporting&&"html"!==w.errorReporting?"console"===w.errorReporting?l(a):"function"==typeof w.errorReporting&&w.errorReporting("remove",a):k(a)}function n(a){for(var b,c=document.getElementsByTagName("style"),d=0;d<c.length;d++)if(b=c[d],b.type.match(C)){var e=new w.tree.parseEnv(w),f=b.innerHTML||"";e.filename=document.location.href.replace(/#.*$/,""),(a||w.globalVars)&&(e.useFileCache=!0);var g=function(a){return function(b,c){if(b)return j(b,"inline");var d=c.toCSS(w);a.type="text/css",a.styleSheet?a.styleSheet.cssText=d:a.innerHTML=d}}(b);new w.Parser(e).parse(f,g,{globalVars:w.globalVars,modifyVars:a})}}function o(a,b){var c,d,e=/^((?:[a-z-]+:)?\/+?(?:[^\/\?#]*\/)|([\/\\]))?((?:[^\/\\\?#]*[\/\\])*)([^\/\\\?#]*)([#\?].*)?$/i,f=a.match(e),g={},h=[];if(!f)throw new Error("Could not parse sheet href - '"+a+"'");if(!f[1]||f[2]){if(d=b.match(e),!d)throw new Error("Could not parse page url - '"+b+"'");f[1]=f[1]||d[1]||"",f[2]||(f[3]=d[3]+f[3])}if(f[3]){for(h=f[3].replace(/\\/g,"/").split("/"),c=0;c<h.length;c++)"."===h[c]&&(h.splice(c,1),c-=1);for(c=0;c<h.length;c++)".."===h[c]&&c>0&&(h.splice(c-1,2),c-=2)}return g.hostPart=f[1],g.directories=h,g.path=f[1]+h.join("/"),g.fileUrl=g.path+(f[4]||""),g.url=g.fileUrl+(f[5]||""),g}function p(a,b){var c,d,e,f,g=o(a),h=o(b),i="";if(g.hostPart!==h.hostPart)return"";for(d=Math.max(h.directories.length,g.directories.length),c=0;d>c&&h.directories[c]===g.directories[c];c++);for(f=h.directories.slice(c),e=g.directories.slice(c),c=0;c<f.length-1;c++)i+="../";for(c=0;c<e.length-1;c++)i+=e[c]+"/";return i}function q(){if(a.XMLHttpRequest&&("file:"!==a.location.protocol||!a.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(b){return d("browser doesn't support AJAX.",z.errors),null}}function r(a,b,c,e){function f(b,c,d){b.status>=200&&b.status<300?c(b.responseText,b.getResponseHeader("Last-Modified")):"function"==typeof d&&d(b.status,a)}var g=q(),h=y?w.fileAsync:w.async;"function"==typeof g.overrideMimeType&&g.overrideMimeType("text/css"),d("XHR: Getting '"+a+"'",z.debug),g.open("GET",a,h),g.setRequestHeader("Accept",b||"text/x-less, text/css; q=0.9, */*; q=0.5"),g.send(null),y&&!w.fileAsync?0===g.status||g.status>=200&&g.status<300?c(g.responseText):e(g.status,a):h?g.onreadystatechange=function(){4==g.readyState&&f(g,c,e)}:f(g,c,e)}function s(b,c,d,e){c&&c.currentDirectory&&!/^([a-z-]+:)?\//.test(b)&&(b=c.currentDirectory+b);var f=o(b,a.location.href),g=f.url,h={currentDirectory:f.path,filename:g};if(c?(h.entryPath=c.entryPath,h.rootpath=c.rootpath,h.rootFilename=c.rootFilename,h.relativeUrls=c.relativeUrls):(h.entryPath=f.path,h.rootpath=w.rootpath||f.path,h.rootFilename=g,h.relativeUrls=e.relativeUrls),h.relativeUrls&&(h.rootpath=e.rootpath?o(e.rootpath+p(f.path,h.entryPath)).path:f.path),e.useFileCache&&E[g])try{var i=E[g];d(null,i,g,h,{lastModified:new Date})}catch(j){d(j,null,g)}else r(g,e.mime,function(a,b){E[g]=a;try{d(null,a,g,h,{lastModified:b})}catch(c){d(c,null,g)}},function(a,b){d({type:"File",message:"'"+b+"' wasn't found ("+a+")"},null,g)})}function t(a,b,c,d,e){var f=new w.tree.parseEnv(w);f.mime=a.type,(e||w.globalVars)&&(f.useFileCache=!0),s(a.href,null,function(h,i,j,k,l){if(l){l.remaining=d;var n=D&&D.getItem(j),o=D&&D.getItem(j+":timestamp");if(!c&&o&&l.lastModified&&new Date(l.lastModified).valueOf()===new Date(o).valueOf())return g(n,a),l.local=!0,void b(null,null,i,a,l,j)}m(j),i?(f.currentFileInfo=k,new w.Parser(f).parse(i,function(c,d){if(c)return b(c,null,null,a);try{b(c,d,i,a,l,j)}catch(c){b(c,null,null,a)}},{modifyVars:e,globalVars:w.globalVars})):b(h,null,null,a,l,j)},f,e)}function u(a,b,c){for(var d=0;d<w.sheets.length;d++)t(w.sheets[d],a,b,w.sheets.length-(d+1),c)}function v(){"development"===w.env?(w.optimization=0,w.watchTimer=setInterval(function(){w.watchMode&&u(function(a,b,c,d,e){if(a)j(a,d.href);else if(b){var f=b.toCSS(w);f=h(f),g(f,d,e.lastModified)}})},w.poll)):w.optimization=3}("undefined"==typeof a.less||"undefined"!=typeof a.less.nodeType)&&(a.less={}),w=a.less,x=a.less.tree={},w.mode="browser";var w,x;w===b&&(w=exports,x=c("./tree"),w.mode="node"),w.Parser=function(a){function d(){D=y,G.push({current:C,i:y,j:z})}function e(){var a=G.pop();C=a.current,D=y=a.i,z=a.j}function f(){G.pop()}function g(){y>D&&(C=C.slice(y-D),D=y)}function h(a,b){var c=a.charCodeAt(0|b);return 32>=c&&(32===c||10===c||9===c)}function i(a){var b,c,d=typeof a;return"string"===d?v.charAt(y)!==a?null:(l(1),a):(g(),(b=a.exec(C))?(c=b[0].length,l(c),"string"==typeof b?b:1===b.length?b[0]:b):null)}function j(a){y>D&&(C=C.slice(y-D),D=y);var b=a.exec(C);return b?(l(b[0].length),"string"==typeof b?b:1===b.length?b[0]:b):null}function k(a){return v.charAt(y)!==a?null:(l(1),a)}function l(a){for(var b,c=y,d=z,e=y-D,f=y+C.length-e,g=y+=a,h=v;f>y&&(b=h.charCodeAt(y),!(b>32))&&(32===b||10===b||9===b||13===b);y++);return C=C.slice(a+y-g+e),D=y,!C.length&&z<B.length-1?(C=B[++z],l(0),!0):c!==y||d!==z}function m(a,b){var c="[object Function]"===Object.prototype.toString.call(a)?a.call(F):i(a);return c?c:void o(b||("string"==typeof a?"expected '"+a+"' got '"+v.charAt(y)+"'":"unexpected token"))}function n(a,b){return v.charAt(y)===a?(l(1),a):void o(b||"expected '"+a+"' got '"+v.charAt(y)+"'")}function o(a,b){var c=new Error(a);throw c.index=y,c.type=b||"Syntax",c}function p(a){return"string"==typeof a?v.charAt(y)===a:a.test(C)}function q(a){return v.charAt(y)===a}function r(a,b){return a.filename&&b.currentFileInfo.filename&&a.filename!==b.currentFileInfo.filename?E.imports.contents[a.filename]:v}function s(a,b){for(var c=a+1,d=null,e=-1;--c>=0&&"\n"!==b.charAt(c);)e++;return"number"==typeof a&&(d=(b.slice(0,a).match(/\n/g)||"").length),{line:d,column:e}}function t(a,b,d){var e=d.currentFileInfo.filename;return"browser"!==w.mode&&"rhino"!==w.mode&&(e=c("path").resolve(e)),{lineNumber:s(a,b).line+1,fileName:e}}function u(a,b){var c=r(a,b),d=s(a.index,c),e=d.line,f=d.column,g=a.call&&s(a.call,c).line,h=c.split("\n");this.type=a.type||"Syntax",this.message=a.message,this.filename=a.filename||b.currentFileInfo.filename,this.index=a.index,this.line="number"==typeof e?e+1:null,this.callLine=g+1,this.callExtract=h[g],this.stack=a.stack,this.column=f,this.extract=[h[e-1],h[e],h[e+1]]}var v,y,z,A,B,C,D,E,F,G=[],H=a&&a.filename;a instanceof x.parseEnv||(a=new x.parseEnv(a));var I=this.imports={paths:a.paths||[],queue:[],files:a.files,contents:a.contents,contentsIgnoredChars:a.contentsIgnoredChars,mime:a.mime,error:null,push:function(b,c,d,e){var f=this;this.queue.push(b);var g=function(a,c,d){f.queue.splice(f.queue.indexOf(b),1);var g=d===H;f.files[d]=c,a&&!f.error&&(f.error=a),e(a,c,g,d)};w.Parser.importer?w.Parser.importer(b,c,g,a):w.Parser.fileLoader(b,c,function(b,e,f,h){if(b)return void g(b);var i=new x.parseEnv(a);i.currentFileInfo=h,i.processImports=!1,i.contents[f]=e,(c.reference||d.reference)&&(h.reference=!0),d.inline?g(null,e,f):new w.Parser(i).parse(e,function(a,b){g(a,b,f)})},a)}},J=j;return u.prototype=new Error,u.prototype.constructor=u,this.env=a=a||{},this.optimization="optimization"in this.env?this.env.optimization:1,E={imports:I,parse:function(d,e,f){var g,h,i,j,k,l=null,m="";if(y=z=D=A=0,j=f&&f.globalVars?w.Parser.serializeVars(f.globalVars)+"\n":"",k=f&&f.modifyVars?"\n"+w.Parser.serializeVars(f.modifyVars):"",(j||f&&f.banner)&&(m=(f&&f.banner?f.banner:"")+j,E.imports.contentsIgnoredChars[a.currentFileInfo.filename]=m.length),d=d.replace(/\r\n/g,"\n"),v=d=m+d.replace(/^\uFEFF/,"")+k,E.imports.contents[a.currentFileInfo.filename]=d,B=function(b){function c(b,c){l=new u({index:c||i,type:"Parse",message:b,filename:a.currentFileInfo.filename},a)}function d(a){var c=i-s;512>c&&!a||!c||(r.push(b.slice(s,i+1)),s=i+1)}var e,f,g,h,i,j,k,m,n,o=b.length,p=0,q=0,r=[],s=0;for(i=0;o>i;i++)if(k=b.charCodeAt(i),!(k>=97&&122>=k||34>k))switch(k){case 40:q++,f=i;continue;case 41:if(--q<0)return c("missing opening `(`");continue;case 59:q||d();continue;case 123:p++,e=i;continue;case 125:if(--p<0)return c("missing opening `{`");p||q||d();continue;case 92:if(o-1>i){i++;continue}return c("unescaped `\\`");case 34:case 39:case 96:for(n=0,j=i,i+=1;o>i;i++)if(m=b.charCodeAt(i),!(m>96)){if(m==k){n=1;break}if(92==m){if(i==o-1)return c("unescaped `\\`");i++}}if(n)continue;return c("unmatched `"+String.fromCharCode(k)+"`",j);case 47:if(q||i==o-1)continue;if(m=b.charCodeAt(i+1),47==m)for(i+=2;o>i&&(m=b.charCodeAt(i),!(13>=m)||10!=m&&13!=m);i++);else if(42==m){for(g=j=i,i+=2;o-1>i&&(m=b.charCodeAt(i),125==m&&(h=i),42!=m||47!=b.charCodeAt(i+1));i++);if(i==o-1)return c("missing closing `*/`",j);i++}continue;case 42:if(o-1>i&&47==b.charCodeAt(i+1))return c("unmatched `/*`");continue}return 0!==p?g>e&&h>g?c("missing closing `}` or `*/`",e):c("missing closing `}`",e):0!==q?c("missing closing `)`",f):(d(!0),r)}(d),l)return e(new u(l,a));C=B[0];try{g=new x.Ruleset(null,this.parsers.primary()),g.root=!0,g.firstRoot=!0}catch(n){return e(new u(n,a))}if(g.toCSS=function(d){return function(e,f){e=e||{};var g,h,i=new x.evalEnv(e);"object"!=typeof f||Array.isArray(f)||(f=Object.keys(f).map(function(a){var b=f[a];return b instanceof x.Value||(b instanceof x.Expression||(b=new x.Expression([b])),b=new x.Value([b])),new x.Rule("@"+a,b,!1,null,0)}),i.frames=[new x.Ruleset(null,f)]);try{var j,k=[],l=[new x.joinSelectorVisitor,new x.processExtendsVisitor,new x.toCSSVisitor({compress:Boolean(e.compress)})],m=this;if(e.plugins)for(j=0;j<e.plugins.length;j++)e.plugins[j].isPreEvalVisitor?k.push(e.plugins[j]):e.plugins[j].isPreVisitor?l.splice(0,0,e.plugins[j]):l.push(e.plugins[j]);for(j=0;j<k.length;j++)k[j].run(m);for(g=d.call(m,i),j=0;j<l.length;j++)l[j].run(g);e.sourceMap&&(g=new x.sourceMapOutput({contentsIgnoredCharsMap:E.imports.contentsIgnoredChars,writeSourceMap:e.writeSourceMap,rootNode:g,contentsMap:E.imports.contents,sourceMapFilename:e.sourceMapFilename,sourceMapURL:e.sourceMapURL,outputFilename:e.sourceMapOutputFilename,sourceMapBasepath:e.sourceMapBasepath,sourceMapRootpath:e.sourceMapRootpath,outputSourceFiles:e.outputSourceFiles,sourceMapGenerator:e.sourceMapGenerator})),h=g.toCSS({compress:Boolean(e.compress),dumpLineNumbers:a.dumpLineNumbers,strictUnits:Boolean(e.strictUnits),numPrecision:8})}catch(n){throw new u(n,a)}if(e.cleancss&&"node"===w.mode){var o=c("clean-css"),p=e.cleancssOptions||{};return p.keepSpecialComments===b&&(p.keepSpecialComments="*"),p.processImport=!1,p.noRebase=!0,p.noAdvanced===b&&(p.noAdvanced=!0),new o(p).minify(h)}return e.compress?h.replace(/(^(\s)+)|((\s)+$)/g,""):h}}(g.eval),y<v.length-1){y=A;var o=s(y,v);i=v.split("\n"),h=o.line+1,l={type:"Parse",message:"Unrecognised input",index:y,filename:a.currentFileInfo.filename,line:h,column:o.column,extract:[i[h-2],i[h-1],i[h]]}}var p=function(b){return b=l||b||E.imports.error,b?(b instanceof u||(b=new u(b,a)),e(b)):e(null,g)};return a.processImports===!1?p():void new x.importVisitor(this.imports,p).run(g)},parsers:F={primary:function(){for(var a,b=this.mixin,c=J,d=[];C;){if(a=this.extendRule()||b.definition()||this.rule()||this.ruleset()||b.call()||this.comment()||this.rulesetCall()||this.directive())d.push(a);else if(!c(/^[\s\n]+/)&&!c(/^;+/))break;if(q("}"))break}return d},comment:function(){var b;return"/"===v.charAt(y)?"/"===v.charAt(y+1)?new x.Comment(j(/^\/\/.*/),!0,y,a.currentFileInfo):(b=j(/^\/\*(?:[^*]|\*+[^\/*])*\*+\/\n?/),b?new x.Comment(b,!1,y,a.currentFileInfo):void 0):void 0},comments:function(){for(var a,b=[];a=this.comment(),a;)b.push(a);return b},entities:{quoted:function(){var b,c,d=y,e=y;return"~"===v.charAt(d)&&(d++,c=!0),'"'===v.charAt(d)||"'"===v.charAt(d)?(c&&k("~"),b=j(/^"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'/),b?new x.Quoted(b[0],b[1]||b[2],c,e,a.currentFileInfo):void 0):void 0},keyword:function(){var a;if(a=j(/^%|^[_A-Za-z-][_A-Za-z0-9-]*/)){var b=x.Color.fromKeyword(a);return b?b:new x.Keyword(a)}},call:function(){var b,c,d,e,f=y;if(b=/^([\w-]+|%|progid:[\w\.]+)\(/.exec(C)){if(b=b[1],c=b.toLowerCase(),"url"===c)return null;if(y+=b.length,"alpha"===c&&(e=F.alpha(),"undefined"!=typeof e))return e;if(k("("),d=this.arguments(),k(")"))return b?new x.Call(b,d,f,a.currentFileInfo):void 0}},arguments:function(){for(var a,b=[];(a=this.assignment()||F.expression(),a)&&(b.push(a),k(",")););return b},literal:function(){return this.dimension()||this.color()||this.quoted()||this.unicodeDescriptor()},assignment:function(){var a,b;return a=j(/^\w+(?=\s?=)/i),a&&k("=")?(b=F.entity(),b?new x.Assignment(a,b):void 0):void 0},url:function(){var b;return"u"===v.charAt(y)&&j(/^url\(/)?(b=this.quoted()||this.variable()||j(/^(?:(?:\\[\(\)'"])|[^\(\)'"])+/)||"",n(")"),new x.URL(null!=b.value||b instanceof x.Variable?b:new x.Anonymous(b),a.currentFileInfo)):void 0},variable:function(){var b,c=y;return"@"===v.charAt(y)&&(b=j(/^@@?[\w-]+/))?new x.Variable(b,c,a.currentFileInfo):void 0},variableCurly:function(){var b,c=y;return"@"===v.charAt(y)&&(b=j(/^@\{([\w-]+)\}/))?new x.Variable("@"+b[1],c,a.currentFileInfo):void 0},color:function(){var a;return"#"===v.charAt(y)&&(a=j(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})/))?new x.Color(a[1]):void 0},dimension:function(){var a,b=v.charCodeAt(y);return b>57||43>b||47===b||44==b?void 0:(a=j(/^([+-]?\d*\.?\d+)(%|[a-z]+)?/),a?new x.Dimension(a[1],a[2]):void 0)},unicodeDescriptor:function(){var a;return a=j(/^U\+[0-9a-fA-F?]+(\-[0-9a-fA-F?]+)?/),a?new x.UnicodeDescriptor(a[0]):void 0},javascript:function(){var c,d,e=y;return"~"===v.charAt(e)&&(e++,d=!0),"`"===v.charAt(e)?(a.javascriptEnabled===b||a.javascriptEnabled||o("You are using JavaScript, which has been disabled."),d&&k("~"),c=j(/^`([^`]*)`/),c?new x.JavaScript(c[1],y,d):void 0):void 0}},variable:function(){var a;return"@"===v.charAt(y)&&(a=j(/^(@[\w-]+)\s*:/))?a[1]:void 0},rulesetCall:function(){var a;return"@"===v.charAt(y)&&(a=j(/^(@[\w-]+)\s*\(\s*\)\s*;/))?new x.RulesetCall(a[1]):void 0},extend:function(a){var b,c,d,e,f,g=y;if(j(a?/^&:extend\(/:/^:extend\(/)){do{for(d=null,b=null;!(d=j(/^(all)(?=\s*(\)|,))/))&&(c=this.element());)b?b.push(c):b=[c];d=d&&d[1],f=new x.Extend(new x.Selector(b),d,g),e?e.push(f):e=[f]}while(k(","));return m(/^\)/),a&&m(/^;/),e}},extendRule:function(){return this.extend(!0)},mixin:{call:function(){var b,c,g,h,i,l,m=v.charAt(y),o=!1,p=y;if("."===m||"#"===m){for(d();b=y,h=j(/^[#.](?:[\w-]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+/),h;)g=new x.Element(i,h,b,a.currentFileInfo),c?c.push(g):c=[g],i=k(">");return c&&(k("(")&&(l=this.args(!0).args,n(")")),F.important()&&(o=!0),F.end())?(f(),new x.mixin.Call(c,l,p,a.currentFileInfo,o)):void e()}},args:function(a){var b,c,g,h,i,l,m=E.parsers,n=m.entities,p={args:null,variadic:!1},q=[],r=[],s=[];for(d();;){if(a)l=m.detachedRuleset()||m.expression();else{if(m.comments(),"."===v.charAt(y)&&j(/^\.{3}/)){p.variadic=!0,k(";")&&!b&&(b=!0),(b?r:s).push({variadic:!0});break}l=n.variable()||n.literal()||n.keyword()}if(!l)break;h=null,l.throwAwayComments&&l.throwAwayComments(),i=l;var t=null;if(a?l.value&&1==l.value.length&&(t=l.value[0]):t=l,t&&t instanceof x.Variable)if(k(":")){if(q.length>0&&(b&&o("Cannot mix ; and , as delimiter types"),c=!0),i=a&&m.detachedRuleset()||m.expression(),!i){if(!a)return e(),p.args=[],p;o("could not understand value for named argument")}h=g=t.name}else{if(!a&&j(/^\.{3}/)){p.variadic=!0,k(";")&&!b&&(b=!0),(b?r:s).push({name:l.name,variadic:!0});break}a||(g=h=t.name,i=null)}i&&q.push(i),s.push({name:h,value:i}),k(",")||(k(";")||b)&&(c&&o("Cannot mix ; and , as delimiter types"),b=!0,q.length>1&&(i=new x.Value(q)),r.push({name:g,value:i}),g=null,q=[],c=!1)}return f(),p.args=b?r:s,p},definition:function(){var a,b,c,g,h=[],i=!1;if(!("."!==v.charAt(y)&&"#"!==v.charAt(y)||p(/^[^{]*\}/)))if(d(),b=j(/^([#.](?:[\w-]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+)\s*\(/)){a=b[1];var l=this.args(!1);if(h=l.args,i=l.variadic,!k(")"))return A=y,void e();if(F.comments(),j(/^when/)&&(g=m(F.conditions,"expected condition")),c=F.block())return f(),new x.mixin.Definition(a,h,c,g,i);e()}else f()}},entity:function(){var a=this.entities;return a.literal()||a.variable()||a.url()||a.call()||a.keyword()||a.javascript()||this.comment()},end:function(){return k(";")||q("}")},alpha:function(){var a;return j(/^\(opacity=/i)?(a=j(/^\d+/)||this.entities.variable(),a?(n(")"),new x.Alpha(a)):void 0):void 0},element:function(){var b,c,g,h=y;return c=this.combinator(),b=j(/^(?:\d+\.\d+|\d+)%/)||j(/^(?:[.#]?|:*)(?:[\w-]|[^\x00-\x9f]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+/)||k("*")||k("&")||this.attribute()||j(/^\([^()@]+\)/)||j(/^[\.#](?=@)/)||this.entities.variableCurly(),b||(d(),k("(")?(g=this.selector())&&k(")")?(b=new x.Paren(g),f()):e():f()),b?new x.Element(c,b,h,a.currentFileInfo):void 0},combinator:function(){var a=v.charAt(y);if(">"===a||"+"===a||"~"===a||"|"===a||"^"===a){for(y++,"^"===v.charAt(y)&&(a="^^",y++);h(v,y);)y++;return new x.Combinator(a)}return new x.Combinator(h(v,y-1)?" ":null)},lessSelector:function(){return this.selector(!0)},selector:function(b){for(var c,d,e,f,g,h,i,j=y,k=J;(b&&(g=this.extend())||b&&(h=k(/^when/))||(f=this.element()))&&(h?i=m(this.conditions,"expected condition"):i?o("CSS guard can only be used at the end of selector"):g?d?d.push(g):d=[g]:(d&&o("Extend can only be used at the end of selector"),e=v.charAt(y),c?c.push(f):c=[f],f=null),"{"!==e&&"}"!==e&&";"!==e&&","!==e&&")"!==e););return c?new x.Selector(c,d,i,j,a.currentFileInfo):void(d&&o("Extend must be used to extend a selector, it cannot be used on its own"))},attribute:function(){if(k("[")){var a,b,c,d=this.entities;return(a=d.variableCurly())||(a=m(/^(?:[_A-Za-z0-9-\*]*\|)?(?:[_A-Za-z0-9-]|\\.)+/)),c=j(/^[|~*$^]?=/),c&&(b=d.quoted()||j(/^[0-9]+%/)||j(/^[\w-]+/)||d.variableCurly()),n("]"),new x.Attribute(a,c,b)}},block:function(){var a;return k("{")&&(a=this.primary())&&k("}")?a:void 0},blockRuleset:function(){var a=this.block();return a&&(a=new x.Ruleset(null,a)),a},detachedRuleset:function(){var a=this.blockRuleset();return a?new x.DetachedRuleset(a):void 0},ruleset:function(){var b,c,g,h;for(d(),a.dumpLineNumbers&&(h=t(y,v,a));(c=this.lessSelector(),c)&&(b?b.push(c):b=[c],this.comments(),c.condition&&b.length>1&&o("Guards are only currently allowed on a single selector."),k(","));)c.condition&&o("Guards are only currently allowed on a single selector."),this.comments();if(b&&(g=this.block())){f();var i=new x.Ruleset(b,g,a.strictImports);return a.dumpLineNumbers&&(i.debugInfo=h),i}A=y,e()},rule:function(b){var c,g,h,i,j,k=y,l=v.charAt(k);if("."!==l&&"#"!==l&&"&"!==l)if(d(),c=this.variable()||this.ruleProperty()){if(j="string"==typeof c,j&&(g=this.detachedRuleset()),g||(g=b||!a.compress&&!j?this.anonymousValue()||this.value():this.value()||this.anonymousValue(),h=this.important(),i=!j&&c.pop().value),g&&this.end())return f(),new x.Rule(c,g,h,i,k,a.currentFileInfo);if(A=y,e(),g&&!b)return this.rule(!0)}else f()},anonymousValue:function(){var a;return a=/^([^@+\/'"*`(;{}-]*);/.exec(C),a?(y+=a[0].length-1,new x.Anonymous(a[1])):void 0},"import":function(){var b,c,g=y;d();var h=j(/^@import?\s+/),i=(h?this.importOptions():null)||{};return h&&(b=this.entities.quoted()||this.entities.url())&&(c=this.mediaFeatures(),k(";"))?(f(),c=c&&new x.Value(c),new x.Import(b,c,i,g,a.currentFileInfo)):void e()},importOptions:function(){var a,b,c,d={};if(!k("("))return null;do if(a=this.importOption()){switch(b=a,c=!0,b){case"css":b="less",c=!1;break;case"once":b="multiple",c=!1}if(d[b]=c,!k(","))break}while(a);return n(")"),d},importOption:function(){var a=j(/^(less|css|multiple|once|inline|reference)/);return a?a[1]:void 0},mediaFeature:function(){var b,c,d=this.entities,e=[];do if(b=d.keyword()||d.variable())e.push(b);else if(k("(")){if(c=this.property(),b=this.value(),!k(")"))return null;if(c&&b)e.push(new x.Paren(new x.Rule(c,b,null,null,y,a.currentFileInfo,!0)));else{if(!b)return null;e.push(new x.Paren(b))}}while(b);return e.length>0?new x.Expression(e):void 0},mediaFeatures:function(){var a,b=this.entities,c=[];do if(a=this.mediaFeature()){if(c.push(a),!k(","))break}else if(a=b.variable(),a&&(c.push(a),!k(",")))break;while(a);return c.length>0?c:null},media:function(){var b,c,d,e;return a.dumpLineNumbers&&(e=t(y,v,a)),j(/^@media/)&&(b=this.mediaFeatures(),c=this.block())?(d=new x.Media(c,b,y,a.currentFileInfo),a.dumpLineNumbers&&(d.debugInfo=e),d):void 0},directive:function(){var b,c,g,h,i,l,m,n=y,p=!0;if("@"===v.charAt(y)){if(c=this["import"]()||this.media())return c;if(d(),b=j(/^@[a-z-]+/)){switch(h=b,"-"==b.charAt(1)&&b.indexOf("-",2)>0&&(h="@"+b.slice(b.indexOf("-",2)+1)),h){case"@charset":i=!0,p=!1;break;case"@namespace":l=!0,p=!1;break;case"@keyframes":i=!0;break;case"@host":case"@page":case"@document":case"@supports":m=!0}return i?(c=this.entity(),c||o("expected "+b+" identifier")):l?(c=this.expression(),c||o("expected "+b+" expression")):m&&(c=(j(/^[^{;]+/)||"").trim(),c&&(c=new x.Anonymous(c))),p&&(g=this.blockRuleset()),g||!p&&c&&k(";")?(f(),new x.Directive(b,c,g,n,a.currentFileInfo,a.dumpLineNumbers?t(n,v,a):null)):void e()}}},value:function(){var a,b=[];do if(a=this.expression(),a&&(b.push(a),!k(",")))break;while(a);return b.length>0?new x.Value(b):void 0},important:function(){return"!"===v.charAt(y)?j(/^! *important/):void 0},sub:function(){var a,b;return k("(")&&(a=this.addition())?(b=new x.Expression([a]),n(")"),b.parens=!0,b):void 0},multiplication:function(){var a,b,c,d,e;if(a=this.operand()){for(e=h(v,y-1);!p(/^\/[*\/]/)&&(c=k("/")||k("*"),c)&&(b=this.operand(),b);)a.parensInOp=!0,b.parensInOp=!0,d=new x.Operation(c,[d||a,b],e),e=h(v,y-1);return d||a}},addition:function(){var a,b,c,d,e;if(a=this.multiplication()){for(e=h(v,y-1);(c=j(/^[-+]\s+/)||!e&&(k("+")||k("-")),c)&&(b=this.multiplication(),b);)a.parensInOp=!0,b.parensInOp=!0,d=new x.Operation(c,[d||a,b],e),e=h(v,y-1);return d||a}},conditions:function(){var a,b,c,d=y;if(a=this.condition()){for(;p(/^,\s*(not\s*)?\(/)&&k(",")&&(b=this.condition(),b);)c=new x.Condition("or",c||a,b,d);return c||a}},condition:function(){var a,b,c,d,e=this.entities,f=y,g=!1;return j(/^not/)&&(g=!0),n("("),a=this.addition()||e.keyword()||e.quoted(),a?(d=j(/^(?:>=|<=|=<|[<=>])/),d?(b=this.addition()||e.keyword()||e.quoted(),b?c=new x.Condition(d,a,b,f,g):o("expected expression")):c=new x.Condition("=",a,new x.Keyword("true"),f,g),n(")"),j(/^and/)?new x.Condition("and",c,this.condition()):c):void 0},operand:function(){var a,b=this.entities,c=v.charAt(y+1);"-"!==v.charAt(y)||"@"!==c&&"("!==c||(a=k("-"));var d=this.sub()||b.dimension()||b.color()||b.variable()||b.call();return a&&(d.parensInOp=!0,d=new x.Negative(d)),d},expression:function(){var a,b,c=[];do a=this.addition()||this.entity(),a&&(c.push(a),p(/^\/[\/*]/)||(b=k("/"),b&&c.push(new x.Anonymous(b))));while(a);return c.length>0?new x.Expression(c):void 0},property:function(){var a=j(/^(\*?-?[_a-zA-Z0-9-]+)\s*:/);return a?a[1]:void 0},ruleProperty:function(){function b(a){var b=a.exec(e);return b?(g.push(y+h),h+=b[0].length,e=e.slice(b[1].length),f.push(b[1])):void 0}var c,d,e=C,f=[],g=[],h=0;for(b(/^(\*?)/);b(/^((?:[\w-]+)|(?:@\{[\w-]+\}))/););if(f.length>1&&b(/^\s*((?:\+_|\+)?)\s*:/)){for(l(h),""===f[0]&&(f.shift(),g.shift()),d=0;d<f.length;d++)c=f[d],f[d]="@"!==c.charAt(0)?new x.Keyword(c):new x.Variable("@"+c.slice(2,-1),g[d],a.currentFileInfo);return f}}}}},w.Parser.serializeVars=function(a){var b="";for(var c in a)if(Object.hasOwnProperty.call(a,c)){var d=a[c];b+=("@"===c[0]?"":"@")+c+": "+d+(";"===(""+d).slice(-1)?"":";")}return b},function(d){function e(a,b,c){if(!(c instanceof d.Dimension))throw{type:"Argument",message:"argument must be a number"};return null==b?b=c.unit:c=c.unify(),new d.Dimension(a(parseFloat(c.value)),b)}function f(a,b,c){var e,f,g,h,i=b.alpha,j=c.alpha,k=[];g=j+i*(1-j);for(var l=0;3>l;l++)e=b.rgb[l]/255,f=c.rgb[l]/255,h=a(e,f),g&&(h=(j*f+i*(e-j*(e+f-h)))/g),k[l]=255*h;return new d.Color(k,g)}function g(){var a,b=d.functions;for(a in l)l.hasOwnProperty(a)&&(b[a]=e.bind(null,Math[a],l[a]));for(a in m)m.hasOwnProperty(a)&&(b[a]=f.bind(null,m[a]));a=d.defaultFunc,b["default"]=a.eval.bind(a)}function h(a){return d.functions.hsla(a.h,a.s,a.l,a.a)}function i(a,b){return a instanceof d.Dimension&&a.unit.is("%")?parseFloat(a.value*b/100):j(a)}function j(a){if(a instanceof d.Dimension)return parseFloat(a.unit.is("%")?a.value/100:a.value);if("number"==typeof a)return a;throw{error:"RuntimeError",message:"color functions take numbers as parameters"}}function k(a){return Math.min(1,Math.max(0,a))}d.functions={rgb:function(a,b,c){return this.rgba(a,b,c,1)},rgba:function(a,b,c,e){var f=[a,b,c].map(function(a){return i(a,255)});return e=j(e),new d.Color(f,e)},hsl:function(a,b,c){return this.hsla(a,b,c,1)},hsla:function(a,b,c,d){function e(a){return a=0>a?a+1:a>1?a-1:a,1>6*a?g+(f-g)*a*6:1>2*a?f:2>3*a?g+(f-g)*(2/3-a)*6:g}a=j(a)%360/360,b=k(j(b)),c=k(j(c)),d=k(j(d));var f=.5>=c?c*(b+1):c+b-c*b,g=2*c-f;return this.rgba(255*e(a+1/3),255*e(a),255*e(a-1/3),d)},hsv:function(a,b,c){return this.hsva(a,b,c,1)},hsva:function(a,b,c,d){a=j(a)%360/360*360,b=j(b),c=j(c),d=j(d);var e,f;e=Math.floor(a/60%6),f=a/60-e;var g=[c,c*(1-b),c*(1-f*b),c*(1-(1-f)*b)],h=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]];return this.rgba(255*g[h[e][0]],255*g[h[e][1]],255*g[h[e][2]],d)},hue:function(a){return new d.Dimension(Math.round(a.toHSL().h))},saturation:function(a){return new d.Dimension(Math.round(100*a.toHSL().s),"%")},lightness:function(a){return new d.Dimension(Math.round(100*a.toHSL().l),"%")},hsvhue:function(a){return new d.Dimension(Math.round(a.toHSV().h))},hsvsaturation:function(a){return new d.Dimension(Math.round(100*a.toHSV().s),"%")},hsvvalue:function(a){return new d.Dimension(Math.round(100*a.toHSV().v),"%")},red:function(a){return new d.Dimension(a.rgb[0])},green:function(a){return new d.Dimension(a.rgb[1])},blue:function(a){return new d.Dimension(a.rgb[2])},alpha:function(a){return new d.Dimension(a.toHSL().a)},luma:function(a){return new d.Dimension(Math.round(a.luma()*a.alpha*100),"%")},luminance:function(a){var b=.2126*a.rgb[0]/255+.7152*a.rgb[1]/255+.0722*a.rgb[2]/255;return new d.Dimension(Math.round(b*a.alpha*100),"%")},saturate:function(a,b){if(!a.rgb)return null;var c=a.toHSL();return c.s+=b.value/100,c.s=k(c.s),h(c)},desaturate:function(a,b){var c=a.toHSL();return c.s-=b.value/100,c.s=k(c.s),h(c)},lighten:function(a,b){var c=a.toHSL();return c.l+=b.value/100,c.l=k(c.l),h(c)},darken:function(a,b){var c=a.toHSL();return c.l-=b.value/100,c.l=k(c.l),h(c)},fadein:function(a,b){var c=a.toHSL();return c.a+=b.value/100,c.a=k(c.a),h(c)},fadeout:function(a,b){var c=a.toHSL();return c.a-=b.value/100,c.a=k(c.a),h(c)},fade:function(a,b){var c=a.toHSL();return c.a=b.value/100,c.a=k(c.a),h(c)},spin:function(a,b){var c=a.toHSL(),d=(c.h+b.value)%360;return c.h=0>d?360+d:d,h(c)},mix:function(a,b,c){c||(c=new d.Dimension(50));var e=c.value/100,f=2*e-1,g=a.toHSL().a-b.toHSL().a,h=((f*g==-1?f:(f+g)/(1+f*g))+1)/2,i=1-h,j=[a.rgb[0]*h+b.rgb[0]*i,a.rgb[1]*h+b.rgb[1]*i,a.rgb[2]*h+b.rgb[2]*i],k=a.alpha*e+b.alpha*(1-e);return new d.Color(j,k)},greyscale:function(a){return this.desaturate(a,new d.Dimension(100))},contrast:function(a,b,c,d){if(!a.rgb)return null;if("undefined"==typeof c&&(c=this.rgba(255,255,255,1)),"undefined"==typeof b&&(b=this.rgba(0,0,0,1)),b.luma()>c.luma()){var e=c;c=b,b=e}return d="undefined"==typeof d?.43:j(d),a.luma()<d?c:b},e:function(a){return new d.Anonymous(a instanceof d.JavaScript?a.evaluated:a)},escape:function(a){return new d.Anonymous(encodeURI(a.value).replace(/=/g,"%3D").replace(/:/g,"%3A").replace(/#/g,"%23").replace(/;/g,"%3B").replace(/\(/g,"%28").replace(/\)/g,"%29"))},replace:function(a,b,c,e){var f=a.value;return f=f.replace(new RegExp(b.value,e?e.value:""),c.value),new d.Quoted(a.quote||"",f,a.escaped)
},"%":function(a){for(var b=Array.prototype.slice.call(arguments,1),c=a.value,e=0;e<b.length;e++)c=c.replace(/%[sda]/i,function(a){var c=a.match(/s/i)?b[e].value:b[e].toCSS();return a.match(/[A-Z]$/)?encodeURIComponent(c):c});return c=c.replace(/%%/g,"%"),new d.Quoted(a.quote||"",c,a.escaped)},unit:function(a,b){if(!(a instanceof d.Dimension))throw{type:"Argument",message:"the first argument to unit must be a number"+(a instanceof d.Operation?". Have you forgotten parenthesis?":"")};return b=b?b instanceof d.Keyword?b.value:b.toCSS():"",new d.Dimension(a.value,b)},convert:function(a,b){return a.convertTo(b.value)},round:function(a,b){var c="undefined"==typeof b?0:b.value;return e(function(a){return a.toFixed(c)},null,a)},pi:function(){return new d.Dimension(Math.PI)},mod:function(a,b){return new d.Dimension(a.value%b.value,a.unit)},pow:function(a,b){if("number"==typeof a&&"number"==typeof b)a=new d.Dimension(a),b=new d.Dimension(b);else if(!(a instanceof d.Dimension&&b instanceof d.Dimension))throw{type:"Argument",message:"arguments must be numbers"};return new d.Dimension(Math.pow(a.value,b.value),a.unit)},_minmax:function(a,c){switch(c=Array.prototype.slice.call(c),c.length){case 0:throw{type:"Argument",message:"one or more arguments required"}}var e,f,g,h,i,j,k,l,m=[],n={};for(e=0;e<c.length;e++)if(g=c[e],g instanceof d.Dimension)if(h=""===g.unit.toString()&&l!==b?new d.Dimension(g.value,l).unify():g.unify(),j=""===h.unit.toString()&&k!==b?k:h.unit.toString(),k=""!==j&&k===b||""!==j&&""===m[0].unify().unit.toString()?j:k,l=""!==j&&l===b?g.unit.toString():l,f=n[""]!==b&&""!==j&&j===k?n[""]:n[j],f!==b)i=""===m[f].unit.toString()&&l!==b?new d.Dimension(m[f].value,l).unify():m[f].unify(),(a&&h.value<i.value||!a&&h.value>i.value)&&(m[f]=g);else{if(k!==b&&j!==k)throw{type:"Argument",message:"incompatible types"};n[j]=m.length,m.push(g)}else Array.isArray(c[e].value)&&Array.prototype.push.apply(c,Array.prototype.slice.call(c[e].value));return 1==m.length?m[0]:(c=m.map(function(a){return a.toCSS(this.env)}).join(this.env.compress?",":", "),new d.Anonymous((a?"min":"max")+"("+c+")"))},min:function(){return this._minmax(!0,arguments)},max:function(){return this._minmax(!1,arguments)},"get-unit":function(a){return new d.Anonymous(a.unit)},argb:function(a){return new d.Anonymous(a.toARGB())},percentage:function(a){return new d.Dimension(100*a.value,"%")},color:function(a){if(a instanceof d.Quoted){var b,c=a.value;if(b=d.Color.fromKeyword(c))return b;if(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})/.test(c))return new d.Color(c.slice(1));throw{type:"Argument",message:"argument must be a color keyword or 3/6 digit hex e.g. #FFF"}}throw{type:"Argument",message:"argument must be a string"}},iscolor:function(a){return this._isa(a,d.Color)},isnumber:function(a){return this._isa(a,d.Dimension)},isstring:function(a){return this._isa(a,d.Quoted)},iskeyword:function(a){return this._isa(a,d.Keyword)},isurl:function(a){return this._isa(a,d.URL)},ispixel:function(a){return this.isunit(a,"px")},ispercentage:function(a){return this.isunit(a,"%")},isem:function(a){return this.isunit(a,"em")},isunit:function(a,b){return a instanceof d.Dimension&&a.unit.is(b.value||b)?d.True:d.False},_isa:function(a,b){return a instanceof b?d.True:d.False},tint:function(a,b){return this.mix(this.rgb(255,255,255),a,b)},shade:function(a,b){return this.mix(this.rgb(0,0,0),a,b)},extract:function(a,b){return b=b.value-1,Array.isArray(a.value)?a.value[b]:Array(a)[b]},length:function(a){var b=Array.isArray(a.value)?a.value.length:1;return new d.Dimension(b)},"data-uri":function(b,e){if("undefined"!=typeof a)return new d.URL(e||b,this.currentFileInfo).eval(this.env);var f=b.value,g=e&&e.value,h=c("fs"),i=c("path"),j=!1;if(arguments.length<2&&(g=f),this.env.isPathRelative(g)&&(g=this.currentFileInfo.relativeUrls?i.join(this.currentFileInfo.currentDirectory,g):i.join(this.currentFileInfo.entryPath,g)),arguments.length<2){var k;try{k=c("mime")}catch(l){k=d._mime}f=k.lookup(g);var m=k.charsets.lookup(f);j=["US-ASCII","UTF-8"].indexOf(m)<0,j&&(f+=";base64")}else j=/;base64$/.test(f);var n=h.readFileSync(g),o=32,p=parseInt(n.length/1024,10);if(p>=o&&this.env.ieCompat!==!1)return this.env.silent||console.warn("Skipped data-uri embedding of %s because its size (%dKB) exceeds IE8-safe %dKB!",g,p,o),new d.URL(e||b,this.currentFileInfo).eval(this.env);n=j?n.toString("base64"):encodeURIComponent(n);var q='"data:'+f+","+n+'"';return new d.URL(new d.Anonymous(q))},"svg-gradient":function(a){function e(){throw{type:"Argument",message:"svg-gradient expects direction, start_color [start_position], [color position,]..., end_color [end_position]"}}arguments.length<3&&e();var f,g,h,i,j,k,l,m=Array.prototype.slice.call(arguments,1),n="linear",o='x="0" y="0" width="1" height="1"',p=!0,q={compress:!1},r=a.toCSS(q);switch(r){case"to bottom":f='x1="0%" y1="0%" x2="0%" y2="100%"';break;case"to right":f='x1="0%" y1="0%" x2="100%" y2="0%"';break;case"to bottom right":f='x1="0%" y1="0%" x2="100%" y2="100%"';break;case"to top right":f='x1="0%" y1="100%" x2="100%" y2="0%"';break;case"ellipse":case"ellipse at center":n="radial",f='cx="50%" cy="50%" r="75%"',o='x="-50" y="-50" width="101" height="101"';break;default:throw{type:"Argument",message:"svg-gradient direction must be 'to bottom', 'to right', 'to bottom right', 'to top right' or 'ellipse at center'"}}for(g='<?xml version="1.0" ?><svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="100%" height="100%" viewBox="0 0 1 1" preserveAspectRatio="none"><'+n+'Gradient id="gradient" gradientUnits="userSpaceOnUse" '+f+">",h=0;h<m.length;h+=1)m[h].value?(i=m[h].value[0],j=m[h].value[1]):(i=m[h],j=b),i instanceof d.Color&&((0===h||h+1===m.length)&&j===b||j instanceof d.Dimension)||e(),k=j?j.toCSS(q):0===h?"0%":"100%",l=i.alpha,g+='<stop offset="'+k+'" stop-color="'+i.toRGB()+'"'+(1>l?' stop-opacity="'+l+'"':"")+"/>";if(g+="</"+n+"Gradient><rect "+o+' fill="url(#gradient)" /></svg>',p)try{g=c("./encoder").encodeBase64(g)}catch(s){p=!1}return g="'data:image/svg+xml"+(p?";base64":"")+","+g+"'",new d.URL(new d.Anonymous(g))}},d._mime={_types:{".htm":"text/html",".html":"text/html",".gif":"image/gif",".jpg":"image/jpeg",".jpeg":"image/jpeg",".png":"image/png"},lookup:function(a){var e=c("path").extname(a),f=d._mime._types[e];if(f===b)throw new Error('Optional dependency "mime" is required for '+e);return f},charsets:{lookup:function(a){return a&&/^text\//.test(a)?"UTF-8":""}}};var l={ceil:null,floor:null,sqrt:null,abs:null,tan:"",sin:"",cos:"",atan:"rad",asin:"rad",acos:"rad"},m={multiply:function(a,b){return a*b},screen:function(a,b){return a+b-a*b},overlay:function(a,b){return a*=2,1>=a?m.multiply(a,b):m.screen(a-1,b)},softlight:function(a,b){var c=1,d=a;return b>.5&&(d=1,c=a>.25?Math.sqrt(a):((16*a-12)*a+4)*a),a-(1-2*b)*d*(c-a)},hardlight:function(a,b){return m.overlay(b,a)},difference:function(a,b){return Math.abs(a-b)},exclusion:function(a,b){return a+b-2*a*b},average:function(a,b){return(a+b)/2},negation:function(a,b){return 1-Math.abs(a+b-1)}};d.defaultFunc={eval:function(){var a=this.value_,b=this.error_;if(b)throw b;return null!=a?a?d.True:d.False:void 0},value:function(a){this.value_=a},error:function(a){this.error_=a},reset:function(){this.value_=this.error_=null}},g(),d.fround=function(a,b){var c;return a&&null!=a.numPrecision?(c=Math.pow(10,a.numPrecision),Math.round(b*c)/c):b},d.functionCall=function(a,b){this.env=a,this.currentFileInfo=b},d.functionCall.prototype=d.functions}(c("./tree")),function(a){a.colors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}}(c("./tree")),function(a){a.debugInfo=function(b,c,d){var e="";if(b.dumpLineNumbers&&!b.compress)switch(b.dumpLineNumbers){case"comments":e=a.debugInfo.asComment(c);break;case"mediaquery":e=a.debugInfo.asMediaQuery(c);break;case"all":e=a.debugInfo.asComment(c)+(d||"")+a.debugInfo.asMediaQuery(c)}return e},a.debugInfo.asComment=function(a){return"/* line "+a.debugInfo.lineNumber+", "+a.debugInfo.fileName+" */\n"},a.debugInfo.asMediaQuery=function(a){return"@media -sass-debug-info{filename{font-family:"+("file://"+a.debugInfo.fileName).replace(/([.:\/\\])/g,function(a){return"\\"==a&&(a="/"),"\\"+a})+"}line{font-family:\\00003"+a.debugInfo.lineNumber+"}}\n"},a.find=function(a,b){for(var c,d=0;d<a.length;d++)if(c=b.call(a,a[d]))return c;return null},a.jsify=function(a){return Array.isArray(a.value)&&a.value.length>1?"["+a.value.map(function(a){return a.toCSS(!1)}).join(", ")+"]":a.toCSS(!1)},a.toCSS=function(a){var b=[];return this.genCSS(a,{add:function(a){b.push(a)},isEmpty:function(){return 0===b.length}}),b.join("")},a.outputRuleset=function(a,b,c){var d,e=c.length;if(a.tabLevel=(0|a.tabLevel)+1,a.compress){for(b.add("{"),d=0;e>d;d++)c[d].genCSS(a,b);return b.add("}"),void a.tabLevel--}var f="\n"+Array(a.tabLevel).join("  "),g=f+"  ";if(e){for(b.add(" {"+g),c[0].genCSS(a,b),d=1;e>d;d++)b.add(g),c[d].genCSS(a,b);b.add(f+"}")}else b.add(" {"+f+"}");a.tabLevel--}}(c("./tree")),function(a){a.Alpha=function(a){this.value=a},a.Alpha.prototype={type:"Alpha",accept:function(a){this.value=a.visit(this.value)},eval:function(b){return this.value.eval?new a.Alpha(this.value.eval(b)):this},genCSS:function(a,b){b.add("alpha(opacity="),this.value.genCSS?this.value.genCSS(a,b):b.add(this.value),b.add(")")},toCSS:a.toCSS}}(c("../tree")),function(a){a.Anonymous=function(a,b,c,d){this.value=a.value||a,this.index=b,this.mapLines=d,this.currentFileInfo=c},a.Anonymous.prototype={type:"Anonymous",eval:function(){return new a.Anonymous(this.value,this.index,this.currentFileInfo,this.mapLines)},compare:function(a){if(!a.toCSS)return-1;var b=this.toCSS(),c=a.toCSS();return b===c?0:c>b?-1:1},genCSS:function(a,b){b.add(this.value,this.currentFileInfo,this.index,this.mapLines)},toCSS:a.toCSS}}(c("../tree")),function(a){a.Assignment=function(a,b){this.key=a,this.value=b},a.Assignment.prototype={type:"Assignment",accept:function(a){this.value=a.visit(this.value)},eval:function(b){return this.value.eval?new a.Assignment(this.key,this.value.eval(b)):this},genCSS:function(a,b){b.add(this.key+"="),this.value.genCSS?this.value.genCSS(a,b):b.add(this.value)},toCSS:a.toCSS}}(c("../tree")),function(a){a.Call=function(a,b,c,d){this.name=a,this.args=b,this.index=c,this.currentFileInfo=d},a.Call.prototype={type:"Call",accept:function(a){this.args&&(this.args=a.visitArray(this.args))},eval:function(b){var c,d,e=this.args.map(function(a){return a.eval(b)}),f=this.name.toLowerCase();if(f in a.functions)try{if(d=new a.functionCall(b,this.currentFileInfo),c=d[f].apply(d,e),null!=c)return c}catch(g){throw{type:g.type||"Runtime",message:"error evaluating function `"+this.name+"`"+(g.message?": "+g.message:""),index:this.index,filename:this.currentFileInfo.filename}}return new a.Call(this.name,e,this.index,this.currentFileInfo)},genCSS:function(a,b){b.add(this.name+"(",this.currentFileInfo,this.index);for(var c=0;c<this.args.length;c++)this.args[c].genCSS(a,b),c+1<this.args.length&&b.add(", ");b.add(")")},toCSS:a.toCSS}}(c("../tree")),function(a){function b(a){return"#"+a.map(function(a){return a=c(Math.round(a),255),(16>a?"0":"")+a.toString(16)}).join("")}function c(a,b){return Math.min(Math.max(a,0),b)}a.Color=function(a,b){this.rgb=Array.isArray(a)?a:6==a.length?a.match(/.{2}/g).map(function(a){return parseInt(a,16)}):a.split("").map(function(a){return parseInt(a+a,16)}),this.alpha="number"==typeof b?b:1};var d="transparent";a.Color.prototype={type:"Color",eval:function(){return this},luma:function(){var a=this.rgb[0]/255,b=this.rgb[1]/255,c=this.rgb[2]/255;return a=.03928>=a?a/12.92:Math.pow((a+.055)/1.055,2.4),b=.03928>=b?b/12.92:Math.pow((b+.055)/1.055,2.4),c=.03928>=c?c/12.92:Math.pow((c+.055)/1.055,2.4),.2126*a+.7152*b+.0722*c},genCSS:function(a,b){b.add(this.toCSS(a))},toCSS:function(b,e){var f=b&&b.compress&&!e,g=a.fround(b,this.alpha);if(1>g)return 0===g&&this.isTransparentKeyword?d:"rgba("+this.rgb.map(function(a){return c(Math.round(a),255)}).concat(c(g,1)).join(","+(f?"":" "))+")";var h=this.toRGB();if(f){var i=h.split("");i[1]===i[2]&&i[3]===i[4]&&i[5]===i[6]&&(h="#"+i[1]+i[3]+i[5])}return h},operate:function(b,c,d){for(var e=[],f=this.alpha*(1-d.alpha)+d.alpha,g=0;3>g;g++)e[g]=a.operate(b,c,this.rgb[g],d.rgb[g]);return new a.Color(e,f)},toRGB:function(){return b(this.rgb)},toHSL:function(){var a,b,c=this.rgb[0]/255,d=this.rgb[1]/255,e=this.rgb[2]/255,f=this.alpha,g=Math.max(c,d,e),h=Math.min(c,d,e),i=(g+h)/2,j=g-h;if(g===h)a=b=0;else{switch(b=i>.5?j/(2-g-h):j/(g+h),g){case c:a=(d-e)/j+(e>d?6:0);break;case d:a=(e-c)/j+2;break;case e:a=(c-d)/j+4}a/=6}return{h:360*a,s:b,l:i,a:f}},toHSV:function(){var a,b,c=this.rgb[0]/255,d=this.rgb[1]/255,e=this.rgb[2]/255,f=this.alpha,g=Math.max(c,d,e),h=Math.min(c,d,e),i=g,j=g-h;if(b=0===g?0:j/g,g===h)a=0;else{switch(g){case c:a=(d-e)/j+(e>d?6:0);break;case d:a=(e-c)/j+2;break;case e:a=(c-d)/j+4}a/=6}return{h:360*a,s:b,v:i,a:f}},toARGB:function(){return b([255*this.alpha].concat(this.rgb))},compare:function(a){return a.rgb&&a.rgb[0]===this.rgb[0]&&a.rgb[1]===this.rgb[1]&&a.rgb[2]===this.rgb[2]&&a.alpha===this.alpha?0:-1}},a.Color.fromKeyword=function(b){if(b=b.toLowerCase(),a.colors.hasOwnProperty(b))return new a.Color(a.colors[b].slice(1));if(b===d){var c=new a.Color([0,0,0],0);return c.isTransparentKeyword=!0,c}}}(c("../tree")),function(a){a.Comment=function(a,b,c,d){this.value=a,this.silent=!!b,this.currentFileInfo=d},a.Comment.prototype={type:"Comment",genCSS:function(b,c){this.debugInfo&&c.add(a.debugInfo(b,this),this.currentFileInfo,this.index),c.add(this.value.trim())},toCSS:a.toCSS,isSilent:function(a){var b=this.currentFileInfo&&this.currentFileInfo.reference&&!this.isReferenced,c=a.compress&&!this.value.match(/^\/\*!/);return this.silent||b||c},eval:function(){return this},markReferenced:function(){this.isReferenced=!0}}}(c("../tree")),function(a){a.Condition=function(a,b,c,d,e){this.op=a.trim(),this.lvalue=b,this.rvalue=c,this.index=d,this.negate=e},a.Condition.prototype={type:"Condition",accept:function(a){this.lvalue=a.visit(this.lvalue),this.rvalue=a.visit(this.rvalue)},eval:function(a){var b,c=this.lvalue.eval(a),d=this.rvalue.eval(a),e=this.index;return b=function(a){switch(a){case"and":return c&&d;case"or":return c||d;default:if(c.compare)b=c.compare(d);else{if(!d.compare)throw{type:"Type",message:"Unable to perform comparison",index:e};b=d.compare(c)}switch(b){case-1:return"<"===a||"=<"===a||"<="===a;case 0:return"="===a||">="===a||"=<"===a||"<="===a;case 1:return">"===a||">="===a}}}(this.op),this.negate?!b:b}}}(c("../tree")),function(a){a.DetachedRuleset=function(a,b){this.ruleset=a,this.frames=b},a.DetachedRuleset.prototype={type:"DetachedRuleset",accept:function(a){this.ruleset=a.visit(this.ruleset)},eval:function(b){var c=this.frames||b.frames.slice(0);return new a.DetachedRuleset(this.ruleset,c)},callEval:function(b){return this.ruleset.eval(this.frames?new a.evalEnv(b,this.frames.concat(b.frames)):b)}}}(c("../tree")),function(a){a.Dimension=function(c,d){this.value=parseFloat(c),this.unit=d&&d instanceof a.Unit?d:new a.Unit(d?[d]:b)},a.Dimension.prototype={type:"Dimension",accept:function(a){this.unit=a.visit(this.unit)},eval:function(){return this},toColor:function(){return new a.Color([this.value,this.value,this.value])},genCSS:function(b,c){if(b&&b.strictUnits&&!this.unit.isSingular())throw new Error("Multiple units in dimension. Correct the units or use the unit function. Bad unit: "+this.unit.toString());var d=a.fround(b,this.value),e=String(d);if(0!==d&&1e-6>d&&d>-1e-6&&(e=d.toFixed(20).replace(/0+$/,"")),b&&b.compress){if(0===d&&this.unit.isLength())return void c.add(e);d>0&&1>d&&(e=e.substr(1))}c.add(e),this.unit.genCSS(b,c)},toCSS:a.toCSS,operate:function(b,c,d){var e=a.operate(b,c,this.value,d.value),f=this.unit.clone();if("+"===c||"-"===c)if(0===f.numerator.length&&0===f.denominator.length)f.numerator=d.unit.numerator.slice(0),f.denominator=d.unit.denominator.slice(0);else if(0===d.unit.numerator.length&&0===f.denominator.length);else{if(d=d.convertTo(this.unit.usedUnits()),b.strictUnits&&d.unit.toString()!==f.toString())throw new Error("Incompatible units. Change the units or use the unit function. Bad units: '"+f.toString()+"' and '"+d.unit.toString()+"'.");e=a.operate(b,c,this.value,d.value)}else"*"===c?(f.numerator=f.numerator.concat(d.unit.numerator).sort(),f.denominator=f.denominator.concat(d.unit.denominator).sort(),f.cancel()):"/"===c&&(f.numerator=f.numerator.concat(d.unit.denominator).sort(),f.denominator=f.denominator.concat(d.unit.numerator).sort(),f.cancel());return new a.Dimension(e,f)},compare:function(b){if(b instanceof a.Dimension){var c,d,e,f;if(this.unit.isEmpty()||b.unit.isEmpty())c=this,d=b;else if(c=this.unify(),d=b.unify(),0!==c.unit.compare(d.unit))return-1;return e=c.value,f=d.value,f>e?-1:e>f?1:0}return-1},unify:function(){return this.convertTo({length:"px",duration:"s",angle:"rad"})},convertTo:function(b){var c,d,e,f,g,h=this.value,i=this.unit.clone(),j={};if("string"==typeof b){for(c in a.UnitConversions)a.UnitConversions[c].hasOwnProperty(b)&&(j={},j[c]=b);b=j}g=function(a,b){return e.hasOwnProperty(a)?(b?h/=e[a]/e[f]:h*=e[a]/e[f],f):a};for(d in b)b.hasOwnProperty(d)&&(f=b[d],e=a.UnitConversions[d],i.map(g));return i.cancel(),new a.Dimension(h,i)}},a.UnitConversions={length:{m:1,cm:.01,mm:.001,"in":.0254,px:.0254/96,pt:.0254/72,pc:.0254/72*12},duration:{s:1,ms:.001},angle:{rad:1/(2*Math.PI),deg:1/360,grad:.0025,turn:1}},a.Unit=function(a,b,c){this.numerator=a?a.slice(0).sort():[],this.denominator=b?b.slice(0).sort():[],this.backupUnit=c},a.Unit.prototype={type:"Unit",clone:function(){return new a.Unit(this.numerator.slice(0),this.denominator.slice(0),this.backupUnit)},genCSS:function(a,b){this.numerator.length>=1?b.add(this.numerator[0]):this.denominator.length>=1?b.add(this.denominator[0]):a&&a.strictUnits||!this.backupUnit||b.add(this.backupUnit)},toCSS:a.toCSS,toString:function(){var a,b=this.numerator.join("*");for(a=0;a<this.denominator.length;a++)b+="/"+this.denominator[a];return b},compare:function(a){return this.is(a.toString())?0:-1},is:function(a){return this.toString()===a},isLength:function(){return Boolean(this.toCSS().match(/px|em|%|in|cm|mm|pc|pt|ex/))},isEmpty:function(){return 0===this.numerator.length&&0===this.denominator.length},isSingular:function(){return this.numerator.length<=1&&0===this.denominator.length},map:function(a){var b;for(b=0;b<this.numerator.length;b++)this.numerator[b]=a(this.numerator[b],!1);for(b=0;b<this.denominator.length;b++)this.denominator[b]=a(this.denominator[b],!0)},usedUnits:function(){var b,c,d={};c=function(a){return b.hasOwnProperty(a)&&!d[e]&&(d[e]=a),a};for(var e in a.UnitConversions)a.UnitConversions.hasOwnProperty(e)&&(b=a.UnitConversions[e],this.map(c));return d},cancel:function(){var a,b,c,d={};for(b=0;b<this.numerator.length;b++)a=this.numerator[b],c||(c=a),d[a]=(d[a]||0)+1;for(b=0;b<this.denominator.length;b++)a=this.denominator[b],c||(c=a),d[a]=(d[a]||0)-1;this.numerator=[],this.denominator=[];for(a in d)if(d.hasOwnProperty(a)){var e=d[a];if(e>0)for(b=0;e>b;b++)this.numerator.push(a);else if(0>e)for(b=0;-e>b;b++)this.denominator.push(a)}0===this.numerator.length&&0===this.denominator.length&&c&&(this.backupUnit=c),this.numerator.sort(),this.denominator.sort()}}}(c("../tree")),function(a){a.Directive=function(a,b,c,d,e,f){this.name=a,this.value=b,c&&(this.rules=c,this.rules.allowImports=!0),this.index=d,this.currentFileInfo=e,this.debugInfo=f},a.Directive.prototype={type:"Directive",accept:function(a){var b=this.value,c=this.rules;c&&(c=a.visit(c)),b&&(b=a.visit(b))},genCSS:function(b,c){var d=this.value,e=this.rules;c.add(this.name,this.currentFileInfo,this.index),d&&(c.add(" "),d.genCSS(b,c)),e?a.outputRuleset(b,c,[e]):c.add(";")},toCSS:a.toCSS,eval:function(b){var c=this.value,d=this.rules;return c&&(c=c.eval(b)),d&&(d=d.eval(b),d.root=!0),new a.Directive(this.name,c,d,this.index,this.currentFileInfo,this.debugInfo)},variable:function(b){return this.rules?a.Ruleset.prototype.variable.call(this.rules,b):void 0},find:function(){return this.rules?a.Ruleset.prototype.find.apply(this.rules,arguments):void 0},rulesets:function(){return this.rules?a.Ruleset.prototype.rulesets.apply(this.rules):void 0},markReferenced:function(){var a,b;if(this.isReferenced=!0,this.rules)for(b=this.rules.rules,a=0;a<b.length;a++)b[a].markReferenced&&b[a].markReferenced()}}}(c("../tree")),function(a){a.Element=function(b,c,d,e){this.combinator=b instanceof a.Combinator?b:new a.Combinator(b),this.value="string"==typeof c?c.trim():c?c:"",this.index=d,this.currentFileInfo=e},a.Element.prototype={type:"Element",accept:function(a){var b=this.value;this.combinator=a.visit(this.combinator),"object"==typeof b&&(this.value=a.visit(b))},eval:function(b){return new a.Element(this.combinator,this.value.eval?this.value.eval(b):this.value,this.index,this.currentFileInfo)},genCSS:function(a,b){b.add(this.toCSS(a),this.currentFileInfo,this.index)},toCSS:function(a){var b=this.value.toCSS?this.value.toCSS(a):this.value;return""===b&&"&"===this.combinator.value.charAt(0)?"":this.combinator.toCSS(a||{})+b}},a.Attribute=function(a,b,c){this.key=a,this.op=b,this.value=c},a.Attribute.prototype={type:"Attribute",eval:function(b){return new a.Attribute(this.key.eval?this.key.eval(b):this.key,this.op,this.value&&this.value.eval?this.value.eval(b):this.value)},genCSS:function(a,b){b.add(this.toCSS(a))},toCSS:function(a){var b=this.key.toCSS?this.key.toCSS(a):this.key;return this.op&&(b+=this.op,b+=this.value.toCSS?this.value.toCSS(a):this.value),"["+b+"]"}},a.Combinator=function(a){this.value=" "===a?" ":a?a.trim():""},a.Combinator.prototype={type:"Combinator",_outputMap:{"":""," ":" ",":":" :","+":" + ","~":" ~ ",">":" > ","|":"|","^":" ^ ","^^":" ^^ "},_outputMapCompressed:{"":""," ":" ",":":" :","+":"+","~":"~",">":">","|":"|","^":"^","^^":"^^"},genCSS:function(a,b){b.add((a.compress?this._outputMapCompressed:this._outputMap)[this.value])},toCSS:a.toCSS}}(c("../tree")),function(a){a.Expression=function(a){this.value=a},a.Expression.prototype={type:"Expression",accept:function(a){this.value&&(this.value=a.visitArray(this.value))},eval:function(b){var c,d=this.parens&&!this.parensInOp,e=!1;return d&&b.inParenthesis(),this.value.length>1?c=new a.Expression(this.value.map(function(a){return a.eval(b)})):1===this.value.length?(this.value[0].parens&&!this.value[0].parensInOp&&(e=!0),c=this.value[0].eval(b)):c=this,d&&b.outOfParenthesis(),this.parens&&this.parensInOp&&!b.isMathOn()&&!e&&(c=new a.Paren(c)),c},genCSS:function(a,b){for(var c=0;c<this.value.length;c++)this.value[c].genCSS(a,b),c+1<this.value.length&&b.add(" ")},toCSS:a.toCSS,throwAwayComments:function(){this.value=this.value.filter(function(b){return!(b instanceof a.Comment)})}}}(c("../tree")),function(a){a.Extend=function(b,c,d){switch(this.selector=b,this.option=c,this.index=d,this.object_id=a.Extend.next_id++,this.parent_ids=[this.object_id],c){case"all":this.allowBefore=!0,this.allowAfter=!0;break;default:this.allowBefore=!1,this.allowAfter=!1}},a.Extend.next_id=0,a.Extend.prototype={type:"Extend",accept:function(a){this.selector=a.visit(this.selector)},eval:function(b){return new a.Extend(this.selector.eval(b),this.option,this.index)},clone:function(){return new a.Extend(this.selector,this.option,this.index)},findSelfSelectors:function(a){var b,c,d=[];for(b=0;b<a.length;b++)c=a[b].elements,b>0&&c.length&&""===c[0].combinator.value&&(c[0].combinator.value=" "),d=d.concat(a[b].elements);this.selfSelectors=[{elements:d}]}}}(c("../tree")),function(a){a.Import=function(a,c,d,e,f){if(this.options=d,this.index=e,this.path=a,this.features=c,this.currentFileInfo=f,this.options.less!==b||this.options.inline)this.css=!this.options.less||this.options.inline;else{var g=this.getPath();g&&/css([\?;].*)?$/.test(g)&&(this.css=!0)}},a.Import.prototype={type:"Import",accept:function(a){this.features&&(this.features=a.visit(this.features)),this.path=a.visit(this.path),!this.options.inline&&this.root&&(this.root=a.visit(this.root))},genCSS:function(a,b){this.css&&(b.add("@import ",this.currentFileInfo,this.index),this.path.genCSS(a,b),this.features&&(b.add(" "),this.features.genCSS(a,b)),b.add(";"))},toCSS:a.toCSS,getPath:function(){if(this.path instanceof a.Quoted){var c=this.path.value;return this.css!==b||/(\.[a-z]*$)|([\?;].*)$/.test(c)?c:c+".less"}return this.path instanceof a.URL?this.path.value.value:null},evalForImport:function(b){return new a.Import(this.path.eval(b),this.features,this.options,this.index,this.currentFileInfo)},evalPath:function(b){var c=this.path.eval(b),d=this.currentFileInfo&&this.currentFileInfo.rootpath;if(!(c instanceof a.URL)){if(d){var e=c.value;e&&b.isPathRelative(e)&&(c.value=d+e)}c.value=b.normalizePath(c.value)}return c},eval:function(b){var c,d=this.features&&this.features.eval(b);if(this.skip&&("function"==typeof this.skip&&(this.skip=this.skip()),this.skip))return[];if(this.options.inline){var e=new a.Anonymous(this.root,0,{filename:this.importedFilename},!0);return this.features?new a.Media([e],this.features.value):[e]}if(this.css){var f=new a.Import(this.evalPath(b),d,this.options,this.index);if(!f.css&&this.error)throw this.error;return f}return c=new a.Ruleset(null,this.root.rules.slice(0)),c.evalImports(b),this.features?new a.Media(c.rules,this.features.value):c.rules}}}(c("../tree")),function(a){a.JavaScript=function(a,b,c){this.escaped=c,this.expression=a,this.index=b},a.JavaScript.prototype={type:"JavaScript",eval:function(b){var c,d=this,e={},f=this.expression.replace(/@\{([\w-]+)\}/g,function(c,e){return a.jsify(new a.Variable("@"+e,d.index).eval(b))});try{f=new Function("return ("+f+")")}catch(g){throw{message:"JavaScript evaluation error: "+g.message+" from `"+f+"`",index:this.index}}var h=b.frames[0].variables();for(var i in h)h.hasOwnProperty(i)&&(e[i.slice(1)]={value:h[i].value,toJS:function(){return this.value.eval(b).toCSS()}});try{c=f.call(e)}catch(g){throw{message:"JavaScript evaluation error: '"+g.name+": "+g.message.replace(/["]/g,"'")+"'",index:this.index}}return"number"==typeof c?new a.Dimension(c):"string"==typeof c?new a.Quoted('"'+c+'"',c,this.escaped,this.index):new a.Anonymous(Array.isArray(c)?c.join(", "):c)}}}(c("../tree")),function(a){a.Keyword=function(a){this.value=a},a.Keyword.prototype={type:"Keyword",eval:function(){return this},genCSS:function(a,b){if("%"===this.value)throw{type:"Syntax",message:"Invalid % without number"};b.add(this.value)},toCSS:a.toCSS,compare:function(b){return b instanceof a.Keyword?b.value===this.value?0:1:-1}},a.True=new a.Keyword("true"),a.False=new a.Keyword("false")}(c("../tree")),function(a){a.Media=function(b,c,d,e){this.index=d,this.currentFileInfo=e;var f=this.emptySelectors();this.features=new a.Value(c),this.rules=[new a.Ruleset(f,b)],this.rules[0].allowImports=!0},a.Media.prototype={type:"Media",accept:function(a){this.features&&(this.features=a.visit(this.features)),this.rules&&(this.rules=a.visitArray(this.rules))},genCSS:function(b,c){c.add("@media ",this.currentFileInfo,this.index),this.features.genCSS(b,c),a.outputRuleset(b,c,this.rules)},toCSS:a.toCSS,eval:function(b){b.mediaBlocks||(b.mediaBlocks=[],b.mediaPath=[]);var c=new a.Media(null,[],this.index,this.currentFileInfo);this.debugInfo&&(this.rules[0].debugInfo=this.debugInfo,c.debugInfo=this.debugInfo);var d=!1;b.strictMath||(d=!0,b.strictMath=!0);try{c.features=this.features.eval(b)}finally{d&&(b.strictMath=!1)}return b.mediaPath.push(c),b.mediaBlocks.push(c),b.frames.unshift(this.rules[0]),c.rules=[this.rules[0].eval(b)],b.frames.shift(),b.mediaPath.pop(),0===b.mediaPath.length?c.evalTop(b):c.evalNested(b)},variable:function(b){return a.Ruleset.prototype.variable.call(this.rules[0],b)},find:function(){return a.Ruleset.prototype.find.apply(this.rules[0],arguments)},rulesets:function(){return a.Ruleset.prototype.rulesets.apply(this.rules[0])},emptySelectors:function(){var b=new a.Element("","&",this.index,this.currentFileInfo),c=[new a.Selector([b],null,null,this.index,this.currentFileInfo)];return c[0].mediaEmpty=!0,c},markReferenced:function(){var a,b=this.rules[0].rules;for(this.rules[0].markReferenced(),this.isReferenced=!0,a=0;a<b.length;a++)b[a].markReferenced&&b[a].markReferenced()},evalTop:function(b){var c=this;if(b.mediaBlocks.length>1){var d=this.emptySelectors();c=new a.Ruleset(d,b.mediaBlocks),c.multiMedia=!0}return delete b.mediaBlocks,delete b.mediaPath,c},evalNested:function(b){var c,d,e=b.mediaPath.concat([this]);for(c=0;c<e.length;c++)d=e[c].features instanceof a.Value?e[c].features.value:e[c].features,e[c]=Array.isArray(d)?d:[d];return this.features=new a.Value(this.permute(e).map(function(b){for(b=b.map(function(b){return b.toCSS?b:new a.Anonymous(b)}),c=b.length-1;c>0;c--)b.splice(c,0,new a.Anonymous("and"));return new a.Expression(b)})),new a.Ruleset([],[])},permute:function(a){if(0===a.length)return[];if(1===a.length)return a[0];for(var b=[],c=this.permute(a.slice(1)),d=0;d<c.length;d++)for(var e=0;e<a[0].length;e++)b.push([a[0][e]].concat(c[d]));return b},bubbleSelectors:function(b){b&&(this.rules=[new a.Ruleset(b.slice(0),[this.rules[0]])])
}}}(c("../tree")),function(a){a.mixin={},a.mixin.Call=function(b,c,d,e,f){this.selector=new a.Selector(b),this.arguments=c&&c.length?c:null,this.index=d,this.currentFileInfo=e,this.important=f},a.mixin.Call.prototype={type:"MixinCall",accept:function(a){this.selector&&(this.selector=a.visit(this.selector)),this.arguments&&(this.arguments=a.visitArray(this.arguments))},eval:function(b){var c,d,e,f,g,h,i,j,k,l,m,n,o=[],p=!1,q=[],r=[],s=a.defaultFunc,t=0,u=1,v=2;for(e=this.arguments&&this.arguments.map(function(a){return{name:a.name,value:a.value.eval(b)}}),f=0;f<b.frames.length;f++)if((c=b.frames[f].find(this.selector)).length>0){for(j=!0,g=0;g<c.length;g++){for(d=c[g],i=!1,h=0;h<b.frames.length;h++)if(!(d instanceof a.mixin.Definition)&&d===(b.frames[h].originalRuleset||b.frames[h])){i=!0;break}if(!i&&d.matchArgs(e,b)){if(l={mixin:d,group:t},d.matchCondition){for(h=0;2>h;h++)s.value(h),r[h]=d.matchCondition(e,b);(r[0]||r[1])&&(r[0]!=r[1]&&(l.group=r[1]?u:v),q.push(l))}else q.push(l);p=!0}}for(s.reset(),n=[0,0,0],g=0;g<q.length;g++)n[q[g].group]++;if(n[t]>0)m=v;else if(m=u,n[u]+n[v]>1)throw{type:"Runtime",message:"Ambiguous use of `default()` found when matching for `"+this.format(e)+"`",index:this.index,filename:this.currentFileInfo.filename};for(g=0;g<q.length;g++)if(l=q[g].group,l===t||l===m)try{d=q[g].mixin,d instanceof a.mixin.Definition||(d=new a.mixin.Definition("",[],d.rules,null,!1),d.originalRuleset=c[g].originalRuleset||c[g]),Array.prototype.push.apply(o,d.evalCall(b,e,this.important).rules)}catch(w){throw{message:w.message,index:this.index,filename:this.currentFileInfo.filename,stack:w.stack}}if(p){if(!this.currentFileInfo||!this.currentFileInfo.reference)for(f=0;f<o.length;f++)k=o[f],k.markReferenced&&k.markReferenced();return o}}throw j?{type:"Runtime",message:"No matching definition was found for `"+this.format(e)+"`",index:this.index,filename:this.currentFileInfo.filename}:{type:"Name",message:this.selector.toCSS().trim()+" is undefined",index:this.index,filename:this.currentFileInfo.filename}},format:function(a){return this.selector.toCSS().trim()+"("+(a?a.map(function(a){var b="";return a.name&&(b+=a.name+":"),b+=a.value.toCSS?a.value.toCSS():"???"}).join(", "):"")+")"}},a.mixin.Definition=function(b,c,d,e,f,g){this.name=b,this.selectors=[new a.Selector([new a.Element(null,b,this.index,this.currentFileInfo)])],this.params=c,this.condition=e,this.variadic=f,this.arity=c.length,this.rules=d,this._lookups={},this.required=c.reduce(function(a,b){return!b.name||b.name&&!b.value?a+1:a},0),this.parent=a.Ruleset.prototype,this.frames=g},a.mixin.Definition.prototype={type:"MixinDefinition",accept:function(a){this.params&&this.params.length&&(this.params=a.visitArray(this.params)),this.rules=a.visitArray(this.rules),this.condition&&(this.condition=a.visit(this.condition))},variable:function(a){return this.parent.variable.call(this,a)},variables:function(){return this.parent.variables.call(this)},find:function(){return this.parent.find.apply(this,arguments)},rulesets:function(){return this.parent.rulesets.apply(this)},evalParams:function(b,c,d,e){var f,g,h,i,j,k,l,m,n=new a.Ruleset(null,null),o=this.params.slice(0),p=0;if(c=new a.evalEnv(c,[n].concat(c.frames)),d)for(d=d.slice(0),p=d.length,h=0;p>h;h++)if(g=d[h],k=g&&g.name){for(l=!1,i=0;i<o.length;i++)if(!e[i]&&k===o[i].name){e[i]=g.value.eval(b),n.prependRule(new a.Rule(k,g.value.eval(b))),l=!0;break}if(l){d.splice(h,1),h--;continue}throw{type:"Runtime",message:"Named argument for "+this.name+" "+d[h].name+" not found"}}for(m=0,h=0;h<o.length;h++)if(!e[h]){if(g=d&&d[m],k=o[h].name)if(o[h].variadic){for(f=[],i=m;p>i;i++)f.push(d[i].value.eval(b));n.prependRule(new a.Rule(k,new a.Expression(f).eval(b)))}else{if(j=g&&g.value)j=j.eval(b);else{if(!o[h].value)throw{type:"Runtime",message:"wrong number of arguments for "+this.name+" ("+p+" for "+this.arity+")"};j=o[h].value.eval(c),n.resetCache()}n.prependRule(new a.Rule(k,j)),e[h]=j}if(o[h].variadic&&d)for(i=m;p>i;i++)e[i]=d[i].value.eval(b);m++}return n},eval:function(b){return new a.mixin.Definition(this.name,this.params,this.rules,this.condition,this.variadic,this.frames||b.frames.slice(0))},evalCall:function(b,c,d){var e,f,g=[],h=this.frames?this.frames.concat(b.frames):b.frames,i=this.evalParams(b,new a.evalEnv(b,h),c,g);return i.prependRule(new a.Rule("@arguments",new a.Expression(g).eval(b))),e=this.rules.slice(0),f=new a.Ruleset(null,e),f.originalRuleset=this,f=f.eval(new a.evalEnv(b,[this,i].concat(h))),d&&(f=this.parent.makeImportant.apply(f)),f},matchCondition:function(b,c){return this.condition&&!this.condition.eval(new a.evalEnv(c,[this.evalParams(c,new a.evalEnv(c,this.frames.concat(c.frames)),b,[])].concat(this.frames).concat(c.frames)))?!1:!0},matchArgs:function(a,b){var c,d=a&&a.length||0;if(this.variadic){if(d<this.required-1)return!1}else{if(d<this.required)return!1;if(d>this.params.length)return!1}c=Math.min(d,this.arity);for(var e=0;c>e;e++)if(!this.params[e].name&&!this.params[e].variadic&&a[e].value.eval(b).toCSS()!=this.params[e].value.eval(b).toCSS())return!1;return!0}}}(c("../tree")),function(a){a.Negative=function(a){this.value=a},a.Negative.prototype={type:"Negative",accept:function(a){this.value=a.visit(this.value)},genCSS:function(a,b){b.add("-"),this.value.genCSS(a,b)},toCSS:a.toCSS,eval:function(b){return b.isMathOn()?new a.Operation("*",[new a.Dimension(-1),this.value]).eval(b):new a.Negative(this.value.eval(b))}}}(c("../tree")),function(a){a.Operation=function(a,b,c){this.op=a.trim(),this.operands=b,this.isSpaced=c},a.Operation.prototype={type:"Operation",accept:function(a){this.operands=a.visit(this.operands)},eval:function(b){var c=this.operands[0].eval(b),d=this.operands[1].eval(b);if(b.isMathOn()){if(c instanceof a.Dimension&&d instanceof a.Color&&(c=c.toColor()),d instanceof a.Dimension&&c instanceof a.Color&&(d=d.toColor()),!c.operate)throw{type:"Operation",message:"Operation on an invalid type"};return c.operate(b,this.op,d)}return new a.Operation(this.op,[c,d],this.isSpaced)},genCSS:function(a,b){this.operands[0].genCSS(a,b),this.isSpaced&&b.add(" "),b.add(this.op),this.isSpaced&&b.add(" "),this.operands[1].genCSS(a,b)},toCSS:a.toCSS},a.operate=function(a,b,c,d){switch(b){case"+":return c+d;case"-":return c-d;case"*":return c*d;case"/":return c/d}}}(c("../tree")),function(a){a.Paren=function(a){this.value=a},a.Paren.prototype={type:"Paren",accept:function(a){this.value=a.visit(this.value)},genCSS:function(a,b){b.add("("),this.value.genCSS(a,b),b.add(")")},toCSS:a.toCSS,eval:function(b){return new a.Paren(this.value.eval(b))}}}(c("../tree")),function(a){a.Quoted=function(a,b,c,d,e){this.escaped=c,this.value=b||"",this.quote=a.charAt(0),this.index=d,this.currentFileInfo=e},a.Quoted.prototype={type:"Quoted",genCSS:function(a,b){this.escaped||b.add(this.quote,this.currentFileInfo,this.index),b.add(this.value),this.escaped||b.add(this.quote)},toCSS:a.toCSS,eval:function(b){var c=this,d=this.value.replace(/`([^`]+)`/g,function(d,e){return new a.JavaScript(e,c.index,!0).eval(b).value}).replace(/@\{([\w-]+)\}/g,function(d,e){var f=new a.Variable("@"+e,c.index,c.currentFileInfo).eval(b,!0);return f instanceof a.Quoted?f.value:f.toCSS()});return new a.Quoted(this.quote+d+this.quote,d,this.escaped,this.index,this.currentFileInfo)},compare:function(a){if(!a.toCSS)return-1;var b=this.toCSS(),c=a.toCSS();return b===c?0:c>b?-1:1}}}(c("../tree")),function(a){function b(a,b){var c,d="",e=b.length,f={add:function(a){d+=a}};for(c=0;e>c;c++)b[c].eval(a).genCSS(a,f);return d}a.Rule=function(b,c,d,e,f,g,h){this.name=b,this.value=c instanceof a.Value||c instanceof a.Ruleset?c:new a.Value([c]),this.important=d?" "+d.trim():"",this.merge=e,this.index=f,this.currentFileInfo=g,this.inline=h||!1,this.variable=b.charAt&&"@"===b.charAt(0)},a.Rule.prototype={type:"Rule",accept:function(a){this.value=a.visit(this.value)},genCSS:function(a,b){b.add(this.name+(a.compress?":":": "),this.currentFileInfo,this.index);try{this.value.genCSS(a,b)}catch(c){throw c.index=this.index,c.filename=this.currentFileInfo.filename,c}b.add(this.important+(this.inline||a.lastRule&&a.compress?"":";"),this.currentFileInfo,this.index)},toCSS:a.toCSS,eval:function(c){var d,e=!1,f=this.name;"string"!=typeof f&&(f=1===f.length&&f[0]instanceof a.Keyword?f[0].value:b(c,f)),"font"!==f||c.strictMath||(e=!0,c.strictMath=!0);try{if(d=this.value.eval(c),!this.variable&&"DetachedRuleset"===d.type)throw{message:"Rulesets cannot be evaluated on a property.",index:this.index,filename:this.currentFileInfo.filename};return new a.Rule(f,d,this.important,this.merge,this.index,this.currentFileInfo,this.inline)}catch(g){throw"number"!=typeof g.index&&(g.index=this.index,g.filename=this.currentFileInfo.filename),g}finally{e&&(c.strictMath=!1)}},makeImportant:function(){return new a.Rule(this.name,this.value,"!important",this.merge,this.index,this.currentFileInfo,this.inline)}}}(c("../tree")),function(a){a.RulesetCall=function(a){this.variable=a},a.RulesetCall.prototype={type:"RulesetCall",accept:function(){},eval:function(b){var c=new a.Variable(this.variable).eval(b);return c.callEval(b)}}}(c("../tree")),function(a){a.Ruleset=function(a,b,c){this.selectors=a,this.rules=b,this._lookups={},this.strictImports=c},a.Ruleset.prototype={type:"Ruleset",accept:function(a){this.paths?a.visitArray(this.paths,!0):this.selectors&&(this.selectors=a.visitArray(this.selectors)),this.rules&&this.rules.length&&(this.rules=a.visitArray(this.rules))},eval:function(b){var c,d,e,f,g=this.selectors,h=a.defaultFunc,i=!1;if(g&&(d=g.length)){for(c=[],h.error({type:"Syntax",message:"it is currently only allowed in parametric mixin guards,"}),f=0;d>f;f++)e=g[f].eval(b),c.push(e),e.evaldCondition&&(i=!0);h.reset()}else i=!0;var j,k,l=this.rules?this.rules.slice(0):null,m=new a.Ruleset(c,l,this.strictImports);m.originalRuleset=this,m.root=this.root,m.firstRoot=this.firstRoot,m.allowImports=this.allowImports,this.debugInfo&&(m.debugInfo=this.debugInfo),i||(l.length=0);var n=b.frames;n.unshift(m);var o=b.selectors;o||(b.selectors=o=[]),o.unshift(this.selectors),(m.root||m.allowImports||!m.strictImports)&&m.evalImports(b);var p=m.rules,q=p?p.length:0;for(f=0;q>f;f++)(p[f]instanceof a.mixin.Definition||p[f]instanceof a.DetachedRuleset)&&(p[f]=p[f].eval(b));var r=b.mediaBlocks&&b.mediaBlocks.length||0;for(f=0;q>f;f++)p[f]instanceof a.mixin.Call?(l=p[f].eval(b).filter(function(b){return b instanceof a.Rule&&b.variable?!m.variable(b.name):!0}),p.splice.apply(p,[f,1].concat(l)),q+=l.length-1,f+=l.length-1,m.resetCache()):p[f]instanceof a.RulesetCall&&(l=p[f].eval(b).rules.filter(function(b){return b instanceof a.Rule&&b.variable?!1:!0}),p.splice.apply(p,[f,1].concat(l)),q+=l.length-1,f+=l.length-1,m.resetCache());for(f=0;f<p.length;f++)j=p[f],j instanceof a.mixin.Definition||j instanceof a.DetachedRuleset||(p[f]=j=j.eval?j.eval(b):j);for(f=0;f<p.length;f++)if(j=p[f],j instanceof a.Ruleset&&j.selectors&&1===j.selectors.length&&j.selectors[0].isJustParentSelector()){p.splice(f--,1);for(var s=0;s<j.rules.length;s++)k=j.rules[s],k instanceof a.Rule&&k.variable||p.splice(++f,0,k)}if(n.shift(),o.shift(),b.mediaBlocks)for(f=r;f<b.mediaBlocks.length;f++)b.mediaBlocks[f].bubbleSelectors(c);return m},evalImports:function(b){var c,d,e=this.rules;if(e)for(c=0;c<e.length;c++)e[c]instanceof a.Import&&(d=e[c].eval(b),d&&d.length?(e.splice.apply(e,[c,1].concat(d)),c+=d.length-1):e.splice(c,1,d),this.resetCache())},makeImportant:function(){return new a.Ruleset(this.selectors,this.rules.map(function(a){return a.makeImportant?a.makeImportant():a}),this.strictImports)},matchArgs:function(a){return!a||0===a.length},matchCondition:function(b,c){var d=this.selectors[this.selectors.length-1];return d.evaldCondition?d.condition&&!d.condition.eval(new a.evalEnv(c,c.frames))?!1:!0:!1},resetCache:function(){this._rulesets=null,this._variables=null,this._lookups={}},variables:function(){return this._variables||(this._variables=this.rules?this.rules.reduce(function(b,c){return c instanceof a.Rule&&c.variable===!0&&(b[c.name]=c),b},{}):{}),this._variables},variable:function(a){return this.variables()[a]},rulesets:function(){if(!this.rules)return null;var b,c,d=a.Ruleset,e=a.mixin.Definition,f=[],g=this.rules,h=g.length;for(b=0;h>b;b++)c=g[b],(c instanceof d||c instanceof e)&&f.push(c);return f},prependRule:function(a){var b=this.rules;b?b.unshift(a):this.rules=[a]},find:function(b,c){c=c||this;var d,e=[],f=b.toCSS();return f in this._lookups?this._lookups[f]:(this.rulesets().forEach(function(f){if(f!==c)for(var g=0;g<f.selectors.length;g++)if(d=b.match(f.selectors[g])){b.elements.length>d?Array.prototype.push.apply(e,f.find(new a.Selector(b.elements.slice(d)),c)):e.push(f);break}}),this._lookups[f]=e,e)},genCSS:function(b,c){var d,e,f,g,h,i,j=[],k=[];b.tabLevel=b.tabLevel||0,this.root||b.tabLevel++;var l,m=b.compress?"":Array(b.tabLevel+1).join("  "),n=b.compress?"":Array(b.tabLevel).join("  ");for(d=0;d<this.rules.length;d++)h=this.rules[d],h.rules||h instanceof a.Media||h instanceof a.Directive||this.root&&h instanceof a.Comment?k.push(h):j.push(h);if(!this.root){g=a.debugInfo(b,this,n),g&&(c.add(g),c.add(n));var o,p=this.paths,q=p.length;for(l=b.compress?",":",\n"+n,d=0;q>d;d++)if(i=p[d],o=i.length)for(d>0&&c.add(l),b.firstSelector=!0,i[0].genCSS(b,c),b.firstSelector=!1,e=1;o>e;e++)i[e].genCSS(b,c);c.add((b.compress?"{":" {\n")+m)}for(d=0;d<j.length;d++)h=j[d],d+1!==j.length||this.root&&0!==k.length&&!this.firstRoot||(b.lastRule=!0),h.genCSS?h.genCSS(b,c):h.value&&c.add(h.value.toString()),b.lastRule?b.lastRule=!1:c.add(b.compress?"":"\n"+m);if(this.root||(c.add(b.compress?"}":"\n"+n+"}"),b.tabLevel--),l=(b.compress?"":"\n")+(this.root?m:n),f=k.length)for(j.length&&l&&c.add(l),k[0].genCSS(b,c),d=1;f>d;d++)l&&c.add(l),k[d].genCSS(b,c);c.isEmpty()||b.compress||!this.firstRoot||c.add("\n")},toCSS:a.toCSS,markReferenced:function(){if(this.selectors)for(var a=0;a<this.selectors.length;a++)this.selectors[a].markReferenced()},joinSelectors:function(a,b,c){for(var d=0;d<c.length;d++)this.joinSelector(a,b,c[d])},joinSelector:function(b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;for(e=0;e<d.elements.length;e++)j=d.elements[e],"&"===j.value&&(h=!0);if(h){for(r=[],i=[[]],e=0;e<d.elements.length;e++)if(j=d.elements[e],"&"!==j.value)r.push(j);else{for(s=[],r.length>0&&this.mergeElementsOnToSelectors(r,i),f=0;f<i.length;f++)if(k=i[f],0===c.length)k.length>0&&(k[0].elements=k[0].elements.slice(0),k[0].elements.push(new a.Element(j.combinator,"",j.index,j.currentFileInfo))),s.push(k);else for(g=0;g<c.length;g++)l=c[g],m=[],n=[],p=!0,k.length>0?(m=k.slice(0),q=m.pop(),o=d.createDerived(q.elements.slice(0)),p=!1):o=d.createDerived([]),l.length>1&&(n=n.concat(l.slice(1))),l.length>0&&(p=!1,o.elements.push(new a.Element(j.combinator,l[0].elements[0].value,j.index,j.currentFileInfo)),o.elements=o.elements.concat(l[0].elements.slice(1))),p||m.push(o),m=m.concat(n),s.push(m);i=s,r=[]}for(r.length>0&&this.mergeElementsOnToSelectors(r,i),e=0;e<i.length;e++)i[e].length>0&&b.push(i[e])}else if(c.length>0)for(e=0;e<c.length;e++)b.push(c[e].concat(d));else b.push([d])},mergeElementsOnToSelectors:function(b,c){var d,e;if(0===c.length)return void c.push([new a.Selector(b)]);for(d=0;d<c.length;d++)e=c[d],e.length>0?e[e.length-1]=e[e.length-1].createDerived(e[e.length-1].elements.concat(b)):e.push(new a.Selector(b))}}}(c("../tree")),function(a){a.Selector=function(a,b,c,d,e,f){this.elements=a,this.extendList=b,this.condition=c,this.currentFileInfo=e||{},this.isReferenced=f,c||(this.evaldCondition=!0)},a.Selector.prototype={type:"Selector",accept:function(a){this.elements&&(this.elements=a.visitArray(this.elements)),this.extendList&&(this.extendList=a.visitArray(this.extendList)),this.condition&&(this.condition=a.visit(this.condition))},createDerived:function(b,c,d){d=null!=d?d:this.evaldCondition;var e=new a.Selector(b,c||this.extendList,null,this.index,this.currentFileInfo,this.isReferenced);return e.evaldCondition=d,e.mediaEmpty=this.mediaEmpty,e},match:function(a){var b,c,d=this.elements,e=d.length;if(a.CacheElements(),b=a._elements.length,0===b||b>e)return 0;for(c=0;b>c;c++)if(d[c].value!==a._elements[c])return 0;return b},CacheElements:function(){var a,b,c,d="";if(!this._elements){for(a=this.elements.length,c=0;a>c;c++)if(b=this.elements[c],d+=b.combinator.value,b.value.value){if("string"!=typeof b.value.value){d="";break}d+=b.value.value}else d+=b.value;this._elements=d.match(/[,&#\.\w-]([\w-]|(\\.))*/g),this._elements?"&"===this._elements[0]&&this._elements.shift():this._elements=[]}},isJustParentSelector:function(){return!this.mediaEmpty&&1===this.elements.length&&"&"===this.elements[0].value&&(" "===this.elements[0].combinator.value||""===this.elements[0].combinator.value)},eval:function(a){var b=this.condition&&this.condition.eval(a),c=this.elements,d=this.extendList;return c=c&&c.map(function(b){return b.eval(a)}),d=d&&d.map(function(b){return b.eval(a)}),this.createDerived(c,d,b)},genCSS:function(a,b){var c,d;if(a&&a.firstSelector||""!==this.elements[0].combinator.value||b.add(" ",this.currentFileInfo,this.index),!this._css)for(c=0;c<this.elements.length;c++)d=this.elements[c],d.genCSS(a,b)},toCSS:a.toCSS,markReferenced:function(){this.isReferenced=!0},getIsReferenced:function(){return!this.currentFileInfo.reference||this.isReferenced},getIsOutput:function(){return this.evaldCondition}}}(c("../tree")),function(a){a.UnicodeDescriptor=function(a){this.value=a},a.UnicodeDescriptor.prototype={type:"UnicodeDescriptor",genCSS:function(a,b){b.add(this.value)},toCSS:a.toCSS,eval:function(){return this}}}(c("../tree")),function(a){a.URL=function(a,b,c){this.value=a,this.currentFileInfo=b,this.isEvald=c},a.URL.prototype={type:"Url",accept:function(a){this.value=a.visit(this.value)},genCSS:function(a,b){b.add("url("),this.value.genCSS(a,b),b.add(")")},toCSS:a.toCSS,eval:function(b){var c,d=this.value.eval(b);if(!this.isEvald&&(c=this.currentFileInfo&&this.currentFileInfo.rootpath,c&&"string"==typeof d.value&&b.isPathRelative(d.value)&&(d.quote||(c=c.replace(/[\(\)'"\s]/g,function(a){return"\\"+a})),d.value=c+d.value),d.value=b.normalizePath(d.value),b.urlArgs&&!d.value.match(/^\s*data:/))){var e=-1===d.value.indexOf("?")?"?":"&",f=e+b.urlArgs;-1!==d.value.indexOf("#")?d.value=d.value.replace("#",f+"#"):d.value+=f}return new a.URL(d,this.currentFileInfo,!0)}}}(c("../tree")),function(a){a.Value=function(a){this.value=a},a.Value.prototype={type:"Value",accept:function(a){this.value&&(this.value=a.visitArray(this.value))},eval:function(b){return 1===this.value.length?this.value[0].eval(b):new a.Value(this.value.map(function(a){return a.eval(b)}))},genCSS:function(a,b){var c;for(c=0;c<this.value.length;c++)this.value[c].genCSS(a,b),c+1<this.value.length&&b.add(a&&a.compress?",":", ")},toCSS:a.toCSS}}(c("../tree")),function(a){a.Variable=function(a,b,c){this.name=a,this.index=b,this.currentFileInfo=c||{}},a.Variable.prototype={type:"Variable",eval:function(b){var c,d=this.name;if(0===d.indexOf("@@")&&(d="@"+new a.Variable(d.slice(1)).eval(b).value),this.evaluating)throw{type:"Name",message:"Recursive variable definition for "+d,filename:this.currentFileInfo.file,index:this.index};if(this.evaluating=!0,c=a.find(b.frames,function(a){var c=a.variable(d);return c?c.value.eval(b):void 0}))return this.evaluating=!1,c;throw{type:"Name",message:"variable "+d+" is undefined",filename:this.currentFileInfo.filename,index:this.index}}}}(c("../tree")),function(a){var b=["paths","optimization","files","contents","contentsIgnoredChars","relativeUrls","rootpath","strictImports","insecure","dumpLineNumbers","compress","processImports","syncImport","javascriptEnabled","mime","useFileCache","currentFileInfo"];a.parseEnv=function(a){if(d(a,this,b),this.contents||(this.contents={}),this.contentsIgnoredChars||(this.contentsIgnoredChars={}),this.files||(this.files={}),!this.currentFileInfo){var c=a&&a.filename||"input",e=c.replace(/[^\/\\]*$/,"");a&&(a.filename=null),this.currentFileInfo={filename:c,relativeUrls:this.relativeUrls,rootpath:a&&a.rootpath||"",currentDirectory:e,entryPath:e,rootFilename:c}}};var c=["silent","verbose","compress","yuicompress","ieCompat","strictMath","strictUnits","cleancss","sourceMap","importMultiple","urlArgs"];a.evalEnv=function(a,b){d(a,this,c),this.frames=b||[]},a.evalEnv.prototype.inParenthesis=function(){this.parensStack||(this.parensStack=[]),this.parensStack.push(!0)},a.evalEnv.prototype.outOfParenthesis=function(){this.parensStack.pop()},a.evalEnv.prototype.isMathOn=function(){return this.strictMath?this.parensStack&&this.parensStack.length:!0},a.evalEnv.prototype.isPathRelative=function(a){return!/^(?:[a-z-]+:|\/)/.test(a)},a.evalEnv.prototype.normalizePath=function(a){var b,c=a.split("/").reverse();for(a=[];0!==c.length;)switch(b=c.pop()){case".":break;case"..":0===a.length||".."===a[a.length-1]?a.push(b):a.pop();break;default:a.push(b)}return a.join("/")};var d=function(a,b,c){if(a)for(var d=0;d<c.length;d++)a.hasOwnProperty(c[d])&&(b[c[d]]=a[c[d]])}}(c("./tree")),function(a){function b(a){return a}function c(a,b){var d,e;for(d in a)if(a.hasOwnProperty(d))switch(e=a[d],typeof e){case"function":e.prototype&&e.prototype.type&&(e.prototype.typeIndex=b++);break;case"object":b=c(e,b)}return b}var d={visitDeeper:!0},e=!1;a.visitor=function(b){this._implementation=b,this._visitFnCache=[],e||(c(a,1),e=!0)},a.visitor.prototype={visit:function(a){if(!a)return a;var c=a.typeIndex;if(!c)return a;var e,f=this._visitFnCache,g=this._implementation,h=c<<1,i=1|h,j=f[h],k=f[i],l=d;if(l.visitDeeper=!0,j||(e="visit"+a.type,j=g[e]||b,k=g[e+"Out"]||b,f[h]=j,f[i]=k),j!==b){var m=j.call(g,a,l);g.isReplacing&&(a=m)}return l.visitDeeper&&a&&a.accept&&a.accept(this),k!=b&&k.call(g,a),a},visitArray:function(a,b){if(!a)return a;var c,d=a.length;if(b||!this._implementation.isReplacing){for(c=0;d>c;c++)this.visit(a[c]);return a}var e=[];for(c=0;d>c;c++){var f=this.visit(a[c]);f.splice?f.length&&this.flatten(f,e):e.push(f)}return e},flatten:function(a,b){b||(b=[]);var c,d,e,f,g,h;for(d=0,c=a.length;c>d;d++)if(e=a[d],e.splice)for(g=0,f=e.length;f>g;g++)h=e[g],h.splice?h.length&&this.flatten(h,b):b.push(h);else b.push(e);return b}}}(c("./tree")),function(a){a.importVisitor=function(b,c,d,e,f){if(this._visitor=new a.visitor(this),this._importer=b,this._finish=c,this.env=d||new a.evalEnv,this.importCount=0,this.onceFileDetectionMap=e||{},this.recursionDetector={},f)for(var g in f)f.hasOwnProperty(g)&&(this.recursionDetector[g]=!0)},a.importVisitor.prototype={isReplacing:!0,run:function(a){var b;try{this._visitor.visit(a)}catch(c){b=c}this.isFinished=!0,0===this.importCount&&this._finish(b)},visitImport:function(b,c){var d,e=this,f=b.options.inline;if(!b.css||f){try{d=b.evalForImport(this.env)}catch(g){g.filename||(g.index=b.index,g.filename=b.currentFileInfo.filename),b.css=!0,b.error=g}if(d&&(!d.css||f)){b=d,this.importCount++;var h=new a.evalEnv(this.env,this.env.frames.slice(0));b.options.multiple&&(h.importMultiple=!0),this._importer.push(b.getPath(),b.currentFileInfo,b.options,function(c,d,g,i){c&&!c.filename&&(c.index=b.index,c.filename=b.currentFileInfo.filename),h.importMultiple||(b.skip=g?!0:function(){return i in e.onceFileDetectionMap?!0:(e.onceFileDetectionMap[i]=!0,!1)});var j=function(a){e.importCount--,0===e.importCount&&e.isFinished&&e._finish(a)};if(d){b.root=d,b.importedFilename=i;var k=g||i in e.recursionDetector;if(!f&&(h.importMultiple||!k))return e.recursionDetector[i]=!0,void new a.importVisitor(e._importer,j,h,e.onceFileDetectionMap,e.recursionDetector).run(d)}j()})}}return c.visitDeeper=!1,b},visitRule:function(a,b){return b.visitDeeper=!1,a},visitDirective:function(a){return this.env.frames.unshift(a),a},visitDirectiveOut:function(){this.env.frames.shift()},visitMixinDefinition:function(a){return this.env.frames.unshift(a),a},visitMixinDefinitionOut:function(){this.env.frames.shift()},visitRuleset:function(a){return this.env.frames.unshift(a),a},visitRulesetOut:function(){this.env.frames.shift()},visitMedia:function(a){return this.env.frames.unshift(a.ruleset),a},visitMediaOut:function(){this.env.frames.shift()}}}(c("./tree")),function(a){a.joinSelectorVisitor=function(){this.contexts=[[]],this._visitor=new a.visitor(this)},a.joinSelectorVisitor.prototype={run:function(a){return this._visitor.visit(a)},visitRule:function(a,b){b.visitDeeper=!1},visitMixinDefinition:function(a,b){b.visitDeeper=!1},visitRuleset:function(a){var b,c=this.contexts[this.contexts.length-1],d=[];this.contexts.push(d),a.root||(b=a.selectors,b&&(b=b.filter(function(a){return a.getIsOutput()}),a.selectors=b.length?b:b=null,b&&a.joinSelectors(d,c,b)),b||(a.rules=null),a.paths=d)},visitRulesetOut:function(){this.contexts.length=this.contexts.length-1},visitMedia:function(a){var b=this.contexts[this.contexts.length-1];a.rules[0].root=0===b.length||b[0].multiMedia}}}(c("./tree")),function(a){a.toCSSVisitor=function(b){this._visitor=new a.visitor(this),this._env=b},a.toCSSVisitor.prototype={isReplacing:!0,run:function(a){return this._visitor.visit(a)},visitRule:function(a){return a.variable?[]:a},visitMixinDefinition:function(a){return a.frames=[],[]},visitExtend:function(){return[]},visitComment:function(a){return a.isSilent(this._env)?[]:a},visitMedia:function(a,b){return a.accept(this._visitor),b.visitDeeper=!1,a.rules.length?a:[]},visitDirective:function(b){if(b.currentFileInfo.reference&&!b.isReferenced)return[];if("@charset"===b.name){if(this.charset){if(b.debugInfo){var c=new a.Comment("/* "+b.toCSS(this._env).replace(/\n/g,"")+" */\n");return c.debugInfo=b.debugInfo,this._visitor.visit(c)}return[]}this.charset=!0}return b},checkPropertiesInRoot:function(b){for(var c,d=0;d<b.length;d++)if(c=b[d],c instanceof a.Rule&&!c.variable)throw{message:"properties must be inside selector blocks, they cannot be in the root.",index:c.index,filename:c.currentFileInfo?c.currentFileInfo.filename:null}},visitRuleset:function(b,c){var d,e=[];if(b.firstRoot&&this.checkPropertiesInRoot(b.rules),b.root)b.accept(this._visitor),c.visitDeeper=!1,(b.firstRoot||b.rules&&b.rules.length>0)&&e.splice(0,0,b);else{b.paths&&(b.paths=b.paths.filter(function(b){var c;for(" "===b[0].elements[0].combinator.value&&(b[0].elements[0].combinator=new a.Combinator("")),c=0;c<b.length;c++)if(b[c].getIsReferenced()&&b[c].getIsOutput())return!0;return!1}));for(var f=b.rules,g=f?f.length:0,h=0;g>h;)d=f[h],d&&d.rules?(e.push(this._visitor.visit(d)),f.splice(h,1),g--):h++;g>0?b.accept(this._visitor):b.rules=null,c.visitDeeper=!1,f=b.rules,f&&(this._mergeRules(f),f=b.rules),f&&(this._removeDuplicateRules(f),f=b.rules),f&&f.length>0&&b.paths.length>0&&e.splice(0,0,b)}return 1===e.length?e[0]:e},_removeDuplicateRules:function(b){if(b){var c,d,e,f={};for(e=b.length-1;e>=0;e--)if(d=b[e],d instanceof a.Rule)if(f[d.name]){c=f[d.name],c instanceof a.Rule&&(c=f[d.name]=[f[d.name].toCSS(this._env)]);var g=d.toCSS(this._env);-1!==c.indexOf(g)?b.splice(e,1):c.push(g)}else f[d.name]=d}},_mergeRules:function(b){if(b){for(var c,d,e,f={},g=0;g<b.length;g++)d=b[g],d instanceof a.Rule&&d.merge&&(e=[d.name,d.important?"!":""].join(","),f[e]?b.splice(g--,1):f[e]=[],f[e].push(d));Object.keys(f).map(function(b){function e(b){return new a.Expression(b.map(function(a){return a.value}))}function g(b){return new a.Value(b.map(function(a){return a}))}if(c=f[b],c.length>1){d=c[0];var h=[],i=[];c.map(function(a){"+"===a.merge&&(i.length>0&&h.push(e(i)),i=[]),i.push(a)}),h.push(e(i)),d.value=g(h)}})}}}}(c("./tree")),function(a){a.extendFinderVisitor=function(){this._visitor=new a.visitor(this),this.contexts=[],this.allExtendsStack=[[]]},a.extendFinderVisitor.prototype={run:function(a){return a=this._visitor.visit(a),a.allExtends=this.allExtendsStack[0],a},visitRule:function(a,b){b.visitDeeper=!1},visitMixinDefinition:function(a,b){b.visitDeeper=!1},visitRuleset:function(b){if(!b.root){var c,d,e,f,g=[],h=b.rules,i=h?h.length:0;for(c=0;i>c;c++)b.rules[c]instanceof a.Extend&&(g.push(h[c]),b.extendOnEveryPath=!0);var j=b.paths;for(c=0;c<j.length;c++){var k=j[c],l=k[k.length-1],m=l.extendList;for(f=m?m.slice(0).concat(g):g,f&&(f=f.map(function(a){return a.clone()})),d=0;d<f.length;d++)this.foundExtends=!0,e=f[d],e.findSelfSelectors(k),e.ruleset=b,0===d&&(e.firstExtendOnThisSelectorPath=!0),this.allExtendsStack[this.allExtendsStack.length-1].push(e)}this.contexts.push(b.selectors)}},visitRulesetOut:function(a){a.root||(this.contexts.length=this.contexts.length-1)},visitMedia:function(a){a.allExtends=[],this.allExtendsStack.push(a.allExtends)},visitMediaOut:function(){this.allExtendsStack.length=this.allExtendsStack.length-1},visitDirective:function(a){a.allExtends=[],this.allExtendsStack.push(a.allExtends)},visitDirectiveOut:function(){this.allExtendsStack.length=this.allExtendsStack.length-1}},a.processExtendsVisitor=function(){this._visitor=new a.visitor(this)},a.processExtendsVisitor.prototype={run:function(b){var c=new a.extendFinderVisitor;return c.run(b),c.foundExtends?(b.allExtends=b.allExtends.concat(this.doExtendChaining(b.allExtends,b.allExtends)),this.allExtendsStack=[b.allExtends],this._visitor.visit(b)):b},doExtendChaining:function(b,c,d){var e,f,g,h,i,j,k,l,m=[],n=this;for(d=d||0,e=0;e<b.length;e++)for(f=0;f<c.length;f++)j=b[e],k=c[f],j.parent_ids.indexOf(k.object_id)>=0||(i=[k.selfSelectors[0]],g=n.findMatch(j,i),g.length&&j.selfSelectors.forEach(function(b){h=n.extendSelector(g,i,b),l=new a.Extend(k.selector,k.option,0),l.selfSelectors=h,h[h.length-1].extendList=[l],m.push(l),l.ruleset=k.ruleset,l.parent_ids=l.parent_ids.concat(k.parent_ids,j.parent_ids),k.firstExtendOnThisSelectorPath&&(l.firstExtendOnThisSelectorPath=!0,k.ruleset.paths.push(h))}));if(m.length){if(this.extendChainCount++,d>100){var o="{unable to calculate}",p="{unable to calculate}";try{o=m[0].selfSelectors[0].toCSS(),p=m[0].selector.toCSS()}catch(q){}throw{message:"extend circular reference detected. One of the circular extends is currently:"+o+":extend("+p+")"}}return m.concat(n.doExtendChaining(m,c,d+1))}return m},visitRule:function(a,b){b.visitDeeper=!1},visitMixinDefinition:function(a,b){b.visitDeeper=!1},visitSelector:function(a,b){b.visitDeeper=!1},visitRuleset:function(a){if(!a.root){var b,c,d,e,f=this.allExtendsStack[this.allExtendsStack.length-1],g=[],h=this;for(d=0;d<f.length;d++)for(c=0;c<a.paths.length;c++)if(e=a.paths[c],!a.extendOnEveryPath){var i=e[e.length-1].extendList;i&&i.length||(b=this.findMatch(f[d],e),b.length&&f[d].selfSelectors.forEach(function(a){g.push(h.extendSelector(b,e,a))}))}a.paths=a.paths.concat(g)}},findMatch:function(a,b){var c,d,e,f,g,h,i,j=this,k=a.selector.elements,l=[],m=[];for(c=0;c<b.length;c++)for(d=b[c],e=0;e<d.elements.length;e++)for(f=d.elements[e],(a.allowBefore||0===c&&0===e)&&l.push({pathIndex:c,index:e,matched:0,initialCombinator:f.combinator}),h=0;h<l.length;h++)i=l[h],g=f.combinator.value,""===g&&0===e&&(g=" "),!j.isElementValuesEqual(k[i.matched].value,f.value)||i.matched>0&&k[i.matched].combinator.value!==g?i=null:i.matched++,i&&(i.finished=i.matched===k.length,i.finished&&!a.allowAfter&&(e+1<d.elements.length||c+1<b.length)&&(i=null)),i?i.finished&&(i.length=k.length,i.endPathIndex=c,i.endPathElementIndex=e+1,l.length=0,m.push(i)):(l.splice(h,1),h--);return m},isElementValuesEqual:function(b,c){if("string"==typeof b||"string"==typeof c)return b===c;if(b instanceof a.Attribute)return b.op!==c.op||b.key!==c.key?!1:b.value&&c.value?(b=b.value.value||b.value,c=c.value.value||c.value,b===c):b.value||c.value?!1:!0;if(b=b.value,c=c.value,b instanceof a.Selector){if(!(c instanceof a.Selector)||b.elements.length!==c.elements.length)return!1;for(var d=0;d<b.elements.length;d++){if(b.elements[d].combinator.value!==c.elements[d].combinator.value&&(0!==d||(b.elements[d].combinator.value||" ")!==(c.elements[d].combinator.value||" ")))return!1;if(!this.isElementValuesEqual(b.elements[d].value,c.elements[d].value))return!1}return!0}return!1},extendSelector:function(b,c,d){var e,f,g,h,i,j=0,k=0,l=[];
for(e=0;e<b.length;e++)h=b[e],f=c[h.pathIndex],g=new a.Element(h.initialCombinator,d.elements[0].value,d.elements[0].index,d.elements[0].currentFileInfo),h.pathIndex>j&&k>0&&(l[l.length-1].elements=l[l.length-1].elements.concat(c[j].elements.slice(k)),k=0,j++),i=f.elements.slice(k,h.index).concat([g]).concat(d.elements.slice(1)),j===h.pathIndex&&e>0?l[l.length-1].elements=l[l.length-1].elements.concat(i):(l=l.concat(c.slice(j,h.pathIndex)),l.push(new a.Selector(i))),j=h.endPathIndex,k=h.endPathElementIndex,k>=c[j].elements.length&&(k=0,j++);return j<c.length&&k>0&&(l[l.length-1].elements=l[l.length-1].elements.concat(c[j].elements.slice(k)),j++),l=l.concat(c.slice(j,c.length))},visitRulesetOut:function(){},visitMedia:function(a){var b=a.allExtends.concat(this.allExtendsStack[this.allExtendsStack.length-1]);b=b.concat(this.doExtendChaining(b,a.allExtends)),this.allExtendsStack.push(b)},visitMediaOut:function(){this.allExtendsStack.length=this.allExtendsStack.length-1},visitDirective:function(a){var b=a.allExtends.concat(this.allExtendsStack[this.allExtendsStack.length-1]);b=b.concat(this.doExtendChaining(b,a.allExtends)),this.allExtendsStack.push(b)},visitDirectiveOut:function(){this.allExtendsStack.length=this.allExtendsStack.length-1}}}(c("./tree")),function(a){a.sourceMapOutput=function(a){this._css=[],this._rootNode=a.rootNode,this._writeSourceMap=a.writeSourceMap,this._contentsMap=a.contentsMap,this._contentsIgnoredCharsMap=a.contentsIgnoredCharsMap,this._sourceMapFilename=a.sourceMapFilename,this._outputFilename=a.outputFilename,this._sourceMapURL=a.sourceMapURL,a.sourceMapBasepath&&(this._sourceMapBasepath=a.sourceMapBasepath.replace(/\\/g,"/")),this._sourceMapRootpath=a.sourceMapRootpath,this._outputSourceFiles=a.outputSourceFiles,this._sourceMapGeneratorConstructor=a.sourceMapGenerator||c("source-map").SourceMapGenerator,this._sourceMapRootpath&&"/"!==this._sourceMapRootpath.charAt(this._sourceMapRootpath.length-1)&&(this._sourceMapRootpath+="/"),this._lineNumber=0,this._column=0},a.sourceMapOutput.prototype.normalizeFilename=function(a){return a=a.replace(/\\/g,"/"),this._sourceMapBasepath&&0===a.indexOf(this._sourceMapBasepath)&&(a=a.substring(this._sourceMapBasepath.length),("\\"===a.charAt(0)||"/"===a.charAt(0))&&(a=a.substring(1))),(this._sourceMapRootpath||"")+a},a.sourceMapOutput.prototype.add=function(a,b,c,d){if(a){var e,f,g,h,i;if(b){var j=this._contentsMap[b.filename];this._contentsIgnoredCharsMap[b.filename]&&(c-=this._contentsIgnoredCharsMap[b.filename],0>c&&(c=0),j=j.slice(this._contentsIgnoredCharsMap[b.filename])),j=j.substring(0,c),f=j.split("\n"),h=f[f.length-1]}if(e=a.split("\n"),g=e[e.length-1],b)if(d)for(i=0;i<e.length;i++)this._sourceMapGenerator.addMapping({generated:{line:this._lineNumber+i+1,column:0===i?this._column:0},original:{line:f.length+i,column:0===i?h.length:0},source:this.normalizeFilename(b.filename)});else this._sourceMapGenerator.addMapping({generated:{line:this._lineNumber+1,column:this._column},original:{line:f.length,column:h.length},source:this.normalizeFilename(b.filename)});1===e.length?this._column+=g.length:(this._lineNumber+=e.length-1,this._column=g.length),this._css.push(a)}},a.sourceMapOutput.prototype.isEmpty=function(){return 0===this._css.length},a.sourceMapOutput.prototype.toCSS=function(a){if(this._sourceMapGenerator=new this._sourceMapGeneratorConstructor({file:this._outputFilename,sourceRoot:null}),this._outputSourceFiles)for(var b in this._contentsMap)if(this._contentsMap.hasOwnProperty(b)){var c=this._contentsMap[b];this._contentsIgnoredCharsMap[b]&&(c=c.slice(this._contentsIgnoredCharsMap[b])),this._sourceMapGenerator.setSourceContent(this.normalizeFilename(b),c)}if(this._rootNode.genCSS(a,this),this._css.length>0){var d,e=JSON.stringify(this._sourceMapGenerator.toJSON());this._sourceMapURL?d=this._sourceMapURL:this._sourceMapFilename&&(d=this.normalizeFilename(this._sourceMapFilename)),this._writeSourceMap?this._writeSourceMap(e):d="data:application/json,"+encodeURIComponent(e),d&&this._css.push("/*# sourceMappingURL="+d+" */")}return this._css.join("")}}(c("./tree"));var y=/^(file|chrome(-extension)?|resource|qrc|app):/.test(location.protocol);w.env=w.env||("127.0.0.1"==location.hostname||"0.0.0.0"==location.hostname||"localhost"==location.hostname||location.port&&location.port.length>0||y?"development":"production");var z={debug:3,info:2,errors:1,none:0};if(w.logLevel="undefined"!=typeof w.logLevel?w.logLevel:"development"===w.env?z.debug:z.errors,w.async=w.async||!1,w.fileAsync=w.fileAsync||!1,w.poll=w.poll||(y?1e3:1500),w.functions)for(var A in w.functions)w.functions.hasOwnProperty(A)&&(w.tree.functions[A]=w.functions[A]);var B=/!dumpLineNumbers:(comments|mediaquery|all)/.exec(location.hash);B&&(w.dumpLineNumbers=B[1]);var C=/^text\/(x-)?less$/,D=null,E={};if(w.watch=function(){return w.watchMode||(w.env="development",v()),this.watchMode=!0,!0},w.unwatch=function(){return clearInterval(w.watchTimer),this.watchMode=!1,!1},/!watch/.test(location.hash)&&w.watch(),"development"!=w.env)try{D="undefined"==typeof a.localStorage?null:a.localStorage}catch(F){}var G=document.getElementsByTagName("link");w.sheets=[];for(var H=0;H<G.length;H++)("stylesheet/less"===G[H].rel||G[H].rel.match(/stylesheet/)&&G[H].type.match(C))&&w.sheets.push(G[H]);w.modifyVars=function(a){w.refresh(!1,a)},w.refresh=function(a,b){var c,e;c=e=new Date,u(function(a,b,f,i,k){if(a)return j(a,i.href);if(k.local)d("loading "+i.href+" from cache.",z.info);else{d("parsed "+i.href+" successfully.",z.debug);var l=b.toCSS(w);l=h(l),g(l,i,k.lastModified)}d("css for "+i.href+" generated in "+(new Date-e)+"ms",z.info),0===k.remaining&&d("less has finished. css generated in "+(new Date-c)+"ms",z.info),e=new Date},a,b),n(b)},w.refreshStyles=n,w.Parser.fileLoader=s,w.refresh("development"===w.env),"function"==typeof define&&define.amd&&define(function(){return w})}(window):null}),KISSY.add("srpbase/common/freeanim/base/visitor",function(a){function b(){b.superclass.constructor.apply(this,arguments),this.initialize()}var c=a.require("base"),d=!a.Features.isTransitionSupported();return b.ATTRS={delay:{value:50}},a.extend(b,c,{initialize:function(){},_timeHidder:null,visite:function(a,b){{var c=this;c.get("delay")}d?a.runByShiv(b):a.run(b)},_clearTimeHidder:function(){var a=this._timeHidder;a&&(a.cancel(),a=null)}}),b},{requires:["base"]}),KISSY.add("srpbase/common/freeanim/bubble/index",function(a){function b(){b.superclass.constructor.apply(this,arguments),this.initialize()}var c=a.require("srpbase/common/freeanim/base/element");return b.ATTRS={},a.extend(b,c,{initialize:function(){var a=this.get("bound"),b=this.get("box");a.height&&b.css({bottom:-a.height,display:"block"})},accept:function(a,b){a.visite(this,b)},run:function(a){this.runByShiv(a)},_animationTimer:null,runByShiv:function(a){var b=this,c=this.get("bound"),d=b.get("box"),e=b._animationTimer;a?(e&&e.stop(),b._animationTimer=d.animate({bottom:"0"},{duration:.05,easing:"easeNone"})):(e&&e.stop(),b._animationTimer=d.animate({bottom:-c.height},{duration:.05,easing:"easeNone"}))}}),b},{requires:["srpbase/common/freeanim/base/element","core"]}),KISSY.add("srpbase/common/freeanim/dropdown/index",function(a){function b(){b.superclass.constructor.apply(this,arguments),this.initialize()}var c=a.require("srpbase/common/freeanim/base/element");return b.ATTRS={prefixCls:{value:"freeanim-dropdown-"}},a.extend(b,c,{initialize:function(){var a=this.get("bound"),b=this.get("box");a.height||(a.height=230),b.css("height","0")},accept:function(a,b){a.visite(this,b)},run:function(a){var b=this,c=b.get("box"),d=b.get("bound"),e=b.get("prefixCls"),f=b._animationTimer,g=e+"bounceOut",h=e+"bounceIn";a?(f&&clearTimeout(f),c.css("display","block"),c.removeClass(g).addClass(h),b._animationTimer=setTimeout(function(){c.css("height",d.height+"px")},500)):(f&&clearTimeout(f),c.removeClass(h).addClass(g),b._animationTimer=setTimeout(function(){c.css({height:0,display:"none"})},300))},_animationTimer:null,runByShiv:function(a){var b=this,c=b.get("box"),d=b.get("bound"),e=b._animationTimer;a?(e&&e.stop(),c.css("display","block"),b._animationTimer=c.animate({height:d.height},{duration:.5,easing:"backOut"})):(e&&e.stop(),b._animationTimer=c.animate({height:0},{duration:.3,easing:"backIn",complete:function(){c.css("display","none")}}))}}),b},{requires:["srpbase/common/freeanim/base/element","core"]}),KISSY.add("srpbase/common/freeanim/dropdown/less",function(){return["@iheight: @height + 4;",'@bounceInCls: ~"@{prefix}bounceIn";','@bounceOutCls: ~"@{prefix}bounceOut";','@bounceIn: ~".@{prefix}bounceIn";','@bounceOut: ~".@{prefix}bounceOut";',"@{bounceIn}{","-webkit-animation : @bounceInCls 0.5s 1 ease;","-moz-animation : @bounceInCls 0.5s 1 ease;","-o-animation : @bounceInCls 0.5s 1 ease;","-ms-animation : @bounceInCls 0.5s 1 ease;","}","@{bounceOut}{","-webkit-animation : @bounceOutCls 0.3s 1 cubic-bezier(1.00, 0.00, 1.00, 1.00);","-moz-animation : @bounceOutCls 0.3s 1 cubic-bezier(1.00, 0.00, 1.00, 1.00);","-o-animation : @bounceOutCls 0.3s 1 cubic-bezier(1.00, 0.00, 1.00, 1.00);","-ms-animation : @bounceOutCls 0.3s 1 cubic-bezier(1.00, 0.00, 1.00, 1.00);","}","@-ms-keyframes @bounceInCls{","0% {height: 0px;}",'30% {height: ~"@{iheight}px";}','50% {height: ~"@{iheight}px";}','70% {height: ~"@{height}px";}','100% {height: ~"@{height}px";}',"}","@-webkit-keyframes @bounceInCls{","0% {height: 0px;}",'30% {height: ~"@{height}px";}','50% {height: ~"@{iheight}px";}','70% {height: ~"@{height}px";}','100% {height: ~"@{height}px";}',"}","@-moz-keyframes @bounceInCls{","0% {height: 0px;}",'30% {height: ~"@{height}px";}','50% {height: ~"@{iheight}px";}','70% {height: ~"@{height}px";}','100% {height: ~"@{height}px";}',"}","@-o-keyframes @bounceInCls{","0% {height: 0px;}",'30% {height: ~"@{height}px";}','50% {height: ~"@{iheight}px";}','70% {height: ~"@{height}px";}','100% {height: ~"@{height}px";}',"}","@-webkit-keyframes @bounceOutCls{",'0% {height: ~"@{height}px";}',"100%{ height: 0px;}","}","@-moz-keyframes @bounceOutCls{",'0% {height: ~"@{height}px";}',"100%{ height: 0px;}","}","@-o-keyframes @bounceOutCls{",'0% {height: ~"@{height}px";}',"100%{ height: 0px;}","}","@-ms-keyframes @bounceOutCls{",'0% {height: ~"@{height}px";}',"100%{ height: 0px;}","}"].join("")}),KISSY.add("srpbase/common/freeanim/flow/index",function(a){function b(){b.superclass.constructor.apply(this,arguments),this.initialize()}var c=a.require("srpbase/common/freeanim/base/element");return b.ATTRS={style:{value:{"default":{color:"#f40",bgColor:"#fff",borderColor:"#e8e8e8"},active:{color:"#fff",bgColor:"#f40",borderColor:"#f40"}},setter:function(b){return a.mix(this.get("style"),b)}},selectedIndex:{},lineWidth:{value:2}},a.extend(b,c,{_selectedItem:null,_selectedStyle:null,_activeItem:null,initialize:function(){var a=this,b=a.get("trigger"),c=a.get("itemCls"),d=a.get("box"),e=a.get("style"),f=a.get("lineWidth"),g=a.get("selectedIndex"),h=a._activeItem=a._selectedItem=b.all(c).item(g-1);a._selectedStyle={color:h.css("color"),bgColor:h.css("backgroundColor"),borderColor:h.css("borderColor")};var i="s-c-a-f-en",j="s-c-a-f-line";if(h.addClass(i),f){var k=h.outerWidth(),l=h.offset().left-b.offset().left-2;d.append('<hr class="'+j+'" style="position:absolute;top:0px;left: '+l+"px;width: "+k+"px;margin:0;border:0 none;border-bottom:"+f+"px solid "+e.active.bgColor+';" />')}a._bindUI()},_bindUI:function(){var b=this,c=b.get("trigger"),d=b.get("box"),e=b.get("itemCls"),f=b.get("lineWidth"),g=b.get("style"),h="s-c-a-f-en",i="s-c-a-f-line",j=d.one("."+i);c.delegate("mouseenter",e,function(d){var e=b._animationTimer,i=a.one(d.currentTarget);if(b._activeItem=i,i.hasClass(h)||(e&&e.stop(!0),b._animationTimer=i.animate({backgroundColor:g.active.bgColor,color:g.active.color,borderColor:g.active.borderColor},{easing:"easeIn",duration:.2})),f){var k=i.offset().left-c.offset().left-2;j.animate({left:k},{easing:"easeIn",duration:.2})}}),c.delegate("mouseleave",e,function(c){var d=a.one(c.currentTarget),e=b._animationTimer;b._activeItem=d,d.hasClass(h)||(e&&e.stop(!0),b._animationTimer=d.animate({backgroundColor:g["default"].bgColor,color:g["default"].color,borderColor:g["default"].borderColor},{easing:"easeIn",duration:.2}))})},accept:function(a,b){a.visite(this,b)},run:function(a){this.runByShiv(a)},_animationTimer:null,runByShiv:function(a){var b=this,c=b.get("trigger"),d=b.get("box"),e=b.get("style"),f=b.get("lineWidth"),g=b._animationTimer,h=b._selectedItem,i=b._activeItem,j="s-c-a-f-en",k="s-c-a-f-line",l=d.one("."+k);if(!a&&(g&&g.stop(!0),f)){var m=h.offset().left-c.offset().left-2;b._animationTimer=l.animate({left:m},{easing:"easeIn",duration:.2,complete:function(){i.hasClass(j)||i.css({color:e["default"].color,backgroundColor:e["default"].bgColor,borderColor:e["default"].borderColor}),h.addClass(j)}})}}}),b},{requires:["srpbase/common/freeanim/base/element","core"]}),KISSY.add("srpbase/common/freeanim/index",function(a){function b(b,c,d){if(h&&d){c.prefix=d;try{b=a.require(b),h.Parser().parse(b,function(b,c){if(b)return void a.log("\u81ea\u7531\u52a8\u753b-less\u7f16\u8bd1\u9519\u8bef\uff01");var d=a.trim(c.toCSS());j.styleSheet?(d=j.styleSheet.cssText+d,j.styleSheet.cssText=d):j.appendChild(i.createTextNode(d))},{modifyVars:c})}catch(e){a.log("\u81ea\u7531\u52a8\u753b-less\u7f16\u8bd1\u9519\u8bef\uff01")}}}function c(){c.superclass.constructor.apply(this,arguments),this.initialize()}a.require("srpbase/common/freeanim/base/vendor-less-min");var d=a.require("base"),e=a.require("dom"),f=a.require("srpbase/common/freeanim/base/element"),g=a.require("srpbase/common/freeanim/base/visitor"),h=window.less,i=window.document,j=i.getElementById("J_style_gallery");j||(j=e.create("<style>",{id:"J_style_gallery"},i),e.get("head",i).appendChild(j));var k="freeanim-";c.ATTRS={plugins:{value:[]}};var l=".c-f-a-touch-tgr",m=".c-f-a-click-tgr",n=a.one("body"),o="srpbase/common/freeanim/";return a.extend(c,d,{visitor:null,initialize:function(){var a=this,b=a.get("plugins");a.visitor=new g;for(var c=b.length;c--;)a.addPlugin(b[c]);a._bindUI()},_prefix:"J_c_f_a_",_stampId:function(){return a.guid(this._prefix)},_getBound:function(a,b){if(a&&b){var c=b.height,d=b.width,e=a.css("display"),f=a.css("overflow");return"auto"===c&&("none"===e?(a.css({visibility:"hidden",overflow:"visible",display:"block"}),c=a.height(),a.css({visibility:"visible",overflow:f,display:e})):c=a.height()),"auto"===d&&("none"===e?(a.css({visibility:"hidden",overflow:"visible",display:"block"}),d=a.width(),a.css({visibility:"visible",overflow:f,display:e})):d=a.width()),{height:c,width:d}}return b||{}},_getStructure:function(b){var c=this,d=b.el;if(!d)return!1;var e=b.trigger;b.triggerCls&&(e=b.trigger=d.one(b.triggerCls)),b.boxCls&&(b.box=d.one(b.boxCls));var f=e.attr("id");f||(f=c._stampId(),e.attr("id",f)),b.key=f;var c=this,g={key:!0,el:!0,trigger:!0,box:!0,bound:function(a){return c._getBound(a.box,a.bound)}},h={effect:null,eventType:null,triggerCls:null,boxCls:null},i={};for(var j in b)g[j]?g[j]=g[j]===!0?b[j]:g[j](b):i[j]=b[j];for(var j in h)i[j]&&delete i[j];var n=b.eventType;return e&&n?("click"==n?e.addClass(m.slice(1)):"touch"==n&&e.addClass(l.slice(1)),(g.bound.width||g.bound.height)&&(g.prefixCls=a.guid(k)+"-"),a.mix(g,i)):!1},_emitEvent:function(a,b){var c=this,d=c.visitor,e=c.elemList,f=a.id;e[f]&&e[f].accept(d,b)},_bindUI:function(){var a=this;n.delegate("click",m,function(b){a._emitEvent(b.currentTarget)}),n.delegate("mouseenter",l,function(b){a._emitEvent(b.currentTarget,!0)}),n.delegate("mouseleave",l,function(b){a._emitEvent(b.currentTarget,!1)})},addPlugin:function(c){var d,e,g=this;try{d=a.require(o+c.effect+"/index")||null,e=g._getStructure(c),d&&d.superclass.constructor==f&&e?(a.isPlainObject(e.bound)&&b(o+c.effect+"/less",e.bound,e.prefixCls),g.attach(e.key,new d(e))):a.log("\u81ea\u7531\u52a8\u753b-\u6ce8\u518c\u52a8\u753b\uff1a\u5931\u8d25\uff01\u6548\u679c\u4e0d\u5b58\u5728\u6216\u8005\u53c2\u6570\u672a\u586b")}catch(h){a.log("\u81ea\u7531\u52a8\u753b-\u6ce8\u518c\u52a8\u753b\uff1a\u5931\u8d25\uff01\u6a21\u5757")}},elemList:{},attach:function(a,b){this.elemList[a]=b},detach:function(a){var b=this.elemList[a];b&&(b.destroy&&b.destroy(),b=null,delete this.elemList[a])},detachAll:function(){var a=this,b=a.elemList;for(var c in b)a.detach(c)}}),c},{requires:["srpbase/common/freeanim/base/element","srpbase/common/freeanim/base/visitor","srpbase/common/freeanim/base/vendor-less-min","srpbase/common/freeanim/bubble/index","srpbase/common/freeanim/dropdown/index","srpbase/common/freeanim/dropdown/less","srpbase/common/freeanim/flow/index","srpbase/common/freeanim/pop/index","srpbase/common/freeanim/pop/less","core"]}),KISSY.add("srpbase/common/freeanim/pop/index",function(a){function b(){b.superclass.constructor.apply(this,arguments),this.initialize()}var c=a.require("srpbase/common/freeanim/base/element"),d=a.require("node"),e=a.require("overlay"),f="freeanim-pop-";return b.ATTRS={prefixCls:{value:f}},b.ATTRS={title:{},wrapper:{setter:function(a){return a?this.get("el").one(a):this.get("box")},valueFn:function(){return this.get("box")}},content:{setter:function(b){return a.isString(b)&&0!==b.indexOf(".")?b:b?(b=this.get("el").one(b),b?b.html():"<div>error!</div>"):"<div>error!</div>"}}},a.extend(b,c,{initialize:function(){var a=this,b=a.get("prefixCls"),c=a.get("trigger"),d=a.get("bound");d||(d={height:280,width:280}),c.addClass(b+"en")},accept:function(a){a.visite(this)},run:function(){var b=this,c=b.get("prefixCls"),d=b.get("trigger"),e=c+"un",f=c+"en",g=b._dialog;g||(g=b._createDialog(function(b){a.one(b.el).css("visibility","visible")},function(b){setTimeout(function(){a.one(b.el).css("visibility","hidden"),d.removeClass(e).addClass(f).show()},300)}));var h=c+"bounceIn";d.hasClass(f)&&(d.hide(),g.show(),a.one(g.el).addClass(h),setTimeout(function(){a.one(g.el).removeClass(h),d.removeClass(f).addClass(e)},300))},runByShiv:function(){var a=this,b=a.get("prefixCls"),c=a.get("trigger"),d=b+"un",e=b+"en",f=a._dialog;f||(f=a._createDialogByShiv(null,function(){c.removeClass(d).addClass(e).show()})),c.hasClass(e)&&(f.show(),c.hide())},_dialog:null,_createDialog:function(a,b){var c=this,d=c._dialog;if(d)return d;var f=c._getDialogOption(!1);return c._dialog=d=new e.Dialog(f),d.on("hide",function(){b(d)}),d.on("show",function(){a(d)}),d},_createDialogByShiv:function(a,b){var c=this,d=c._dialog;if(d)return d;var f=c._getDialogOption(!0);return c._dialog=d=new e.Dialog(f),d.on("hide",function(){b(d)}),d},_getDialogOption:function(b){var c=this,e=c.get("title"),g=c.get("wrapper"),h=c.get("content"),i=c.get("bound"),j=c.get("prefixCls"),k='<div class="'+f+'title">{title}</div>',l='<div class="'+f+'refer"></div>',m='<div style="{style}">{html}</div>';if(b)g.addClass(f+"wrapper");else{g.addClass(j+"wrapper");var n=new d(l).appendTo(g)}return{width:i.width,height:i.height,headerContent:a.substitute(k,{title:e}),bodyContent:a.substitute(m,{style:"height: "+i.height+"px;width: "+i.width+"px;",html:h}),prefixCls:f,closable:!0,align:{node:g,points:["cc","cc"]},focused:!1,elBefore:b?"":n,visible:b?!1:!0,effect:b?{target:n,easing:"backOut",duration:.3,effect:"none"}:!1}}}),b},{requires:["srpbase/common/freeanim/base/element","overlay","core"]}),KISSY.add("srpbase/common/freeanim/pop/less",function(){return["@iheight4: @height/4 + 4;","@iwidth4: @width/4 + 4;","@iheight_8: - @iheight4/2;","@iwidth_8: - @iwidth4/2;","@iheight: @height + 6;","@iwidth: @width + 6;","@iheight_2: - @iheight/2;","@iwidth_2: - @iwidth/2;","@height_2: - @height/2;","@width_2: - @width/2;",'@bounceInCls: ~"@{prefix}bounceIn";','@bounceOutCls: ~"@{prefix}bounceOut";','@bounceIn: ~".@{prefix}bounceIn";','@bounceOut: ~".@{prefix}bounceOut  .freeanim-pop-dialog-hidden";',"@{bounceIn}{","-webkit-animation: @bounceInCls 0.3s 1 ease;","-moz-animation: @bounceInCls 0.3s 1 ease;","-o-animation: @bounceInCls 0.3s 1 ease;","-ms-animation: @bounceInCls 0.3s 1 ease;","}","@{bounceOut}{","-webkit-animation : @bounceOutCls 0.3s 1 ease;","-moz-animation : @bounceOutCls 0.3s 1 ease;","-o-animation : @bounceOutCls 0.3s 1 ease;","-ms-animation : @bounceOutCls 0.3s 1 ease;","visibility: visible;","}","@-webkit-keyframes @bounceInCls{","0%{","left: 50%;","top: 50%;","opacity: 0.5;","overflow: hidden;",'margin-left: ~"@{iheight_8}px";','margin-top: ~"@{iwidth_8}px";','width: ~"@{iheight4}px";','height: ~"@{iwidth4}px";',"}","50%{","left: 50%;","top: 50%;","opacity: 0.7;","overflow: hidden;",'margin-left: ~"@{iheight_2}px";','margin-top: ~"@{iwidth_2}px";','width: ~"@{iheight}px";','height: ~"@{iwidth}px";',"}","100%{","left: 50%;","top: 50%;","opacity: 1;","overflow: hidden;",'margin-left: ~"@{height_2}px";','margin-top: ~"@{width_2}px";','width: ~"@{height}px";','height: ~"@{width}px";',"}","}","@-moz-keyframes @bounceInCls{","0%{","left: 50%;","top: 50%;","opacity: 0.5;","overflow: hidden;",'margin-left: ~"@{iheight_8}px";','margin-top: ~"@{iwidth_8}px";','width: ~"@{iheight4}px";','height: ~"@{iwidth4}px";',"}","50%{","left: 50%;","top: 50%;","opacity: 0.7;","overflow: hidden;",'margin-left: ~"@{iheight_2}px";','margin-top: ~"@{iwidth_2}px";','width: ~"@{iheight}px";','height: ~"@{iwidth}px";',"}","100%{","left: 50%;","top: 50%;","opacity: 1;","overflow: hidden;",'margin-left: ~"@{height_2}px";','margin-top: ~"@{width_2}px";','width: ~"@{height}px";','height: ~"@{width}px";',"}","}","@-o-keyframes @bounceInCls{","0%{","left: 50%;","top: 50%;","opacity: 0.5;","overflow: hidden;",'margin-left: ~"@{iheight_8}px";','margin-top: ~"@{iwidth_8}px";','width: ~"@{iheight4}px";','height: ~"@{iwidth4}px";',"}","50%{","left: 50%;","top: 50%;","opacity: 0.7;","overflow: hidden;",'margin-left: ~"@{iheight_2}px";','margin-top: ~"@{iwidth_2}px";','width: ~"@{iheight}px";','height: ~"@{iwidth}px";',"}","100%{","left: 50%;","top: 50%;","opacity: 1;","overflow: hidden;",'margin-left: ~"@{height_2}px";','margin-top: ~"@{width_2}px";','width: ~"@{height}px";','height: ~"@{width}px";',"}","}","@-ms-keyframes @bounceInCls{","0%{","left: 50%;","top: 50%;","opacity: 0.5;","overflow: hidden;",'margin-left: ~"@{iheight_8}px";','margin-top: ~"@{iwidth_8}px";','width: ~"@{iheight4}px";','height: ~"@{iwidth4}px";',"}","50%{","left: 50%;","top: 50%;","opacity: 0.7;","overflow: hidden;",'margin-left: ~"@{iheight_2}px";','margin-top: ~"@{iwidth_2}px";','width: ~"@{iheight}px";','height: ~"@{iwidth}px";',"}","100%{","left: 50%;","top: 50%;","opacity: 1;","overflow: hidden;",'margin-left: ~"@{height_2}px";','margin-top: ~"@{width_2}px";','width: ~"@{height}px";','height: ~"@{width}px";',"}","}","@-webkit-keyframes @bounceOutCls{","0%{","left: 50%;","top: 50%;","overflow: hidden;","opacity: 1;",'margin-left: ~"@{height_2}px";','margin-top: ~"@{width_2}px";','width: ~"@{height}px";','height: ~"@{width}px";',"}","100%{","left: 50%;","top: 50%;","width: 0px;","height: 0px;","overflow: hidden;","opacity: 0;","}","}","@-moz-keyframes @bounceOutCls{","0%{","left: 50%;","top: 50%;","overflow: hidden;","opacity: 1;",'margin-left: ~"@{height_2}px";','margin-top: ~"@{width_2}px";','width: ~"@{height}px";','height: ~"@{width}px";',"}","100%{","left: 50%;","top: 50%;","width: 0px;","height: 0px;","overflow: hidden;","opacity: 0;","}","}","@-o-keyframes @bounceOutCls{","0%{","left: 50%;","top: 50%;","overflow: hidden;","opacity: 1;",'margin-left: ~"@{height_2}px";','margin-top: ~"@{width_2}px";','width: ~"@{height}px";','height: ~"@{width}px";',"}","100%{","left: 50%;","top: 50%;","width: 0px;","height: 0px;","overflow: hidden;","opacity: 0;","}","}","@-ms-keyframes @bounceOutCls{","0%{","left: 50%;","top: 50%;","overflow: hidden;","opacity: 1;",'margin-left: ~"@{height_2}px";','margin-top: ~"@{width_2}px";','width: ~"@{height}px";','height: ~"@{width}px";',"}","100%{","left: 50%;","top: 50%;","width: 0px;","height: 0px;","overflow: hidden;","opacity: 0;","}","}"].join("")}),KISSY.add("srpbase/common/freeanim/test",function(){return'<style>#container{display: inline-block;width: 100%;height: 380px;background: #ff7362;text-align: center;}#container .wrap{display: inline-block;margin-top: 38px;}#topBar{display: inline-block;width: 285px;}#topBar li{text-align: left;}.menu-head{display: inline-block;width: 180px;height: 40px;line-height: 40px;font-family: Verdana;font-size: 18px;border: 2px #fff solid;color: #fff;text-align: center;cursor: pointer;position: relative;z-index: 1001;}.menu-lists{position: relative;width: 100%;text-align: center;font-family: Verdana;font-size: 18px;color: #fff;overflow: hidden;height: 0px;border: 2px #fff solid;display: none;z-index: 1000;height: 340px;margin-top: -2px;}.panel{display: inline-block;width: 100px;height: 40px;line-height: 40px;position: absolute;bottom: 95px;left: 50%;margin-left: -50px;}.topBar ul{list-style: none;}.topBar a{text-decoration: none;color: #fff;}#container .lists{display: inline-block;}#container .lists li{float: left;display: inline-block;width: 238px;height: 208px;border: 2px #fff solid;position: relative;overflow: hidden;}.lists li .number{width: 100%;height: 26px;border-top: 2px solid #fff;position: absolute;bottom: -30px;}.lists li .number .content{display: inline-block;width: 100%;height: 26px;background: #fff;opacity: 0.4;}.lists li a{text-decoration: none;display: block;width: 100%;height: 100%;position: relative;overflow: hidden;color: #fff;}.lists li a span{width: 100px;height: 50px;line-height: 50px;position: absolute;top: 50%;margin-top: -25px;left: 50%;margin-left: -50px;font-family: Verdana;font-size: 24px;}#container .container-wrap{position: relative;display: inline-block;width: 465px;height: 285px;margin-top: 42px;background: #ffa200;}#container .dialog-wrap{position: relative;display: inline-block;width: 280px;height: 280px;/*border: 2px #fff solid;*/}#container .container-wrap .button{position: absolute;top: 50%;left: 50%;margin-left: -70px;margin-top: -15px;width: 140px;height: 30px;line-height: 30px;border: 2px #fff solid;font-family: Verdana;font-size: 12px;color: #fff;cursor: pointer;z-index: 9999;}#container .container-wrap .button:hover{background: rgb(255,194,89);}#container .wrap-line{position: relative;clear: both;width: 550px;height: 4px;border: 2px solid #fff;}#container #lists{position: relative;display: inline-block;list-style: none;}#container #lists li{width: 70px;height: 20px;line-height: 20px;padding: 10px 30px;color: #fff;font-family: Verdana;font-size: 24px;float: left;border-top:2px #fff solid;cursor: pointer;}#container #lists .item1,#container #lists .item2{border-left: 2px #fff solid;}#container #lists li.item3{border-left: 2px #fff solid;border-right: 2px #fff solid;}#container #lists li.on{color: #84d48d;background: #fff;}</style><div id="container"><div class="wrap"><div id="topBar"><ul class="top-menu"><li class="msg"><div class="menu-head"><a href="#">\u8d85\u94fe\u63a5</a></div><div class="menu-lists"><div class="panel">Content</div></div></li></ul></div></div><hr/><div class="wrap"><ul class="lists"><li class="item"><a href="#"><span>images</span><div class="number" style="bottom: -30px;"><div class="content"></div></div></a></li></ul></div><hr/><div class="wrap" style="background: #84d48d; width: 100%;padding: 50px"><ul id="lists"><li class="item item1">TAB1</li><li class="item item2" style="background: red">TAB2</li><li class="item item3">TAB3</li><div class="wrap-line"></div></ul></div><hr/><div class="container-wrap"><div class="button">\u663e\u793a</div><div class="test-content">content</div><div class="dialog-wrap"></div></div></div>{{#initialize}}<script>KISSY.use("srpbase/common/freeanim/index", function(S, FreeAnim){new FreeAnim({plugins: [{effect: "dropdown",eventType: "touch",el:S.one("#container"),trigger:S.one(".msg"),box:S.one(".menu-lists"),bound: {height: "auto"}},{effect: "bubble",eventType: "touch",el:S.one("#container"),trigger:S.one(".item"),box:S.one(".number")},{effect: "pop",eventType: "click",el: S.one("#container"),triggerCls:".container-wrap .button",boxCls:".dialog-wrap",bound: {height: "auto",width: "auto"},title: "test",content: ".test-content"},{effect: "flow",eventType: "touch",el:S.one("#lists"),trigger:S.one("#lists"),boxCls: ".wrap-line",selectedIndex: 2,itemCls: ".item",style: {"default": {color: "#fff",bgColor: "#84d48d"},"active": {color: "#84d48d",bgColor: "#fff"}},lineWidth: 4}]});});</script>{{/initialize}}'}),KISSY.add("srpbase/common/freepopup/base/freebase",function(a,b,c){function d(){d.superclass.constructor.apply(this,arguments)}var e=a.require("base"),f=a.require("dom"),g=window.document;return d.ATTRS={preUkey:{},hiddenDelay:{value:200},loadDelay:{value:300}},a.extend(d,e,{popups:{},active:!1,ukey:void 0,theCb:null,_hiddenTimer:void 0,_loadTimer:void 0,cssId:"J_style_gallery",addStyleSheet:function(a){var b=this.cssId,c=g.getElementById(b);c||(c=f.create("<style>",{id:b},g)),f.get("head",g).appendChild(c),c.styleSheet?(a=c.styleSheet.cssText+a,c.styleSheet.cssText=a):c.appendChild(g.createTextNode(a))},fetchAll:function(b,d){var e=this,f=e.get("loadDelay"),g=e._loadTimer;g&&(g.cancel(),g=void 0),e._loadTimer=g=a.later(function(){g.cancel(),g=void 0,e.isValid()&&c.fetchAll(b,function(a){d(a)})},f)},updateUkey:function(b){return a.guid(b)},enable:function(){this.active=!0},disable:function(){this.active=!1},isValid:function(){return this.active===!0||void 0===this.active},setAttrUkey:function(a,b){a.setAttribute("busy-key",b)},getAttrUkey:function(a){return a.getAttribute("busy-key")},initPopup:function(c,d){var e=this,f=e.getAttrUkey(c);a.mix(d,{trigger:c,eventType:"",rendered:function(a){e.setAttrUkey(a,f)}});var g=new b(d);return e.popups[f]=g,e.clearHiddenTimer(f,function(){g.show()}),g},clearHiddenTimer:function(a,b){var c=this;if(c.isValid()){var d=c._loadTimer;d&&(d.cancel(),d=void 0),c._matchUkey(a)||c.theCb&&(c.theCb(),c.theCb=null),c._clearHiddenTimer(),b&&b(),c.ukey=a}},setHiddenTimer:function(b,c){var d=this;c=c||d.get("hiddenDelay"),d.theCb=b,d._hiddenTimer=a.later(function(){d._clearHiddenTimer(),b(),d.theCb=null},c)},_matchUkey:function(a){return this.ukey===a?!0:!1},_clearHiddenTimer:function(){var a=this;a._hiddenTimer&&(a._hiddenTimer.cancel(),a._hiddenTimer=void 0)}}),d},{requires:["srpbase/common/freepopup/popup/index","srpbase/util/resolver/","core"]}),KISSY.add("srpbase/common/freepopup/base/freevisitor",function(a,b){function c(){c.superclass.constructor.apply(this,arguments)}var d=a.Event,e=window.document;return c.ATTRS={preUkey:{value:"free_"}},a.extend(c,b,{observers:[],bindTrigger:function(a,b,c){var f=this,g=f.get("preUkey"),h=f.popups;d.delegate(e,"mouseenter",a,function(a){var c=a.currentTarget,d=f.getAttrUkey(c),e=h[d];if(f.enable(),!d){var i=f.updateUkey(g);f.setAttrUkey(c,i)}e?f.clearHiddenTimer(d,function(){e.relocate(),e.show()}):(d=d||i,b&&b.call(f,c,d))}),d.delegate(e,"mouseleave",a,function(a){var b=a.currentTarget;f.disable(),f.setHiddenTimer(function(){var a=f.getAttrUkey(b),d=h[a];d?d.hide():c&&c.call(f,b,a)})})},bindBox:function(a,b,c){var f=this,g=f.popups;d.delegate(e,"mouseenter",a,function(a){var c=a.currentTarget,d=f.getAttrUkey(c),e=g[d];f.enable(),f.clearHiddenTimer(d),!e&&b&&b.call(f,c,d)}),d.delegate(e,"mouseleave",a,function(a){var b=a.currentTarget;f.disable(),f.setHiddenTimer(function(){var a=f.getAttrUkey(b),d=g[a];d?d.hide():c&&c.call(f,b,a)})})},bindEvent:function(a,b,c){var f=this;d.delegate(e,b,a,function(a){var b=a.currentTarget;f.enable(),c&&c.call(f,b)})}}),a.augment(c,{attach:function(a){this.observers.push(a)},visite:function(){for(var a=this,b=a.observers,c=b.length;c--;){var d=b[c];d.visite(a)}}}),c},{requires:["srpbase/common/freepopup/base/freebase","core"]}),KISSY.add("srpbase/common/freepopup/iconrender/index",function(a,b){function c(){c.superclass.constructor.apply(this,arguments),this.initialize()}var d=a.require("node"),e=a.require("event"),f=".icon-datalink",g=".service-box",h=".icon-pit",i=".feature-icon-tgr",j=".feature-icon-refer",k={"icon-service-tianmao":"icon-service-tianmao-large","icon-service-lvxing":"icon-service-lvxing-large","icon-service-quanqiugou":"icon-service-quanqiugou-large"};
return c.ATTRS={el:{valueFn:function(){return a.one("body")},setter:function(b){return(b=a.one(b))?b:void a.one("body")}},sourceUrl:{},data:{},param:{},delay:{value:1e3},autoRender:{value:!1},autoAdapt:{value:!1},preUkey:{value:"icon_"}},a.augment(c,{visite:function(b){{var c=this;c.get("el")}b.bindTrigger(i,function(d,e){var f=a.one(d),g=f.prev();b.setAttrUkey(g[0],e),b.clearHiddenTimer(e,function(){g.show(),c._renderWrapper(g.prev())})},function(b){var d=a.one(b),e=d.prev();e.hide(),c._cancelWrapper(e.prev(),e)}),b.bindBox(j,!1,function(b){b=a.one(b),b.hide(),c._cancelWrapper(b.prev(),b)})}}),a.extend(c,b,{typeIcons:{},initialize:function(){var a=this;a._renderUI(),a._bindUI()},_renderUI:function(){var b=this,c=b.get("sourceUrl");if(c)a.getScript(c+"&t="+a.now(),function(a){b.set("data",a),b._syncOpts(),b._renderIcons()});else{{b.get("data")}b._syncOpts(),b._bufferLoad=a.buffer(function(){b._render||b._renderIcons()},b.get("delay"),b),b._bufferLoad()}},_bindUI:function(){var b=this,c=b.get("el");if(e.on(window,"scroll",function(){b._render=!1,b._bufferLoad()}),e.delegate(c,"mouseenter",h,function(){b._render||b._renderIcons()}),b.get("autoRender")){var d=b.get("preUkey");e.delegate(c,"mouseenter",i,function(c){var e=a.one(c.currentTarget),f=e.prev(),g=b.getAttrUkey(e[0]);b.enable(),g||(g=b.updateUkey(d),b.setAttrUkey(e[0],g),b.setAttrUkey(f[0],g)),b.clearHiddenTimer(g,function(){f.show(),b._renderWrapper(f.prev())})}),e.delegate(c,"mouseleave",i,function(c){var d=a.one(c.currentTarget),e=d.prev();b.disable(),b.setHiddenTimer(function(){e.hide(),b._cancelWrapper(e.prev(),e)})}),e.delegate(c,"mouseenter",j,function(a){var c=a.currentTarget,d=b.getAttrUkey(c);b.enable(),b.clearHiddenTimer(d)}),e.delegate(c,"mouseleave",j,function(c){var d=a.one(c.currentTarget);b.disable(),b.setHiddenTimer(function(){d.hide(),b._cancelWrapper(d.prev(),d)})})}},_renderIcons:function(){var a=this,b=a.get("el"),c=a.get("data"),e=a.get("param"),k=b.all(f);k&&(k.each(function(b){b.removeClass(f.slice(1));var k,l=b.one(g),m=b.attr("nid")||b.attr("id");l?(k=l.all(h),l.one(i)||(new d('<div class="'+j.slice(1)+'"><i class="arrow arrow-top"><s class="arrow arrow-top"></s></i></div>').appendTo(l),new d('<a href="javascript:;" class="'+i.slice(1)+'" style="display: none;"><span class="arrow arrow-bottom">\u66f4\u591a</span></a>').appendTo(l))):k=b.all(h);var n,o,p;k.each(function(b){b.removeClass(h),n=b[0].className,p=a._getIconOpt(n,c),p&&(o=a._renderIcon(p,a._getIconData(m,c,e),b.attr("_outerText")),o.insertAfter(b),b.remove())})}),a._render=!0)},_renderIcon:function(a,b,c){var e,f="javascript:;",g="_self",h=a.title||"",i=a.innerText||"",j=a["class"];return a.url&&(f=a.url.replace(/\{([^}]+)\}/g,function(a,c){return b[c]}),g="_blank"),c=c?i:"",e='<a href="'+f+'" title="'+h+'" target="'+g+'" trace="srpservice" traceNum="1"><span class="'+j+'">'+i+"</span>"+c+"</a>",new d(e)},_syncOpts:function(){var a,b=this.get("data"),c=this._isLargeCls(),d=b.data,e={};if(d){for(var f=d.length;f--;)a=d[f]["class"],d[f]["class"]=c&&k[a]?k[a]:a,e[a]=d[f];b.data=e,delete d,this.set("data",b)}},_isLargeCls:function(){this.get("param");return!1},_getIconOpt:function(a,b){var c=b.data;return c[a]},_getIconData:function(b,c,d){var e=c.dynamic;return a.merge(d,e[b])},_renderWrapper:function(a){function b(a){return a.offset().top>c}var c=a.offset().top+14,d=a.next(),e=a.last();if(e&&b(e))for(d.prepend(e);(e=a.last())&&b(e);)d.prepend(e)},_cancelWrapper:function(a,b){for(var c=b.children(),d=0,e=c.length-1;e>d;)a.append(c.item(d++))}}),c},{requires:["srpbase/common/freepopup/base/freebase","core"]}),KISSY.add("srpbase/common/freepopup/index",function(a,b,c,d,e,f,g,h,i){function j(){j.superclass.constructor.apply(this,arguments),this.initialize()}var k=a.require("base");return j.ATTRS={param:{},icondata:{},apiurl:{}},a.extend(j,k,{initialize:function(){var a=this,j=a.get("apiurl"),k=a.get("param"),l=a.get("icondata"),m=new b({hiddenDelay:300,loadDelay:200}),n=new c({data:l,param:k}),o=new h({sourceUrl:j}),p=new f({sourceUrl:j}),q=new g,r=new d,s=new e,t=new i;m.attach(n),m.attach(o),m.attach(p),m.attach(q),m.attach(s),m.attach(r),m.attach(t),m.visite()}}),j},{requires:["srpbase/common/freepopup/base/freevisitor","srpbase/common/freepopup/iconrender/index","srpbase/common/freepopup/productinfo/index","srpbase/common/freepopup/promotion/index","srpbase/common/freepopup/shopinfo/index","srpbase/common/freepopup/shopcard/index","srpbase/common/freepopup/shoprate/index","srpbase/common/freepopup/producti2i/index","core"]}),KISSY.add("srpbase/common/freepopup/popup/index",function(a){function b(a,b){return a.replace(/\{([^}]+)\}/g,function(a,c){return b[c]})}function c(b,c,d){var e=b.points.join("-"),f=b.offset[0],g=b.offset[1],h={top:"",left:""};switch(e){case"tr-tl":h.top=c.top+g,h.left=c.left+f+c.width;break;case"tr-bl":h.top=c.top+g-d.height+c.height+10,h.left=c.left+f+c.width;break;case"tl-tr":h.top=c.top+g,h.left=c.left+f-d.width;break;case"tl-br":h.top=c.top+g-d.height+c.height+10,h.left=c.left+f-d.width;break;case"bb-tt":h.top=c.top+g+c.height,h.left=c.left+f+c.width/2-d.width/2;break;case"tt-bb":h.top=c.top+g-d.height+10,h.left=c.left+f+c.width/2-d.width/2;break;case"br-tt":h.top=c.top+g+c.height,h.left=c.left+f-(d.width-c.width-20);break;case"bl-tt":h.top=c.top+g+c.height,h.left=c.left+f-20;break;case"tr-bb":h.top=c.top+g-d.height,h.left=c.left+f+c.width-(c.width+20);break;case"tl-bb":h.top=c.top+g-d.height,h.left=c.left+f-(d.width-c.width-20)}return a.merge(d,h)}function d(b,d,e){var f=a.merge(i.offset(e),{width:i.outerWidth(e),height:i.outerHeight(e)}),g=a.merge(i.offset(d),{width:i.outerWidth(d),height:i.outerHeight(d)});return f=c(b,g,f),i.css(e,f),f}function e(b,c,d){var e=b.points.join("-"),f={left:"",top:"",bottom:"",right:""},g="";switch(e){case"tr-tl":f.top=0,f.left=-14,g=".arrow-left";break;case"tr-bl":f.top=d.height-14-20,f.left=-14,g=".arrow-left";break;case"tl-tr":f.top=0,f.right=0,g=".arrow-right";break;case"tl-br":f.top=d.height-14-20,f.right=0,g=".arrow-right";break;case"bb-tt":f.top=-14,f.left=d.width/2-10,g=".arrow-top";break;case"tt-bb":f.bottom=0,f.left=d.width/2-10,g=".arrow-bottom";break;case"br-tt":f.top=-14,f.left=d.width-20-14,g=".arrow-top";break;case"bl-tt":f.top=-14,f.left=20,g=".arrow-top";break;case"tr-bb":f.left=20,f.bottom=0,g=".arrow-bottom";break;case"tl-bb":f.right=34,f.bottom=0,g=".arrow-bottom"}var h=i.query(".arrow",c);a.each(h,function(a){i.addClass(a,g)}),i.css(c,f)}function f(){f.superclass.constructor.apply(this,arguments),this.initialize()}var g=a.Base,h=a.Event,i=a.DOM,j=window.document,k=j.body,l=".popup-arrow",m=".popup-tgr",n=".popup-close",o="popup-stamp",p='<a href="javascript:;" class="popup-close icon-todo-cancel"></a>',q='<div class="popup-box {className}" id="{id}"><div class="popup-body"><div class="popup-arrow"><i class="arrow"><s class="arrow"></s></i></div>{innerHTML}</div></div>';return f.ATTRS={el:{setter:function(b){return a.isString(b)?(b=i.create(b))?(i.append(b,k),b):void 0:b}},trigger:{},zIndex:{},eventType:{value:"mouse"},className:{value:""},innerHTML:{value:""},align:{value:{points:["tr","tl"],offset:[0,0]},setter:function(b){return a.merge(this.get("align"),b)}},closeable:{value:!1}},a.augment(f,{show:function(){i.show(this.get("el"))},hide:function(){i.hide(this.get("el"))},relocate:function(){var a=this,b=a.get("el"),c=a.get("trigger"),d=a.get("align");c&&a._relocateEl(d,c,b)},relocateArrow:function(){var a,b=this,c=b.get("el"),d=i.get(l,c),e=b.get("align");i.css(c,{display:"block",visibility:"hidden"}),a={width:i.width(c),height:i.height(c)},b._relocateArrow(e,d,a),i.css(c,{display:"none",visibility:"visible"})},destroy:function(){i.remove(this.get("el"))}}),a.extend(f,g,{initialize:function(){var a=this;a._synConfig(),a._renderUI(),a._bindUI()},_synConfig:function(){var a,c,d=this,e=d.get("el"),f=d.get("trigger"),g=d.get("className"),h=d.get("innerHTML"),j=d.get("closeable"),l=d.get("zIndex");if(j&&(h+=p),e?c=e.attr("id")||d._getStamp():(c=d._getStamp(),a={id:c,className:g,innerHTML:h},e=i.create(b(q,a)),l&&i.css(e,{zIndex:l}),i.append(e,k),d.set("el",e)),d.get("rendered")){var n=d.get("rendered");n(e)}f&&(i.addClass(f,m.slice(1)),f.setAttribute(o,c))},_getStamp:function(){return a.guid("popup-")},_renderUI:function(){var a=this,b=a.get("el"),c=a.get("trigger"),d=a.get("align");if(c){var e=a._relocateEl(d,c,b),f=i.get(l,b);a._relocateArrow(d,f,e)}},_bindUI:function(){var a=this,b=a.get("eventType"),c=a.get("el"),d=i.get(n,c),e=a.get("trigger");e&&b&&("mouse"===b?(h.on(e,"mouseenter",function(){a.fire("beforeShow",{trigger:e,el:c,show:!1})!==!1&&(a._clearHiddenTimer(),i.show(c))}),h.on(e,"mouseleave",function(){a.fire("beforeHide",{trigger:e,el:c})!==!1&&a._setHiddenTimer(c)}),h.on(c,"mouseenter",function(){a.fire("beforeShow",{trigger:e,el:c,show:!0})!==!1&&a._clearHiddenTimer()}),h.on(c,"mouseleave",function(){a.fire("beforeHide",{trigger:e,el:c})!==!1&&a._setHiddenTimer(c)})):h.on(e,"click",function(){a.fire("beforeShow",{trigger:e,el:c,show:!1})!==!1&&i.show(c)}),d&&h.on(d,"click",function(){a.fire("close",{trigger:e,el:c,show:!1})!==!1&&i.hide(c)}))},_clearHiddenTimer:function(){var a=this;a._hiddenTimer&&(a._hiddenTimer.cancel(),a._hiddenTimer=void 0)},_setHiddenTimer:function(b){var c=this;c._hiddenTimer=a.later(function(){c._hiddenTimer.cancel(),c._hiddenTimer=void 0,i.hide(b)})},_relocateEl:function(a,b,c){i.css(c,{display:"block",visibility:"hidden"});var e=d(a,b,c);return i.css(c,{display:"none",visibility:"visible"}),e},_relocateArrow:function(a,b,c){e(a,b,c)}}),f},{requires:["core"]}),KISSY.add("srpbase/common/freepopup/producti2i/index",function(a,b){function c(){c.superclass.constructor.apply(this,arguments)}var d=a.require("event"),e=".feature-producti2i-tgr",f=".feature-producti2i";return c.ATTR={autoRender:{value:!1},preUkey:{value:"producti2i_"}},a.augment(c,{visite:function(b){{var c=this;c.get("el")}b.bindTrigger(e,function(d,e){var g=a.one(d),h=g.one(f);b.setAttrUkey(h[0],e),b.clearHiddenTimer(e,function(){c.showEntry(h)})},function(b){var d=a.one(b),e=d.one(f);c.hideEntry(e)})},_bufferFn:null,showEntry:function(b){var c=this._bufferFn=a.buffer(function(){b.one(".i2i-entry-box").fadeIn(.5)},500);c()},hideEntry:function(a){var b=this._bufferFn;b&&b.stop(),a.one(".i2i-entry-box").hide()}}),a.extend(c,b,{initialize:function(){var a=this;a.get("autoRender")&&a._renderUI()},_renderUI:function(){var b=this,c=b.get("el"),g=b.get("preUkey");d.delegate(c,"mouseenter",e,function(c){var d=a.one(c.currentTarget),e=d.one(f),h=b.getAttrUkey(d[0]);b.enable(),h||(h=b.updateUkey(g),b.setAttrUkey(d[0],h),b.setAttrUkey(e[0],h)),b.clearHiddenTimer(h,function(){b.showEntry(e)})}),d.delegate(c,"mouseleave",e,function(c){var d=a.one(c.currentTarget),e=d.one(f);b.disable(),b.setHiddenTimer(function(){b.hideEntry(e)})}),d.delegate(c,"mouseenter",f,function(a){var c=a.currentTarget,d=b.getAttrUkey(c);b.enable(),b.clearHiddenTimer(d)}),d.delegate(c,"mouseleave",f,function(c){var d=a.one(c.currentTarget);b.disable(),b.setHiddenTimer(function(){b.hideEntry(d)})})}}),c},{requires:["srpbase/common/freepopup/base/freebase","core"]}),KISSY.add("srpbase/common/freepopup/productinfo/index",function(a,b){function c(){c.superclass.constructor.apply(this,arguments)}var d=a.require("event"),e=".feature-pdi-tgr",f=".feature-pdi";return c.ATTR={autoRender:{value:!1},preUkey:{value:"pdi_"}},a.augment(c,{visite:function(b){var c=(this.get("el"),window.innerWidth||document.documentElement.clientWidth);b.bindTrigger(e,function(d,e){var g=a.one(d),h=g.one(f);b.setAttrUkey(h[0],e),b.clearHiddenTimer(e,function(){g.offset().left>c/2&&(h.hasClass("attr-popup-right")||(h.addClass("attr-popup-right"),h.all(".arrow").replaceClass("arrow-left","arrow-right"))),h.show()})},function(b){var c=a.one(b),d=c.one(f);d.hide()}),b.bindBox(f,!1,function(b){a.one(b).hide()})}}),a.extend(c,b,{initialize:function(){var a=this;a.get("autoRender")&&a._renderUI()},_renderUI:function(){var b=this,c=b.get("el"),g=b.get("preUkey"),h=window.innerWidth||document.documentElement.clientWidth;d.delegate(c,"mouseenter",e,function(c){var d=a.one(c.currentTarget),e=d.one(f),i=b.getAttrUkey(d[0]);b.enable(),i||(i=b.updateUkey(g),b.setAttrUkey(d[0],i),b.setAttrUkey(e[0],i)),b.clearHiddenTimer(i,function(){d.offset().left>h/2&&(e.hasClass("attr-popup-right")||(e.addClass("attr-popup-right"),e.all(".arrow").replaceClass("arrow-left","arrow-right"))),e.show()})}),d.delegate(c,"mouseleave",e,function(c){var d=a.one(c.currentTarget),e=d.one(f);b.disable(),b.setHiddenTimer(function(){e.hide()})}),d.delegate(c,"mouseenter",f,function(a){var c=a.currentTarget,d=b.getAttrUkey(c);b.enable(),b.clearHiddenTimer(d)}),d.delegate(c,"mouseleave",f,function(c){var d=a.one(c.currentTarget);b.disable(),b.setHiddenTimer(function(){d.hide()})})}}),c},{requires:["srpbase/common/freepopup/base/freebase","core"]}),KISSY.add("srpbase/common/freepopup/promotion/index",function(a,b,c){function d(){d.superclass.constructor.apply(this,arguments),this.initialize()}var e=a.require("event"),f=window.document,g="http://tbskip.taobao.com/limit_promotion_item.htm?from=search",h=".feature-prom-tgr",i=".feature-prom-popup",j=".feature-prom",k="data-auctionid",l="data-userid",m="data-vip",n={limitPromotion:'<ul class="'+j.slice(1)+'"><li><span class="icon-busy-discount">\u9650\u65f6\u6253\u6298</span><span>{{time}}</span></li><li >{{rate}} \u6298 {{price}} \u5143</li></ul>',vip:'<div class="feature-prom"><p><span class="icon-busy-vip">VIP</span></p><ul>{{#list}}<li><span>{{name}}\uff1a</span> <span>{{rate}}</span> \u6298 <span>{{price}}</span> \u5143</li>{{/list}}</ul></div>'};return d.ATTRS={autoRender:{value:!1},preUkey:{value:"prom_"}},a.augment(d,{visite:function(a){var c=this,d=c._getLimitSync,e=c._getVipSync;a.bindTrigger(h,function(c){var f=c.getAttribute(k),g=c.getAttribute(l),h=c.getAttribute(m);if(f){var j=d("LimitPromotion_"+f+"_"+g,"auctionId="+f+"&userId="+g);a.fetchAll(j,function(d){var e=new b(n.limitPromotion).render(d);a.initPopup(c,{align:{points:["bb","tt"],offset:[0,0]},className:i.slice(1),innerHTML:e})})}else if(h){var o=new b(n.limitPromotion).render(e(h));a.initPopup(c,{align:{points:["bb","tt"],offset:[0,0]},className:i.slice(1),innerHTML:o})}},!1),a.bindBox(i,!1,!1)}}),a.extend(d,c,{initialize:function(){var a=this;a.get("autoRender")&&(a._synConfig(),a._renderUI(),a._bindUI())},_synConfig:function(){},_getLimitSync:function(a,b){var c={name:a,options:{url:g+"&"+b,type:"getScript",param:"",parse:function(a,b){var c=b,a=window.TB[c];a=a.split(";");var d={time:a[0],rate:a[1],price:a[2]};return d},promise:a}};return c},_getVipSync:function(b){if(b=a.trim(b),""!==b){for(var c,d=["V1-V3\u4f1a\u5458\u4ef7","V4-V5\u4f1a\u5458\u4ef7","V6\u4f1a\u5458\u4ef7"],e=b.split(";"),f=[],g=e.length;g--;)d[g]&&(c=e[g],f.push({name:d[g],rate:c[0],price:c[1]}));return{list:f}}},_bindUI:function(){var a=this,c=(a.get("el"),a.get("preUkey")),d=a.popups;e.delegate(f,"mouseenter",h,function(e){var f=e.currentTarget,g=a.getAttrUkey(f),h=d[g],j=f.getAttribute(k),o=f.getAttribute(l),p=f.getAttribute(m);if(a.enable(),h)return void a.clearHiddenTimer(g,function(){h.relocate(),h.show()});if(g=a.updateUkey(c),a.setAttrUkey(f,g),j){var q=a._getLimitSync("LimitPromotion_"+j+"_"+o,"auctionId="+j+"&userId="+o);a.fetchAll(q,function(c){g=a.getAttrUkey(f);var e=new b(n.limitPromotion).render(c);h=a.initPopup(f,{align:{points:["bb","tt"],offset:[0,0]},className:i.slice(1),innerHTML:e}),a.clearHiddenTimer(g,function(){h.show()}),d[g]=d})}else if(p){var r=new b(n.limitPromotion).render(a._getVipSync(p));h=a.initPopup(f,{align:{points:["bb","tt"],offset:[0,0]},className:i.slice(1),innerHTML:r}),a.clearHiddenTimer(g,function(){h.show()}),d[g]=h}}),e.delegate(f,"mouseleave",h,function(b){var c=b.currentTarget;a.disable(),a.setHiddenTimer(function(){var b=a.getAttrUkey(c);d[b]&&d[b].hide()})}),e.delegate(f,"mouseenter",i,function(b){var c=b.currentTarget,d=a.getAttrUkey(c);a.enable(),a.clearHiddenTimer(d)}),e.delegate(f,"mouseleave",i,function(b){var c=b.currentTarget;a.disable(),a.setHiddenTimer(function(){var b=a.getAttrUkey(c),e=d[b];e&&e.hide()})})}}),d},{requires:["xtemplate","srpbase/common/freepopup/base/freebase","core"]}),KISSY.add("srpbase/common/freepopup/shopcard/index",function(a,b,c,d){function e(a){var b=a%5,c=["icon-supple-level-xin","icon-supple-level-zuan","icon-supple-level-guan","icon-supple-level-jinguan"],d=Math.floor(a/5),e=[];for(0==b&&(b=5,d--);b--;)e.push(c[d]);return e}function f(a){var b=["lessthan","equalthan","morethan"],c=["\u4f4e\u4e8e","\u6301\u5e73","\u9ad8\u4e8e"];return{count:(a[0]/100).toFixed(2),"class":b[a[1]+1],text:c[a[1]+1],rate:a[2]?(a[2]/100).toFixed(2)+"%":"--"}}function g(){g.superclass.constructor.apply(this,arguments),this.initialize()}var h=a.require("event"),i=window.document,j="data-param",k=".feature-dsc",l=".feature-dsc-box",m=".feature-dsc-popup",n=".feature-dsc-tgr",o=['<div class="'+k.slice(1)+'">',"{{#hasHeader}}",'<div class="hd clearfix">',"{{^useBox}}","{{^isTmall}}",'<div class="shop-credit">','<a target="_blank" href="http://rate.taobao.com/user-rate-{{safeUid}}.htm  ">',"{{#grade}}",'<span class="{{.}}"></span>',"{{/grade}}","</a>","</div>",'<div class="shop-comm">',"<span>\u597d\u8bc4\u7387\uff1a<em>{{favorableRate}}</em></span>","</div>","{{/isTmall}}","{{#isTmall}}",'<div class="shop-credit"><span class="icon-service-tianmao-large">\u5929\u732b</span></div>',"{{/isTmall}}","{{/useBox}}","{{{useBox}}}","</div>","{{/hasHeader}}",'<div class="bd {{^hasHeader}}bd-simple{{/hasHeader}}">','<ul class="shop-avg">',"{{#descriptionCompared}}",'<li  class="{{class}}">','<div class="avg-desc">\u63cf\u8ff0\u76f8\u7b26\uff1a<strong>{{count}}</strong></div>',"<em>{{text}}</em>{{rate}}","</li>","{{/descriptionCompared}}","{{#attitudeCompared}}",'<li class="{{class}}">','<div class="avg-desc">\u670d\u52a1\u6001\u5ea6\uff1a<strong>{{count}}</strong></div>',"<em>{{text}}</em>{{rate}}","</li>","{{/attitudeCompared}}","{{#deliveryCompared}}",'<li class="{{class}}">','<div class="avg-desc">\u53d1\u8d27\u901f\u5ea6\uff1a<strong>{{count}}</strong></div>',"<em>{{text}}</em>{{rate}}","</li>","{{/deliveryCompared}}","</ul>","</div>"].join("");return g.ATTRS={autoRender:{value:!1},preUkey:{value:"shop_"}},a.augment(g,{visite:function(c){var e=this;c.bindTrigger(n,function(f){var g=f.getAttribute(j),h=d.parse(new Function("return "+g)(),e._getPromise(),!0),i=a.one(l,f);h.useBox=i&&i.html();var k=new b(o).render(h);c.initPopup(f,{align:{points:["bl","tt"],offset:[4,0]},className:m.slice(1),innerHTML:k})},!1),c.bindBox(m,!1,!1)}}),a.extend(g,c,{initialize:function(){var a=this;a.get("autoRender")&&a._bindUI()},_bindUI:function(){var c=this,e=c.popups,f=c.get("preUkey");h.delegate(i,"mouseenter",n,function(g){var h=g.currentTarget,i=c.getAttrUkey(h),k=e[i];if(c.enable(),k)return void c.clearHiddenTimer(i,function(){k.relocate(),k.show()});i=c.updateUkey(f),c.setAttrUkey(h,i);var n=h.getAttribute(j),p=d.parse(new Function("return "+n)(),c._getPromise(),!0);p.useBox=a.one(l,h).html();var q=new b(o).render(p);c.initPopup(h,{align:{points:["bl","tt"],offset:[4,0]},className:m.slice(1),innerHTML:q})}),h.delegate(i,"mouseleave",n,function(a){var b=a.currentTarget;c.disable(),c.setHiddenTimer(function(){var a=c.getAttrUkey(b),d=e[a];d&&d.hide()})}),h.delegate(i,"mouseenter",m,function(a){var b=a.currentTarget,d=c.getAttrUkey(b);c.enable(),c.clearHiddenTimer(d)}),h.delegate(i,"mouseleave",m,function(a){var b=a.currentTarget;c.disable(),c.setHiddenTimer(function(){var a=c.getAttrUkey(b),d=e[a];d&&d.hide()})})},_getPromise:function(){var a={isTmall:!0,hasHeader:function(a,b,c){return c.isTmall||void 0!==c.totalRate?!0:void 0},"sellerCredit:grade":function(a){return a&&e(a)},"totalRate:favorableRate":function(a){return a&&(a/100).toFixed(2)+"%"},"description:descriptionCompared":function(a){return f(a)},"service:attitudeCompared":function(a){return f(a)},"delivery:deliveryCompared":function(a){return f(a)},safeUid:!0};return a}}),g},{requires:["xtemplate","srpbase/common/freepopup/base/freebase","srpbase/util/resolver/","core"]}),KISSY.add("srpbase/common/freepopup/shopinfo/index",function(a,b,c,d){function e(){e.superclass.constructor.apply(this,arguments),this.initialize()}var f=a.require("event"),g=window.document,h="data-param",i=".feature-dsi",j=".feature-dsi-popup",k=".feature-dsi-tgr";return e.ATTRS={sourceUrl:{},autoRender:{value:!1},preUkey:{value:"shop_"}},a.augment(e,{visite:function(a){var d,e=this,f=e.get("sourceUrl");f&&(d=e._getSync(),a.bindTrigger(k,function(e){var g=e.getAttribute(h);d.options.url=f+"&"+g,a.fetchAll(d,function(d){d.contClass=i.slice(1);var f=new b(c).render(d);a.initPopup(e,{align:{points:["bl","tt"],offset:[4,0]},className:j.slice(1),innerHTML:f})})},!1),a.bindBox(j,!1,!1))}}),a.extend(e,d,{initialize:function(){var a=this;a.get("autoRender")&&a._bindUI()},_bindUI:function(){var a,d=this,e=d.popups,l=d.get("preUkey"),m=d.get("sourceUrl");m&&(a=d._getSync(),f.delegate(g,"mouseenter",k,function(f){var g=f.currentTarget,k=d.getAttrUkey(g),n=e[k];if(d.enable(),n)return void d.clearHiddenTimer(k,function(){n.relocate(),n.show()});k=d.updateUkey(l),d.setAttrUkey(g,k);var o=g.getAttribute(h);a.options.url=m+"&"+o,d.fetchAll(a,function(a){k=d.getAttrUkey(g),a.contClass=i.slice(1);var e=new b(c).render(a);d.initPopup(g,{align:{points:["bl","tt"],offset:[0,0]},className:j.slice(1),innerHTML:e})})}),f.delegate(g,"mouseleave",k,function(a){var b=a.currentTarget;d.disable(),d.setHiddenTimer(function(){var a=d.getAttrUkey(b),c=e[a];c&&c.hide()},20)}),f.delegate(g,"mouseenter",j,function(a){var b=a.currentTarget,c=d.getAttrUkey(b);d.enable(),d.clearHiddenTimer(c)}),f.delegate(g,"mouseleave",j,function(a){var b=a.currentTarget;d.disable(),d.setHiddenTimer(function(){var a=d.getAttrUkey(b),c=e[a];c&&c.hide()},200)}))},_getSync:function(){var a={name:"dshopinfo",options:{param:"",type:"get",dataType:"json",parse:function(a){return a.encodedNick=decodeURI(a.encodedNick),1!=a.isTmall&&(a.isTmall=!1),a}}};return a}}),e},{requires:["xtemplate","./tpl","srpbase/common/freepopup/base/freebase","core"]}),KISSY.add("srpbase/common/freepopup/shopinfo/tpl",function(){return'<div class="{{contClass}}"><div class="hd clearfix">{{^isTmall}}<div class="shop-credit"><a target="_blank" href="http://rate.taobao.com/user-rate-{{encryptedUserId}}.htm">{{#levelClasses}}<span class="{{levelClass}}"></span>{{/levelClasses}}</a></div><div class="shop-comm"><span>\u597d\u8bc4\u7387\uff1a<em>{{favorableRate}}</em></span></div>{{/isTmall}}{{#isTmall}}<div class="shop-credit"><span class="icon-service-tianmao-large">\u5929\u732b</span></div>{{/isTmall}}{{#openYearsText}}<div class="years g-clearfix"><a target="_blank" href="http://rate.taobao.com/user-rate-{{encryptedUserId}}.htm"><span class="icon icon-supple-shop"></span><span class="text">{{openYearsText}}</span></a></div>{{/openYearsText}}</div><div class="bd"><ul class="shop-avg">{{#descriptionCompared}}<li class="{{class}}"><div class="avg-desc">\u63cf\u8ff0\u76f8\u7b26\uff1a<strong>{{matchDescription}}</strong></div><em>{{text}}</em><span class="percent">{{rate}}</span></li>{{/descriptionCompared}}{{#attitudeCompared}}<li class="{{class}}"><div class="avg-desc">\u670d\u52a1\u6001\u5ea6\uff1a<strong>{{serviceAttitude}}</strong></div><em>{{text}}</em><span class="percent">{{rate}}</span></li>{{/attitudeCompared}}{{#deliveryCompared}}<li class="{{class}}"><div class="avg-desc">\u53d1\u8d27\u901f\u5ea6\uff1a<strong>{{deliverySpeed}}</strong></div><em>{{text}}</em><span class="percent">{{rate}}</span></li>{{/deliveryCompared}}</ul></div></div>'}),KISSY.add("srpbase/common/freepopup/shoprate/index",function(a,b){function c(a,b){return a.replace(/\{([^}]+)\}/g,function(a,c){return b[c]})}function d(){d.superclass.constructor.apply(this,arguments),this.initialize()}var e=a.require("event"),f=a.require("dom"),g=window.document,h="data-param",i=".feature-dsr",j=".feature-dsr-tgr",k=".feature-dsr-num",l=".feature-dsr-list",m=['<ul class="feature-dsr-list">','<li><span class="{mgcls}than">\u5982\u5b9e\u63cf\u8ff0:{mas}</span></li>','<li><span class="{sgcls}than">\u670d\u52a1\u6001\u5ea6:{sas}</span></li>','<li><span class="{cgcls}than">\u53d1\u8d27\u901f\u5ea6:{cas}</span></li>',"</ul>"].join("");return d.ATTRS={sourceUrl:{},autoRender:{value:!1},preUkey:{value:"dsr_"}},a.augment(d,{visite:function(a){var b,d=this,e=d.get("sourceUrl");e&&(b=d._getSync(),a.bindTrigger(j,function(d,g){var j=f.parent(d,i),n=f.get(l,j);if(n)return void a.clearHiddenTimer(g,function(){f.show(n)});var o=j.getAttribute(h);b.options.url=e+"&"+o,b.options.promise.mas=function(){return f.get(k,j).innerHTML},a.fetchAll(b,function(b){var e=f.create(c(m,b));f.append(e,j),g=a.getAttrUkey(d),a.setAttrUkey(e,g),a.clearHiddenTimer(g,function(){f.show(e)})})},function(a){var b=f.parent(a,i),c=f.get(l,b);c&&f.hide(c)}),a.bindBox(l,!1,function(a){f.hide(a)}))}}),a.extend(d,b,{initialize:function(){var a=this;a.get("autoRender")&&a._bindUI()},_bindUI:function(){var a,b=this,d=b.get("preUkey"),n=b.get("sourceUrl");n&&(a=b._getSync(),e.delegate(g,"mouseenter",j,function(e){var g=e.currentTarget,j=f.parent(g,i),o=f.get(l,j),p=b.getAttrUkey(g);if(b.enable(),p)return void b.clearHiddenTimer(p,function(){f.show(o)});p=b.updateUkey(d),b.setAttrUkey(g,p);var q=j.getAttribute(h);a.options.url=n+"&"+q,a.options.promise.mas=function(){return f.get(k,j).innerHTML},b.fetchAll(a,function(a){var d=f.create(c(m,a));f.append(d,j),p=b.getAttrUkey(g),b.setAttrUkey(d,p),b.clearHiddenTimer(p,function(){f.show(d)})})}),e.delegate(g,"mouseleave",j,function(a){var c=a.currentTarget,d=f.parent(c,i);b.disable(),b.setHiddenTimer(function(){var a=f.get(l,d);a&&f.hide(a)})}),e.delegate(g,"mouseenter",l,function(a){var c=a.currentTarget,d=b.getAttrUkey(c);b.enable(),b.clearHiddenTimer(d)}),e.delegate(g,"mouseleave",l,function(a){var c=a.currentTarget;b.disable(),b.setHiddenTimer(function(){f.hide(c)})}))},_getSync:function(){var a={name:"dshoprate",options:{param:"",type:"get",dataType:"json",parse:!1,promise:{"mg:mgcls":function(a){return a.indexOf("-")>-1?"less":"more"},"sg:sgcls":function(a){return a.indexOf("-")>-1?"less":"more"},"cg:cgcls":function(a){return a.indexOf("-")>-1?"less":"more"},sas:!0,cas:!0}}};return a}}),d},{requires:["srpbase/common/freepopup/base/freebase","core"]}),KISSY.add("srpbase/common/lazy/index",function(a,b,c,d,e){function f(c,d,e){c.style.display=t,c.className="";var f=b.create("<div>");c.parentNode.insertBefore(f,c);var g=c.value;if(a.isFunction(e)){var h=e({type:"textarea",elem:c,value:g});h&&(g=h)}b.html(f,g,d)}function g(b,c){var d,e;return(d=b.id)||(d=b.id=a.guid("ks-lazyload")),(e=c.ksLazyloadId)||(e=c.ksLazyloadId=a.guid("ks-lazyload")),d+e}function h(a){return a._ks_lazy_width?a._ks_lazy_width:a._ks_lazy_width=b.outerWidth(a)}function i(a){return a._ks_lazy_height?a._ks_lazy_height:a._ks_lazy_height=b.outerHeight(a)}function j(a,c,d){if(!a.offsetWidth)return!1;var e,f=b.offset(a),g=!0,j=f.left,k=f.top,m={left:j,top:k,right:j+h(a),bottom:k+i(a)};return e=l(c,m),e&&d&&(g=l(d,m)),g&&e}function k(b,c){var d=this;if(!(d instanceof k))return new k(b,c);var e=b;a.isPlainObject(e)||(e=c||{},b&&(e.container=b)),k.superclass.constructor.call(d,e),d._callbacks={},d._containerIsNotDocument=9!=d.get("container").nodeType,d._initLoadEvent()}function l(a,b){var c={};return c.top=Math.max(a.top,b.top),c.bottom=Math.min(a.bottom,b.bottom),c.left=Math.max(a.left,b.left),c.right=Math.min(a.right,b.right),c.bottom>=c.top&&c.right>=c.left}function m(c,d,e,g){"img-src"===d&&(d="img"),a.isArray(c)||(c=[b.get(c)]);var h=e||p+r,i=e||q+r;a.each(c,function(a){var c=b.nodeName(a);"img"==d?"img"==c?z(a,h,g):b.query("img",a).each(function(a){z(a,h,g)}):"textarea"==c?b.hasClass(a,i)&&f(a,!0,g):b.query("textarea."+i,a).each(function(a){f(a,!0,g)})})}var n=a.Env.host,o=n.document,p="data-ks-lazyload",q="ks-datalazyload",r="-custom",s="default",t="none",u="scroll",v="touchmove",w="resize",x=100,y=this.name,z=function(b,c,d,e){function f(a){b.src!=a&&(b.src=a),b.removeAttribute(c)}c=c||p;var g=b.getAttribute(c),h={type:"img",elem:b,src:g},i=!a.isFunction(d)||d(h)!==!1;i&&h.src&&(a.isFunction(e)?a.use(new a.Uri(y).resolve("./plugin/webp").toString(),function(){WebP.isSupport(function(a){f(a?e(h.src):h.src)})}):f(h.src))};return k.ATTRS={diff:{value:s},placeholder:{value:"http://g.tbcdn.cn/s.gif"},execScript:{value:!0},container:{setter:function(c){return c=c||o,a.isWindow(c)?c=c.document:(c=b.get(c),"body"==b.nodeName(c)&&(c=c.ownerDocument)),c},valueFn:function(){return o}},autoDestroy:{value:!0},onStart:{vaule:null}},a.extend(k,d,{_filterItems:function(){var c=this,d=c.userConfig,e=c.get("container"),f=[],g=[],h=[e];a.isArray(d.container)&&(c._backCompact=1,h=d.container),a.each(h,function(d){f=f.concat(a.filter(b.query("img",d),c._filterImg,c)),g=g.concat(b.query("textarea."+q,d))}),c._images=f,c._textareas=g},_filterImg:function(a){var b=this,c=b.get("placeholder");return a.getAttribute(p)?(a.src||(a.src=c),!0):e},initLoadEvent:function(){var b=this;b._filterItems(),b._isLoadAllLazyElements()||a.ready(b._loadFn),b.resume()},_initLoadEvent:function(){var b=this,c=new Image,d=b.get("placeholder"),e=b.get("autoDestroy"),f=function(){b._loadItems(),e&&b._isLoadAllLazyElements()&&b.destroy()};b._loadFn=a.buffer(f,x,b),c.complete?b.initLoadEvent():c.onload=function(){b.initLoadEvent()},c.src=d},refresh:function(){this._loadFn()},_loadItems:function(){var a,b,c=this,d=c.get("container");(!c._containerIsNotDocument||d.offsetWidth)&&(b=c._getBoundingRect(),!c._backCompact&&c._containerIsNotDocument&&(a=c._getBoundingRect(c.get("container"))),c._loadImgs(b,a),c._loadTextAreas(b,a),c._fireCallbacks(b,a))},_loadImgs:function(b,c){var d=this;d._images=a.filter(d._images,function(a){return j(a,b,c)?z(a,e,d.get("onStart"),d.get("webpReplacer")):!0},d)},_loadTextAreas:function(b,c){var d=this,e=d.get("execScript");d._textareas=a.filter(d._textareas,function(a){return j(a,b,c)?f(a,e,d.get("onStart")):!0},d)},_fireCallbacks:function(b,c){var d=this,e=d._callbacks;a.each(e,function(a,d){var f=a.el,g=!1,h=a.fn;j(f,b,c)&&(g=h.call(f)),g!==!1&&delete e[d]})},addCallback:function(a,c){var d=this,e=d._callbacks;a=b.get(a),e[g(a,c)]={el:b.get(a),fn:c},d._loadFn()},removeCallback:function(a,c){var d=this._callbacks;a=b.get(a),delete d[g(a,c)]},getElements:function(){return{images:this._images,textareas:this._textareas}},addElements:function(c){"string"==typeof c?c=b.query(c):a.isArray(c)||(c=[c]);var d=this,e=d._images||[],f=d._textareas||[];a.each(c,function(b){var c=b.nodeName.toLowerCase();"img"==c?a.inArray(b,e)||e.push(b):"textarea"==c&&(a.inArray(b,f)||f.push(b))}),d._images=e,d._textareas=f},removeElements:function(c){"string"==typeof c?c=b.query(c):a.isArray(c)||(c=[c]);var d=this,e=[],f=[];a.each(d._images,function(b){a.inArray(b,c)||e.push(b)}),a.each(d._textareas,function(b){a.inArray(b,c)||f.push(b)}),d._images=e,d._textareas=f},_getBoundingRect:function(c){var d,f,g,h;if(c!==e){d=b.outerHeight(c),f=b.outerWidth(c);var i=b.offset(c);g=i.left,h=i.top}else d=b.viewportHeight(),f=b.viewportWidth(),g=b.scrollLeft(),h=b.scrollTop();var j=this.get("diff"),k=j===s?f:j,l=0,m=k,n=j===s?d:j,o=0,p=n,q=g+f,r=h+d;return a.isObject(j)&&(l=j.left||0,m=j.right||0,o=j.top||0,p=j.bottom||0),g-=l,q+=m,h-=o,r+=p,{left:g,top:h,right:q,bottom:r}},_isLoadAllLazyElements:function(){var b=this;return b._images.length+b._textareas.length+(a.isEmptyObject(b._callbacks)?0:1)==0},pause:function(){var a=this,b=a._loadFn;if(!a._destroyed&&(c.remove(n,u,b),c.remove(n,v,b),c.remove(n,w,b),b.stop(),a._containerIsNotDocument)){var d=a.get("container");c.remove(d,u,b),c.remove(d,v,b)}},resume:function(){var a=this,b=a._loadFn;if(!a._destroyed&&(c.on(n,u,b),c.on(n,v,b),c.on(n,w,b),a._containerIsNotDocument)){var d=a.get("container");c.on(d,u,b),c.on(d,v,b)}},destroy:function(){var b=this;b.pause(),b._callbacks={},b._images=[],b._textareas=[],a.log("datalazyload is destroyed!"),b.fire("destroy"),b._destroyed=1
}}),k.loadCustomLazyData=m,a.DataLazyload=k,k},{requires:["dom","event","base"]}),KISSY.add("srpbase/common/mvp/model",function(a){function b(){b.superclass.constructor.apply(this,arguments)}var c=a.require("base"),d=function(){};return b.ATTRS={data:{setter:function(a){var b=this.get("data");for(var c in b)this.dataChange(c,b[c],a[c]);return a}},app:{}},a.extend(b,c,{observeKeys:{},observeParams:function(a,b){var c=this,e=c.get("data"),f=c.observeKeys;e[a]&&(f[a]=b||d)},dataChange:function(a,b,c){var d=this.observeKeys,e=d[a];if(e){var f=this.get("app");JSON.stringify(c)!=JSON.stringify(b)&&(e(b,c),f.emit("data.".key,{prevData:b,newData:c}))}}}),b},{requires:["core"]}),KISSY.add("srpbase/common/mvp/presentor",function(a){function b(a,b){this.init(a),b&&this.start(a.data)}var c=window,d=c.location,e=a.require("event"),f=a.require("xtemplate"),g=a.require("srpbase/common/mvp/router"),h=a.require("srpbase/common/mvp/model"),i=a.require("srpbase/common/mvp/view"),j=a.require("srpbase/common/mvp/ware");return b.prototype={router:null,view:null,model:null,isRun:!1,start:function(a,b){if(!this.isRun){var c=this;b?c.init(a):b=a,c.model=new h({data:b,app:c}),document.createElement(c.set("VIEWTag")),c.view=new i({params:c.set("params"),layout:c.set("layout"),view:c.set("view"),IMGTag:c.set("IMGTag"),VIEWTag:c.set("VIEWTag"),container:c.set("container"),app:c}),c.view.init(),c.router=new g({safeUrl:c.set("safeUrl"),APITag:c.set("APITag"),params:c.set("params"),app:c}),c.listen(),c.isRun=!0}},init:function(b){function c(a){var b;return b="string"==typeof a?a.replace(/[<>'"\s]/g,""):a}var e=this,f=e.$pool;a.mix(f,{safeUrl:d.href,APITag:"app=api",IMGTag:"_210x210.jpg",VIEWTag:"vbox",view:[],layout:"",params:{},render:"xtemplate",container:a.one("#J_Page")||a.one("body")}),f.safeUrl=window.__SafeUrl__=c(f.safeUrl);for(var g in b)e.set(g,b[g])},wares:[],use:function(b){var c=this;b.superclass.constructor==j?(b=new b({app:c,params:c.set("params")}),b.load(),c.wares.push(b)):a.log("\u4e0d\u7b26\u5408\u4e2d\u95f4\u4ef6\u89c4\u8303")},isSafe:!0,listen:function(){var b=this,c=b.wares,d=function(){};b.on("pipe",function(e){var f=e.req,g=e.res;a.each(c,function(a){return b.isSafe?void a.reload(f,g,d):!1})}),b.on("render",function(a){b.router.initLinks(a.view.el)}),b.on("ready",function(){b.router.scrollToArchor()})},$pool:{safeUrl:null,APITag:null,IMGTag:null,VIEWTag:null,view:null,layout:null,params:null,render:null,container:null},set:function(a,b){var c=this.$pool;return void 0==b?c[a]:void(void 0!==c[a]&&(c[a]=b))},render:function(a,b,c){if("xtemplate"===this.$pool.render){var d=new f(a).render(b);c&&c(d)}},_emitPrefix:"mvp.",emit:function(a,b){e.Target.fire(this._emitPrefix+a,b)},on:function(a,b){e.Target.on(this._emitPrefix+a,b)}},b},{requires:["srpbase/common/mvp/view","srpbase/common/mvp/model","srpbase/common/mvp/router","srpbase/common/mvp/ware","xtemplate","core"]}),KISSY.add("srpbase/common/mvp/router",function(a){function b(a){if(a){var b=a.match(/#[\w\-_]*$/);b&&(b=b[0],a=a.replace(b,"")),r||(a=a.replace(/^[#!]*/,""),k.search+="&"+a+(b?"#"+b:""))}return b}function c(){c.superclass.constructor.apply(this,arguments),this.initialize()}var d=a.require("base"),e=a.require("node"),f=a.require("event"),g=a.require("io"),h=window,i=h.document,j=window.history,k=window.location,l=a.now(),m='<div style=" position: fixed; _position: absolute;top: 0; left: 0; width: 100%; display: none;text-align: center; z-index: 1000000; "> <div style=" display: inline-block; *display: inline; *zoom: 1;padding: 0px 30px 0 60px; border: 1px solid #FCD261; color: #666; background: url(http://img01.taobaocdn.com/tps/i1/T1Z6DDXllbXXbb3zDj-60-24.gif) no-repeat 0 5px #FFFCCC; height: 34px; line-height: 34px; ">\u6b63\u5728\u7b49\u5f85 gitlab.search.taobao.com \u7684\u54cd\u5e94...</div> </div>',n=".link-hook",o="__rule",p="__async",q="_extra",r=j.pushState&&j.replaceState;return c.ATTRS={params:{setter:function(b){return a.mix(this.get("params"),b)}},APITag:{},app:{},safeUrl:{}},a.extend(c,d,{archor:null,pushState:j.pushState?a.bind(j.pushState,j):function(){},replaceState:j.replaceState?a.bind(j.replaceState,j):function(){},initialize:function(){this.archor=b(k.hash),this.loading=new e(m).appendTo(a.one("body")),this.bindLinks(),this.bindLocation()},loading:null,state:{},tmpState:{},bindLinks:function(){var b=this;f.delegate(i,"mouseenter",n,function(a){b.loadLink(a.currentTarget)});var c={removeClass:function(){}},d="selected";f.delegate(i,"click",n,function(e){var f=a.one(e.currentTarget),g=e.which;f.attr(p)&&2!==g&&!e.ctrlKey&&(e.preventDefault(),b.navigate(f[0].href,f.attr(q)),c.removeClass(d),f.addClass(d))})},navigate:function(b,c){var d=this,e=d.tmpState;c&&a.mix(e,a.unparam(c)),d.pushState(e,"",b),d.set("safeUrl",b),d.tmpState=null,d.fetchData(b,"update")},bindLocation:function(){var a=this,b=a.get("safeUrl");r?f.on(window,"popstate",function(){a.fetchData(b,"tetrieve")}):f.on(window,"hashchange",function(){a.fetchData(b,"tetrieve")})},timestamp:l,fetchData:function(b,c){var d=this,e=d.get("app"),f="&"+d.get("APITag"),h="";switch(d.loading.fadeIn(.5),c){case"update":h="&operate=update";break;case"tetrieve":h="&operate=tetrieve"}d.timestamp=a.now(),e.emit("request",{res:a.unparam(b.split("?")[1])}),g.get(b+f+h+"&t="+l,function(b){if(d.loading.fadeOut(.5),d.timestamp>l){l=a.now();var c=j.state||{};e.emit("pipe",{res:a.clone(c),res:{data:b}}),e.model.set("data",b),d.state=c,d.set("params",j.state),e.emit("response",{res:{data:b}})}})},scrollToArchor:function(){var b=this.archor;b?window.scrollTo(0,a.one(b).offset().top):window.scrollTo(0,0)},initLinks:function(a){var b=this.get("APITag");a.all("a").each(function(a){var c=a.attr("href"),d=0===c.indexOf(k.protocol+"//"+k.host);(d||!d&&-1===c.indexOf("javascript")&&c.indexOf("http")<1)&&(a.addClass(n.slice(1)),c.indexOf(b)>-1&&(a.attr(p,!0),a.attr("href",c.replace("&"+b,""))))})},loadLink:function(b){var c=this,d=c.get("params"),e=a.clone(c.state),f=b.getAttribute(o)||b.href,g=f.split("?")||[f],h=g[0],i=g[1],j=b.getAttribute(q),k=a.unparam(i);j&&!i.indexOf(j)>-1&&a.mix(k,a.unparam(j)),a.mix(e,k),i=[];for(var l in e)d[l]?(e[l]=d[l],i.push(l+"={"+l+"}")):i.push(l+"="+e[l]);f=h+"?"+i.join("&"),c.tmpState=e,b.setAttribute(o,f),b.href=a.substitute(f,d)}}),c},{requires:["core"]}),KISSY.add("srpbase/common/mvp/view",function(a){function b(){b.superclass.constructor.apply(this,arguments)}var c=a.require("base"),d=a.require("node");return b.ATTRS={params:{},layout:{},view:{},IMGTag:{},VIEWTag:{},container:{},app:{}},a.extend(b,c,{el:null,init:function(){var a=this;a._createDOM(),a._syncOpt(),a._renderUI(),a._bindUI()},_createDOM:function(){var a=this,b=a.get("app"),c=a.get("layout"),e=a.get("container");a.el=new d(c).appendTo(e),b.emit("create",{el:a.el})},_ready:!1,_syncOpt:function(){var b,c,d=this,e=d.get("app"),f=d.get("view"),g={},h=[],i=[];for(var j in f)b=f[j],c=b.components,c&&c.length&&(a.each(c,function(a){g[a]={key:a,weight:b.weight,container:j,el:null,module:null,data:null,component:null,tpl:null},i.push(a),!a.lastIndexOf("/tpl")>-1&&i.push(a.replace(/\/[\w]*$/,"/tpl"))}),h=h.concat(c));d.set("view",g),a.use(i.join(","),function(a){var b=a.Env.mods;a.each(h,function(a){if((a.lastIndexOf("/tpl")>-1||a.lastIndexOf("_tpl_/index")>-1)&&b[a])g[a].tpl=b[a].exports;else{var c=a.replace(/\/$/,"/index");b[c]&&(g[a].module=b[c].exports),c=c.replace(/\/[\w]*$/,"/tpl"),b[c]?g[a].tpl=b[c].exports:(c=c.replace("/tpl","_tpl_/index"),b[c]&&(g[a].tpl=b[c].exports))}}),e.emit("view",{view:g}),d._ready=!0,d._fireRender()})},_renderUI:function(){var a=this;a._ready?a.renderComponents():a._renderCB=function(){a.renderComponents()}},_renderCB:null,_fireRender:function(){var a=this;a._renderCB&&(a._renderCB.call(a),a._renderCB=null)},_bindUI:function(){var a=this,b=a.get("app");b.on("response",function(c){b.model.set("data",c.res.data),a.renderComponents()})},renderComponents:function(){var b,c=this,d=c.get("view"),e=c.get("app"),f=e.model.get("data"),g=(c.get("params"),[]);for(var h in f)b=d[h]||d[h.replace("/index","/")]||d[h.replace("/index","/tpl")],b&&(b.data=f[h],g.push(b),b=null);g.sort(function(a,b){return a.weight-b.weight}),a.each(g,function(b){b.container=a.one(b.container),c.destroyView(d[b.key]),c.renderView(b),b.rendered&&(c.showView(b),c.behaviorView(b))}),g=null,e.emit("ready")},renderView:function(b){var c,e=this,f=e.get("app"),g=b.data;!g||a.isEmptyObject(g)||a.isArray(g)&&!g.length||f.render(b.tpl,b.data,function(a){f.emit("tpl",{html:a}),c=new d(a).appendTo(b.container),b.rendered=!0,b.el=c,f.emit("render",{view:b})})},destroyView:function(a){a&&(a.component&&a.component.destroy(),a.el&&a.el.remove(),a.container.css("opacity",0),delete a)},showView:function(a){a.container.animate({opacity:1},.5,"easeOut ")},behaviorView:function(a){a.module&&(a.component=new a.module({el:a.el,params:this.get("params")}))},render:function(b,c,d){var e=this,f=e.get("app");b.indexOf("<")>-1?a.isString(c)?a.use(c,function(a,c){f.render(b,c,d)}):f.render(b,c,d):a.isString(c)?a.use(b+","+c,function(a,b,c){f.render(b,c,d)}):a.use(b,function(a,b){f.render(b,c,d)})}}),b},{requires:["core"]}),KISSY.add("srpbase/common/mvp/ware",function(a){function b(){b.superclass.constructor.apply(this,arguments)}var c=function(){},d=a.require("base");return b.ATTRS={params:{},app:{}},a.extend(b,d,{load:c,reload:c}),b},{requires:["core"]}),KISSY.add("srpbase/common/wrd/index",function(a){function b(){return j?f.documentElement.clientWidth||f.documentElement.offsetWidth:e.screen.width}function c(a){this._syncConfig(a),this._init()}var d,e=window,f=e.document,g=document.body,h="s-range-",i=!window.XMLHttpRequest||!document.implementation||!document.implementation.hasFeature||window.NOResponsive,j=document.implementation&&document.implementation.hasFeature("Core","2.0");return c.prototype={cfg:{regions:{},delay:100,autoAdapt:!1,autoRender:!0,readyCb:null,prefixCls:"",holderAttr:"_placeholder"},autoAdapt:!0,imgSize:null,activeRegion:null,bodyResy:null,resys:[],_ready:!1,_readyList:[],_noAdapt:!1,_init:function(){var b=this;return b.loadPage(),b._noAdapt?void(b._ready=!0):void a.use("srpbase/common/wrd/resy/index,core",function(a,c){d=c,a.ready(function(){b.cfg.autoRender&&b._render();var a=b.cfg.regions,c=b.activeRegion;b.bodyResy=b.addResy(g,a.document,c),b._ready=!0,b._fireReady()})})},_syncConfig:function(c){var d=this,e=d.cfg;a.mix(e,c);var f=b(),h=e.regions.document;if(h){var i,j,k;for(j in h)if(k=j.split("-"),f>k[0]&&f<=k[1]){i=a.clone(h[j]);break}i&&(d.imgSize=i.imgSize,d.activeRegion=i),e.HDImgSize&&(d.imgSize=["",e.HDImgSize]),g.setAttribute("id",a.guid("J_Resy_")),h.conFn=b}},_render:function(){var a=this;a._parseResys(),a._loadResys()},_boxs:[],_parseResys:function(){var b=this,c=a.DOM;a.each(c.query("[resy-box]",g),function(c){c.getAttribute("id")||(c.setAttribute("id",a.guid("J_Resy_")),b._boxs.push({key:c.getAttribute("resy-box"),el:c}))}),b._boxs.reverse()},_loadResys:function(){var b=this,c=b._boxs,d=b.cfg,e=d.regions;a.each(c,function(a){b.resys.push(b.addResy(a.el,e[a.key]))}),b._boxs=null},_fireReady:function(){var b=this,c=b._readyList;a.each(c,function(a){a()})},loadPage:function(){function b(){a.each(e,function(a){a=document.getElementById(a),a&&(a.className+="  "+h+"wrapper")}),d.readyCb&&d.readyCb()}function c(){try{document.documentElement.doScroll("left"),b()}catch(a){setTimeout(c,0)}}if(i)return this._noAdapt=!0,void(f.documentElement.id=this.cfg.prefixCls+"noadapt");var d=this.cfg,e=d.boxs;d.prefixCls&&(h=d.prefixCls),g.className="s-range "+g.className,j?(f.documentElement.id=h+"valid",setTimeout(b,0)):(this.autoAdapt=!1,f.documentElement.id=h+"invalid",setTimeout(c,0));var k=this.activeRegion;k&&(k.className&&(g.className=g.className+" "+k.className),k.event&&!this._noAdapt&&k.event.call(this,g,k))},addResy:function(a,b,c){if(!this._noAdapt){c=c||null;var e=this.cfg,f=this.autoAdapt,g=e.autoDestroy,h=e.delay,i=e.HDImgSize,j=e.holderAttr,k=b.conFn;return b.conFn=null,delete b.conFn,new d({el:a,region:b,activeRegion:c,autoAdapt:f,autoDestroy:g,delay:h,conFn:k,holderAttr:j,HDImgSize:i})}},addImages:function(a){if(!this._noAdapt){var b=this;b._ready?b.bodyResy.addImages(a):b._readyList.push(function(){b.bodyResy.addImages(a)})}},addImage:function(a,b){if(this._noAdapt)return void(a[0].src=b);var c=this;c._ready?c.bodyResy.addImage(a,b):c._readyList.push(function(){c.bodyResy.addImage(a,b)})},bindImg:function(b,c){function d(){b._cls=b.getAttribute("resy-img")?e.getImgSize()[0]:a.DOM.parent(b).className,e._noAdapt?b.src=c:(e.bodyResy.bindImg(b),b.src=c)}var e=this;e._ready?d():e._readyList.push(function(){d()})},getImgSize:function(){return this._noAdapt?this.imgSize:this.bodyResy.getImgSize()},refreshPage:function(){if(!this._noAdapt){var b=this,c=b.resys,d=b.bodyResy;a.each(c,function(a){a.refresh()}),b._render(),d.refresh()}},addCallBack:function(a,b){if(!this._noAdapt){var c=this.bodyResy.get("region");c[a]&&(c[a].event=b)}},destroy:function(){}},c}),KISSY.add("srpbase/common/wrd/resy/index",function(a){function b(a){var b=g.parent(a,".item"),c=b&&b.getAttribute("nid");a.src="http://gtms01.alicdn.com/tps/i1/TB1eENWFpXXXXc5bFXXYjFlTXXX-200-200.gif?img="+encodeURIComponent(a.src)+(c?"&"+c:""),a.onerror=null}function c(a){var b=a._cls;b=b?[b,b]:["vscale","hscale"];var c=parseInt(g.css(a,"height")),d=parseInt(g.css(a,"width")),e=g.parent(a,"a");e&&(e.className=b[(c>d)-0]),a._cls?(a.removeAttribute("height"),a.removeAttribute("width")):(a.height=c,a.width=d),a.onload=null}function d(){d.superclass.constructor.apply(this,arguments),this._init()}var e=a.require("base"),f=a.require("event"),g=a.require("dom"),h=a.UA.firefox,i="http://g.tbcdn.cn/s.gif",j="resy-img",k="resy-parent",l="resy-box",m=/\w{3}x\w{3}.jpg/;return d.ATTRS={el:{},region:{},activeRegion:{},autoAdapt:{value:!0},delay:{value:100},conFn:{},HDImgSize:{value:"320x320.jpg"},holderAttr:{value:"_nothingholder"}},a.extend(d,e,{_init:function(){var a=this;a.get("el")&&a._syncOpts()._renderUI()._bindUI()},className:null,id:null,region:null,activeRegion:null,images:[],_loadFn:null,HDScreen:!1,_syncOpts:function(){{var b=this,c=b.get("el");b.get("region"),b.get("conFn")}if(c=a.one(c),b.set("el",c),b.region=b.get("region"),b.id=b._getStamp(c),b.activeRegion=b.get("activeRegion"),b.className=c[0].className,b.activeRegion){var d=b.activeRegion.className;b.className=b.className.slice(0,b.className.indexOf(d))}return b},_renderUI:function(){var b=this,c=b.get("delay");return b._addImages(),b._loadFn=a.buffer(function(){b.get("HDImgSize")&&(b.HDScreen=!0),b.HDScreen&&!b.images.length&&b.get("autoDestroy")?f.remove(window,"resize",b._loadFn):b._loadItems()},c,b),b._loadItems(),b},_bindUI:function(){var a=this;return a.get("autoAdapt")&&f.on(window,"resize",a._loadFn),a},_getStamp:function(b){var c;return b.attr("id")?c=b.attr("id"):(c=a.guid("Resy"),b.attr("id",c)),b.attr(l,c),c},_getActiveRegion:function(a){var b,c,d=this.region,e=this.get("conFn")||function(){return a.width()},f=e.call(this);for(b in d)if(c=b.split("-"),f>c[0]&&f<=c[1])return d[b].key||(d[b].key=b),d[b]},_checkRegion:function(a){return!(this.activeRegion&&this.activeRegion.key==a.key)},_addImages:function(){var a=this,b=a.get("el"),c=a.id,d=[];b.all("img").each(function(a){a.attr(j)&&!a.attr(k)&&(a.attr(k,c),d.push(a[0]))}),a.images=d},_loadImages:function(b,c){if(b){var d=this,e=c||d.images,f=d.get("holderAttr"),h=d.get("HDImgSize"),i=[];this.HDScreen?a.each(e,function(a){a._cls=null,a.getAttribute(f)?a.setAttribute(f,a.getAttribute(f).replace(m,h)):a.src.match(m)&&-1===a.src.indexOf(h)&&d._loadImgSrc(a,h)}):a.each(e,function(a){if(a._cls=b[0],a.getAttribute(f)){a.setAttribute(f,a.getAttribute(f).replace(m,b[1]));var c=g.parent(a,"a");c&&(c.className=b[0]),i.push(a)}else a.src.match(m)&&(d._loadImgSrc(a,b[1]),i.push(a))}),d.images=c?d.images.concat(i):i}},_loadItems:function(){var b=this,c=b.get("el"),d=b.className,e=b._getActiveRegion(c);b._checkRegion(e)&&(b.activeRegion=a.clone(e),c[0].className=d+" "+e.className,b._loadImages(e.imgSize),e.event&&e.event.call(this,c,e))},_loadImgSrc:function(a,b){var d=a.src;a.src=i,this.bindImg(a),a.src=d.replace(m,b),a.complete&&!h&&c(a)}}),a.augment(d,{getImgSize:function(){var a=this;return a.HDScreen?["",a.get("HDImgSize")]:this.activeRegion.imgSize},bindImg:function(a){a.onload=function(){c(a)},a.onerror=function(){b(a)}},addImage:function(a,b){var d=this,e=d.getImgSize();if(a.attr(j)&&!a.attr(k)&&(a.attr(k,d.id),a=a[0],b.match(m)))if(-1===b.indexOf(e[1])&&(d.bindImg(a),a.src=b.replace(m,e[1]),a.complete&&!h&&c(a)),e[0]){a._cls=e[0],d.images.push(a);var f=g.parent(a,"a");f&&(f.className=e[0])}else a._cls=null},addImages:function(a){var b=this,c=b.id,d=[];a.each(function(a){a.attr(j)&&!a.attr(k)&&(a.attr(k,c),d.push(a[0]))}),b._loadImages(b.activeRegion.imgSize,d)},refresh:function(){var b=this,c=b.activeRegion;a.one("#"+b.id)?(b.images=[],c&&(c.key=null),b._addImages(),b._loadItems()):f.remove(window,"resize",b._loadFn)}}),d},{requires:["core","cookie"]}),KISSY.add("srpbase/tool/advice2visual/index",function(a,b,c){function d(b,c){a.config(a.Config.debug?{combine:!1,packages:[{name:"tbc",path:"http://g.assets.daily.taobao.net/tbc/",ignorePackageNameInUri:!0}]}:{combine:!0,packages:[{name:"tbc",path:"http://g.tbcdn.cn/tbc/",ignorePackageNameInUri:!0}]}),a.use("tbc/mini-login/1.4.2/",function(a,d){function e(){return d.check({type:"l"})}e()?b.call(c):d.show({type:"l"},function(){b.call(c)})})}function e(b){for(var c,d={backgroundColor:"#fff2e6",borderColor:"#f80",outlineColor:"#fc1"},e={backgroundColor:"",borderColor:"",outlineColor:""},f=0;600>f;f+=130)a.later(function(){c=c==e?d:e,b.css(c)},f)}function f(a){var b=s.width,c=s.height;t.save();try{t.clearRect(0,0,b,c),t.fillStyle="rgba(102, 102, 102, 0.5)",t.fillRect(0,0,b,c),t.save();try{a&&h(a)}finally{t.restore()}}finally{t.restore()}return a}function g(a){return a.width<0&&(a.width=Math.abs(a.width),a.left=a.left-a.width||0),a.height<0&&(a.height=Math.abs(a.height),a.top=a.top-a.height||0),a}function h(a){t.save();try{i(a)}finally{t.restore()}t.save();try{j(a)}finally{t.restore()}}function i(a){return t.fillStyle="black",t.globalAlpha=1,t.fillRect(a.left,a.top,a.width,a.height),a}function j(a){t.clearRect(a.left+3,a.top+3,a.width-6,a.height-6)}function k(a,b){return s=document.createElement("canvas"),t=s.getContext("2d"),s.width=b.width(),s.height=b.height(),t.globalCompositeOperation="source-over",t.fillStyle="rgba(102, 102, 102, 0.5)",t.fillRect(0,0,s.width,s.height),a.append(s),s}function l(a){return a[0].done}function m(a,b){var c;b?c=b[0]._id:(c=n(),b=o(c,a)),L[c]=a,l(b)||(p(b),b[0].done=!0)}function n(){return a.guid("J_snapdiv")}function o(a,b){var c,d="left:"+b.left+"px; top:"+b.top+"px",e="width: "+(b.width-6)+"px; height: "+(b.height-6)+"px;";return c=new w('<div class="'+M+'" style="'+d+'"><div  id="'+a+'" class="'+N+'" style="'+e+'"></div></div>'),u.append(c),c[0]._id=a,c}function p(a){var b=new w('<div class="'+O+'"><a href="javascript:;"  class="normal-btn '+P+'"><span></span>\u53d6\u6d88</a><a href="javascript:;" class="normal-btn '+Q+'"><span></span>\u786e\u5b9a</a></div>');a.append(b)}function q(b){for(var d=0,e=b.length;e>d;d++){var g=b[d].split(",");L[n()]={left:parseInt(g[0]),top:parseInt(g[1]),width:parseInt(g[2]),height:parseInt(g[3])}}var h=new w(c).appendTo(x),i=h.one(G),j=h.one(F),l=h.one(H),m=h.one(y),o=h.one(J);i.hide(),l.hide(),m.hide(),o.height(x.height()),o.width("100%"),a.later(function(){k(j,o),f(),h.css("visibility","visible")},1e3)}function r(b){r.superclass.constructor.apply(this,arguments),a.isArray(b)&&q(b)}var s,t,u,v=a.Base,w=a.Node,x=a.one("body"),y=".modal-dialog",z=".modal-dialog-el",A=".modal-close-btn",B=".advice-alert",C=".modal-confirm-btn",D=".modal-sign-btn",E=".modal-submit-btn",F=".advice-canvas",G=".advice2visual-mask",H=".advice-operate",I=".advice-ground",J=".advice-snapshot",K=".cursor-img",L={},M="snapdiv",N="snapdiv-block",O="snap-btns",P="snapdiv-cancel",Q="snapdiv-submit";r.ATTRS={sourceUrl:{},params:{}};var R=0,S=1;return a.extend(r,v,{container:null,point:[],bound:null,startDraw:!1,operate:R,viewsource:!1,init:function(){var a=this;d(function(){a._renderUI(),a._bindUI()},a)},render:function(){this.openDialog()},_renderUI:function(){var b,d,e,f,g=this;g.container=b=new w(c).appendTo(x),d=b.one(G),d.height(x.height()),f=b.one(F),e=b.one(J),e.height(x.height()),e.width("100%"),u=b.one(I),a.UA.ie?b.addClass("advice2visual-ie"):k(f,e);var h=setTimeout(function(){b.css("visibility","visible"),d.hide(),clearTimeout(h)},10);g.operate=R},_buildAdvice:function(a,b){var c=this;switch(c.operate){case S:m(a,b)}},_drawAdvice:function(a){switch(this.operate){case S:a=f(a)}return a},_bindUI:function(){var a=this,b=a.container,c=b.one(y),d=b.one(H);a._bindModal(c),a._bindOperate(d),a._bindGround(u)},_bindModal:function(c){var d=this,f=(d.get("sourceUrl"),d.container),g=c.one(z),h=c.one(A),i=c.one(E),j=c.one(B),k=c.one("textarea"),l=f.one(G),m=f.one(J),n=j.one(C);h.on("click",function(){d.closeDialog()}),i.on("click",function(){var c=f.one(".advice-img-box").hasClass("display-none"),h=k.attr("_default"),n=a.trim(k.val());if(c&&(""==n||n==h))return void e(k);n==h&&(n=""),l.show(),m.hide(),i.attr("disabled",!0),window.onscroll=function(){return!1},i.removeAttr("disabled"),window.onscroll=function(){return!0};var o=d.get("params"),p=f.one("form")[0];p.userid.value=encodeURIComponent(o.tnk)||unescape(decodeURIComponent(KISSY.Cookie.get("_nk_")||"").replace(/\\u/g,"%u")),p.bucket_id.value=o.bucketid,p.fromurl.value=location.href,p.query.value=o.q,p.content.value=n;var q;for(var r in L){q=L[r];break}if(L={},q){var t=x.one("#page")||x.one("#J_Page"),u=t.clone(!0);u.prependTo(f.one(".advice2visual-page")),u.css({width:t.width(),height:t.height(),paddingTop:"46px",paddingLeft:t.css("paddingLeft"),paddingRight:t.css("paddingRight")}),new w('<div class="advice-tips">\u6b63\u5728\u751f\u6210\u56fe\u7247\uff0c\u8bf7\u7a0d\u7b49\u3002\u3002\u3002</div>').prependTo(g.one(".advice-img-box")),setTimeout(function(){b(u[0],{onrendered:function(a){g.hide(),j.show(),u.remove();var b=a.getContext("2d");b.drawImage(s,0,0,s.width,s.height,0,0,s.width,s.height),p.page_html.value=a.toDataURL("image/png"),p.submit()}})},10)}else g.hide(),j.show(),p.page_html.value="",p.submit()}),n.on("click",function(){f.remove()});var o=k.attr("_default");k.val(o),k.addClass("blur"),k.on("focus",function(){var b=a.trim(k.val());k.removeClass("blur"),b===o&&k.val("")}),k.on("blur",function(){var b=a.trim(k.val());""===b&&(k.val(o),k.addClass("blur"))});var p=f.one(K),q=c.one(D),r=c.one(".advice-img-box"),t=r.one(".advice-img-cancel"),l=f.one(G),m=f.one(J),u="display-none";q.on("click",function(){c.hide(),d.operate=S,L={},d._drawAdvice(),p.css({left:-80,top:-80}),p.show(),m.show(),l.hide()}),t.on("click",function(){d.viewsource=!1,q.removeClass(u),r.addClass(u)})},_bindOperate:function(a){var b=this,c=a.one(K);x.on("contextmenu",function(a){b.operate===S&&(a.preventDefault(),b.operate=R)}),a.on("mousedown",function(a){if(3===a.which&&b.operate===S){var c=b.container,d=c.one(J),e=c.one(G),f=c.one(y);return d.hide(),e.show(),void f.show()}b.point=[a.pageX,a.pageY],b.startDraw=!0}),a.on("mouseup",function(){b.point=[],b.startDraw=!1;var a=b.bound;a&&(b._buildAdvice(a),c.hide(),b.operate=R,b.bound=null)}),a.on("mousemove",function(a){c.css({left:a.pageX-40,top:a.pageY-40});var d=b.point;if(b.startDraw){var e={left:d[0],top:d[1],width:a.pageX-d[0],height:a.pageY-d[1]};if(e=g(e),e.width<4&&e.height<4)return;b.bound=b._drawAdvice(e)}})},_bindGround:function(b){var c=this,d=c.container,e=d.one(G),f=d.one(K),g=d.one(J),h=d.one(y),i=d.one(D),j=d.one(".advice-img-box"),k="display-none";b.delegate("click","."+P,function(b){var d=a.one(b.currentTarget),e=d.parent(".snapdiv");e.remove(),c.operate=S,L={},c._drawAdvice(),f.css({left:-80,top:-80}),f.show(),c.viewsource=!1}),b.delegate("click","."+Q,function(b){var d=a.one(b.currentTarget),f=d.parent(".snapdiv");f.remove(),g.hide(),e.show(),i.addClass(k),j.removeClass(k),h.show(),c.viewsource=!0})}}),a.augment(r,{openDialog:function(){var a=this.container,b=a.one(y),c=a.one(G);this.fire("open"),a.show(),c.hide(),b.show(),x[0].onselectstart=function(){return!1}},closeDialog:function(){var a=this.container,b=a.one(y);this.fire("close"),b.show(),a.hide(),x[0].onselectstart=function(){return!0}}}),r},{requires:["srpbase/tool/html2canvas/index","srpbase/tool/advice2visual/tpl","core"]}),KISSY.add("srpbase/tool/advice2visual/tpl",function(){return'<div id="J_advice2visual"  class="advice2visual"><div class="advice2visual-page"></div><div id="J_advice2snapshot" class="advice-snapshot"><div class="advice-snapshot-box"><div class="advice-canvas"></div><div class="advice-operate"><div class="cursor-img"></div></div><div class="advice-ground"></div></div></div><div class="modal-dialog"><div class="modal-dialog-el"><div class="modal-dialog-hd"><a href="javascript:;" class="modal-close-btn">\u5173\u95ed</a><h5>\u8bf4\u8bf4\u6211\u4f7f\u7528\u641c\u7d22\u7684\u611f\u53d7</h5><div class="advice-links"><a href="http://bangpai.taobao.com/group/400769.htm" target="_blank">\u641c\u7d22\u5b98\u65b9\u5e2e\u6d3e</a><span class="link-separate"></span><a href="http://wenda.taobao.com/guanfang/gonggao3.htm" target="_blank">\u52a0\u5165\u6dd8\u5b9d\u95ee\u7b54\u77e5\u8bc6\u8d21\u732e\u8005\u8ba1\u5212</a></div></div><div class="modal-dialog-box"><textarea class="advice-text" _default="\u7b80\u77ed\u8bf4\u660e\u4e00\u4e0b\u60a8\u9047\u5230\u7684\u95ee\u9898\u6216\u5efa\u8bae\uff0c\u5982\u6709\u5fc5\u8981\u8bf7\u5728\u6b64\u7559\u4e0b\u60a8\u7684\u65fa\u65fa\u6216\u624b\u673a\u53f7\uff0c\u4fbf\u4e8e\u6211\u4eec\u8054\u7cfb\u5e76\u56de\u590d\u60a8\u7684\u95ee\u9898\uff0c\u53ef\u80fd\u6709\u5c0f\u793c\u7269\u8d60\u9001\u5662\uff5e"></textarea><div class="advice-btns"><a href="javascript:;" class="normal-btn  modal-sign-btn"><span></span>\u622a\u56fe\u8bf4\u660e</a><div class="advice-img-box display-none"><a href="javascript:;" class="normal-btn  modal-sign-btned">\u5df2\u622a\u56fe</a><div class="advice-img"><a href="javascript:;" class="advice-img-cancel"></a></div></div></div></div><div class="modal-dialog-ft"><button class="normal-btn modal-submit-btn">\u63d0\u4ea4</button></div></div><div class="advice-alert"><h5>\u63d0\u4ea4\u6210\u529f\uff01</h5><p>\u611f\u8c22\u60a8\u63d0\u4ea4\u53cd\u9988\uff01\u6211\u4eec\u975e\u5e38\u91cd\u89c6\u6536\u5230\u6bcf\u4e00\u6761\u53cd\u9988\u610f\u89c1\uff0c\u867d\u7136\u4e0d\u80fd\u9010\u4e00\u56de\u590d\uff0c\u4f46\u6211\u4eec\u4f1a\u53c2\u8003\u60a8\u7684\u610f\u89c1\uff0c\u7aed\u529b\u6539\u5584\u60a8\u7684\u6dd8\u5b9d\u4ea7\u54c1\u4f7f\u7528\u4f53\u9a8c\u3002</p><button class="modal-confirm-btn">\u786e\u5b9a</button></div></div><div class="advice2visual-mask"></div><form action="http://search.feedback.taobao.com/talkers/add_feedback.php" method="post" target="J_adviceform"><input type="hidden" name="sourceid" value="28"><input type="hidden" name="surveyid" value="55"><input type="hidden" name="userid" value=""><input type="hidden" name="bucket_id" value=""><input type="hidden" name="fromurl" value=""><input type="hidden" name="query" value=""><input type="hidden" name="userip" value=""><input type="hidden" name="categoryid" value=""><input type="hidden" name="machine" value=""><input type="hidden" name="causes[]" value=""><input type="hidden" name="content" value=""><input type="hidden" name="page_html" value=""></form><iframe name="J_adviceform" src="about:blank"></iframe></div>'}),KISSY.add("srpbase/tool/html2canvas/index",function(){"use strict";function a(a,b,c){var d,e=a.runtimeStyle&&a.runtimeStyle[b],f=a.style;return!/^-?[0-9]+\.?[0-9]*(?:px)?$/i.test(c)&&/^-?\d/.test(c)&&(d=f.left,e&&(a.runtimeStyle.left=a.currentStyle.left),f.left="fontSize"===b?"1em":c||0,c=f.pixelLeft+"px",f.left=d,e&&(a.runtimeStyle.left=e)),/^(thin|medium|thick)$/i.test(c)?c:Math.round(parseFloat(c))+"px"}function b(a){return parseInt(a,10)}function c(b,c,d,e){if(b=(b||"").split(","),b=b[e||0]||b[0]||"auto",b=j.Util.trimText(b).split(" "),"backgroundSize"!==d||b[0]&&!b[0].match(/cover|contain|auto/)){if(b[0]=-1===b[0].indexOf("%")?a(c,d+"X",b[0]):b[0],void 0===b[1]){if("backgroundSize"===d)return b[1]="auto",b;b[1]=b[0]}b[1]=-1===b[1].indexOf("%")?a(c,d+"Y",b[1]):b[1]}else;return b}function d(a,b,c,d,e,f){var g,h,i,k,l=j.Util.getCSS(b,a,e);if(1===l.length&&(k=l[0],l=[],l[0]=k,l[1]=k),-1!==l[0].toString().indexOf("%"))i=parseFloat(l[0])/100,h=c.width*i,"backgroundSize"!==a&&(h-=(f||d).width*i);else if("backgroundSize"===a)if("auto"===l[0])h=d.width;else if(/contain|cover/.test(l[0])){var m=j.Util.resizeBounds(d.width,d.height,c.width,c.height,l[0]);h=m.width,g=m.height}else h=parseInt(l[0],10);else h=parseInt(l[0],10);return"auto"===l[1]?g=h/d.width*d.height:-1!==l[1].toString().indexOf("%")?(i=parseFloat(l[1])/100,g=c.height*i,"backgroundSize"!==a&&(g-=(f||d).height*i)):g=parseInt(l[1],10),[h,g]}function e(a,b){var c=[];return{storage:c,width:a,height:b,clip:function(){c.push({type:"function",name:"clip",arguments:arguments})},translate:function(){c.push({type:"function",name:"translate",arguments:arguments})},fill:function(){c.push({type:"function",name:"fill",arguments:arguments})},save:function(){c.push({type:"function",name:"save",arguments:arguments})},restore:function(){c.push({type:"function",name:"restore",arguments:arguments})},fillRect:function(){c.push({type:"function",name:"fillRect",arguments:arguments})},createPattern:function(){c.push({type:"function",name:"createPattern",arguments:arguments})},drawShape:function(){var a=[];return c.push({type:"function",name:"drawShape",arguments:a}),{moveTo:function(){a.push({name:"moveTo",arguments:arguments})},lineTo:function(){a.push({name:"lineTo",arguments:arguments})},arcTo:function(){a.push({name:"arcTo",arguments:arguments})},bezierCurveTo:function(){a.push({name:"bezierCurveTo",arguments:arguments})},quadraticCurveTo:function(){a.push({name:"quadraticCurveTo",arguments:arguments})}}},drawImage:function(){c.push({type:"function",name:"drawImage",arguments:arguments})},fillText:function(){c.push({type:"function",name:"fillText",arguments:arguments})},setVariable:function(a,b){return c.push({type:"variable",name:a,arguments:b}),b}}}function f(a){return{zindex:a,children:[]}}var g,h,i="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",j={};return j.Util={},j.Util.log=function(a){j.logging&&window.console&&window.console.log&&window.console.log(a)},j.Util.trimText=function(a){return function(b){return a?a.apply(b):((b||"")+"").replace(/^\s+|\s+$/g,"")}}(String.prototype.trim),j.Util.asFloat=function(a){return parseFloat(a)},function(){var a=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,b=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g;j.Util.parseTextShadows=function(c){if(!c||"none"===c)return[];for(var d=c.match(a),e=[],f=0;d&&f<d.length;f++){var g=d[f].match(b);e.push({color:g[0],offsetX:g[1]?g[1].replace("px",""):0,offsetY:g[2]?g[2].replace("px",""):0,blur:g[3]?g[3].replace("px",""):0})}return e}}(),j.Util.parseBackgroundImage=function(a){var b,c,d,e,f,g,h,i,j=" \r\n	",k=[],l=0,m=0,n=function(){b&&('"'===c.substr(0,1)&&(c=c.substr(1,c.length-2)),c&&i.push(c),"-"===b.substr(0,1)&&(e=b.indexOf("-",1)+1)>0&&(d=b.substr(0,e),b=b.substr(e)),k.push({prefix:d,method:b.toLowerCase(),value:f,args:i})),i=[],b=d=c=f=""};n();for(var o=0,p=a.length;p>o;o++)if(g=a[o],!(0===l&&j.indexOf(g)>-1)){switch(g){case'"':h?h===g&&(h=null):h=g;break;case"(":if(h)break;if(0===l){l=1,f+=g;continue}m++;break;case")":if(h)break;if(1===l){if(0===m){l=0,f+=g,n();continue}m--}break;case",":if(h)break;if(0===l){n();continue}if(1===l&&0===m&&!b.match(/^url$/i)){i.push(c),c="",f+=g;continue}}f+=g,0===l?b+=g:c+=g}return n(),k},j.Util.Bounds=function(a){var b,c={};return a.getBoundingClientRect&&(b=a.getBoundingClientRect(),c.top=b.top,c.bottom=b.bottom||b.top+b.height,c.left=b.left,c.width=a.offsetWidth,c.height=a.offsetHeight),c
},j.Util.OffsetBounds=function(a){var b=a.offsetParent?j.Util.OffsetBounds(a.offsetParent):{top:0,left:0};return{top:a.offsetTop+b.top,bottom:a.offsetTop+a.offsetHeight+b.top,left:a.offsetLeft+b.left,width:a.offsetWidth,height:a.offsetHeight}},j.Util.getCSS=function(a,d,e){g!==a&&(h=document.defaultView.getComputedStyle(a,null));var f=h[d];if(/^background(Size|Position)$/.test(d))return c(f,a,d,e);if(/border(Top|Bottom)(Left|Right)Radius/.test(d)){var i=f.split(" ");return i.length<=1&&(i[1]=i[0]),i.map(b)}return f},j.Util.resizeBounds=function(a,b,c,d,e){var f,g,h=c/d,i=a/b;return e&&"auto"!==e?i>h^"contain"===e?(g=d,f=d*i):(f=c,g=c/i):(f=c,g=d),{width:f,height:g}},j.Util.BackgroundPosition=function(a,b,c,e,f){var g=d("backgroundPosition",a,b,c,e,f);return{left:g[0],top:g[1]}},j.Util.BackgroundSize=function(a,b,c,e){var f=d("backgroundSize",a,b,c,e);return{width:f[0],height:f[1]}},j.Util.Extend=function(a,b){for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},j.Util.Children=function(a){var b,c="IFRAME"===a.nodeName.toUpperCase();try{if("J_advice2visual"===a.getAttribute("id")||c&&"search-iframe"!==a.className)return[];b=a.nodeName&&c?a.contentDocument||a.contentWindow.document:function(a){var b=[];return null!==a&&!function(a,b){var c=a.length,d=0;if("number"==typeof b.length)for(var e=b.length;e>d;d++)a[c++]=b[d];else for(;void 0!==b[d];)a[c++]=b[d++];return a.length=c,a}(b,a),b}(a.childNodes)}catch(d){j.Util.log("html2canvas.Util.Children failed with exception: "+d.message),b=[]}return b},j.Util.isTransparent=function(a){return"transparent"===a||"rgba(0, 0, 0, 0)"===a},j.Util.Font=function(){var a={};return function(b,c,d){if(void 0!==a[b+"-"+c])return a[b+"-"+c];var e,f,g,h=d.createElement("div"),i=d.createElement("img"),j=d.createElement("span"),k="Hidden Text";return h.style.visibility="hidden",h.style.fontFamily=b,h.style.fontSize=c,h.style.margin=0,h.style.padding=0,d.body.appendChild(h),i.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=",i.width=1,i.height=1,i.style.margin=0,i.style.padding=0,i.style.verticalAlign="baseline",j.style.fontFamily=b,j.style.fontSize=c,j.style.margin=0,j.style.padding=0,j.appendChild(d.createTextNode(k)),h.appendChild(j),h.appendChild(i),e=i.offsetTop-j.offsetTop+1,h.removeChild(j),h.appendChild(d.createTextNode(k)),h.style.lineHeight="normal",i.style.verticalAlign="super",f=i.offsetTop-h.offsetTop+1,g={baseline:e,lineWidth:1,middle:f},a[b+"-"+c]=g,d.body.removeChild(h),g}}(),function(){function a(a){return function(c){try{a.addColorStop(c.stop,c.color)}catch(d){b.log(["failed to add color stop: ",d,"; tried to add: ",c])}}}var b=j.Util,c={};j.Generate=c;var d=[/^(-webkit-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-gradient)\((linear|radial),\s((?:\d{1,3}%?)\s(?:\d{1,3}%?),\s(?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)\-]+)\)$/,/^(-moz-linear-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-moz-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s?([a-z\-]*)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/];c.parseGradient=function(a,b){var c,e,f,g,h,i,j,k,l,m,n,o,p=d.length;for(e=0;p>e&&!(f=a.match(d[e]));e+=1);if(f)switch(f[1]){case"-webkit-linear-gradient":case"-o-linear-gradient":if(c={type:"linear",x0:null,y0:null,x1:null,y1:null,colorStops:[]},h=f[2].match(/\w+/g))for(i=h.length,e=0;i>e;e+=1)switch(h[e]){case"top":c.y0=0,c.y1=b.height;break;case"right":c.x0=b.width,c.x1=0;break;case"bottom":c.y0=b.height,c.y1=0;break;case"left":c.x0=0,c.x1=b.width}if(null===c.x0&&null===c.x1&&(c.x0=c.x1=b.width/2),null===c.y0&&null===c.y1&&(c.y0=c.y1=b.height/2),h=f[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(i=h.length,j=1/Math.max(i-1,1),e=0;i>e;e+=1)k=h[e].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),k[2]?(g=parseFloat(k[2]),g/="%"===k[3]?100:b.width):g=e*j,c.colorStops.push({color:k[1],stop:g});break;case"-webkit-gradient":if(c={type:"radial"===f[2]?"circle":f[2],x0:0,y0:0,x1:0,y1:0,colorStops:[]},h=f[3].match(/(\d{1,3})%?\s(\d{1,3})%?,\s(\d{1,3})%?\s(\d{1,3})%?/),h&&(c.x0=h[1]*b.width/100,c.y0=h[2]*b.height/100,c.x1=h[3]*b.width/100,c.y1=h[4]*b.height/100),h=f[4].match(/((?:from|to|color-stop)\((?:[0-9\.]+,\s)?(?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)\))+/g))for(i=h.length,e=0;i>e;e+=1)k=h[e].match(/(from|to|color-stop)\(([0-9\.]+)?(?:,\s)?((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\)/),g=parseFloat(k[2]),"from"===k[1]&&(g=0),"to"===k[1]&&(g=1),c.colorStops.push({color:k[3],stop:g});break;case"-moz-linear-gradient":if(c={type:"linear",x0:0,y0:0,x1:0,y1:0,colorStops:[]},h=f[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),h&&(c.x0=h[1]*b.width/100,c.y0=h[2]*b.height/100,c.x1=b.width-c.x0,c.y1=b.height-c.y0),h=f[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}%)?)+/g))for(i=h.length,j=1/Math.max(i-1,1),e=0;i>e;e+=1)k=h[e].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%)?/),k[2]?(g=parseFloat(k[2]),k[3]&&(g/=100)):g=e*j,c.colorStops.push({color:k[1],stop:g});break;case"-webkit-radial-gradient":case"-moz-radial-gradient":case"-o-radial-gradient":if(c={type:"circle",x0:0,y0:0,x1:b.width,y1:b.height,cx:0,cy:0,rx:0,ry:0,colorStops:[]},h=f[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),h&&(c.cx=h[1]*b.width/100,c.cy=h[2]*b.height/100),h=f[3].match(/\w+/),k=f[4].match(/[a-z\-]*/),h&&k)switch(k[0]){case"farthest-corner":case"cover":case"":l=Math.sqrt(Math.pow(c.cx,2)+Math.pow(c.cy,2)),m=Math.sqrt(Math.pow(c.cx,2)+Math.pow(c.y1-c.cy,2)),n=Math.sqrt(Math.pow(c.x1-c.cx,2)+Math.pow(c.y1-c.cy,2)),o=Math.sqrt(Math.pow(c.x1-c.cx,2)+Math.pow(c.cy,2)),c.rx=c.ry=Math.max(l,m,n,o);break;case"closest-corner":l=Math.sqrt(Math.pow(c.cx,2)+Math.pow(c.cy,2)),m=Math.sqrt(Math.pow(c.cx,2)+Math.pow(c.y1-c.cy,2)),n=Math.sqrt(Math.pow(c.x1-c.cx,2)+Math.pow(c.y1-c.cy,2)),o=Math.sqrt(Math.pow(c.x1-c.cx,2)+Math.pow(c.cy,2)),c.rx=c.ry=Math.min(l,m,n,o);break;case"farthest-side":"circle"===h[0]?c.rx=c.ry=Math.max(c.cx,c.cy,c.x1-c.cx,c.y1-c.cy):(c.type=h[0],c.rx=Math.max(c.cx,c.x1-c.cx),c.ry=Math.max(c.cy,c.y1-c.cy));break;case"closest-side":case"contain":"circle"===h[0]?c.rx=c.ry=Math.min(c.cx,c.cy,c.x1-c.cx,c.y1-c.cy):(c.type=h[0],c.rx=Math.min(c.cx,c.x1-c.cx),c.ry=Math.min(c.cy,c.y1-c.cy))}if(h=f[5].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(i=h.length,j=1/Math.max(i-1,1),e=0;i>e;e+=1)k=h[e].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),k[2]?(g=parseFloat(k[2]),g/="%"===k[3]?100:b.width):g=e*j,c.colorStops.push({color:k[1],stop:g})}return c},c.Gradient=function(b,c){if(0!==c.width&&0!==c.height){var d,e,f=document.createElement("canvas"),g=f.getContext("2d");if(f.width=c.width,f.height=c.height,d=j.Generate.parseGradient(b,c))switch(d.type){case"linear":e=g.createLinearGradient(d.x0,d.y0,d.x1,d.y1),d.colorStops.forEach(a(e)),g.fillStyle=e,g.fillRect(0,0,c.width,c.height);break;case"circle":e=g.createRadialGradient(d.cx,d.cy,0,d.cx,d.cy,d.rx),d.colorStops.forEach(a(e)),g.fillStyle=e,g.fillRect(0,0,c.width,c.height);break;case"ellipse":var h=document.createElement("canvas"),i=h.getContext("2d"),k=Math.max(d.rx,d.ry),l=2*k;h.width=h.height=l,e=i.createRadialGradient(d.rx,d.ry,0,d.rx,d.ry,k),d.colorStops.forEach(a(e)),i.fillStyle=e,i.fillRect(0,0,l,l),g.fillStyle=d.colorStops[d.colorStops.length-1].color,g.fillRect(0,0,f.width,f.height),g.drawImage(h,d.cx-d.rx,d.cy-d.ry,2*d.rx,2*d.ry)}return f}},c.ListAlpha=function(a){var b,c="";do b=a%26,c=String.fromCharCode(b+64)+c,a/=26;while(26*a>26);return c},c.ListRoman=function(a){var b,c=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],d=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],e="",f=c.length;if(0>=a||a>=4e3)return a;for(b=0;f>b;b+=1)for(;a>=d[b];)a-=d[b],e+=c[b];return e}}(),j.Parse=function(a,b){function c(){return Math.max(Math.max(hb.body.scrollWidth,hb.documentElement.scrollWidth),Math.max(hb.body.offsetWidth,hb.documentElement.offsetWidth),Math.max(hb.body.clientWidth,hb.documentElement.clientWidth))}function d(){return Math.max(Math.max(hb.body.scrollHeight,hb.documentElement.scrollHeight),Math.max(hb.body.offsetHeight,hb.documentElement.offsetHeight),Math.max(hb.body.clientHeight,hb.documentElement.clientHeight))}function g(a,b){var c=parseInt(mb(a,b),10);return isNaN(c)?0:c}function h(a,b,c,d,e,f){"transparent"!==f&&(a.setVariable("fillStyle",f),a.fillRect(b,c,d,e),gb+=1)}function i(a,b,c){return a.length>0?b+c.toUpperCase():void 0}function k(a,b){switch(b){case"lowercase":return a.toLowerCase();case"capitalize":return a.replace(/(^|\s|:|-|\(|\))([a-z])/g,i);case"uppercase":return a.toUpperCase();default:return a}}function l(a){return/^(normal|none|0px)$/.test(a)}function m(a,b,c,d){null!==a&&ib.trimText(a).length>0&&(d.fillText(a,b,c),gb+=1)}function n(a,b,c,d){var e=!1,f=mb(b,"fontWeight"),g=mb(b,"fontFamily"),h=mb(b,"fontSize"),i=ib.parseTextShadows(mb(b,"textShadow"));switch(parseInt(f,10)){case 401:f="bold";break;case 400:f="normal"}return a.setVariable("fillStyle",d),a.setVariable("font",[mb(b,"fontStyle"),mb(b,"fontVariant"),f,h,g].join(" ")),a.setVariable("textAlign",e?"right":"left"),i.length&&(a.setVariable("shadowColor",i[0].color),a.setVariable("shadowOffsetX",i[0].offsetX),a.setVariable("shadowOffsetY",i[0].offsetY),a.setVariable("shadowBlur",i[0].blur)),"none"!==c?ib.Font(g,h,hb):void 0}function o(a,b,c,d,e){switch(b){case"underline":h(a,c.left,Math.round(c.top+d.baseline+d.lineWidth),c.width,1,e);break;case"overline":h(a,c.left,Math.round(c.top),c.width,1,e);break;case"line-through":h(a,c.left,Math.ceil(c.top+d.middle+d.lineWidth),c.width,1,e)}}function p(a,b,c,d,e){var f;if(jb.rangeBounds&&!e)("none"!==c||0!==ib.trimText(b).length)&&(f=q(b,a.node,a.textOffset)),a.textOffset+=b.length;else if(a.node&&"string"==typeof a.node.nodeValue){var g=d?a.node.splitText(b.length):null;f=r(a.node,e),a.node=g}return f}function q(a,b,c){var d=hb.createRange();return d.setStart(b,c),d.setEnd(b,c+a.length),d.getBoundingClientRect()}function r(a,b){var c=a.parentNode,d=hb.createElement("wrapper"),e=a.cloneNode(!0);d.appendChild(a.cloneNode(!0)),c.replaceChild(d,a);var f=b?ib.OffsetBounds(d):ib.Bounds(d);return c.replaceChild(e,d),f}function s(a,c,d){var e,f,g=d.ctx,h=mb(a,"color"),i=mb(a,"textDecoration"),j=mb(a,"textAlign"),q={node:c,textOffset:0};ib.trimText(c.nodeValue).length>0&&(c.nodeValue=k(c.nodeValue,mb(a,"textTransform")),j=j.replace(["-webkit-auto"],["auto"]),f=c.nodeValue.split(!b.letterRendering&&/^(left|right|justify|auto)$/.test(j)&&l(mb(a,"letterSpacing"))?/(\b| )/:""),e=n(g,a,i,h),b.chinese&&f.forEach(function(a,b){/.*[\u4E00-\u9FA5].*$/.test(a)&&(a=a.split(""),a.unshift(b,1),f.splice.apply(f,a))}),f.forEach(function(a,b){var c=p(q,a,i,b<f.length-1,d.transform.matrix);c&&(m(a,c.left,c.bottom,g),o(g,i,c,e,h))}))}function t(a,b){var c,d,e=hb.createElement("boundelement");return e.style.display="inline",c=a.style.listStyleType,a.style.listStyleType="none",e.appendChild(hb.createTextNode(b)),a.insertBefore(e,a.firstChild),d=ib.Bounds(e),a.removeChild(e),a.style.listStyleType=c,d}function u(a){var b=-1,c=1,d=a.parentNode.childNodes;if(a.parentNode){for(;d[++b]!==a;)1===d[b].nodeType&&c++;return c}return-1}function v(a,b){var c,d=u(a);switch(b){case"decimal":c=d;break;case"decimal-leading-zero":c=1===d.toString().length?d="0"+d.toString():d.toString();break;case"upper-roman":c=j.Generate.ListRoman(d);break;case"lower-roman":c=j.Generate.ListRoman(d).toLowerCase();break;case"lower-alpha":c=j.Generate.ListAlpha(d).toLowerCase();break;case"upper-alpha":c=j.Generate.ListAlpha(d)}return c+". "}function w(a,b,c){var d,e,f,g=b.ctx,h=mb(a,"listStyleType");if(/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(h)){if(e=v(a,h),f=t(a,e),n(g,a,"none",mb(a,"color")),"inside"!==mb(a,"listStylePosition"))return;g.setVariable("textAlign","left"),d=c.left,m(e,d,f.bottom,g)}}function x(b){var c=a[b];return c&&c.succeeded===!0?c.img:!1}function y(a,b){var c=Math.max(a.left,b.left),d=Math.max(a.top,b.top),e=Math.min(a.left+a.width,b.left+b.width),f=Math.min(a.top+a.height,b.top+b.height);return{left:c,top:d,width:e-c,height:f-d}}function z(a,b,c){var d,e="static"!==b.cssPosition,g=e?mb(a,"zIndex"):"auto",h=mb(a,"opacity"),i="none"!==mb(a,"cssFloat");b.zIndex=d=f(g),d.isPositioned=e,d.isFloated=i,d.opacity=h,d.ownStacking="auto"!==g||1>h,c&&c.zIndex.children.push(b)}function A(a,b,c,d,e){var f=g(b,"paddingLeft"),h=g(b,"paddingTop"),i=g(b,"paddingRight"),j=g(b,"paddingBottom");M(a,c,0,0,c.width,c.height,d.left+f+e[3].width,d.top+h+e[0].width,d.width-(e[1].width+e[3].width+f+i),d.height-(e[0].width+e[2].width+h+j))}function B(a){return["Top","Right","Bottom","Left"].map(function(b){return{width:g(a,"border"+b+"Width"),color:mb(a,"border"+b+"Color")}})}function C(a){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(b){return mb(a,"border"+b+"Radius")})}function D(a,b,c,d){var e=function(a,b,c){return{x:a.x+(b.x-a.x)*c,y:a.y+(b.y-a.y)*c}};return{start:a,startControl:b,endControl:c,end:d,subdivide:function(f){var g=e(a,b,f),h=e(b,c,f),i=e(c,d,f),j=e(g,h,f),k=e(h,i,f),l=e(j,k,f);return[D(a,g,j,l),D(l,k,i,d)]},curveTo:function(a){a.push(["bezierCurve",b.x,b.y,c.x,c.y,d.x,d.y])},curveToReversed:function(d){d.push(["bezierCurve",c.x,c.y,b.x,b.y,a.x,a.y])}}}function E(a,b,c,d,e,f,g){b[0]>0||b[1]>0?(a.push(["line",d[0].start.x,d[0].start.y]),d[0].curveTo(a),d[1].curveTo(a)):a.push(["line",f,g]),(c[0]>0||c[1]>0)&&a.push(["line",e[0].start.x,e[0].start.y])}function F(a,b,c,d,e,f,g){var h=[];return b[0]>0||b[1]>0?(h.push(["line",d[1].start.x,d[1].start.y]),d[1].curveTo(h)):h.push(["line",a.c1[0],a.c1[1]]),c[0]>0||c[1]>0?(h.push(["line",f[0].start.x,f[0].start.y]),f[0].curveTo(h),h.push(["line",g[0].end.x,g[0].end.y]),g[0].curveToReversed(h)):(h.push(["line",a.c2[0],a.c2[1]]),h.push(["line",a.c3[0],a.c3[1]])),b[0]>0||b[1]>0?(h.push(["line",e[1].end.x,e[1].end.y]),e[1].curveToReversed(h)):h.push(["line",a.c4[0],a.c4[1]]),h}function G(a,b,c){var d=a.left,e=a.top,f=a.width,g=a.height,h=b[0][0],i=b[0][1],j=b[1][0],k=b[1][1],l=b[2][0],m=b[2][1],n=b[3][0],o=b[3][1],p=f-j,q=g-m,r=f-l,s=g-o;return{topLeftOuter:pb(d,e,h,i).topLeft.subdivide(.5),topLeftInner:pb(d+c[3].width,e+c[0].width,Math.max(0,h-c[3].width),Math.max(0,i-c[0].width)).topLeft.subdivide(.5),topRightOuter:pb(d+p,e,j,k).topRight.subdivide(.5),topRightInner:pb(d+Math.min(p,f+c[3].width),e+c[0].width,p>f+c[3].width?0:j-c[3].width,k-c[0].width).topRight.subdivide(.5),bottomRightOuter:pb(d+r,e+q,l,m).bottomRight.subdivide(.5),bottomRightInner:pb(d+Math.min(r,f+c[3].width),e+Math.min(q,g+c[0].width),Math.max(0,l-c[1].width),Math.max(0,m-c[2].width)).bottomRight.subdivide(.5),bottomLeftOuter:pb(d,e+s,n,o).bottomLeft.subdivide(.5),bottomLeftInner:pb(d+c[3].width,e+s,Math.max(0,n-c[3].width),Math.max(0,o-c[2].width)).bottomLeft.subdivide(.5)}}function H(a,b,c,d,e){var f=mb(a,"backgroundClip"),g=[];switch(f){case"content-box":case"padding-box":E(g,d[0],d[1],b.topLeftInner,b.topRightInner,e.left+c[3].width,e.top+c[0].width),E(g,d[1],d[2],b.topRightInner,b.bottomRightInner,e.left+e.width-c[1].width,e.top+c[0].width),E(g,d[2],d[3],b.bottomRightInner,b.bottomLeftInner,e.left+e.width-c[1].width,e.top+e.height-c[2].width),E(g,d[3],d[0],b.bottomLeftInner,b.topLeftInner,e.left+c[3].width,e.top+e.height-c[2].width);break;default:E(g,d[0],d[1],b.topLeftOuter,b.topRightOuter,e.left,e.top),E(g,d[1],d[2],b.topRightOuter,b.bottomRightOuter,e.left+e.width,e.top),E(g,d[2],d[3],b.bottomRightOuter,b.bottomLeftOuter,e.left+e.width,e.top+e.height),E(g,d[3],d[0],b.bottomLeftOuter,b.topLeftOuter,e.left,e.top+e.height)}return g}function I(a,b,c){var d,e,f,g,h,i,j=b.left,k=b.top,l=b.width,m=b.height,n=C(a),o=G(b,n,c),p={clip:H(a,o,c,n,b),borders:[]};for(d=0;4>d;d++)if(c[d].width>0){switch(e=j,f=k,g=l,h=m-c[2].width,d){case 0:h=c[0].width,i=F({c1:[e,f],c2:[e+g,f],c3:[e+g-c[1].width,f+h],c4:[e+c[3].width,f+h]},n[0],n[1],o.topLeftOuter,o.topLeftInner,o.topRightOuter,o.topRightInner);break;case 1:e=j+l-c[1].width,g=c[1].width,i=F({c1:[e+g,f],c2:[e+g,f+h+c[2].width],c3:[e,f+h],c4:[e,f+c[0].width]},n[1],n[2],o.topRightOuter,o.topRightInner,o.bottomRightOuter,o.bottomRightInner);break;case 2:f=f+m-c[2].width,h=c[2].width,i=F({c1:[e+g,f+h],c2:[e,f+h],c3:[e+c[3].width,f],c4:[e+g-c[3].width,f]},n[2],n[3],o.bottomRightOuter,o.bottomRightInner,o.bottomLeftOuter,o.bottomLeftInner);break;case 3:g=c[3].width,i=F({c1:[e,f+h+c[2].width],c2:[e,f],c3:[e+g,f+c[0].width],c4:[e+g,f+h]},n[3],n[0],o.bottomLeftOuter,o.bottomLeftInner,o.topLeftOuter,o.topLeftInner)}p.borders.push({args:i,color:c[d].color})}return p}function J(a,b){var c=a.drawShape();return b.forEach(function(a,b){c[0===b?"moveTo":a[0]+"To"].apply(null,a.slice(1))}),c}function K(a,b,c){"transparent"!==c&&(a.setVariable("fillStyle",c),J(a,b),a.fill(),gb+=1)}function L(a,b,c){var d,e,f=hb.createElement("valuewrap"),g=["lineHeight","textAlign","fontFamily","color","fontSize","paddingLeft","paddingTop","width","height","border","borderLeftWidth","borderTopWidth"];g.forEach(function(b){try{f.style[b]=mb(a,b)}catch(c){ib.log("html2canvas: Parse: Exception caught in renderFormValue: "+c.message)}}),f.style.borderColor="black",f.style.borderStyle="solid",f.style.display="block",f.style.position="absolute",(/^(submit|reset|button|text|password)$/.test(a.type)||"SELECT"===a.nodeName)&&(f.style.lineHeight=mb(a,"height")),f.style.top=b.top+"px",f.style.left=b.left+"px",d="SELECT"===a.nodeName?(a.options[a.selectedIndex]||0).text:a.value,d||(d=a.placeholder),e=hb.createTextNode(d),f.appendChild(e),lb.appendChild(f),s(a,e,c),lb.removeChild(f)}function M(a){a.drawImage.apply(a,Array.prototype.slice.call(arguments,1)),gb+=1}function N(a,b){var c=window.getComputedStyle(a,b);if(c&&c.content&&"none"!==c.content&&"-moz-alt-content"!==c.content&&"none"!==c.display){var d=c.content+"",e=d.substr(0,1);e===d.substr(d.length-1)&&e.match(/'|"/)&&(d=d.substr(1,d.length-2));var f="url"===d.substr(0,3),g=document.createElement(f?"img":"span");return g.className=nb+"-before "+nb+"-after",Object.keys(c).filter(O).forEach(function(a){try{g.style[a]=c[a]}catch(b){ib.log(["Tried to assign readonly property ",a,"Error:",b])}}),f?g.src=ib.parseBackgroundImage(d)[0].args[0]:g.innerHTML=d,g}}function O(a){return isNaN(window.parseInt(a,10))}function P(a,b){var c=N(a,":before"),d=N(a,":after");(c||d)&&(c&&(a.className+=" "+nb+"-before",a.parentNode.insertBefore(c,a),cb(c,b,!0),a.parentNode.removeChild(c),a.className=a.className.replace(nb+"-before","").trim()),d&&(a.className+=" "+nb+"-after",a.appendChild(d),cb(d,b,!0),a.removeChild(d),a.className=a.className.replace(nb+"-after","").trim()))}function Q(a,b,c,d){var e=Math.round(d.left+c.left),f=Math.round(d.top+c.top);a.createPattern(b),a.translate(e,f),a.fill(),a.translate(-e,-f)}function R(a,b,c,d,e,f,g,h){var i=[];i.push(["line",Math.round(e),Math.round(f)]),i.push(["line",Math.round(e+g),Math.round(f)]),i.push(["line",Math.round(e+g),Math.round(h+f)]),i.push(["line",Math.round(e),Math.round(h+f)]),J(a,i),a.save(),a.clip(),Q(a,b,c,d),a.restore()}function S(a,b,c){h(a,b.left,b.top,b.width,b.height,c)}function T(a,b,c,d,e){var f=ib.BackgroundSize(a,b,d,e),g=ib.BackgroundPosition(a,b,d,e,f),h=mb(a,"backgroundRepeat").split(",").map(ib.trimText);switch(d=V(d,f),h=h[e]||h[0]){case"repeat-x":R(c,d,g,b,b.left,b.top+g.top,99999,d.height);break;case"repeat-y":R(c,d,g,b,b.left+g.left,b.top,d.width,99999);break;case"no-repeat":R(c,d,g,b,b.left+g.left,b.top+g.top,d.width,d.height);break;default:Q(c,d,g,{top:b.top,left:b.left,width:d.width,height:d.height})}}function U(a,b,c){for(var d,e=mb(a,"backgroundImage"),f=ib.parseBackgroundImage(e),g=f.length;g--;)if(e=f[g],e.args&&0!==e.args.length){var h="url"===e.method?e.args[0]:e.value;d=x(h),d?T(a,b,c,d,g):ib.log("html2canvas: Error loading background:",e)}}function V(a,b){if(a.width===b.width&&a.height===b.height)return a;var c,d=hb.createElement("canvas");return d.width=b.width,d.height=b.height,c=d.getContext("2d"),M(c,a,0,0,a.width,a.height,0,0,b.width,b.height),d}function W(a,b,c){return a.setVariable("globalAlpha",mb(b,"opacity")*(c?c.opacity:1))}function X(a){return a.replace("px","")}function Y(a){var b=mb(a,"transform")||mb(a,"-webkit-transform")||mb(a,"-moz-transform")||mb(a,"-ms-transform")||mb(a,"-o-transform"),c=mb(a,"transform-origin")||mb(a,"-webkit-transform-origin")||mb(a,"-moz-transform-origin")||mb(a,"-ms-transform-origin")||mb(a,"-o-transform-origin")||"0px 0px";c=c.split(" ").map(X).map(ib.asFloat);var d;if(b&&"none"!==b){var e=b.match(qb);if(e)switch(e[1]){case"matrix":d=e[2].split(",").map(ib.trimText).map(ib.asFloat)}}return{origin:c,matrix:d}}function Z(a,f,g,h){var i=e(f?g.width:c(),f?g.height:d()),j={ctx:i,opacity:W(i,a,f),cssPosition:mb(a,"position"),borders:B(a),transform:h,clip:f&&f.clip?ib.Extend({},f.clip):null};return z(a,j,f),b.useOverflow===!0&&/(hidden|scroll|auto)/.test(mb(a,"overflow"))===!0&&/(BODY)/i.test(a.nodeName)===!1&&(j.clip=j.clip?y(j.clip,g):g),j}function $(a,b,c){var d={left:b.left+a[3].width,top:b.top+a[0].width,width:b.width-(a[1].width+a[3].width),height:b.height-(a[0].width+a[2].width)};return c&&(d=y(d,c)),d}function _(a,b){var c=b.matrix?ib.OffsetBounds(a):ib.Bounds(a);return b.origin[0]+=c.left,b.origin[1]+=c.top,c}function ab(a,b,c,d){var e,f=Y(a,b),g=_(a,f),h=Z(a,b,g,f),i=h.borders,j=h.ctx,k=$(i,g,h.clip),l=I(a,g,i),m=kb.test(a.nodeName)?"#efefef":mb(a,"backgroundColor");switch(J(j,l.clip),j.save(),j.clip(),k.height>0&&k.width>0&&!d?(S(j,g,m),U(a,k,j)):d&&(h.backgroundColor=m),j.restore(),l.borders.forEach(function(a){K(j,a.args,a.color)}),c||P(a,h),a.nodeName){case"IMG":(e=x(a.getAttribute("src")))?A(j,a,e,g,i):ib.log("html2canvas: Error loading <img>:"+a.getAttribute("src"));break;case"INPUT":/^(text|url|email|submit|button|reset)$/.test(a.type)&&(a.value||a.placeholder||"").length>0&&L(a,g,h);break;case"TEXTAREA":(a.value||a.placeholder||"").length>0&&L(a,g,h);break;case"SELECT":(a.options||a.placeholder||"").length>0&&L(a,g,h);break;case"LI":w(a,h,k);break;case"CANVAS":A(j,a,a,g,i)}return h}function bb(a){return"none"!==mb(a,"display")&&"hidden"!==mb(a,"visibility")&&!a.hasAttribute("data-html2canvas-ignore")}function cb(a,b,c){bb(a)&&(b=ab(a,b,c,!1)||b,kb.test(a.nodeName)||db(a,b,c))}function db(a,b,c){ib.Children(a).forEach(function(d){d.nodeType===d.ELEMENT_NODE?cb(d,b,c):d.nodeType===d.TEXT_NODE&&s(a,d,b)})}function eb(){var a=mb(document.documentElement,"backgroundColor"),b=ib.isTransparent(a)&&fb===document.body,c=ab(fb,null,!1,b);return db(fb,c),b&&(a=c.backgroundColor),lb.removeChild(ob),{backgroundColor:a,stack:c}}window.scroll(0,0);var fb=void 0===b.elements?document.body:b.elements[0],gb=0,hb=fb.ownerDocument,ib=j.Util,jb=ib.Support(b,hb),kb=new RegExp("("+b.ignoreElements+")"),lb=hb.body,mb=ib.getCSS,nb="___html2canvas___pseudoelement",ob=hb.createElement("style");ob.innerHTML="."+nb+'-before:before { content: "" !important; display: none !important; }.'+nb+'-after:after { content: "" !important; display: none !important; }',lb.appendChild(ob),a=a||{};var pb=function(a){return function(b,c,d,e){var f=d*a,g=e*a,h=b+d,i=c+e;return{topLeft:D({x:b,y:i},{x:b,y:i-g},{x:h-f,y:c},{x:h,y:c}),topRight:D({x:b,y:c},{x:b+f,y:c},{x:h,y:i-g},{x:h,y:i}),bottomRight:D({x:h,y:c},{x:h,y:c+g},{x:b+f,y:i},{x:b,y:i}),bottomLeft:D({x:h,y:i},{x:h-f,y:i},{x:b,y:c+g},{x:b,y:c})}}}(4*((Math.sqrt(2)-1)/3)),qb=/(matrix)\((.+)\)/;return eb()},j.Preload=function(a){function b(){p.log("html2canvas: start: images: "+o.numLoaded+" / "+o.numTotal+" (failed: "+o.numFailed+")"),!o.firstRun&&o.numLoaded>=o.numTotal&&(p.log("Finished loading images: # "+o.numTotal+" (failed: "+o.numFailed+")"),"function"==typeof a.complete&&a.complete(o))}function c(a,b){var c=window.getComputedStyle(a,b),d=c.content;"url"===d.substr(0,3)&&l.loadImage(j.Util.parseBackgroundImage(d)[0].args[0]),g(c.backgroundImage,a)}function d(a){c(a,":before"),c(a,":after")}function e(a,c){var d=j.Generate.Gradient(a,c);void 0!==d&&(o[a]={img:d,succeeded:!0},o.numTotal++,o.numLoaded++,b())}function f(a){return a&&a.method&&a.args&&a.args.length>0}function g(a,b){var c;j.Util.parseBackgroundImage(a).filter(f).forEach(function(a){"url"===a.method?l.loadImage(a.args[0]):a.method.match(/\-?gradient$/)&&(void 0===c&&(c=j.Util.Bounds(b)),e(a.value,c))})}function h(a){var b=!1;try{p.Children(a).forEach(h)}catch(c){}try{b=a.nodeType}catch(e){b=!1,p.log("html2canvas: failed to access some element's nodeType - Exception: "+e.message)}if(1===b||void 0===b){d(a);try{g(p.getCSS(a,"backgroundImage"),a)}catch(c){p.log("html2canvas: failed to get background-image - Exception: "+c.message)}g(a)}}{var k,l,m,n,o={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:!1},p=j.Util,q=a.elements[0]||document.body,r=q.ownerDocument,s=q.getElementsByTagName("img"),t=s.length,u=r.createElement("a");!function(a){return void 0!==a.crossOrigin}(new Image)}for(u.href=window.location.href,k=u.protocol+u.host,l={loadImage:function(a){return a&&void 0===o[a]?void(o[a]={img:i}):void 0},cleanupDOM:function(c){var d,e;if(!o.cleanupDone){p.log(c&&"string"==typeof c?"html2canvas: Cleanup because: "+c:"html2canvas: Cleanup after timeout: "+a.timeout+" ms.");for(e in o)if(o.hasOwnProperty(e)&&(d=o[e],"object"==typeof d&&d.callbackname&&void 0===d.succeeded)){window[d.callbackname]=void 0;try{delete window[d.callbackname]}catch(f){}d.script&&d.script.parentNode&&(d.script.setAttribute("src","about:blank"),d.script.parentNode.removeChild(d.script)),o.numLoaded++,o.numFailed++,p.log("html2canvas: Cleaned up failed img: '"+e+"' Steps: "+o.numLoaded+" / "+o.numTotal)}void 0!==window.stop?window.stop():void 0!==document.execCommand&&document.execCommand("Stop",!1),void 0!==document.close&&document.close(),o.cleanupDone=!0,c&&"string"==typeof c||b()}},renderingDone:function(){n&&window.clearTimeout(n)}},a.timeout>0&&(n=window.setTimeout(l.cleanupDOM,a.timeout)),p.log("html2canvas: Preload starts: finding background-images"),o.firstRun=!0,h(q),p.log("html2canvas: Preload: Finding images"),m=0;t>m;m+=1)l.loadImage(s[m].getAttribute("src"));return o.firstRun=!1,p.log("html2canvas: Preload: Done."),o.numTotal===o.numLoaded&&b(),l},j.Renderer=function(a,b){function c(a){function b(a){Object.keys(a).sort().forEach(function(c){var e=[],f=[],g=[],h=[];a[c].forEach(function(a){a.node.zIndex.isPositioned||a.node.zIndex.opacity<1?g.push(a):a.node.zIndex.isFloated?f.push(a):e.push(a)}),function i(a){a.forEach(function(a){h.push(a),a.children&&i(a.children)})}(e.concat(f,g)),h.forEach(function(a){a.context?b(a.context):d.push(a.node)})})}var c,d=[];return c=function(a){function b(a,c,d){var e="auto"===c.zIndex.zindex?0:Number(c.zIndex.zindex),f=a,g=c.zIndex.isPositioned,h=c.zIndex.isFloated,i={node:c},j=d;c.zIndex.ownStacking?(f=i.context={"!":[{node:c,children:[]}]},j=void 0):(g||h)&&(j=i.children=[]),0===e&&d?d.push(i):(a[e]||(a[e]=[]),a[e].push(i)),c.zIndex.children.forEach(function(a){b(f,a,j)})}var c={};return b(c,a),c}(a),b(c),d}function d(a){var c;if("string"==typeof b.renderer&&void 0!==j.Renderer[a])c=j.Renderer[a](b);else{if("function"!=typeof a)throw new Error("Unknown renderer");c=a(b)}if("function"!=typeof c)throw new Error("Invalid renderer defined");return c}return d(b.renderer)(a,b,document,c(a.stack),j)},j.Util.Support=function(a,b){function c(){var a=new Image,c=b.createElement("canvas"),d=void 0===c.getContext?!1:c.getContext("2d");if(d===!1)return!1;c.width=c.height=10,a.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'>","<foreignObject width='10' height='10'>","<div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>","sup","</div>","</foreignObject>","</svg>"].join("");try{d.drawImage(a,0,0),c.toDataURL()}catch(e){return!1}return j.Util.log("html2canvas: Parse: SVG powered rendering available"),!0}function d(){var a,c,d,e,f=!1;return b.createRange&&(a=b.createRange(),a.getBoundingClientRect&&(c=b.createElement("boundtest"),c.style.height="123px",c.style.display="block",b.body.appendChild(c),a.selectNode(c),d=a.getBoundingClientRect(),e=d.height,123===e&&(f=!0),b.body.removeChild(c))),f}return{rangeBounds:d(),svgRendering:a.svgRendering&&c()}},window.html2canvas=function(a,b){a=a.length?a:[a];var c,d,e={logging:!1,elements:a,background:"#fff",proxy:null,timeout:0,useCORS:!1,allowTaint:!1,svgRendering:!1,ignoreElements:"IFRAME|OBJECT|PARAM",useOverflow:!0,letterRendering:!1,chinese:!1,width:null,height:null,taintTest:!0,renderer:"Canvas"};return e=j.Util.Extend(b,e),j.logging=e.logging,e.complete=function(a){("function"!=typeof e.onpreloaded||e.onpreloaded(a)!==!1)&&(c=j.Parse(a,e),("function"!=typeof e.onparsed||e.onparsed(c)!==!1)&&(d=j.Renderer(c,e),"function"==typeof e.onrendered&&e.onrendered(d)))},window.setTimeout(function(){j.Preload(e)},0),{render:function(a,b){return j.Renderer(a,j.Util.Extend(b,e))},parse:function(a,b){return j.Parse(a,j.Util.Extend(b,e))},preload:function(a){return j.Preload(j.Util.Extend(a,e))},log:j.Util.log}},window.html2canvas.log=j.Util.log,window.html2canvas.Renderer={Canvas:void 0},j.Renderer.Canvas=function(a){function b(a,b){a.beginPath(),b.forEach(function(b){a[b.name].apply(a,b.arguments)}),a.closePath()}function c(a){if(-1===f.indexOf(a.arguments[0].src)){h.drawImage(a.arguments[0],0,0);try{h.getImageData(0,0,1,1)}catch(b){return g=e.createElement("canvas"),h=g.getContext("2d"),!1}f.push(a.arguments[0].src)}return!0}function d(d,e){switch(e.type){case"variable":d[e.name]=e.arguments;break;case"function":switch(e.name){case"createPattern":if(e.arguments[0].width>0&&e.arguments[0].height>0)try{d.fillStyle=d.createPattern(e.arguments[0],"repeat")}catch(f){i.log("html2canvas: Renderer: Error creating pattern",f.message)}break;case"drawShape":b(d,e.arguments);break;case"drawImage":e.arguments[8]>0&&e.arguments[7]>0&&(!a.taintTest||a.taintTest&&c(e))&&d.drawImage.apply(d,e.arguments);break;default:d[e.name].apply(d,e.arguments)}}}a=a||{};var e=document,f=[],g=document.createElement("canvas"),h=g.getContext("2d"),i=j.Util,k=a.canvas||e.createElement("canvas");return function(a,b,c,e,f){var g,h,j,l=k.getContext("2d"),m=a.stack;return k.width=k.style.width=b.width||m.ctx.width,k.height=k.style.height=b.height||m.ctx.height,j=l.fillStyle,l.fillStyle=i.isTransparent(m.backgroundColor)&&void 0!==b.background?b.background:a.backgroundColor,l.fillRect(0,0,k.width,k.height),l.fillStyle=j,e.forEach(function(a){l.textBaseline="bottom",l.save(),a.transform.matrix&&(l.translate(a.transform.origin[0],a.transform.origin[1]),l.transform.apply(l,a.transform.matrix),l.translate(-a.transform.origin[0],-a.transform.origin[1])),a.clip&&(l.beginPath(),l.rect(a.clip.left,a.clip.top,a.clip.width,a.clip.height),l.clip()),a.ctx.storage&&a.ctx.storage.forEach(function(a){d(l,a)}),l.restore()}),i.log("html2canvas: Renderer: Canvas renderer done - returning canvas obj"),1===b.elements.length&&"object"==typeof b.elements[0]&&"BODY"!==b.elements[0].nodeName?(h=f.Util.Bounds(b.elements[0]),g=c.createElement("canvas"),g.width=Math.ceil(h.width),g.height=Math.ceil(h.height),l=g.getContext("2d"),l.drawImage(k,h.left,h.top,h.width,h.height,0,0,h.width,h.height),k=null,g):k}},window.html2canvas}),KISSY.add("srpbase/tool/sidebar/index",function(a,b,c,d){function e(b){h=null,document.domain.indexOf("taobao.com")>-1&&(document.domain="taobao.com"),window.feedCallback=function(){},h=new d({params:b}),h.on("open",function(){var b=a.one(".weather-floatlayer");b&&b.removeAttr("bx-name");var c=a.one(".sortbar");c&&c.hasClass("sortbar-fixed")&&(c.removeClass("sortbar-fixed"),c.attr("style","position: static !important"),c.prev().hide(),c[0].advice=!0)
}),h.on("close",function(){var b=a.one(".sortbar");b&&b[0].advice&&(b.css("position",""),b.addClass("sortbar-fixed"),b.prev().show(),b[0].advice=!1)}),h.init()}function f(b){return a.one("#J_advice2visual")?void(h&&h.render()):void e(b)}function g(){g.superclass.constructor.apply(this,arguments),this.initialize()}var h,i=a.require("dom"),j=a.require("base"),k=a.require("node"),l=a.require("event"),m=a.require("xtemplate");return g.ATTRS={gotop:{value:null},gotopHeight:{value:1.2*i.viewportHeight()},isGotopVSB:{value:!1},el:{},params:{setter:function(b){return a.mix(this.get("params"),b)}}},g.METHOD={resetGotop:function(){var a=i.scrollTop();a>this.get("gotopHeight")&&!this.get("isGotopVSB")?this.showGoTop():a<this.get("gotopHeight")&&this.get("isGotopVSB")&&this.hideGoTop()},showGoTop:function(){var a=this,b=a.get("gotop");a.get("isGotopVSB")||b.fadeIn(.2,function(){b.css("display","block"),a.set("isGotopVSB",!0)})},hideGoTop:function(){var b=this,c=b.get("gotop");b.get("isGotopVSB")&&c.fadeOut(.2,function(){a.UA.ie<7&&b.resetTopForIE6(),b.set("isGotopVSB",!1)})}},a.extend(g,j,{initialize:function(){this._createDOM(),this.get("el")&&(this.init(),a.UA.ie<7&&this.initForIE6(),this._bindUI())},init:function(){var a=this,b=a.get("el"),c=b.one(".elem-gotop");a.set("gotop",c),l.on(window,"scroll",function(){a.resetGotop()}),c.on("click",function(){i.scrollIntoView("#site-nav")}),a.resetGotop()},initForIE6:function(){var a=this,c=a.get("el");l.on(window,"scroll",function(){a.resetTopForIE6()}),b.readyResize(c,function(){this.resetTopForIE6()},a)},resetTopForIE6:function(){var a=this.get("el"),b=a.height()+30,c=i.scrollTop(),d=i.viewportHeight(),e=d+c-b;a.css("top",e)},_createDOM:function(){var b=this,d=b.get("el"),e=a.one("body"),f=b.get("params");if(!d&&c){var g=b.loadPageData(f);d=new k(new m(c).render(g)).appendTo(e),b.set("el",d)}},_bindUI:function(){var a=this,b=a.get("params"),c=a.get("el");c.delegate("click",".elem-gotop",function(a){a.preventDefault(),window.scrollTo(0,0)}),c.delegate("click",".elem-advice",function(a){a.preventDefault(),void 0===h?e(b):f(b)})},loadPageData:function(a){var b={},c=window.__SafeUrl__||location.href,d=a.page,e=a.pageNum||40;return void 0===d?b:(d?(b.prevpage={href:c.replace(/s=([0-9]*)/,function(){return"s="+e*(d-1)}),text:"\u4e0a\u4e00\u9875"},b.nextpage={href:c.replace(/s=([0-9]*)/,function(){return"s="+e*(d+1)}),text:"\u4e0b\u4e00\u9875"}):b.nextpage={href:c.replace(/s=([0-9]*)/,function(){return"s="+e}),text:"\u4e0b\u4e00\u9875"},b)},refresh:function(){var a=this,b=sel.get("params");el=a.get("el"),data=a.loadPageData(b);var d=el.one(".elem-prev"),e=el.one(".elem-next");d&&d.remove(),e&&e.remove();var f=c.match(/\{\{\#prevpage\}\}.*\{\{\/nextpage\}\}/)[0];new k(new m(f).render(data)).insertAfter(el.one(".elem-gotop"))}}),a.augment(g,g.METHOD),g},{requires:["srpbase/util/resizebase/index","srpbase/tool/sidebar/tpl","srpbase/tool/advice2visual/index","xtemplate","core"]}),KISSY.add("srpbase/tool/sidebar/tpl",function(){return['<div class="srpbase-tools-sidebar-el">',"<ul>",'<li class="elem-gotop elem-nav-i">','<a trace="toolBarTohead" href="javascript:;">\u56de\u5230\u9876\u90e8</a>',"</li>","{{#prevpage}}",'<li class="elem-prev show elem-nav-i">','<a trace="toolbarPagedown" href="{{href}}">{{text}}</a>',"</li>","{{/prevpage}}","{{#nextpage}}",'<li class="elem-next show elem-nav-i">','<a trace="toolbarPagedown" href="{{href}}">{{text}}</a>',"</li>","{{/nextpage}}",'<li class="elem-advice elem-nav-i">','<a trace="toobarFeedback" href="javascript:;" >\u7528\u6237\u53cd\u9988</a>',"</li>",'<li class="elem-help elem-nav-i">','<a trace="toolbarSearchhelp" target="_blank" href="http://s.taobao.com/faq.php">\u641c\u7d22\u5e2e\u52a9</a>',"</li>",'<li class="elem-history elem-nav-i">','<a trace="toolbarHistory" target="_blank" href="http://lu.taobao.com/newMyPath.htm?scm=12307.3.0.0 ">\u641c\u7d22\u5386\u53f2</a>',"</li>","</ul>","</div>"].join("")}),KISSY.add("srpbase/tool/statsend/functions",function(a){var b=window,c=(b.document,a.Base,a.Event,a.UA,{navHeigth:function(){var b=a.one(".tb-navigation");return b?b.height():"unknown"},navMutiSelectedPPath:function(a){for(var b=a.parent(".nav-category"),c=b.one(".nav-category-content"),d=c.attr("data-pid"),e="",f=c.all(".checked"),g=0;g<f.length;g++)0!=g&&(e+=","),e+=f.item(g).attr("data-param-value");return d+":"+e},navPPath:function(a){var b=a.parent(".nav-category");return b&&b.hasClass("state-multi")?void 0:a.attr("data-ppath")},navSwitchState:function(a){return a.parent(".navigation").hasClass("nav-narrowed")?1:0},auctionClick:function(a){return a.parent(".summary")?";item_click_from:2":a.parent(".pic-box")?";item_click_from:1":""},skuClick:function(a){var b=this.getStat(),c=a.parent(".feature-thumbs"),d=c.parent(".item"),e=this.getQuery(b.data,b.rule.auction.replace("${exec-auctionClick}","${skuClickValue}"),"auction",d.one('a[trace="auction"]'));return c&&e?e.replace("${skuClickValue}",";item_click_from:4;sku_smallpage:1"):void 0}});return c}),KISSY.add("srpbase/tool/statsend/index",function(a,b,c,d){function e(a){return this instanceof e?void e.superclass.constructor.call(this,a):new e(a)}var f=window,g=f.document,h=a.Base,i=a.Event,j=a.UA;return a.extend(e,h,{send:function(a,c,d){d?this.saveTrace(a):b.send(a,c)},setStat:function(a){b.setStat(a)},getStat:function(){return b.getStat()},setData:function(a){b.setData(a)},setDataWithCB:function(a,c){b.setDataWithCB(a,c)},setRule:function(a){b.setRule(a)},setRuleWithCB:function(a,c){b.setDataWithCB(a,c)},getQuery:function(b,d,e,f){var g,h,i,j=this;h=f.attr("traceidx"),h?(i=parseInt(h),isNaN(i)&&(i=1)):(g=f.attr("tracenum")||1,i=Math.floor(a.indexOf(f[0],a.all('a[trace="'+e+'"]'))/g));var k=!1,l=d.replace(/\$\{([\w-]+)\}/g,function(a,d){if(0==d.indexOf("data-"))return f.attr(d);if(0==d.indexOf("exec-")){var e=c[d.slice(5)].call(j,f);if(void 0!==e)return e;k=!0}return void 0===b[d]?a:b[d]});return l.indexOf("[].")>-1&&(l.indexOf("[].#index")>-1&&(l=l.replace(/\$\{([\w]+\[\]\.\#index)\}/g,function(){return i+1})),l.indexOf("[].#value")>-1&&(l=l.replace(/\$\{([\w]+)\[\]\.\#value\}/g,function(a,c){return b[c][i]}))),k&&(l=""),l},clickTrace:function(a,b){var c=this,d=b.attr("trace");if(d&&a.rule){var e=c.getQuery(a.data,a.rule[d],d,b);e&&c.send(e,!1,!!b.attr("trace-lazy"))}},clickStat:function(a){for(var b,c=0;!b&&a&&a.getAttribute&&4>c;)c++,b=a.getAttribute("stat")||a.getAttribute("data-stat"),a=a.parentNode;b&&this.send(b,!1)},initClickTrace:function(b){var c=this,d=c.getStat();d&&(b=b||a.one("body"),j.ie>6?b.delegate("keyup mouseup","[trace]",function(b){var e=b.which;(2===e||b.ctrlKey&&1===e)&&c.clickTrace(d,a.one(b.currentTarget))}):a.UA.firefox&&b.delegate("keyup mouseup","[trace]",function(b){var e=b.which;(2===e||3===e)&&c.clickTrace(d,a.one(b.currentTarget))}),b.delegate("click","[trace]",function(b){c.clickTrace(d,a.one(b.currentTarget))}))},initClickStat:function(){var a=this;i.on(g,"click",function(b){a.clickStat(b.target)})},matchIframe:function(b){var c=SEARCH.config("iframeTrace"),d=0,e=[];if(c[b])return c[b];for(var f in c)d++,e.push(f);return 1===d?c[e[0]]:d>1&&(a.all("iframe").each(function(a){for(var b=a[0].src,f=0;d>f;f++)if(b.indexOf(c[e[f]])>-1){e.splice(f,1);break}}),e.length)?c[e[e.length-1]]:void 0},iframeTrace:function(a,b,c){if(b){var d=a.rule[b],e=a.data;if(c=this.matchIframe(c)){e.iframe_show="iframe_show:"+c;var f=d.replace(/\$\{([\w]+)\}/g,function(a,b){return e[b]});this.send(f,!1)}}},iframeTongjiStat:function(a){var b=this,c=b.getStat(),d=c.rule.sc,e=c.data;if(a=b.matchIframe(a)){e.iframe_show="iframe_show:"+a;var f=d.replace(/\$\{([\w]+)\}/g,function(a,b){return e[b]});f=f.replace("stats_click","f_stats_show"),b.send(f,!0)}},iframeClickStat:function(a){var b=this,c=b.getStat(),d=SEARCH.config("iframeTrace");if(d&&(document.domain="taobao.com"),a)for(var e=0,f=a.length;f>e;e++)"null"==a[e]?b.iframeTrace(c,"sc",""):b.iframeTrace(c,"sc",a[e]);else{var g=location.search,h=g.match(/sc_trace=([\.\w]*)/);if(h){var i=c.rule.sc,j=c.data;j.iframe_show="iframe_show:"+h[1];var k=i.replace(/\$\{([\w]+)\}/g,function(a,b){return j[b]});this.send(k,!1)}}},initSendTrace:function(){var a=this,b=d.getItem("stat");b&&(a.send(b,!1),d.setItem("stat",""))},saveTrace:function(a){d.setItem("stat",a)}}),e},{requires:["srpbase/util/goldsend/","srpbase/tool/statsend/functions","srpbase/util/localstorage/index","core"]}),KISSY.add("srpbase/util/commonform/index",function(a){function b(){var b=this;a.ready(function(){var d=c.query(f,c.get("body")),e="blur";a.each(d,function(a){b.placeholder(a,e)})})}var c=a.require("dom"),d=a.require("event"),e=!(c.get("input")&&"placeholder"in c.get("input")),f=".input-placeholder";return b.prototype={placeholder:function(b,f){if(e){var g=b.getAttribute("placeholder")||b.getAttribute("_default");if(!g)return;d.on(b,"focus",function(){c.removeClass(b,f),a.trim(b.value)===g&&(b.value="")}),d.on(b,"blur",function(){var d=a.trim(b.value);""!==d||!g&&d!==g?c.removeClass(b,f):(c.addClass(b,f),b.value=g)}),d.fire(b,"blur")}else c.removeClass(b,f)},getInputValue:function(b){var c=a.trim(b.value),d=b.getAttribute("placeholder")||b.getAttribute("_default");return c&&d&&c===d?"":c},setInputValue:function(a,b,d){if(d=d||"blur",e){var f=a.getAttribute("placeholder")||a.getAttribute("_default");""===b?(a.value=f,c.addClass(a,d)):(a.value=b,c.removeClass(a,d))}else a.value=b}},new b},{requires:["core"]}),KISSY.add("srpbase/util/goldsend/index",function(a){function b(){}var c={rule:{},data:{}},d=window.SEARCH&&window.SEARCH.config("goldsend_router")||{tongji:{key:"/tongji",sign:"H51884970"},pv:{key:"/search",sign:"H51884969"}};return b.prototype={send:function(a,b){var c;c=b?d.tongji:d.pv,(window.goldlog_queue||(window.goldlog_queue=[])).push({action:"goldlog.record",arguments:[c.key,"",a,c.sign]})},setStat:function(b){a.mix(c.rule,b.rule),a.mix(c.data,b.data)},setData:function(b){a.mix(c.data,b)},setDataWithCB:function(b,d){a.mix(c.data,b),c.data=d.call(this,c.data)},setRule:function(b){a.mix(c.rule,b)},setRuleWithCB:function(b,d){a.mix(c.rule,b),c.rule=d.call(this,c.rule)},getStat:function(){return c}},new b}),KISSY.add("srpbase/util/localstorage/index",function(a){function b(a){var c=this;return c instanceof b?(b.superclass.constructor.call(c,a),void c.initialize()):new b(a)}var c=a.require("json"),d=a.require("base"),e=a.require("ua"),f=!!(e.ie<8),g="IELocalDataStore",h="localstorage-key",i={};return b.ATTRS={param:{}},a.extend(b,d,{initialize:function(){var a=this;f?a._initByUserData():"undefined"!=typeof localStorage&&a._initByLocalStorage(),a._observeParam()},_observeParam:function(){var b=this,d=b._getItem(h),e=b.get("param");d&&(d=c.parse(d),a.isObject(d)&&(i=d,b._synParam(e))),b.on("afterParamChange",function(a){if(i){var c=a.newVal;b._synParam(c)}})},_synParam:function(a){if(a){var b,c=!1;for(var d in i){b=i[d].param;for(var e in b)void 0===a[e]&&(a[e]=""),b[e]!=a[e]&&(c=!0);i[d]={param:b,observe:c}}}},_initByLocalStorage:function(){var a=this;a.oStorage=localStorage},_initByUserData:function(){var a=this,b=document,c=b.createElement("input");c.type="hidden",b.body.appendChild(c),c.addBehavior("#default#userData"),a.oStorage=c},_setItem:function(a,b){var c=this;if(f)try{c.oStorage.setAttribute(a,b),c.oStorage.save(g)}catch(d){}else c.oStorage.setItem(a,b)},_getItem:function(a){var b=this;if(!f)return b.oStorage.getItem(a);try{return b.oStorage.load(g),b.oStorage.getAttribute(a)}catch(c){}},_removeItem:function(a){var b=this;if(f)try{b.oStorage.removeAttribute(a),b.oStorage.save(g)}catch(c){}else b.oStorage.removeItem(a)}}),a.augment(b,{setItem:function(a,b){return this._setItem(a,b)},getItem:function(a){return this._getItem(a)},removeItem:function(a){return this._removeItem(a)},observeStorage:function(b,c){var d,e=this.get("param"),f=i[b],g=!1,h={};f&&(f=f.param);for(var j=c.length;j--;){var k=c[j];d=e[k],h[k]=d?d:"",f?f[k]!==d&&(g=!0):g=!0}i[b]?a.mix(i[b],{param:h,observe:g}):i[b]={param:h,observe:g}},toggleItem:function(b,d){var e=this;if(!b)return a.log("localstorage: \u8c03\u7528\u53c2\u6570\u9519\u8bef"),!1;if(!d){var f=i[b];return!f||f&&!f.observe?c.parse(e._getItem(b)):!1}var f=i[b];return f?f.observe?(e._setItem(b,c.stringify(d)),f.observe=!1,e._setItem(h,c.stringify(i)),void 0):e._getItem(b):d},storageChange:function(a){return i[a]?i[a].observe:!1}}),new b},{requires:["core"]}),KISSY.add("srpbase/util/resizebase/index",function(a){function b(){b.superclass.constructor.apply(this,arguments),this.initialize()}var c=a.require("base"),d=a.require("event"),e=window;return b.ATTRS={},a.extend(b,c,{readyList:[],initialize:function(){var a=this;a.bindUI()},readyResize:function(a,b,c,d,e){if(a){var f=this,g=f.readyList;c=c||f,b&&0===d?b.call(c,a):g.push({el:a,callback:b,context:c,delay:d,observe:e})}},bindUI:function(){var b=this,c=100;a.ready(function(){var f=a.buffer(function(){var d=b.readyList;a.each(d,function(a){var b=a.delay;if(a.el&&a.callback)if(b&&b>c)var d=setTimeout(function(){d=void 0,a.callback.call(a.context,a.el)},b-c);else a.callback.call(a.context,a.el)})},c);d.on(e,"resize",function(){f.stop(),f()})}),d.Target.on("message.layerchange.resize",function(){var c=b.readyList;a.each(c,function(a){a.el&&a.observe&&a.callback.call(a.context,a.el)})})}}),new b},{requires:["core"]}),KISSY.add("srpbase/util/resolver/index",function(a){function b(a){var c=this;return!c instanceof b?new b(a):void 0}var c=a.require("io");return b.prototype={$data:{},urlObjectMap:[],urlMap:{},getUrlObjectMap:function(){return this.urlObjectMap},setUrlObjectMap:function(a){this.urlObjectMap=a},setUrlMap:function(a){this.urlMap=a},getUrlMap:function(){return this.urlMap},getData:function(){return this.$data},setData:function(a,b){this.$data[a]=b},fetchAll:function(b,d,e,f,g){var h=this,i=h.getUrlObjectMap(),j=h._synOpts(b);if(j){for(var k,l=i.length;l--&&(k=i[l],!a.isObject(k)||k.name!=j.name););-1===l&&(g&&(j.options.parse=g),i.push(j),h.setUrlObjectMap(i)),k=j.options;var m={success:function(b){b||"getScript"!==k.type||(b=window[j.name]),a.ready(function(){g!==!1&&(b=k&&k.parse?k.parse.call(h,b,k.promise):h.parse(b,k.promise,!0)),d&&d.call(h,b),f&&h.setData(j.name,b)})},error:function(a){e.call(h,a)}};"getScript"===k.type?a.getScript(k.url+"&"+k.param+"&t="+a.now(),m):(k.url+="&t="+a.now(),c(a.mix(k,m)))}},_synOpts:function(b){function c(a){for(var b,c=a.split(":"),d=c;d--;)if(b=e[c[d]],!b)return"";return b}var d,e=this.getUrlMap();if(a.isString(b)){var f=b.split(":");2===f.length&&(d={name:f[0],options:{url:f[1],type:"get",dataType:"jsonp",param:""}})}else if(a.isObject(b)){var g=b.options;g.url=g.url||c(g.uri),g.type=g.type||"get",g.data=g.param||"",g.param="",g.dataType=g.dataType||"json",g.jsonp=g.jsonp||"callback",d={name:b.name,options:g}}return d},parse:function(b,c,d){function e(b){var e,f,g,i,j,k;for(e=h.length;e--;){if(f=h[e],i=f.substr(0,f.lastIndexOf(".")),j=f.substr(f.lastIndexOf(".")+1),g=b[f].old_data,j=j.split(":"),k=2===j.length?j[1]:j[0],a.isObject(g))g=b[f].new_data;else if(d){var l,m=f.split(".");l=c[m[0]];for(var n=1,o=m.length;o>n;n++)l=l[m[n]];a.isFunction(l)?g=b[f].new_data=l(g,k,b[i].old_data):b[f].new_data=g}else b[f].new_data=g;b[i].new_data||(b[i].new_data={}),b[i].new_data[k]=g}return b[""].new_data}function f(){for(var a=b.length;a--;){i={};for(var c=0,d=h.length;d>c;c++){var f=h[c],g=f.lastIndexOf(".");-1===g&&(i[""]={old_data:b[a]});var k=f.substr(0,g),l=f.substr(g+1);l=l.split(":"),i[f]={};var m=i[k].old_data;m&&(i[f].old_data=m[l[0]])}j[a]=e(i)}}if(c){if(!a.isArray(b)){var g=!0;b=[b]}var h,i,j=[];return h=a.isString(c)?c.split(","):a.isObject(c)?this.preOrderPromise(c):c,f(),g?j[0]:j}},preOrderPromise:function(b,c,d){!b.length&&a.isObject(b)&&(b=[b]),c=c||[],d=d||0;for(var e,f,g=[],h=b.length,i=0;h>i;i++)if(e=b[i],f=d?c[d+i-1]+".":"",a.isObject(e))for(var j in e)c.push(f+j),g.push(e[j]);return g.length?this.preOrderPromise(g,c,d+h):c}},new b},{requires:["core"]}),KISSY.add("srpbase/util/scrollbase/index",function(a){function b(){b.superclass.constructor.apply(this,arguments),this.initialize()}var c=a.require("base"),d=a.require("event"),e=a.require("dom"),f=a.require("ua"),g=window;return b.ATTRS={scrollable:{value:!1}},a.extend(b,c,{readyList:[],initialize:function(){var a=this;a.bindUI()},readyScroll:function(a,b,c,d,e){var f=this,g=f.readyList;c=c||f,b&&0===d?b.call(c,a):g.push({el:a,callback:b,context:c,delay:d,observe:e})},fixed:function(b,c,h,i,j){if(b){c=c||"fixed",h=h||100,i=i||0;var k,l,m=function(a,b){var c=!1,d=e.offset(a),g=e.scrollTop();return c=d.top-g<b?!0:d.top-g===b?d.top<l?!1:!0:!1,f.ie<7&&(g>l?(c=!0,e.css(a,{top:g+b})):(c=!1,e.css(a,{top:""}))),c},n="none"===e.css(b,"display"),o=e.create('<div class="'+a.guid("fixed_holder")+'" style="height: 0;overflow: hidden;"></div>');if(e.insertBefore(o,b),n&&e.css(b,{display:"block",visibility:"hidden"}),l=e.offset(b).top,k=e.height(b),m(b,i)){var p=e.width(b);e.css(o,{height:k}),n&&e.css(b,{visibility:"visible"}),e.show(b),e.addClass(b,c),j?j(b):e.width(b,p)}var q;d.on(g,"scroll",function(){q&&(q.cancel(),q=void 0),q=a.later(function(){if(q.cancel(),q=void 0,m(b,i)){var a=e.width(b);e.css(o,{height:k}),n&&e.css(b,{visibility:"visible"}),e.show(b),e.addClass(b,c),j?j(b):e.width(b,a)}else e.css(o,{height:0}),j?j(b,!0):e.width(b,""),e.removeClass(b,c),n&&e.css(b,{visibility:"hidden"})},h)})}},bindUI:function(){var b=this,c=100;a.ready(function(){var e=a.buffer(function(){var d=b.readyList;a.each(d,function(a){var b=a.delay;if(a.el&&a.callback)if(b&&b>c)var d=setTimeout(function(){d=void 0,a.callback.call(a.context,a.el)},b-c);else a.callback.call(a.context,a.el)})},c);d.on(g,"scroll",function(){e.stop(),e()})}),b.on("afterScrollableChange",function(c){var d=c.newVal;if(d){var e=b.readyList;a.each(e,function(a){a.el&&a.observe&&a.callback.call(a.context,a.el)}),b.set("scrollbase",!1)}})},fireScroll:function(){this.set("scrollbase",!0)}}),new b},{requires:["core"]}),KISSY.add("srpbase/widget/dropdown/index",function(a){function b(){b.superclass.constructor.apply(this,arguments),this.initialize()}var c=a.require("base"),d=a.require("dom"),e=a.require("event"),f=window.document,g=".widget-dropdown-el",h=".dropdown-tgr",i=".dropdown-list",j="li",k="a",l="selected",m="dropdown-hover";return b.ATTRS={el:{},delay:{value:200},eventType:{value:"mouse"},activeType:{value:"single"},activeIndex:{value:0},activeInput:{value:null}},a.extend(b,c,{_activeIndex:"0",input:null,initialize:function(){var a=this;a.get("el")&&(a._synConfig(),a._bindUI())},_synConfig:function(){var a=this,b=a.get("el"),c=a.get("activeIndex"),e=a.get("activeType"),f=a.get("activeInput");d.addClass(b,g),"swap"!==e&&a._selectItem(b,c,e,f);var i=a.get("activeInput");if(i){var j=d.get(h,b),k=b.getAttribute(i.kattr),l=j.getAttribute(i.vattr),m=d.create('<input type="hidden" name="'+k+'" value="'+l+'"/>');d.append(m,b),a.input=m}var n=d.width(b),o=d.get(".dropdown-list",b),p=d.width(o);n>p&&d.width(o,n)},_bindUI:function(){var b=this,c=b.get("el"),g=b.get("eventType"),k=b.get("activeType"),l=b.get("activeInput"),m=d.get(h,c),n=d.get(i,c),o=d.query(j,n);if(a.each(o,function(a,d){e.on(a,"click",function(){b._selectItem(c,d,k,l),b._hideList(n)})}),"click"===g)e.on(m,"click",function(){b._showList(n)}),e.on(f,"click",function(a){b._elemOutFocus(c,a.pageX,a.pageY)&&b._hideList(n)});else{var p,q=b.get("delay");e.on(c,"mouseenter",function(){p=a.later(function(){b._showList(n)},q)}),e.on(c,"mouseleave",function(){p&&(p.cancel(),p=void 0),b._hideList(n)})}},_elemOutFocus:function(a,b,c){var e=d.offset(a);return e.right=e.left+d.width(a),e.bottom=e.top+d.height(a),b>e.left&&b<e.right&&c>e.top&&c<e.bottom?!1:!0},_showList:function(a){d.show(a),d.addClass(a,m)},_hideList:function(a){d.hide(a),d.removeClass(a,m)},_selectItem:function(b,c,e,f){var g,m=this,n=m.input,o=m._activeIndex,p=d.get(h,b),q=d.get(k,p),r=d.get(i,b),s=d.query(j,r),t=s[c],u=d.get(k,t);if(m.fire("beforeSelect",{el:b,trigger:p,items:s,activeIndex:c})!==!1){switch(e){case"single":o!=c&&(q.innerHTML=u.innerHTML,d.removeClass(s[o],l),d.addClass(t,l),m._activeIndex=c.toString());break;case"multi":if(o.indexOf(c)>-1){if(o=o.split(","),o.length>1){var v=a.indexOf(c,o);d.removeClass(t,l),g=q.innerHTML.split(",").splice(v,1),q.innerHTML=g.join(","),o.splice(v,1),m._activeIndex=o.join(",")}}else g=q.innerHTML+","+u.innerHTML,d.addClass(t,l),m._activeIndex+=","+c;break;case"swap":g=q.innerHTML,q.innerHTML=u.innerHTML,u.innerHTML=g,m._activeIndex=c.toString()}if(m.input){var n=m.input,w=f.kattr,x=f.vattr,y=m._activeIndex.split(","),z="",A=[];if(w&&(z=b.getAttribute(w)),x){for(var B=y.length;B--;)A.push(s[y[B]].getAttribute(x));A=A.join(","),"swap"==e&&s[y[0]].setAttribute(x,p.getAttribute(x))}else A=q.innerHTML;p.setAttribute(x,A),n.value=A}m.set("activeIndex",c),m.fire("afterSelect",{el:b,trigger:p,items:s,activeIndex:c})}}}),a.augment(b,{getActiveIndex:function(){return this._activeIndex},getInput:function(){return this.input},getValue:function(){var a=this,b=a.get("activeInput");if(b)return this.input.value;var c=a.get("el"),e=d.get(h,c),f=d.get(k,e);return f.innerHTML},setValue:function(b){var c=this,e=c.get("el"),f=d.get(h,e),g=d.query(j,e),i=c.get("activeType"),l=c.get("activeInput"),m=l.vattr,n=0;if(l&&m){if(f.getAttribute(m)===b)return;a.each(g,function(a,c){return a.getAttribute(m)===b?(n=c,!1):void 0})}else{if(d.get(k,f).innerHTML===b)return;a.each(g,function(a,c){var e=d.get(k,a);return e.innerHTML===b?(n=c,!1):void 0})}c._selectItem(e,n,i,l)},getText:function(){var a=this,b=a.get("el"),c=d.get(h,b),e=d.get(k,c);return e.innerHTML},setText:function(b){var c=this,e=c.get("el"),f=d.get(h,e),g=d.query(j,e),i=c.get("activeType"),l=c.get("activeInput"),m=0;d.get(k,f).innerHTML!==b&&(a.each(g,function(a,c){var e=d.get(k,a);return e.innerHTML===b?(m=c,!1):void 0}),c._selectItem(e,m,i,l))},select:function(a){var b=this,c=b.get("el"),d=b.get("activeType"),e=b.get("activeInput");b._selectItem(c,a,d,e)}}),b},{requires:["core"]}),KISSY.add("srpbase/widget/gridcontent/gridpills/index",function(a,b){function c(){c.superclass.constructor.apply(this,arguments),this.initialize()}var d=a.require("base");return c.ATTRS={el:{}},a.extend(c,d,{initialize:function(){var a=this,c=a.get("el");new b({el:c})}}),c},{requires:["srpbase/widget/gridcontent/temple/index","core"]}),KISSY.add("srpbase/widget/gridcontent/gridpills/tpl",function(){return['<div class="widget-gridcontent-gridpills-el">','<div class="row-n elem-wrapper">',"{{#auctions}}",'<div class="row-l-1 elem-item icon-datalink" nid="{{nid}}">','<div class="elem-item-box">','<div class="elem-pic">','{{#tagName}}<div class="elem-tag {{tagColor}}">','<a href="{{tagUrl}}" >{{tagName}}</a>',"</div>{{/tagName}}",'<div class="elem-pic-box">','<a href="{{url}}" tracenum="{{traceNum}}" trace="{{traceName}}" target="_blank" class="s210" >',"<span>",'<img src="{{img}}" resy-img="true" />',"</span>",'<div class="elem-pic-mask"></div>',"</a>","</div>","</div>",'<div class="elem-attr">','<h5 class="elem-summary">','<a href="{{url}}" tracenum="{{traceNum}}" trace="{{traceName}}" target="_blank" title="{{holder}}">{{{title}}}</a>',"</h5>",'<div class="row-n">','<div class="row-l-1 elem-price">\uffe5{{price}}<em></em></div>','<div class="row-r-1 elem-shipping">{{shipping}}</div>',"</div>",'<div class="row-n">','<div class="row-l-1 elem-dealing" title="{{dealingHolder}}">{{dealing}}</div>','<div class="row-r-1 elem-comment">{{^if comment}}0\u6761\u8bc4\u8bba{{/if}} {{#comment}}<a trace="{{commentTraceName}}" href="" target="_blank" >{{comment}}\u6761\u8bc4\u8bba</a>{{/comment}}</div>',"</div>",'<div class="row-n">','<div class="row-l-1 elem-seller feature-dsi-tgr" data-param="{{srpwwnickParam}}"><a trace="{{srpwwnickTraceName}}" target="_blank" href="{{srpwwnickUrl}}">{{srpwwnick}}</a></div>','<div class="row-l-1">','<span class="J_WangWang" data-nick="{{sellerNick}}" data-display="inline" data-item="{{sellerId}}" data-icon="small" data-encode="true"></span>',"</div>",'<div class="row-r-1 elem-loc">{{loc}}</div>',"</div>","</div>",'<div class="row-n  elem-extra service-box">','<div class="row-l-1 elem-extra-dsr">','<div data-param="{{shoprateParam}}" class="feature-dsr">','<a class="active feature-dsr-tgr clearfix" href="javascript:;" >','<span class="icon-btn-dsr">\u5982\u5b9e\u63cf\u8ff0:</span>','<span class="feature-dsr-num">{{shoprateNum}}</span>','<span class="dropdown-tgr-arrow"></span>',"</a>","</div>","</div>",'<div class="elem-extra-icons service-btns feature-icon">',"{{#serviceIcons}}","{{{.}}}","{{/serviceIcons}}","</div>","</div>","</div>","</div>","{{/auctions}}","</div>","</div>"].join("")}),KISSY.add("srpbase/widget/gridcontent/temple/index",function(a){function b(){b.superclass.constructor.apply(this,arguments),this.initialize()}var c=a.require("base");return b.ATTRS={el:{}},a.extend(b,c,{initialize:function(){this._bindUI()},_bindUI:function(){var b=this,c=b.get("el");c.delegate("mouseenter",".elem-item",function(b){a.one(b.currentTarget).addClass(".elem-item-hover")}),c.delegate("mouseleave",".elem-item",function(b){a.one(b.currentTarget).removeClass(".elem-item-hover")}),c.delegate("mouseenter",".elem-pic",function(b){a.one(b.currentTarget).addClass(".elem-pic-hover")}),c.delegate("mouseleave",".elem-pic",function(b){a.one(b.currentTarget).removeClass(".elem-pic-hover")})}}),b},{requires:["core"]}),KISSY.add("srpbase/widget/headsearch/index",function(a,b,c,d,e){function f(a){var b=document.createElement("a");b.href=a,b.setAttribute("target","_self"),document.body.appendChild(b),b.click()}function g(a){var b=a.one(".search-site-tab");b&&new d({el:b[0],activeType:"swap",activeInput:{kattr:"_key",vattr:"_val"}})}function h(){a.use(["tbc/search-suggest/1.2.3/index","tbc/search-suggest/1.2.3/plugin/history","tbc/search-suggest/1.2.3/plugin/cloud","tbc/search-suggest/1.2.3/plugin/bts","tbc/search-suggest/1.2.3/plugin/history-magic","tbc/search-suggest/1.2.3/plugin/tab","tbc/search-suggest/1.2.3/new_suggest.css"].join(","),function(a,b,c,d,e,f,g){var h,i="http://suggest.taobao.com",j=(new e).getBucket(),k=i+"/sug?k=1&area=c2c&bucketid="+j,m="",n=["history","active","dapei_top","cat","global","list","dapei_bottom","scene","shop","cloud"];location.href.indexOf("debug=test")>-1&&(k="http://suggest.proxy.taobao.org/sug1.php?k=1&area=c2c&bucketid="+j);var o=[new g({node:"#J_SearchTab li"}),new c({limit:10}),new d,new f];h=new b({plugins:o,sugConfig:{sourceUrl:k,node:"#q",resultFormat:m},mods:{sort:n}}),h.on("beforeFocus",function(){var a=h.get("input"),b=l.parent(a,"form"),c=l.parent(a,2),d=l.prev(c,"label");d&&l.css(d,{color:"#ccc"}),b.className="search-panel-focused"}),h.on("beforeBlur",function(){var b=h.get("input"),c=l.parent(b,"form"),d=l.parent(b,2),e=l.prev(d,"label");""===a.trim(h.query)&&e&&(l.show([e]),l.css(e,{color:"#999"})),c.className=""}),location.href.indexOf("debug=test")>-1&&h.on("beforeParse",function(a){if(""!==a.query){var b=a.results;b.tmall=a.query}}),a.one(".search-triggers").on("mouseenter mouseleave",function(a){var b,c=this,d="add";"mouseleave"===a.type&&(d="remove",b=l.query("li",c),l[d+"Class"].call(c,b,"selected"),l.addClass.call(c,b[0],"selected")),l[d+"Class"].call(c,".search-triggers","triggers-hover icon-hover")});var p=a.all("#J_SearchTab li");return p.on("mouseenter",function(){var a=this,b=l.siblings(a);l.addClass(a,"selected"),l.removeClass(b,"selected")}),p.on("click",function(a){var b=this,c=l.parent(b),d=l.children(c)[0];b!==d&&(l.insertBefore(b,d),l.removeClass.call(b,".search-triggers","triggers-hover"),l.addClass.call(b,"#J_TSearchForm","search-panel-focused"),a.halt())}),h})}function i(){i.superclass.constructor.apply(this,arguments),this.initialize()}var j='<div class="more-content">{{#markets}}<dl><dt><a trace="more_market" href="{{href}}" target="_blank">{{text}}</a></dt>{{#subMarkets}}<dd><a trace="more_market" href="{{href}}" target="_blank">{{text}}</a></dd>{{/subMarkets}}</dl>{{/markets}}</div>',k=a.require("base"),l=(a.require("event"),a.require("dom"));return a.config(a.Config.debug?{combine:!1,packages:[{name:"tbc",path:"http://g.assets.daily.taobao.net/tbc/",ignorePackageNameInUri:!0}]}:{combine:!0,packages:[{name:"tbc",path:"http://g.tbcdn.cn/tbc/",ignorePackageNameInUri:!0}]}),i.ATTRS={el:{},params:{},marketUrl:{value:"http://www.taobao.com/go/rgn/vertical/jsonp.php"}},a.extend(i,k,{initialize:function(){var a=this;a._renderUI(),a._bindUI()},_renderUI:function(){var a=this,b=a.get("el"),c=a.get("params");g(b),h(c)},_bindUI:function(){var a=this,b=a.get("el");b.delegate("click",".search-site-link",function(b){b.halt(!0);var d=b.currentTarget,e=d.getAttribute("href"),g=a.get("el"),h=g.one("#q");"javascript:;"!==e&&""!==e&&f(e+"&q="+c.getInputValue(h[0]))}),b.delegate("mouseenter",".more-button",function(b){var c=b.currentTarget,d=l.attr(c,"data-fetched");return d?void l.addClass(c,"icon-hover"):void a._fetchMarket(function(a){var b=l.create(a);l.append(b,c),l.attr(c,"data-fetched","true"),l.addClass(c,"icon-hover")})}),b.delegate("mouseleave",".more-button",function(a){var b=a.currentTarget;l.removeClass(b,"icon-hover")})},_fetchMarket:function(b){var c=this,d=c.get("marketUrl");a.IO({url:d,jsonp:"cb",dataType:"jsonp",complete:function(d){if(!d)return void a.log("\u83b7\u53d6\u5e02\u573a\u6570\u636e\u5931\u8d25!");var f={markets:d},g=new e(j).render(f);b&&b.call(c,g)}})}}),i},{requires:["srpbase/util/goldsend/","srpbase/util/commonform/","srpbase/widget/dropdown/","xtemplate","core"]}),KISSY.add("srpbase/widget/headsearch/tpl",function(){return['<div class="tb-header" >','<div class="tb-logo">','<a class="icon-btn-logo" href="http://www.taobao.com/" target="_top">\u6dd8\u5b9d\u7f51</a>','<div class="more-button">','<div class="more-label"><span>\u66f4\u591a\u5e02\u573a</span><b class="icon-btn-arrow-2-h"></b></div>',"</div>","</div>",'<div class="tb-search" >','<div class="search-box">','<div class="search-triggers">','<ul class="ks-switchable-nav" id="J_SearchTab">',"{{#sitelink}}",'<li class="{{selected}}" ><a class="search-site-link" href="{{href}}" >{{text}}</a></li>',"{{/sitelink}}","</ul>",'<s class="icon-btn-arrow-2-h"></s>',"</div>",'<div class="search-panel search-srp-panel ks-switchable-content">','<form id="J_SearchForm" action="{{action}}" method="get" >',"{{#inputs}}",'<input type="hidden" name="{{name}}" value="{{value}}"/>',"{{/inputs}}",'<div class="search-panel-fields search-srp-panel-fields search-common-panel">','<div class="search-button">','<button class="icon-btn-search" type="submit">\u641c \u7d22</button>',"</div>",'<div class="input-auto">','<input aria-haspopup="true" aria-combobox="list" role="combobox" combobox="off" class="ks-combobox-input" tabindex="0" id="q" value="{{q}}" placeholder="\u8bf7\u8f93\u5165\u8981\u641c\u7d22\u7684\u5185\u5bb9" _default="\u8bf7\u8f93\u5165\u8981\u641c\u7d22\u7684\u5185\u5bb9" lang="zh-CN" x-webkit-speech autocomplete="off" />',"</div>","</div>","</form>","</div>","</div>","</div>","</div>"].join("")}),KISSY.add("srpbase/widget/headsidebar/tpl",function(){return['<div class="widget-headsidebar-el">',"</div>"].join("")}),KISSY.add("srpbase/widget/postcard/account/tpl",function(){return['<div class="widget-postcard-account-el">','<div class="pa-n-x">','<span class="pa-1-x elem-hi">{{hello}}</span>','<span class="pa-1-x"><img class=" elem-avator" src="{{avator}}" /></span>','<span class="pa-1-x elem-username">{{username}}</span>','<span class="pa-1-x elem-desc">{{desc}}</span>',"</div>","</div>"].join("")}),KISSY.add("srpbase/widget/supplement/search/tpl",function(){return['<div class="widget-supplement-search-el">','<form action="{{action}}" method="get" >',"{{#inputs}}",'<input type="hidden" name="{{name}}" value="{{value}}"/>',"{{/inputs}}",'<div class="search-panel-fields search-srp-panel-fields search-common-panel">','<div class="input-auto">','<input accesskey="s" name="{{q}}" maxlength="60" autocomplete="off" value="\u5973\u88c5" id="title" placeholder="\u8bf7\u8f93\u5165\u8981\u641c\u7d22\u7684\u8bcd" x-webkit-speech="" x-webkit-grammar="builtin:translate" lang="zh-CN">',"</div>",'<div class="search-button">','<button class="btn-search" type="submit">\u641c\u7d22</button>',"</div>","</div>","</form>","</div>"].join("")
}),KISSY.add("srpbase/widget/tabpage/index",function(a){function b(b){a.config(a.Config.debug?{combine:!1,packages:[{name:"tbc",path:"http://g.assets.daily.taobao.net/tbc/",ignorePackageNameInUri:!0}]}:{combine:!0,packages:[{name:"tbc",path:"http://g.tbcdn.cn/tbc/",ignorePackageNameInUri:!0}]}),a.use("tbc/mini-login/1.4.2/",function(a,c){function d(){return c.check({type:"l"})}d()||c.show(function(){location.href=b})})}function c(){c.superclass.constructor.apply(this,arguments),this.initialize()}var d=a.require("base"),e=(a.require("node"),".h_tologin");return c.ATTRS={el:{}},a.extend(c,d,{initialize:function(){this._bindUI()},_bindUI:function(){var a=this.get("el");a.delegate("click",e,function(a){a.halt();var c=a.currentTarget.href;c&&-1!==c.indexOf("javascript:")||(c=location.href),a.preventDefault(),b(c)})}}),c},{requires:["core"]}),KISSY.add("srpbase/widget/tabpage/tpl",function(){return['<div class="widget-tabpage-el">','<ul class="elem-nav tab-n clearfix">',"{{#tabs}}",'<li class="tab-n-1 {{actived}}" ><a class="elem-nav-i {{extra}}" href="{{href}}" target="_self" >{{text}}</a></li>',"{{/tabs}}","</ul>","</div>"].join("")});KISSY.add("srpbase/async/activity",function(a){function b(b,c){return a.isString(c)?b[c]:c}var c=a.require("base"),d=a.require("xtemplate");return c.extend({renderCpn:function(){var a,b=this,c=b.get("el"),e=b.get("tpl"),f=b.get("data"),g=b.get("xtpl");g||(g=new d(e),b.set("xtpl",g)),a=g.render(f),c.append(a)},adaptBrixEvent:function(){var c=this,d=c.get("el"),e=c.get("context"),f=c.get("asyncConfig");if(c.constructor.EVENTS){var g=c.constructor.EVENTS;for(var h in g){var i=g[h];for(var j in i){var k=b(this,i[j]);""===h?d.on(j,k,c):d.delegate(j,h,k,c)}}}f&&d.delegate(f.type,f.clsName,function(b){b.preventDefault();var c=a.one(b.currentTarget);e.async(c.attr(f.attrName))},c),d.__isEventInit=!0},removeBrixEvent:function(){var a,c=this,d=c.get("el"),e=(c.get("context"),c.get("asyncConfig"));if(c.constructor.EVENTS){a=c.constructor.EVENTS;for(var f in a){var g=a[f];for(var h in g){var i=b(c,g[h]);""===f?d.detach(h,i,c):d.undelegate(h,f,i,c)}}}e&&d.undelegate(e.type,e.clsName)},emptyEl:function(){this.get("el").html("")},onClose:function(){this.emptyEl()},onStart:function(){},onRender:function(){var a=this,b=a.get("el");a.get("emptyEl")&&a.emptyEl(),a.get("isRendered")||(a.renderCpn(),a.set("isRendered",!0)),b.__isEventInit||a.adaptBrixEvent()},onRendered:function(){}},{ATTRS:{asyncConfig:{value:{clsName:".async-btn",attrName:"href",type:"click"}},eventInit:{value:!1},isRendered:{value:!1},emptyEl:{value:!0}}})},{requires:["node","base","xtemplate"]}),KISSY.add("srpbase/async/context",function(a){var b,c=a.require("base"),d=a.require("srpbase/async/activity"),e=a.require("srpbase/async/datapool"),f=a.require("srpbase/async/url"),g=a.require("srpbase/async/timer");b=c.extend({_contMap:{},_render:null,_datapool:null,_url:null,initContainerMap:function(a){this._contMap=a},setContainer:function(a,b){this._contMap[a]=b},getContainer:function(a){return this._contMap[a]},injectData:function(a,b){this._datapool.injectData(a,b)},fetchData:function(a,b,c){this._datapool.fetchData(a,b,c)},getData:function(a){return this._datapool.getData(a)},setData:function(a,b,c){return this._datapool.setData(a,b,c)},updateUrl:function(a){this._url.updateUrl(a)},trans2i:function(a,b){return this._url.trans2i(a,b)},initHistory:function(a){this._url.initHistory(a)},startTick:function(a,b,c){this._timer.startTick(a,b,c)},activeTick:function(a,b,c){this._timer.activeTick(a,b,c)},registerTaskType:function(a){this._timer.registerTaskType(a)},removeTaskType:function(a){this._timer.removeTaskType(a)},hasTaskType:function(a){this._timer.hasTaskType(a)},endTimer:function(){this._timer.endTimer()},addTask:function(a,b){this._timer.addTask(a,b)},removeTask:function(a){this._timer.removeTask(a)},_contextTime:0,_timePool:[],recordTime:function(a){var b=this,c=(new Date).getTime();b._timePool.push({time:c-b._contextTime,description:a})},renderQueue:function(b,c){var d=this,e=d.get("renderPrepare");d.recordTime("prepare render queue"),e(b,function(b,e){d.recordTime("render begin");var f=b.length;a.each(b,function(b,g){try{d.renderActivity(b,e[b]),d.recordTime("render "+b),g+1==f&&c&&(c(),d.recordTime("render over"))}catch(h){a.log("render "+b+"error.")}})},d.get("cpnRule"))},renderActivity:function(b,c){var e=this,f=e.get("cpnRule"),g=f.js,i=f.tpl,j=e.getContainer(b),k=a.require(b+i),l=e.getData(b),m=a.require(b+g),n=a.one(j),o=this.getActivity(b);if(!n)return void a.log(b+" not has container.");if(!k)return void a.log(b+" not has tpl.");if(!l)return void(o&&o.onClose());if(o||(o=m?new m:new d,this.setActivity(b,o)),c)for(var p in c)o.set(p,c[p]);o.set("context",h),o.set("el",n),o.set("tpl",k),o.set("data",l),o.set("name",b),o.set("isRendered",!1),o.onStart(),o.onRender(),o.onRendered()},_activityPool:{},setActivity:function(a,b){this._activityPool[a]=b},getActivity:function(a){return this._activityPool[a]},async:function(a,b,c,d){this._asyncConfig={href:a,data:c,dataurl:d,callback:b},this.activeTick("async")},clearAsync:function(){this._asyncConfig=null},_asyncConfig:null,_asyncTask:function(){var a=this,b=a._asyncConfig;if(b){a.clearAsync();var c=b.href,d=b.dataurl,e=b.callback,f=b.data;d=d||a.trans2i(c),c&&a.updateUrl(c),a.fetchData(d,f,function(b){a.renderQueue(b,e)})}},runCommand:function(b){var c=this.get("commandPackage");a.each(b,function(b){a.require(c+b).execute()})},setUp:function(){var a=this;a._datapool=new e({context:a}),a._url=new f({context:a}),a._timer=new g({context:a}),a.set("datapool",a._datapool),a.set("url",a._url),a.set("timer",a._timer),a.registerTaskType("async"),a.set("asyncTaskRef",a.addTask(function(){a._asyncTask()},["async"])),a._contextTime=(new Date).getTime()}},{ATTRS:{cpnRule:{value:{js:"/index",tpl:"/tpl",css:"/index.css"}},commandPackage:{value:"components/commands/"},renderPrepare:{value:function(a,b){b(a,{})}}}});var h=new b;return h.setUp(),h},{requires:["base","node","./datapool","./url","./activity","./timer"]}),KISSY.add("srpbase/async/datapool",function(a){var b=a.require("base"),c=a.require("io");return b.extend({_dataPool:{},_updateQueue:[],initDataPool:function(a){this._dataPool=a},fetchData:function(a,b,c){b=b||{};var d=this,e=d.get("proxy");e.fetch(a,b,function(a){d.injectData(a,function(a){c(a)})})},injectData:function(b,c){var d=[],e=this;b=e.get("dataPrepare")(b),a.each(b,function(a,b){d.push(b),e.setData(b,a)}),c(d)},getData:function(a){return this._dataPool[a]},setData:function(a,b){this._dataPool[a]=b}},{ATTRS:{proxy:{value:{fetch:function(a,b,d){a=a.replace(/#.*$/,""),c.get(a,b,function(a){d(a)})}}},dataPrepare:{value:function(a){return a}}}})},{requires:["base","io"]}),KISSY.add("srpbase/async/timer",function(a){function b(){}var c,d=1;return b.prototype={_T:{},_refs:[],_stop:!0,_hT:0,_dHT:100,_slow:0,_dSlow:100,_typeQ:[],_typeM:{},_tick:function(){var a=this,b=a._typeQ,c=b.shift();if(!a._stop){if(c)for(var d=a._T,e=0,f=d[c].length;f>e;e++)d[c][e]();a._hT+=a._slow,a._slow&&a._slow--,setTimeout(function(){a._tick()},a._hT)}},startTick:function(a,b,c){var d=this;d.activeTick(a,b,c)},_isActive:!1,activeTick:function(b,c,d){var e=this,f=e._typeQ,g=1;if(e._stop=!1,!e.hasTaskType(b))return void a.log("not has this type");for(var h=0,i=f.length;i>h;h++)if(f[h]===b){g=0;break}g&&f.push(b),e._dHT=c||e._dHT,e._dSlow=d||e._dSlow,e._hT=e._dHT,e._slow=e._dSlow,e._isActive=!0,setTimeout(function(){e._isActive&&(e._isActive=!1,e._tick())},e._hT)},endTimer:function(){var a=this;a._stop=!0,a._T={}},registerTaskType:function(a){this._typeM[a]=1,this._T[a]=[],this._refs[a]=[]},removeTaskType:function(a){this._typeM[a]=c,this._T[a]=c,this._refs[a]=c},hasTaskType:function(a){return this._typeM[a]},addTask:function(a,b){var c=this,e={};c._refs.push(d);for(var f=0,g=b.length;g>f;f++){var h=b[f];c.hasTaskType(h)&&(c._T[h].push(a),e[h]=d,c._refs[h].push(d++))}return e},removeTask:function(b){var c=this,d=c._refs,e=c._T;a.each(b,function(a,b){for(var c=[],f=[],g=0,h=d[b].length;h>g;g++)d[b][g]!==a&&(c.push(d[b][g]),f.push(e[b][g]));d[b]=c,e[b]=f})}},b}),KISSY.add("srpbase/async/url",function(a){var b=a.require("base"),c=a.require("event"),d=window.history.pushState?window.history:{pushState:function(a,b,c){window.location.href=c}};return b.extend({updateUrl:function(a){d.pushState({url:a},"",a)},trans2i:function(b,c){var d=b;return c=c||this.get("transrule"),a.each(c,function(a,b){var c=!0;d=d.replace(new RegExp("([?&])"+b+"=[^&]*"),function(d,e){return c=!1,e+b+"="+a}),c&&(d=d.replace("?","?"+b+"="+a+"&"))}),d},initHistory:function(a){var b=this.get("context");c.on(window,"popstate",function(c){a?a(c):b.async(c.originalEvent.state.url)})}},{ATTRS:{transrule:{value:{}}}})},{requires:["base","event"]}),KISSY.add("srpbase/com/bottomsearch/index",function(a){var b=a.require("srpbase/async/activity");return b.extend({onRendered:function(){}})},{requires:["srpbase/async/activity"]}),KISSY.add("srpbase/com/bottomsearch/tpl",function(){return'<form action="search" method="get" id="J_minsearch"><input type="hidden" name="initiative_id" value="staobaoz_20120803"><input type="hidden" value="grid" id="style" name="style">{{#if word}}<dl class="supplement-relate"><dt>\u76f8\u5173\u641c\u7d22:</dt><dd>{{#words}}<a href="{{url}}">{{text}}</a>{{/words}}</dd></dl>{{/if}}<div class="search-panel-fields search-srp-panel-fields search-common-panel"><div class="input allWidth"><div class="input-auto"><input accesskey="s" name="q" maxlength="60" autocomplete="off" value="{{q}}" id="title" placeholder="\u8bf7\u8f93\u5165\u8981\u641c\u7d22\u7684\u8bcd" x-webkit-grammar="builtin:translate" lang="zh-CN"></div></div><div class="search-button"><button class="icon-btn-search" type="submit">\u641c\u7d22</button></div></div></form>'}),KISSY.add("srpbase/com/domcls/index",function(a){function b(){}var c=a.require("dom"),d={body:function(b){var d,e=window.document.documentElement,f=e.clientWidth||e.offsetWidth,g=[],h=b.callback;a.each(b.queue,function(a){var b=a.range;f>b[0]&&f<=b[1]?d=a.cls:g.push(a.cls)}),d&&c.addClass(b.el,d),h&&h(d),g.length&&c.removeClass(b.el,g.join(" "))}};return b.prototype={_queue:[],watch:function(b,c){var e=this;c=c||"body",a.isString(c)&&(c=d[c]),e._queue.push({checker:c,config:b})},check:function(){a.each(this._queue,function(a){a.checker(a.config)})}},b},{requires:["dom","event"]}),KISSY.add("srpbase/com/footer/index",function(a){var b=a.require("srpbase/async/activity");return b.extend({onRendered:function(){}})},{requires:["srpbase/async/activity"]}),KISSY.add("srpbase/com/footer/tpl",function(){return'<div class="footer"><div class="footer-hd"><p><a href="//page.1688.com/shtml/about/ali_group1.shtml">\u963f\u91cc\u5df4\u5df4\u96c6\u56e2</a><b>|</b><a href="//www.alibaba.com">\u963f\u91cc\u5df4\u5df4\u56fd\u9645\u7ad9</a><b>|</b><a href="//www.1688.com">\u963f\u91cc\u5df4\u5df4\u4e2d\u56fd\u7ad9</a><b>|</b><a href="//www.aliexpress.com">\u5168\u7403\u901f\u5356\u901a</a><b>|</b><a href="//www.taobao.com">\u6dd8\u5b9d\u7f51</a><b>|</b><a href="//www.tmall.com">\u5929\u732b</a><b>|</b><a href="//ju.taobao.com">\u805a\u5212\u7b97</a><b>|</b><a href="//www.etao.com">\u4e00\u6dd8</a><b>|</b><a href="//www.alimama.com">\u963f\u91cc\u5988\u5988</a><b>|</b><a href="//trip.taobao.com">\u6dd8\u5b9d\u65c5\u884c</a><b>|</b><a href="//www.xiami.com">\u867e\u7c73</a><b>|</b><a href="//www.aliyun.com">\u963f\u91cc\u4e91\u8ba1\u7b97</a><b>|</b><a href="//www.yunos.com">\u4e91OS</a><b>|</b><a href="//www.net.cn">\u4e07\u7f51</a><b>|</b><a href="//www.alipay.com">\u652f\u4ed8\u5b9d</a><b>|</b><a href="//www.laiwang.com/">\u6765\u5f80</a></p></div><div class="footer-bd"><p><a href="//www.taobao.com/about">\u5173\u4e8e\u6dd8\u5b9d</a><a href="//www.taobao.com/about/partners.php">\u5408\u4f5c\u4f19\u4f34</a><a href="//pro.taobao.com">\u8425\u9500\u4e2d\u5fc3</a><a href="mailto:lianzheng@taobao.com" title="lianzheng@taobao.com" target="_self">\u5ec9\u6b63\u4e3e\u62a5</a><a href="//service.taobao.com/support/main/service_route.htm">\u8054\u7cfb\u5ba2\u670d</a><a href="//open.taobao.com">\u5f00\u653e\u5e73\u53f0</a><a href="//www.taobao.com/about/join.php">\u8bda\u5f81\u82f1\u624d</a><a href="//www.taobao.com/about/contact.php">\u8054\u7cfb\u6211\u4eec</a><a href="//www.taobao.com/sitemap.php">\u7f51\u7ad9\u5730\u56fe</a><a href="//www.taobao.com/about/copyright.php">\u6cd5\u5f8b\u58f0\u660e</a><em>&copy; 2014 Taobao.com \u7248\u6743\u6240\u6709</em><span style="color:#fff;">{{hostName}}</span></p><p><span>\u7f51\u7edc\u6587\u5316\u7ecf\u8425\u8bb8\u53ef\u8bc1\uff1a<a href="//img04.taobaocdn.com/tps/i4/T1ysdvXtNeXXcPpEkQ-972-636.jpg">\u6587\u7f51\u6587[2010]040\u53f7</a></span><b>|</b><span>\u589e\u503c\u7535\u4fe1\u4e1a\u52a1\u7ecf\u8425\u8bb8\u53ef\u8bc1\uff1a\u6d59B2-20080224-1</span><b>|</b><span>\u4fe1\u606f\u7f51\u7edc\u4f20\u64ad\u89c6\u542c\u8282\u76ee\u8bb8\u53ef\u8bc1\uff1a1109364\u53f7</span></p></div><div class="footer-ft"><a href="//www.pingpinganan.gov.cn/web/index.aspx?file=index.aspx"><img width="36" height="36" src="//img01.taobaocdn.com/tps/i1/T1FeW3XXNfXXXXXXXX-36-36.gif"></a><a href="//idinfo.zjaic.gov.cn/bscx.do?method=hddoc&id=33018400000067" class="mod mod-a"></a><a href="//idinfo.zjaic.gov.cn/bscx.do?&method=hddoc&id=33018400000067" class="mod mod-b"></a><a href="//www.theclimategroup.org.cn/about/friend" class="mod mod-c"></a><a href="https://ss.cnnic.cn/verifyseal.dll?&sn=2010062300100001357&pa=20100701" class="mod mod-d"></a><a href="//www.ppaaol.com/verifySite.do?id=1051" class="mod mod-e"></a></div><div class="footer-toy"></div></div>'}),KISSY.add("srpbase/com/headsearch/index",function(a,b,c,d,e,f,g,h,i){function j(){var b,h="http://suggest.taobao.com",i=h+"/sug?k=1&area=c2c",j="",k=["history","active","dapei_top","cat","global","list","dapei_bottom","scene","shop","cloud"],m=[new g({node:"#J_SearchTab li"}),new d({limit:10}),new e,new f];b=new c({plugins:m,sugConfig:{sourceUrl:i,node:"#q",resultFormat:j},mods:{sort:k}}),b.on("beforeFocus",function(){var a=b.get("input"),c=l.parent(a,"form"),d=l.parent(a,2),e=l.prev(d,"label");e&&l.css(e,{color:"#ccc"}),c.className="search-panel-focused"}),b.on("beforeBlur",function(){var c=b.get("input"),d=l.parent(c,"form"),e=l.parent(c,2),f=l.prev(e,"label");""===a.trim(b.query)&&f&&(l.show([f]),l.css(f,{color:"#999"})),d.className=""}),location.href.indexOf("debug=test")>-1&&b.on("beforeParse",function(a){if(""!==a.query){var b=a.results;b.tmall=a.query}}),a.one(".search-triggers").on("mouseenter mouseleave",function(a){var b,c=this,d="add";"mouseleave"===a.type&&(d="remove",b=l.query("li",c),l[d+"Class"].call(c,b,"selected"),l.addClass.call(c,b[0],"selected")),l[d+"Class"].call(c,".search-triggers","triggers-hover")});var n=a.all("#J_SearchTab li");return n.on("mouseenter",function(){var a=this,b=l.siblings(a);l.addClass(a,"selected"),l.removeClass(b,"selected")}),n.on("click",function(a){var b=this,c=l.parent(b),d=l.children(c)[0];b!==d&&(l.insertBefore(b,d),l.removeClass.call(b,".search-triggers","triggers-hover"),l.addClass.call(b,"#J_TSearchForm","search-panel-focused"),a.halt())}),b}function k(){k.superclass.constructor.apply(this,arguments)}var l=a.DOM;return k.ATTRS={marketUrl:{value:"http://www.taobao.com/go/rgn/vertical/jsonp.php"}},k.EVENTS={".more-button":{mouseenter:function(a){var b=this,c=a.currentTarget,d=l.attr(c,"data-fetched");return d?void l.addClass(c,"icon-hover"):void b._fetchMarket(function(a){var b=l.create(a);l.append(b,c),l.attr(c,"data-fetched","true"),l.addClass(c,"icon-hover")})},mouseleave:function(a){var b=a.currentTarget;l.removeClass(b,"icon-hover")}}},a.extend(k,b,{onRendered:function(){j()},_fetchMarket:function(b){var c=this,d=c.get("marketUrl");a.IO({url:d,jsonp:"cb",dataType:"jsonp",complete:function(d){if(!d)return void a.log("\u83b7\u53d6\u5e02\u573a\u6570\u636e\u5931\u8d25!");var e={markets:d},f=new h(i).render(e);b&&b.call(c,f)}})}}),k},{requires:["srpbase/async/activity","tbc/search-suggest/1.2.5/index","tbc/search-suggest/1.2.5/plugin/history","tbc/search-suggest/1.2.5/plugin/cloud","tbc/search-suggest/1.2.5/plugin/history-magic","tbc/search-suggest/1.2.5/plugin/tab","xtemplate","./market","core","tbc/search-suggest/1.2.5/new_suggest.css"]}),KISSY.add("srpbase/com/headsearch/market",function(){return'<div class="more-content">{{#markets}}<dl><dt><a trace="more_market" href="{{href}}" target="_blank">{{text}}</a></dt>{{#subMarkets}}<dd><a trace="more_market" href="{{href}}" target="_blank">{{text}}</a></dd>{{/subMarkets}}</dl>{{/markets}}</div>'}),KISSY.add("srpbase/com/headsearch/tpl",function(){return'<div class="tb-logo"><a class="icon-btn-logo" href="http://www.taobao.com/" target="_top">\u6dd8\u5b9d\u7f51</a><div class="more-button"><div class="more-label icon-tag"><span>\u66f4\u591a\u5e02\u573a</span><b class="icon-btn-arrow-2-h"></b></div></div></div><div class="tb-search"><div class="search-box"><div class="search-triggers"><ul class="ks-switchable-nav" id="J_SearchTab"><li class="selected" data-action="{{@if baobeiAction}}{{baobeiAction}}{{else}}/search{{/if}}" data-defaultpage="nogo" data-searchtype="item"><a class="search-site-link" href="">\u5b9d\u8d1d</a></li><li class="" data-action="{{@if shopAction}}{{shopAction}}{{else}}http://shopsearch.taobao.com/search{{/if}}" data-searchtype="shop"><a class="search-site-link" href="/search?app=shopsearch">\u5e97\u94fa</a></li></ul><s class="icon-btn-arrow-2-h"></s></div><div class="search-panel search-srp-panel ks-switchable-content"><form id="J_SearchForm" action="{{@if baobeiAction}}{{baobeiAction}}{{else}}/search{{/if}}" method="get" data-defaultpage="nogo">{{#each inputHidden}}<input type="hidden" name="{{name}}" value="{{value}}">{{/each}}<div class="search-panel-fields search-srp-panel-fields search-common-panel"><div class="search-button"><button class="icon-btn-search" type="submit">\u641c \u7d22</button></div><div class="input-auto" id="combobox"><input aria-haspopup="true"aria-combobox="list" role="combobox" combobox="off"class="ks-combobox-input" tabindex="0"id="q" name="q"value="{{q}}"placeholder="\u8bf7\u8f93\u5165\u8981\u641c\u7d22\u7684\u8bcd"_default="\u8bf7\u8f93\u5165\u8981\u641c\u7d22\u7684\u8bcd" lang="zh-CN"autocomplete="off"/></div></div></form></div></div>{{{tmsdata}}}</div>'}),KISSY.add("srpbase/com/ie67adapter/index",function(a){var b;return b=a.UA.ie&&a.UA.ie<8?{_parentPool:[],highZIndex:function(a,b){b=b||4;for(var c=1;b>=c;c++){var d=a.parent(c);d.css("zIndex",1e4),this._parentPool.push(d)}},emptyPool:function(){a.each(this._parentPool,function(a){a.css("zIndex","")})}}:{highZIndex:function(){},emptyPool:function(){}}},{requires:["node"]}),KISSY.add("srpbase/com/imgmagic/index",function(a){function b(a){return{width:a.width,height:a.height}}function c(){}var d,e,f,g,h=a.require("dom"),i={setRegion:function(a,b,c,h){d=a,e=b,f=c,g=h},checkPoint:function(a,b){return a>d&&e>a&&b>f&&g>b?!0:!1}};return c.prototype={_imgs:[],addImgs:function(a){this._imgs=this._imgs.concat(a)},check:function(){var b=h.scrollLeft(),c=h.scrollTop(),d=h.viewportWidth()+b,e=h.viewportHeight()+c,f=[],g=this;i.setRegion(b,d,c,e),a.each(g._imgs,function(b){var c,d=b.img;try{c=d.offset(),i.checkPoint(c.left,c.top)?g.loadImg(b):f.push(b)}catch(e){a.log("Can not get img offset")}}),g._imgs=f},loadImg:function(a){var c=this,d=a.src,e=a.errorSrc,f=new Image;f.onload=function(){var e=b(f);a.oWidth=e.width,a.oHeight=e.height;var g=a.callback;g?g(a):c.setImg2Size(a),a.img.attr("src",d)},e&&e.length&&(f.onerror=function(){var b=e.shift();b&&(a.src=b,c.loadImg(a))}),f.src=d},setImg2Size:function(a){var b,c,d=a.img,e=a.oWidth,f=a.oHeight,g=Math.max(e,f),h=a.toWidth||g,i=a.toHeight||g;c=h-e>>1,b=i-f>>1,c=c/h*100,b=b/h*100,c===b?d.css("height","100%"):c>b?(d.css("height","100%"),d.css("padding","0 "+c+"%")):(d.css("width","100%"),d.css("padding",b+"% 0"))}},c},{requires:["dom"]}),KISSY.add("srpbase/com/sidebar/advice2visual/canvastool",function(){"use strict";function a(a,b,c){var d,e=a.runtimeStyle&&a.runtimeStyle[b],f=a.style;return!/^-?[0-9]+\.?[0-9]*(?:px)?$/i.test(c)&&/^-?\d/.test(c)&&(d=f.left,e&&(a.runtimeStyle.left=a.currentStyle.left),f.left="fontSize"===b?"1em":c||0,c=f.pixelLeft+"px",f.left=d,e&&(a.runtimeStyle.left=e)),/^(thin|medium|thick)$/i.test(c)?c:Math.round(parseFloat(c))+"px"}function b(a){return parseInt(a,10)}function c(b,c,d,e){if(b=(b||"").split(","),b=b[e||0]||b[0]||"auto",b=j.Util.trimText(b).split(" "),"backgroundSize"!==d||b[0]&&!b[0].match(/cover|contain|auto/)){if(b[0]=-1===b[0].indexOf("%")?a(c,d+"X",b[0]):b[0],void 0===b[1]){if("backgroundSize"===d)return b[1]="auto",b;b[1]=b[0]}b[1]=-1===b[1].indexOf("%")?a(c,d+"Y",b[1]):b[1]}else;return b}function d(a,b,c,d,e,f){var g,h,i,k,l=j.Util.getCSS(b,a,e);if(1===l.length&&(k=l[0],l=[],l[0]=k,l[1]=k),-1!==l[0].toString().indexOf("%"))i=parseFloat(l[0])/100,h=c.width*i,"backgroundSize"!==a&&(h-=(f||d).width*i);else if("backgroundSize"===a)if("auto"===l[0])h=d.width;else if(/contain|cover/.test(l[0])){var m=j.Util.resizeBounds(d.width,d.height,c.width,c.height,l[0]);h=m.width,g=m.height}else h=parseInt(l[0],10);else h=parseInt(l[0],10);return"auto"===l[1]?g=h/d.width*d.height:-1!==l[1].toString().indexOf("%")?(i=parseFloat(l[1])/100,g=c.height*i,"backgroundSize"!==a&&(g-=(f||d).height*i)):g=parseInt(l[1],10),[h,g]}function e(a,b){var c=[];return{storage:c,width:a,height:b,clip:function(){c.push({type:"function",name:"clip",arguments:arguments})},translate:function(){c.push({type:"function",name:"translate",arguments:arguments})},fill:function(){c.push({type:"function",name:"fill",arguments:arguments})},save:function(){c.push({type:"function",name:"save",arguments:arguments})},restore:function(){c.push({type:"function",name:"restore",arguments:arguments})},fillRect:function(){c.push({type:"function",name:"fillRect",arguments:arguments})},createPattern:function(){c.push({type:"function",name:"createPattern",arguments:arguments})},drawShape:function(){var a=[];return c.push({type:"function",name:"drawShape",arguments:a}),{moveTo:function(){a.push({name:"moveTo",arguments:arguments})},lineTo:function(){a.push({name:"lineTo",arguments:arguments})},arcTo:function(){a.push({name:"arcTo",arguments:arguments})},bezierCurveTo:function(){a.push({name:"bezierCurveTo",arguments:arguments})},quadraticCurveTo:function(){a.push({name:"quadraticCurveTo",arguments:arguments})}}},drawImage:function(){c.push({type:"function",name:"drawImage",arguments:arguments})},fillText:function(){c.push({type:"function",name:"fillText",arguments:arguments})},setVariable:function(a,b){return c.push({type:"variable",name:a,arguments:b}),b}}}function f(a){return{zindex:a,children:[]}}var g,h,i="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",j={};return j.Util={},j.Util.log=function(a){j.logging&&window.console&&window.console.log&&window.console.log(a)},j.Util.trimText=function(a){return function(b){return a?a.apply(b):((b||"")+"").replace(/^\s+|\s+$/g,"")}}(String.prototype.trim),j.Util.asFloat=function(a){return parseFloat(a)},function(){var a=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,b=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g;j.Util.parseTextShadows=function(c){if(!c||"none"===c)return[];for(var d=c.match(a),e=[],f=0;d&&f<d.length;f++){var g=d[f].match(b);e.push({color:g[0],offsetX:g[1]?g[1].replace("px",""):0,offsetY:g[2]?g[2].replace("px",""):0,blur:g[3]?g[3].replace("px",""):0})}return e}}(),j.Util.parseBackgroundImage=function(a){var b,c,d,e,f,g,h,i,j=" \r\n	",k=[],l=0,m=0,n=function(){b&&('"'===c.substr(0,1)&&(c=c.substr(1,c.length-2)),c&&i.push(c),"-"===b.substr(0,1)&&(e=b.indexOf("-",1)+1)>0&&(d=b.substr(0,e),b=b.substr(e)),k.push({prefix:d,method:b.toLowerCase(),value:f,args:i})),i=[],b=d=c=f=""};n();for(var o=0,p=a.length;p>o;o++)if(g=a[o],!(0===l&&j.indexOf(g)>-1)){switch(g){case'"':h?h===g&&(h=null):h=g;break;case"(":if(h)break;if(0===l){l=1,f+=g;continue}m++;break;case")":if(h)break;if(1===l){if(0===m){l=0,f+=g,n();continue}m--}break;case",":if(h)break;if(0===l){n();continue}if(1===l&&0===m&&!b.match(/^url$/i)){i.push(c),c="",f+=g;continue}}f+=g,0===l?b+=g:c+=g}return n(),k},j.Util.Bounds=function(a){var b,c={};return a.getBoundingClientRect&&(b=a.getBoundingClientRect(),c.top=b.top,c.bottom=b.bottom||b.top+b.height,c.left=b.left,c.width=a.offsetWidth,c.height=a.offsetHeight),c},j.Util.OffsetBounds=function(a){var b=a.offsetParent?j.Util.OffsetBounds(a.offsetParent):{top:0,left:0};return{top:a.offsetTop+b.top,bottom:a.offsetTop+a.offsetHeight+b.top,left:a.offsetLeft+b.left,width:a.offsetWidth,height:a.offsetHeight}},j.Util.getCSS=function(a,d,e){g!==a&&(h=document.defaultView.getComputedStyle(a,null));var f=h[d];if(/^background(Size|Position)$/.test(d))return c(f,a,d,e);if(/border(Top|Bottom)(Left|Right)Radius/.test(d)){var i=f.split(" ");return i.length<=1&&(i[1]=i[0]),i.map(b)}return f},j.Util.resizeBounds=function(a,b,c,d,e){var f,g,h=c/d,i=a/b;return e&&"auto"!==e?i>h^"contain"===e?(g=d,f=d*i):(f=c,g=c/i):(f=c,g=d),{width:f,height:g}},j.Util.BackgroundPosition=function(a,b,c,e,f){var g=d("backgroundPosition",a,b,c,e,f);return{left:g[0],top:g[1]}},j.Util.BackgroundSize=function(a,b,c,e){var f=d("backgroundSize",a,b,c,e);return{width:f[0],height:f[1]}},j.Util.Extend=function(a,b){for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},j.Util.Children=function(a){var b,c="IFRAME"===a.nodeName.toUpperCase();try{if("J_advice2visual"===a.getAttribute("id")||c&&"search-iframe"!==a.className)return[];b=a.nodeName&&c?a.contentDocument||a.contentWindow.document:function(a){var b=[];return null!==a&&!function(a,b){var c=a.length,d=0;if("number"==typeof b.length)for(var e=b.length;e>d;d++)a[c++]=b[d];else for(;void 0!==b[d];)a[c++]=b[d++];return a.length=c,a}(b,a),b}(a.childNodes)}catch(d){j.Util.log("html2canvas.Util.Children failed with exception: "+d.message),b=[]}return b},j.Util.isTransparent=function(a){return"transparent"===a||"rgba(0, 0, 0, 0)"===a},j.Util.Font=function(){var a={};return function(b,c,d){if(void 0!==a[b+"-"+c])return a[b+"-"+c];var e,f,g,h=d.createElement("div"),i=d.createElement("img"),j=d.createElement("span"),k="Hidden Text";return h.style.visibility="hidden",h.style.fontFamily=b,h.style.fontSize=c,h.style.margin=0,h.style.padding=0,d.body.appendChild(h),i.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=",i.width=1,i.height=1,i.style.margin=0,i.style.padding=0,i.style.verticalAlign="baseline",j.style.fontFamily=b,j.style.fontSize=c,j.style.margin=0,j.style.padding=0,j.appendChild(d.createTextNode(k)),h.appendChild(j),h.appendChild(i),e=i.offsetTop-j.offsetTop+1,h.removeChild(j),h.appendChild(d.createTextNode(k)),h.style.lineHeight="normal",i.style.verticalAlign="super",f=i.offsetTop-h.offsetTop+1,g={baseline:e,lineWidth:1,middle:f},a[b+"-"+c]=g,d.body.removeChild(h),g}}(),function(){function a(a){return function(c){try{a.addColorStop(c.stop,c.color)}catch(d){b.log(["failed to add color stop: ",d,"; tried to add: ",c])}}}var b=j.Util,c={};j.Generate=c;var d=[/^(-webkit-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-gradient)\((linear|radial),\s((?:\d{1,3}%?)\s(?:\d{1,3}%?),\s(?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)\-]+)\)$/,/^(-moz-linear-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-moz-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s?([a-z\-]*)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/];c.parseGradient=function(a,b){var c,e,f,g,h,i,j,k,l,m,n,o,p=d.length;for(e=0;p>e&&!(f=a.match(d[e]));e+=1);if(f)switch(f[1]){case"-webkit-linear-gradient":case"-o-linear-gradient":if(c={type:"linear",x0:null,y0:null,x1:null,y1:null,colorStops:[]},h=f[2].match(/\w+/g))for(i=h.length,e=0;i>e;e+=1)switch(h[e]){case"top":c.y0=0,c.y1=b.height;break;case"right":c.x0=b.width,c.x1=0;break;case"bottom":c.y0=b.height,c.y1=0;break;case"left":c.x0=0,c.x1=b.width}if(null===c.x0&&null===c.x1&&(c.x0=c.x1=b.width/2),null===c.y0&&null===c.y1&&(c.y0=c.y1=b.height/2),h=f[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(i=h.length,j=1/Math.max(i-1,1),e=0;i>e;e+=1)k=h[e].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),k[2]?(g=parseFloat(k[2]),g/="%"===k[3]?100:b.width):g=e*j,c.colorStops.push({color:k[1],stop:g});break;case"-webkit-gradient":if(c={type:"radial"===f[2]?"circle":f[2],x0:0,y0:0,x1:0,y1:0,colorStops:[]},h=f[3].match(/(\d{1,3})%?\s(\d{1,3})%?,\s(\d{1,3})%?\s(\d{1,3})%?/),h&&(c.x0=h[1]*b.width/100,c.y0=h[2]*b.height/100,c.x1=h[3]*b.width/100,c.y1=h[4]*b.height/100),h=f[4].match(/((?:from|to|color-stop)\((?:[0-9\.]+,\s)?(?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)\))+/g))for(i=h.length,e=0;i>e;e+=1)k=h[e].match(/(from|to|color-stop)\(([0-9\.]+)?(?:,\s)?((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\)/),g=parseFloat(k[2]),"from"===k[1]&&(g=0),"to"===k[1]&&(g=1),c.colorStops.push({color:k[3],stop:g});break;case"-moz-linear-gradient":if(c={type:"linear",x0:0,y0:0,x1:0,y1:0,colorStops:[]},h=f[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),h&&(c.x0=h[1]*b.width/100,c.y0=h[2]*b.height/100,c.x1=b.width-c.x0,c.y1=b.height-c.y0),h=f[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}%)?)+/g))for(i=h.length,j=1/Math.max(i-1,1),e=0;i>e;e+=1)k=h[e].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%)?/),k[2]?(g=parseFloat(k[2]),k[3]&&(g/=100)):g=e*j,c.colorStops.push({color:k[1],stop:g});break;case"-webkit-radial-gradient":case"-moz-radial-gradient":case"-o-radial-gradient":if(c={type:"circle",x0:0,y0:0,x1:b.width,y1:b.height,cx:0,cy:0,rx:0,ry:0,colorStops:[]},h=f[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),h&&(c.cx=h[1]*b.width/100,c.cy=h[2]*b.height/100),h=f[3].match(/\w+/),k=f[4].match(/[a-z\-]*/),h&&k)switch(k[0]){case"farthest-corner":case"cover":case"":l=Math.sqrt(Math.pow(c.cx,2)+Math.pow(c.cy,2)),m=Math.sqrt(Math.pow(c.cx,2)+Math.pow(c.y1-c.cy,2)),n=Math.sqrt(Math.pow(c.x1-c.cx,2)+Math.pow(c.y1-c.cy,2)),o=Math.sqrt(Math.pow(c.x1-c.cx,2)+Math.pow(c.cy,2)),c.rx=c.ry=Math.max(l,m,n,o);break;case"closest-corner":l=Math.sqrt(Math.pow(c.cx,2)+Math.pow(c.cy,2)),m=Math.sqrt(Math.pow(c.cx,2)+Math.pow(c.y1-c.cy,2)),n=Math.sqrt(Math.pow(c.x1-c.cx,2)+Math.pow(c.y1-c.cy,2)),o=Math.sqrt(Math.pow(c.x1-c.cx,2)+Math.pow(c.cy,2)),c.rx=c.ry=Math.min(l,m,n,o);break;case"farthest-side":"circle"===h[0]?c.rx=c.ry=Math.max(c.cx,c.cy,c.x1-c.cx,c.y1-c.cy):(c.type=h[0],c.rx=Math.max(c.cx,c.x1-c.cx),c.ry=Math.max(c.cy,c.y1-c.cy));break;case"closest-side":case"contain":"circle"===h[0]?c.rx=c.ry=Math.min(c.cx,c.cy,c.x1-c.cx,c.y1-c.cy):(c.type=h[0],c.rx=Math.min(c.cx,c.x1-c.cx),c.ry=Math.min(c.cy,c.y1-c.cy))}if(h=f[5].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(i=h.length,j=1/Math.max(i-1,1),e=0;i>e;e+=1)k=h[e].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),k[2]?(g=parseFloat(k[2]),g/="%"===k[3]?100:b.width):g=e*j,c.colorStops.push({color:k[1],stop:g})}return c},c.Gradient=function(b,c){if(0!==c.width&&0!==c.height){var d,e,f=document.createElement("canvas"),g=f.getContext("2d");if(f.width=c.width,f.height=c.height,d=j.Generate.parseGradient(b,c))switch(d.type){case"linear":e=g.createLinearGradient(d.x0,d.y0,d.x1,d.y1),d.colorStops.forEach(a(e)),g.fillStyle=e,g.fillRect(0,0,c.width,c.height);break;case"circle":e=g.createRadialGradient(d.cx,d.cy,0,d.cx,d.cy,d.rx),d.colorStops.forEach(a(e)),g.fillStyle=e,g.fillRect(0,0,c.width,c.height);break;case"ellipse":var h=document.createElement("canvas"),i=h.getContext("2d"),k=Math.max(d.rx,d.ry),l=2*k;h.width=h.height=l,e=i.createRadialGradient(d.rx,d.ry,0,d.rx,d.ry,k),d.colorStops.forEach(a(e)),i.fillStyle=e,i.fillRect(0,0,l,l),g.fillStyle=d.colorStops[d.colorStops.length-1].color,g.fillRect(0,0,f.width,f.height),g.drawImage(h,d.cx-d.rx,d.cy-d.ry,2*d.rx,2*d.ry)}return f}},c.ListAlpha=function(a){var b,c="";do b=a%26,c=String.fromCharCode(b+64)+c,a/=26;while(26*a>26);return c},c.ListRoman=function(a){var b,c=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],d=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],e="",f=c.length;if(0>=a||a>=4e3)return a;for(b=0;f>b;b+=1)for(;a>=d[b];)a-=d[b],e+=c[b];return e}}(),j.Parse=function(a,b){function c(){return Math.max(Math.max(hb.body.scrollWidth,hb.documentElement.scrollWidth),Math.max(hb.body.offsetWidth,hb.documentElement.offsetWidth),Math.max(hb.body.clientWidth,hb.documentElement.clientWidth))}function d(){return Math.max(Math.max(hb.body.scrollHeight,hb.documentElement.scrollHeight),Math.max(hb.body.offsetHeight,hb.documentElement.offsetHeight),Math.max(hb.body.clientHeight,hb.documentElement.clientHeight))}function g(a,b){var c=parseInt(mb(a,b),10);return isNaN(c)?0:c}function h(a,b,c,d,e,f){"transparent"!==f&&(a.setVariable("fillStyle",f),a.fillRect(b,c,d,e),gb+=1)
}function i(a,b,c){return a.length>0?b+c.toUpperCase():void 0}function k(a,b){switch(b){case"lowercase":return a.toLowerCase();case"capitalize":return a.replace(/(^|\s|:|-|\(|\))([a-z])/g,i);case"uppercase":return a.toUpperCase();default:return a}}function l(a){return/^(normal|none|0px)$/.test(a)}function m(a,b,c,d){null!==a&&ib.trimText(a).length>0&&(d.fillText(a,b,c),gb+=1)}function n(a,b,c,d){var e=!1,f=mb(b,"fontWeight"),g=mb(b,"fontFamily"),h=mb(b,"fontSize"),i=ib.parseTextShadows(mb(b,"textShadow"));switch(parseInt(f,10)){case 401:f="bold";break;case 400:f="normal"}return a.setVariable("fillStyle",d),a.setVariable("font",[mb(b,"fontStyle"),mb(b,"fontVariant"),f,h,g].join(" ")),a.setVariable("textAlign",e?"right":"left"),i.length&&(a.setVariable("shadowColor",i[0].color),a.setVariable("shadowOffsetX",i[0].offsetX),a.setVariable("shadowOffsetY",i[0].offsetY),a.setVariable("shadowBlur",i[0].blur)),"none"!==c?ib.Font(g,h,hb):void 0}function o(a,b,c,d,e){switch(b){case"underline":h(a,c.left,Math.round(c.top+d.baseline+d.lineWidth),c.width,1,e);break;case"overline":h(a,c.left,Math.round(c.top),c.width,1,e);break;case"line-through":h(a,c.left,Math.ceil(c.top+d.middle+d.lineWidth),c.width,1,e)}}function p(a,b,c,d,e){var f;if(jb.rangeBounds&&!e)("none"!==c||0!==ib.trimText(b).length)&&(f=q(b,a.node,a.textOffset)),a.textOffset+=b.length;else if(a.node&&"string"==typeof a.node.nodeValue){var g=d?a.node.splitText(b.length):null;f=r(a.node,e),a.node=g}return f}function q(a,b,c){var d=hb.createRange();return d.setStart(b,c),d.setEnd(b,c+a.length),d.getBoundingClientRect()}function r(a,b){var c=a.parentNode,d=hb.createElement("wrapper"),e=a.cloneNode(!0);d.appendChild(a.cloneNode(!0)),c.replaceChild(d,a);var f=b?ib.OffsetBounds(d):ib.Bounds(d);return c.replaceChild(e,d),f}function s(a,c,d){var e,f,g=d.ctx,h=mb(a,"color"),i=mb(a,"textDecoration"),j=mb(a,"textAlign"),q={node:c,textOffset:0};ib.trimText(c.nodeValue).length>0&&(c.nodeValue=k(c.nodeValue,mb(a,"textTransform")),j=j.replace(["-webkit-auto"],["auto"]),f=c.nodeValue.split(!b.letterRendering&&/^(left|right|justify|auto)$/.test(j)&&l(mb(a,"letterSpacing"))?/(\b| )/:""),e=n(g,a,i,h),b.chinese&&f.forEach(function(a,b){/.*[\u4E00-\u9FA5].*$/.test(a)&&(a=a.split(""),a.unshift(b,1),f.splice.apply(f,a))}),f.forEach(function(a,b){var c=p(q,a,i,b<f.length-1,d.transform.matrix);c&&(m(a,c.left,c.bottom,g),o(g,i,c,e,h))}))}function t(a,b){var c,d,e=hb.createElement("boundelement");return e.style.display="inline",c=a.style.listStyleType,a.style.listStyleType="none",e.appendChild(hb.createTextNode(b)),a.insertBefore(e,a.firstChild),d=ib.Bounds(e),a.removeChild(e),a.style.listStyleType=c,d}function u(a){var b=-1,c=1,d=a.parentNode.childNodes;if(a.parentNode){for(;d[++b]!==a;)1===d[b].nodeType&&c++;return c}return-1}function v(a,b){var c,d=u(a);switch(b){case"decimal":c=d;break;case"decimal-leading-zero":c=1===d.toString().length?d="0"+d.toString():d.toString();break;case"upper-roman":c=j.Generate.ListRoman(d);break;case"lower-roman":c=j.Generate.ListRoman(d).toLowerCase();break;case"lower-alpha":c=j.Generate.ListAlpha(d).toLowerCase();break;case"upper-alpha":c=j.Generate.ListAlpha(d)}return c+". "}function w(a,b,c){var d,e,f,g=b.ctx,h=mb(a,"listStyleType");if(/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(h)){if(e=v(a,h),f=t(a,e),n(g,a,"none",mb(a,"color")),"inside"!==mb(a,"listStylePosition"))return;g.setVariable("textAlign","left"),d=c.left,m(e,d,f.bottom,g)}}function x(b){var c=a[b];return c&&c.succeeded===!0?c.img:!1}function y(a,b){var c=Math.max(a.left,b.left),d=Math.max(a.top,b.top),e=Math.min(a.left+a.width,b.left+b.width),f=Math.min(a.top+a.height,b.top+b.height);return{left:c,top:d,width:e-c,height:f-d}}function z(a,b,c){var d,e="static"!==b.cssPosition,g=e?mb(a,"zIndex"):"auto",h=mb(a,"opacity"),i="none"!==mb(a,"cssFloat");b.zIndex=d=f(g),d.isPositioned=e,d.isFloated=i,d.opacity=h,d.ownStacking="auto"!==g||1>h,c&&c.zIndex.children.push(b)}function A(a,b,c,d,e){var f=g(b,"paddingLeft"),h=g(b,"paddingTop"),i=g(b,"paddingRight"),j=g(b,"paddingBottom");M(a,c,0,0,c.width,c.height,d.left+f+e[3].width,d.top+h+e[0].width,d.width-(e[1].width+e[3].width+f+i),d.height-(e[0].width+e[2].width+h+j))}function B(a){return["Top","Right","Bottom","Left"].map(function(b){return{width:g(a,"border"+b+"Width"),color:mb(a,"border"+b+"Color")}})}function C(a){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(b){return mb(a,"border"+b+"Radius")})}function D(a,b,c,d){var e=function(a,b,c){return{x:a.x+(b.x-a.x)*c,y:a.y+(b.y-a.y)*c}};return{start:a,startControl:b,endControl:c,end:d,subdivide:function(f){var g=e(a,b,f),h=e(b,c,f),i=e(c,d,f),j=e(g,h,f),k=e(h,i,f),l=e(j,k,f);return[D(a,g,j,l),D(l,k,i,d)]},curveTo:function(a){a.push(["bezierCurve",b.x,b.y,c.x,c.y,d.x,d.y])},curveToReversed:function(d){d.push(["bezierCurve",c.x,c.y,b.x,b.y,a.x,a.y])}}}function E(a,b,c,d,e,f,g){b[0]>0||b[1]>0?(a.push(["line",d[0].start.x,d[0].start.y]),d[0].curveTo(a),d[1].curveTo(a)):a.push(["line",f,g]),(c[0]>0||c[1]>0)&&a.push(["line",e[0].start.x,e[0].start.y])}function F(a,b,c,d,e,f,g){var h=[];return b[0]>0||b[1]>0?(h.push(["line",d[1].start.x,d[1].start.y]),d[1].curveTo(h)):h.push(["line",a.c1[0],a.c1[1]]),c[0]>0||c[1]>0?(h.push(["line",f[0].start.x,f[0].start.y]),f[0].curveTo(h),h.push(["line",g[0].end.x,g[0].end.y]),g[0].curveToReversed(h)):(h.push(["line",a.c2[0],a.c2[1]]),h.push(["line",a.c3[0],a.c3[1]])),b[0]>0||b[1]>0?(h.push(["line",e[1].end.x,e[1].end.y]),e[1].curveToReversed(h)):h.push(["line",a.c4[0],a.c4[1]]),h}function G(a,b,c){var d=a.left,e=a.top,f=a.width,g=a.height,h=b[0][0],i=b[0][1],j=b[1][0],k=b[1][1],l=b[2][0],m=b[2][1],n=b[3][0],o=b[3][1],p=f-j,q=g-m,r=f-l,s=g-o;return{topLeftOuter:pb(d,e,h,i).topLeft.subdivide(.5),topLeftInner:pb(d+c[3].width,e+c[0].width,Math.max(0,h-c[3].width),Math.max(0,i-c[0].width)).topLeft.subdivide(.5),topRightOuter:pb(d+p,e,j,k).topRight.subdivide(.5),topRightInner:pb(d+Math.min(p,f+c[3].width),e+c[0].width,p>f+c[3].width?0:j-c[3].width,k-c[0].width).topRight.subdivide(.5),bottomRightOuter:pb(d+r,e+q,l,m).bottomRight.subdivide(.5),bottomRightInner:pb(d+Math.min(r,f+c[3].width),e+Math.min(q,g+c[0].width),Math.max(0,l-c[1].width),Math.max(0,m-c[2].width)).bottomRight.subdivide(.5),bottomLeftOuter:pb(d,e+s,n,o).bottomLeft.subdivide(.5),bottomLeftInner:pb(d+c[3].width,e+s,Math.max(0,n-c[3].width),Math.max(0,o-c[2].width)).bottomLeft.subdivide(.5)}}function H(a,b,c,d,e){var f=mb(a,"backgroundClip"),g=[];switch(f){case"content-box":case"padding-box":E(g,d[0],d[1],b.topLeftInner,b.topRightInner,e.left+c[3].width,e.top+c[0].width),E(g,d[1],d[2],b.topRightInner,b.bottomRightInner,e.left+e.width-c[1].width,e.top+c[0].width),E(g,d[2],d[3],b.bottomRightInner,b.bottomLeftInner,e.left+e.width-c[1].width,e.top+e.height-c[2].width),E(g,d[3],d[0],b.bottomLeftInner,b.topLeftInner,e.left+c[3].width,e.top+e.height-c[2].width);break;default:E(g,d[0],d[1],b.topLeftOuter,b.topRightOuter,e.left,e.top),E(g,d[1],d[2],b.topRightOuter,b.bottomRightOuter,e.left+e.width,e.top),E(g,d[2],d[3],b.bottomRightOuter,b.bottomLeftOuter,e.left+e.width,e.top+e.height),E(g,d[3],d[0],b.bottomLeftOuter,b.topLeftOuter,e.left,e.top+e.height)}return g}function I(a,b,c){var d,e,f,g,h,i,j=b.left,k=b.top,l=b.width,m=b.height,n=C(a),o=G(b,n,c),p={clip:H(a,o,c,n,b),borders:[]};for(d=0;4>d;d++)if(c[d].width>0){switch(e=j,f=k,g=l,h=m-c[2].width,d){case 0:h=c[0].width,i=F({c1:[e,f],c2:[e+g,f],c3:[e+g-c[1].width,f+h],c4:[e+c[3].width,f+h]},n[0],n[1],o.topLeftOuter,o.topLeftInner,o.topRightOuter,o.topRightInner);break;case 1:e=j+l-c[1].width,g=c[1].width,i=F({c1:[e+g,f],c2:[e+g,f+h+c[2].width],c3:[e,f+h],c4:[e,f+c[0].width]},n[1],n[2],o.topRightOuter,o.topRightInner,o.bottomRightOuter,o.bottomRightInner);break;case 2:f=f+m-c[2].width,h=c[2].width,i=F({c1:[e+g,f+h],c2:[e,f+h],c3:[e+c[3].width,f],c4:[e+g-c[3].width,f]},n[2],n[3],o.bottomRightOuter,o.bottomRightInner,o.bottomLeftOuter,o.bottomLeftInner);break;case 3:g=c[3].width,i=F({c1:[e,f+h+c[2].width],c2:[e,f],c3:[e+g,f+c[0].width],c4:[e+g,f+h]},n[3],n[0],o.bottomLeftOuter,o.bottomLeftInner,o.topLeftOuter,o.topLeftInner)}p.borders.push({args:i,color:c[d].color})}return p}function J(a,b){var c=a.drawShape();return b.forEach(function(a,b){c[0===b?"moveTo":a[0]+"To"].apply(null,a.slice(1))}),c}function K(a,b,c){"transparent"!==c&&(a.setVariable("fillStyle",c),J(a,b),a.fill(),gb+=1)}function L(a,b,c){var d,e,f=hb.createElement("valuewrap"),g=["lineHeight","textAlign","fontFamily","color","fontSize","paddingLeft","paddingTop","width","height","border","borderLeftWidth","borderTopWidth"];g.forEach(function(b){try{f.style[b]=mb(a,b)}catch(c){ib.log("html2canvas: Parse: Exception caught in renderFormValue: "+c.message)}}),f.style.borderColor="black",f.style.borderStyle="solid",f.style.display="block",f.style.position="absolute",(/^(submit|reset|button|text|password)$/.test(a.type)||"SELECT"===a.nodeName)&&(f.style.lineHeight=mb(a,"height")),f.style.top=b.top+"px",f.style.left=b.left+"px",d="SELECT"===a.nodeName?(a.options[a.selectedIndex]||0).text:a.value,d||(d=a.placeholder),e=hb.createTextNode(d),f.appendChild(e),lb.appendChild(f),s(a,e,c),lb.removeChild(f)}function M(a){a.drawImage.apply(a,Array.prototype.slice.call(arguments,1)),gb+=1}function N(a,b){var c=window.getComputedStyle(a,b);if(c&&c.content&&"none"!==c.content&&"-moz-alt-content"!==c.content&&"none"!==c.display){var d=c.content+"",e=d.substr(0,1);e===d.substr(d.length-1)&&e.match(/'|"/)&&(d=d.substr(1,d.length-2));var f="url"===d.substr(0,3),g=document.createElement(f?"img":"span");return g.className=nb+"-before "+nb+"-after",Object.keys(c).filter(O).forEach(function(a){try{g.style[a]=c[a]}catch(b){ib.log(["Tried to assign readonly property ",a,"Error:",b])}}),f?g.src=ib.parseBackgroundImage(d)[0].args[0]:g.innerHTML=d,g}}function O(a){return isNaN(window.parseInt(a,10))}function P(a,b){var c=N(a,":before"),d=N(a,":after");(c||d)&&(c&&(a.className+=" "+nb+"-before",a.parentNode.insertBefore(c,a),cb(c,b,!0),a.parentNode.removeChild(c),a.className=a.className.replace(nb+"-before","").trim()),d&&(a.className+=" "+nb+"-after",a.appendChild(d),cb(d,b,!0),a.removeChild(d),a.className=a.className.replace(nb+"-after","").trim()))}function Q(a,b,c,d){var e=Math.round(d.left+c.left),f=Math.round(d.top+c.top);a.createPattern(b),a.translate(e,f),a.fill(),a.translate(-e,-f)}function R(a,b,c,d,e,f,g,h){var i=[];i.push(["line",Math.round(e),Math.round(f)]),i.push(["line",Math.round(e+g),Math.round(f)]),i.push(["line",Math.round(e+g),Math.round(h+f)]),i.push(["line",Math.round(e),Math.round(h+f)]),J(a,i),a.save(),a.clip(),Q(a,b,c,d),a.restore()}function S(a,b,c){h(a,b.left,b.top,b.width,b.height,c)}function T(a,b,c,d,e){var f=ib.BackgroundSize(a,b,d,e),g=ib.BackgroundPosition(a,b,d,e,f),h=mb(a,"backgroundRepeat").split(",").map(ib.trimText);switch(d=V(d,f),h=h[e]||h[0]){case"repeat-x":R(c,d,g,b,b.left,b.top+g.top,99999,d.height);break;case"repeat-y":R(c,d,g,b,b.left+g.left,b.top,d.width,99999);break;case"no-repeat":R(c,d,g,b,b.left+g.left,b.top+g.top,d.width,d.height);break;default:Q(c,d,g,{top:b.top,left:b.left,width:d.width,height:d.height})}}function U(a,b,c){for(var d,e=mb(a,"backgroundImage"),f=ib.parseBackgroundImage(e),g=f.length;g--;)if(e=f[g],e.args&&0!==e.args.length){var h="url"===e.method?e.args[0]:e.value;d=x(h),d?T(a,b,c,d,g):ib.log("html2canvas: Error loading background:",e)}}function V(a,b){if(a.width===b.width&&a.height===b.height)return a;var c,d=hb.createElement("canvas");return d.width=b.width,d.height=b.height,c=d.getContext("2d"),M(c,a,0,0,a.width,a.height,0,0,b.width,b.height),d}function W(a,b,c){return a.setVariable("globalAlpha",mb(b,"opacity")*(c?c.opacity:1))}function X(a){return a.replace("px","")}function Y(a){var b=mb(a,"transform")||mb(a,"-webkit-transform")||mb(a,"-moz-transform")||mb(a,"-ms-transform")||mb(a,"-o-transform"),c=mb(a,"transform-origin")||mb(a,"-webkit-transform-origin")||mb(a,"-moz-transform-origin")||mb(a,"-ms-transform-origin")||mb(a,"-o-transform-origin")||"0px 0px";c=c.split(" ").map(X).map(ib.asFloat);var d;if(b&&"none"!==b){var e=b.match(qb);if(e)switch(e[1]){case"matrix":d=e[2].split(",").map(ib.trimText).map(ib.asFloat)}}return{origin:c,matrix:d}}function Z(a,f,g,h){var i=e(f?g.width:c(),f?g.height:d()),j={ctx:i,opacity:W(i,a,f),cssPosition:mb(a,"position"),borders:B(a),transform:h,clip:f&&f.clip?ib.Extend({},f.clip):null};return z(a,j,f),b.useOverflow===!0&&/(hidden|scroll|auto)/.test(mb(a,"overflow"))===!0&&/(BODY)/i.test(a.nodeName)===!1&&(j.clip=j.clip?y(j.clip,g):g),j}function $(a,b,c){var d={left:b.left+a[3].width,top:b.top+a[0].width,width:b.width-(a[1].width+a[3].width),height:b.height-(a[0].width+a[2].width)};return c&&(d=y(d,c)),d}function _(a,b){var c=b.matrix?ib.OffsetBounds(a):ib.Bounds(a);return b.origin[0]+=c.left,b.origin[1]+=c.top,c}function ab(a,b,c,d){var e,f=Y(a,b),g=_(a,f),h=Z(a,b,g,f),i=h.borders,j=h.ctx,k=$(i,g,h.clip),l=I(a,g,i),m=kb.test(a.nodeName)?"#efefef":mb(a,"backgroundColor");switch(J(j,l.clip),j.save(),j.clip(),k.height>0&&k.width>0&&!d?(S(j,g,m),U(a,k,j)):d&&(h.backgroundColor=m),j.restore(),l.borders.forEach(function(a){K(j,a.args,a.color)}),c||P(a,h),a.nodeName){case"IMG":(e=x(a.getAttribute("src")))?A(j,a,e,g,i):ib.log("html2canvas: Error loading <img>:"+a.getAttribute("src"));break;case"INPUT":/^(text|url|email|submit|button|reset)$/.test(a.type)&&(a.value||a.placeholder||"").length>0&&L(a,g,h);break;case"TEXTAREA":(a.value||a.placeholder||"").length>0&&L(a,g,h);break;case"SELECT":(a.options||a.placeholder||"").length>0&&L(a,g,h);break;case"LI":w(a,h,k);break;case"CANVAS":A(j,a,a,g,i)}return h}function bb(a){return"none"!==mb(a,"display")&&"hidden"!==mb(a,"visibility")&&!a.hasAttribute("data-html2canvas-ignore")}function cb(a,b,c){bb(a)&&(b=ab(a,b,c,!1)||b,kb.test(a.nodeName)||db(a,b,c))}function db(a,b,c){ib.Children(a).forEach(function(d){d.nodeType===d.ELEMENT_NODE?cb(d,b,c):d.nodeType===d.TEXT_NODE&&s(a,d,b)})}function eb(){var a=mb(document.documentElement,"backgroundColor"),b=ib.isTransparent(a)&&fb===document.body,c=ab(fb,null,!1,b);return db(fb,c),b&&(a=c.backgroundColor),lb.removeChild(ob),{backgroundColor:a,stack:c}}window.scroll(0,0);var fb=void 0===b.elements?document.body:b.elements[0],gb=0,hb=fb.ownerDocument,ib=j.Util,jb=ib.Support(b,hb),kb=new RegExp("("+b.ignoreElements+")"),lb=hb.body,mb=ib.getCSS,nb="___html2canvas___pseudoelement",ob=hb.createElement("style");ob.innerHTML="."+nb+'-before:before { content: "" !important; display: none !important; }.'+nb+'-after:after { content: "" !important; display: none !important; }',lb.appendChild(ob),a=a||{};var pb=function(a){return function(b,c,d,e){var f=d*a,g=e*a,h=b+d,i=c+e;return{topLeft:D({x:b,y:i},{x:b,y:i-g},{x:h-f,y:c},{x:h,y:c}),topRight:D({x:b,y:c},{x:b+f,y:c},{x:h,y:i-g},{x:h,y:i}),bottomRight:D({x:h,y:c},{x:h,y:c+g},{x:b+f,y:i},{x:b,y:i}),bottomLeft:D({x:h,y:i},{x:h-f,y:i},{x:b,y:c+g},{x:b,y:c})}}}(4*((Math.sqrt(2)-1)/3)),qb=/(matrix)\((.+)\)/;return eb()},j.Preload=function(a){function b(){p.log("html2canvas: start: images: "+o.numLoaded+" / "+o.numTotal+" (failed: "+o.numFailed+")"),!o.firstRun&&o.numLoaded>=o.numTotal&&(p.log("Finished loading images: # "+o.numTotal+" (failed: "+o.numFailed+")"),"function"==typeof a.complete&&a.complete(o))}function c(a,b){var c=window.getComputedStyle(a,b),d=c.content;"url"===d.substr(0,3)&&l.loadImage(j.Util.parseBackgroundImage(d)[0].args[0]),g(c.backgroundImage,a)}function d(a){c(a,":before"),c(a,":after")}function e(a,c){var d=j.Generate.Gradient(a,c);void 0!==d&&(o[a]={img:d,succeeded:!0},o.numTotal++,o.numLoaded++,b())}function f(a){return a&&a.method&&a.args&&a.args.length>0}function g(a,b){var c;j.Util.parseBackgroundImage(a).filter(f).forEach(function(a){"url"===a.method?l.loadImage(a.args[0]):a.method.match(/\-?gradient$/)&&(void 0===c&&(c=j.Util.Bounds(b)),e(a.value,c))})}function h(a){var b=!1;try{p.Children(a).forEach(h)}catch(c){}try{b=a.nodeType}catch(e){b=!1,p.log("html2canvas: failed to access some element's nodeType - Exception: "+e.message)}if(1===b||void 0===b){d(a);try{g(p.getCSS(a,"backgroundImage"),a)}catch(c){p.log("html2canvas: failed to get background-image - Exception: "+c.message)}g(a)}}{var k,l,m,n,o={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:!1},p=j.Util,q=a.elements[0]||document.body,r=q.ownerDocument,s=q.getElementsByTagName("img"),t=s.length,u=r.createElement("a");!function(a){return void 0!==a.crossOrigin}(new Image)}for(u.href=window.location.href,k=u.protocol+u.host,l={loadImage:function(a){return a&&void 0===o[a]?void(o[a]={img:i}):void 0},cleanupDOM:function(c){var d,e;if(!o.cleanupDone){p.log(c&&"string"==typeof c?"html2canvas: Cleanup because: "+c:"html2canvas: Cleanup after timeout: "+a.timeout+" ms.");for(e in o)if(o.hasOwnProperty(e)&&(d=o[e],"object"==typeof d&&d.callbackname&&void 0===d.succeeded)){window[d.callbackname]=void 0;try{delete window[d.callbackname]}catch(f){}d.script&&d.script.parentNode&&(d.script.setAttribute("src","about:blank"),d.script.parentNode.removeChild(d.script)),o.numLoaded++,o.numFailed++,p.log("html2canvas: Cleaned up failed img: '"+e+"' Steps: "+o.numLoaded+" / "+o.numTotal)}void 0!==window.stop?window.stop():void 0!==document.execCommand&&document.execCommand("Stop",!1),void 0!==document.close&&document.close(),o.cleanupDone=!0,c&&"string"==typeof c||b()}},renderingDone:function(){n&&window.clearTimeout(n)}},a.timeout>0&&(n=window.setTimeout(l.cleanupDOM,a.timeout)),p.log("html2canvas: Preload starts: finding background-images"),o.firstRun=!0,h(q),p.log("html2canvas: Preload: Finding images"),m=0;t>m;m+=1)l.loadImage(s[m].getAttribute("src"));return o.firstRun=!1,p.log("html2canvas: Preload: Done."),o.numTotal===o.numLoaded&&b(),l},j.Renderer=function(a,b){function c(a){function b(a){Object.keys(a).sort().forEach(function(c){var e=[],f=[],g=[],h=[];a[c].forEach(function(a){a.node.zIndex.isPositioned||a.node.zIndex.opacity<1?g.push(a):a.node.zIndex.isFloated?f.push(a):e.push(a)}),function i(a){a.forEach(function(a){h.push(a),a.children&&i(a.children)})}(e.concat(f,g)),h.forEach(function(a){a.context?b(a.context):d.push(a.node)})})}var c,d=[];return c=function(a){function b(a,c,d){var e="auto"===c.zIndex.zindex?0:Number(c.zIndex.zindex),f=a,g=c.zIndex.isPositioned,h=c.zIndex.isFloated,i={node:c},j=d;c.zIndex.ownStacking?(f=i.context={"!":[{node:c,children:[]}]},j=void 0):(g||h)&&(j=i.children=[]),0===e&&d?d.push(i):(a[e]||(a[e]=[]),a[e].push(i)),c.zIndex.children.forEach(function(a){b(f,a,j)})}var c={};return b(c,a),c}(a),b(c),d}function d(a){var c;if("string"==typeof b.renderer&&void 0!==j.Renderer[a])c=j.Renderer[a](b);else{if("function"!=typeof a)throw new Error("Unknown renderer");c=a(b)}if("function"!=typeof c)throw new Error("Invalid renderer defined");return c}return d(b.renderer)(a,b,document,c(a.stack),j)},j.Util.Support=function(a,b){function c(){var a=new Image,c=b.createElement("canvas"),d=void 0===c.getContext?!1:c.getContext("2d");if(d===!1)return!1;c.width=c.height=10,a.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'>","<foreignObject width='10' height='10'>","<div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>","sup","</div>","</foreignObject>","</svg>"].join("");try{d.drawImage(a,0,0),c.toDataURL()}catch(e){return!1}return j.Util.log("html2canvas: Parse: SVG powered rendering available"),!0}function d(){var a,c,d,e,f=!1;return b.createRange&&(a=b.createRange(),a.getBoundingClientRect&&(c=b.createElement("boundtest"),c.style.height="123px",c.style.display="block",b.body.appendChild(c),a.selectNode(c),d=a.getBoundingClientRect(),e=d.height,123===e&&(f=!0),b.body.removeChild(c))),f}return{rangeBounds:d(),svgRendering:a.svgRendering&&c()}},window.html2canvas=function(a,b){a=a.length?a:[a];var c,d,e={logging:!1,elements:a,background:"#fff",proxy:null,timeout:0,useCORS:!1,allowTaint:!1,svgRendering:!1,ignoreElements:"IFRAME|OBJECT|PARAM",useOverflow:!0,letterRendering:!1,chinese:!1,width:null,height:null,taintTest:!0,renderer:"Canvas"};return e=j.Util.Extend(b,e),j.logging=e.logging,e.complete=function(a){("function"!=typeof e.onpreloaded||e.onpreloaded(a)!==!1)&&(c=j.Parse(a,e),("function"!=typeof e.onparsed||e.onparsed(c)!==!1)&&(d=j.Renderer(c,e),"function"==typeof e.onrendered&&e.onrendered(d)))},window.setTimeout(function(){j.Preload(e)},0),{render:function(a,b){return j.Renderer(a,j.Util.Extend(b,e))},parse:function(a,b){return j.Parse(a,j.Util.Extend(b,e))},preload:function(a){return j.Preload(j.Util.Extend(a,e))},log:j.Util.log}},window.html2canvas.log=j.Util.log,window.html2canvas.Renderer={Canvas:void 0},j.Renderer.Canvas=function(a){function b(a,b){a.beginPath(),b.forEach(function(b){a[b.name].apply(a,b.arguments)}),a.closePath()}function c(a){if(-1===f.indexOf(a.arguments[0].src)){h.drawImage(a.arguments[0],0,0);try{h.getImageData(0,0,1,1)}catch(b){return g=e.createElement("canvas"),h=g.getContext("2d"),!1}f.push(a.arguments[0].src)}return!0}function d(d,e){switch(e.type){case"variable":d[e.name]=e.arguments;break;case"function":switch(e.name){case"createPattern":if(e.arguments[0].width>0&&e.arguments[0].height>0)try{d.fillStyle=d.createPattern(e.arguments[0],"repeat")}catch(f){i.log("html2canvas: Renderer: Error creating pattern",f.message)}break;case"drawShape":b(d,e.arguments);break;case"drawImage":e.arguments[8]>0&&e.arguments[7]>0&&(!a.taintTest||a.taintTest&&c(e))&&d.drawImage.apply(d,e.arguments);break;default:d[e.name].apply(d,e.arguments)}}}a=a||{};var e=document,f=[],g=document.createElement("canvas"),h=g.getContext("2d"),i=j.Util,k=a.canvas||e.createElement("canvas");return function(a,b,c,e,f){var g,h,j,l=k.getContext("2d"),m=a.stack;return k.width=k.style.width=b.width||m.ctx.width,k.height=k.style.height=b.height||m.ctx.height,j=l.fillStyle,l.fillStyle=i.isTransparent(m.backgroundColor)&&void 0!==b.background?b.background:a.backgroundColor,l.fillRect(0,0,k.width,k.height),l.fillStyle=j,e.forEach(function(a){l.textBaseline="bottom",l.save(),a.transform.matrix&&(l.translate(a.transform.origin[0],a.transform.origin[1]),l.transform.apply(l,a.transform.matrix),l.translate(-a.transform.origin[0],-a.transform.origin[1])),a.clip&&(l.beginPath(),l.rect(a.clip.left,a.clip.top,a.clip.width,a.clip.height),l.clip()),a.ctx.storage&&a.ctx.storage.forEach(function(a){d(l,a)}),l.restore()}),i.log("html2canvas: Renderer: Canvas renderer done - returning canvas obj"),1===b.elements.length&&"object"==typeof b.elements[0]&&"BODY"!==b.elements[0].nodeName?(h=f.Util.Bounds(b.elements[0]),g=c.createElement("canvas"),g.width=Math.ceil(h.width),g.height=Math.ceil(h.height),l=g.getContext("2d"),l.drawImage(k,h.left,h.top,h.width,h.height,0,0,h.width,h.height),k=null,g):k}},window.html2canvas}),KISSY.add("srpbase/com/sidebar/advice2visual/index",function(a,b,c,d){function e(){return!0}function f(a,c){b.show({type:"l"},function(){a.call(c)})}function g(b){for(var c,d={backgroundColor:"#fff2e6",borderColor:"#f80",outlineColor:"#fc1"},e={backgroundColor:"",borderColor:"",outlineColor:""},f=0;600>f;f+=130)a.later(function(){c=c==e?d:e,b.css(c)},f)}function h(a){var b=u.width,c=u.height;v.save();try{v.clearRect(0,0,b,c),v.fillStyle="rgba(102, 102, 102, 0.5)",v.fillRect(0,0,b,c),v.save();try{a&&j(a)}finally{v.restore()}}finally{v.restore()}return a}function i(a){return a.width<0&&(a.width=Math.abs(a.width),a.left=a.left-a.width||0),a.height<0&&(a.height=Math.abs(a.height),a.top=a.top-a.height||0),a}function j(a){v.save();try{k(a)}finally{v.restore()}v.save();try{l(a)}finally{v.restore()}}function k(a){return v.fillStyle="black",v.globalAlpha=1,v.fillRect(a.left,a.top,a.width,a.height),a}function l(a){v.clearRect(a.left+3,a.top+3,a.width-6,a.height-6)}function m(a,b){return u=document.createElement("canvas"),v=u.getContext("2d"),u.width=b.width(),u.height=b.height(),v.globalCompositeOperation="source-over",v.fillStyle="rgba(102, 102, 102, 0.5)",v.fillRect(0,0,u.width,u.height),a.append(u),u}function n(a){return a[0].done}function o(a,b){var c;b?c=b[0]._id:(c=p(),b=q(c,a)),N[c]=a,n(b)||(r(b),b[0].done=!0)}function p(){return a.guid("J_snapdiv")}function q(a,b){var c,d="left:"+b.left+"px; top:"+b.top+"px",e="width: "+(b.width-6)+"px; height: "+(b.height-6)+"px;";return c=new y('<div class="'+O+'" style="'+d+'"><div  id="'+a+'" class="'+P+'" style="'+e+'"></div></div>'),w.append(c),c[0]._id=a,c}function r(a){var b=new y('<div class="'+Q+'"><a href="javascript:;"  class="normal-btn '+R+'"><span></span>\u53d6\u6d88</a><a href="javascript:;" class="normal-btn '+S+'"><span></span>\u786e\u5b9a</a></div>');a.append(b)}function s(b){for(var c=0,e=b.length;e>c;c++){var f=b[c].split(",");N[p()]={left:parseInt(f[0]),top:parseInt(f[1]),width:parseInt(f[2]),height:parseInt(f[3])}}var g=new y(d).appendTo(z),i=g.one(I),j=g.one(H),k=g.one(J),l=g.one(A),n=g.one(L);i.hide(),k.hide(),l.hide(),n.height(z.height()),n.width("100%"),a.later(function(){m(j,n),h(),g.css("visibility","visible")},1e3)}function t(b){t.superclass.constructor.apply(this,arguments),a.isArray(b)&&s(b)}var u,v,w,x=(a.require("io"),a.Base),y=a.Node,z=a.one("body"),A=".modal-dialog",B=".modal-dialog-el",C=".modal-close-btn",D=".advice-alert",E=".modal-confirm-btn",F=".modal-sign-btn",G=".modal-submit-btn",H=".advice-canvas",I=".advice2visual-mask",J=".advice-operate",K=".advice-ground",L=".advice-snapshot",M=".cursor-img",N={},O="snapdiv",P="snapdiv-block",Q="snap-btns",R="snapdiv-cancel",S="snapdiv-submit";t.ATTRS={sourceUrl:{}};var T=0,U=1;return a.extend(t,x,{container:null,point:[],bound:null,startDraw:!1,operate:T,viewsource:!1,init:function(){var a=this;e()?(a._renderUI(),a._bindUI()):f(function(){a._renderUI(),a._bindUI()},a)},render:function(){this.openDialog()},_renderUI:function(){var b,c,e,f,g=this;g.container=b=new y(d).appendTo(z),c=b.one(I),c.height(z.height()),f=b.one(H),e=b.one(L),e.height(z.height()),e.width("100%"),w=b.one(K),a.UA.ie?b.addClass("advice2visual-ie"):m(f,e);var h=setTimeout(function(){b.css("visibility","visible"),c.hide(),clearTimeout(h)},10);g.operate=T},_buildAdvice:function(a,b){var c=this;switch(c.operate){case U:o(a,b)}},_drawAdvice:function(a){switch(this.operate){case U:a=h(a)}return a},_bindUI:function(){var a=this,b=a.container,c=b.one(A),d=b.one(J);a._bindModal(c),a._bindOperate(d),a._bindGround(w)},_bindModal:function(b){var d=this,e=(d.get("sourceUrl"),d.container),f=b.one(B),h=b.one(C),i=b.one(G),j=b.one(D),k=b.one("textarea"),l=e.one(I),m=e.one(L),n=j.one(E);h.on("click",function(){d.closeDialog()}),i.on("click",function(){var b=e.one(".advice-img-box").hasClass("display-none"),d=k.attr("_default"),h=a.trim(k.val());if(b&&(""==h||h==d))return void g(k);h==d&&(h=""),l.show(),m.hide(),i.attr("disabled",!0),window.onscroll=function(){return!1},i.removeAttr("disabled"),window.onscroll=function(){return!0};var n=window.givenByFE.global,o=e.one("form")[0];o.userid.value=encodeURIComponent(n.tnk)||unescape(decodeURIComponent(KISSY.Cookie.get("_nk_")||"").replace(/\\u/g,"%u")),o.bucket_id.value=n.bucketid,o.fromurl.value=location.href,o.query.value=n.q,o.content.value=h;var p;for(var q in N){p=N[q];break}if(N={},p){var r=z.one("#page"),s=r.clone(!0);s.prependTo(e.one(".advice2visual-page")),s.css({width:r.width(),height:r.height(),paddingTop:"46px",paddingLeft:r.css("paddingLeft"),paddingRight:r.css("paddingRight")}),new y('<div class="advice-tips">\u6b63\u5728\u751f\u6210\u56fe\u7247\uff0c\u8bf7\u7a0d\u7b49\u3002\u3002\u3002</div>').prependTo(f.one(".advice-img-box")),setTimeout(function(){c(s[0],{onrendered:function(a){f.hide(),j.show(),s.remove();var b=a.getContext("2d");b.drawImage(u,0,0,u.width,u.height,0,0,u.width,u.height),o.page_html.value=a.toDataURL("image/png"),o.submit()}})},10)}else f.hide(),j.show(),o.page_html.value="",o.submit()}),n.on("click",function(){e.remove()});var o=k.attr("_default");k.val(o),k.addClass("blur"),k.on("focus",function(){var b=a.trim(k.val());k.removeClass("blur"),b===o&&k.val("")}),k.on("blur",function(){var b=a.trim(k.val());""===b&&(k.val(o),k.addClass("blur"))});var p=e.one(M),q=b.one(F),r=b.one(".advice-img-box"),s=r.one(".advice-img-cancel"),l=e.one(I),m=e.one(L),t="display-none";q.on("click",function(){b.hide(),d.operate=U,N={},d._drawAdvice(),p.css({left:-80,top:-80}),p.show(),m.show(),l.hide()}),s.on("click",function(){d.viewsource=!1,q.removeClass(t),r.addClass(t)})},_bindOperate:function(a){var b=this,c=a.one(M);z.on("contextmenu",function(a){b.operate===U&&(a.preventDefault(),b.operate=T)}),a.on("mousedown",function(a){if(3===a.which&&b.operate===U){var c=b.container,d=c.one(L),e=c.one(I),f=c.one(A);return d.hide(),e.show(),void f.show()}b.point=[a.pageX,a.pageY],b.startDraw=!0}),a.on("mouseup",function(){b.point=[],b.startDraw=!1;var a=b.bound;a&&(b._buildAdvice(a),c.hide(),b.operate=T,b.bound=null)}),a.on("mousemove",function(a){c.css({left:a.pageX-40,top:a.pageY-40});var d=b.point;if(b.startDraw){var e={left:d[0],top:d[1],width:a.pageX-d[0],height:a.pageY-d[1]};if(e=i(e),e.width<4&&e.height<4)return;b.bound=b._drawAdvice(e)}})},_bindGround:function(b){var c=this,d=c.container,e=d.one(I),f=d.one(M),g=d.one(L),h=d.one(A),i=d.one(F),j=d.one(".advice-img-box"),k="display-none";b.delegate("click","."+R,function(b){var d=a.one(b.currentTarget),e=d.parent(".snapdiv");e.remove(),c.operate=U,N={},c._drawAdvice(),f.css({left:-80,top:-80}),f.show(),c.viewsource=!1}),b.delegate("click","."+S,function(b){var d=a.one(b.currentTarget),f=d.parent(".snapdiv");f.remove(),g.hide(),e.show(),i.addClass(k),j.removeClass(k),h.show(),c.viewsource=!0})}}),a.augment(t,{openDialog:function(){var a=this.container,b=a.one(A),c=a.one(I);this.fire("open"),a.show(),c.hide(),b.show(),z[0].onselectstart=function(){return!1}},closeDialog:function(){var a=this.container,b=a.one(A);this.fire("close"),b.show(),a.hide(),z[0].onselectstart=function(){return!0}}}),t},{requires:["tbc/mini-login/1.4.2/","./canvastool","./tpl","core"]}),KISSY.add("srpbase/com/sidebar/advice2visual/tpl",function(){return'<div id="J_advice2visual"  class="advice2visual"><div class="advice2visual-page"></div><div id="J_advice2snapshot" class="advice-snapshot"><div class="advice-snapshot-box"><div class="advice-canvas"></div><div class="advice-operate"><div class="cursor-img"></div></div><div class="advice-ground"></div></div></div><div class="modal-dialog"><div class="modal-dialog-el"><div class="modal-dialog-hd"><a href="javascript:;" class="modal-close-btn">\u5173\u95ed</a><h5>\u8bf4\u8bf4\u6211\u4f7f\u7528\u641c\u7d22\u7684\u611f\u53d7</h5><div class="advice-links"><a href="http://bangpai.taobao.com/group/400769.htm" target="_blank">\u641c\u7d22\u5b98\u65b9\u5e2e\u6d3e</a><span class="link-separate"></span><a href="http://wenda.taobao.com/guanfang/gonggao3.htm" target="_blank">\u52a0\u5165\u6dd8\u5b9d\u95ee\u7b54\u77e5\u8bc6\u8d21\u732e\u8005\u8ba1\u5212</a></div></div><div class="modal-dialog-box"><textarea class="advice-text" _default="\u7b80\u77ed\u8bf4\u660e\u4e00\u4e0b\u60a8\u9047\u5230\u7684\u95ee\u9898\u6216\u5efa\u8bae\uff0c\u5982\u6709\u5fc5\u8981\u8bf7\u5728\u6b64\u7559\u4e0b\u60a8\u7684\u65fa\u65fa\u6216\u624b\u673a\u53f7\uff0c\u4fbf\u4e8e\u6211\u4eec\u8054\u7cfb\u5e76\u56de\u590d\u60a8\u7684\u95ee\u9898\uff0c\u53ef\u80fd\u6709\u5c0f\u793c\u7269\u8d60\u9001\u5662\uff5e"></textarea><div class="advice-btns"><a href="javascript:;" class="normal-btn  modal-sign-btn"><span></span>\u622a\u56fe\u8bf4\u660e</a><div class="advice-img-box display-none"><a href="javascript:;" class="normal-btn  modal-sign-btned">\u5df2\u622a\u56fe</a><div class="advice-img"><a href="javascript:;" class="advice-img-cancel"></a></div></div></div></div><div class="modal-dialog-ft"><button class="normal-btn modal-submit-btn">\u63d0\u4ea4</button></div></div><div class="advice-alert"><h5>\u63d0\u4ea4\u6210\u529f\uff01</h5><p>\u611f\u8c22\u60a8\u63d0\u4ea4\u53cd\u9988\uff01\u6211\u4eec\u975e\u5e38\u91cd\u89c6\u6536\u5230\u6bcf\u4e00\u6761\u53cd\u9988\u610f\u89c1\uff0c\u867d\u7136\u4e0d\u80fd\u9010\u4e00\u56de\u590d\uff0c\u4f46\u6211\u4eec\u4f1a\u53c2\u8003\u60a8\u7684\u610f\u89c1\uff0c\u7aed\u529b\u6539\u5584\u60a8\u7684\u6dd8\u5b9d\u4ea7\u54c1\u4f7f\u7528\u4f53\u9a8c\u3002</p><button class="modal-confirm-btn">\u786e\u5b9a</button></div></div><div class="advice2visual-mask"></div><form action="http://search.feedback.taobao.com/talkers/add_feedback.php" method="post" target="J_adviceform"><input type="hidden" name="sourceid" value="28"><input type="hidden" name="surveyid" value="55"><input type="hidden" name="userid" value=""><input type="hidden" name="bucket_id" value=""><input type="hidden" name="fromurl" value=""><input type="hidden" name="query" value=""><input type="hidden" name="userip" value=""><input type="hidden" name="categoryid" value=""><input type="hidden" name="machine" value=""><input type="hidden" name="causes[]" value=""><input type="hidden" name="content" value=""><input type="hidden" name="page_html" value=""></form><iframe name="J_adviceform" src="about:blank"></iframe></div>'
}),KISSY.add("srpbase/com/sidebar/dialog/index",function(a,b,c,d){function e(){e.superclass.constructor.apply(this,arguments)}{var f=a.require("io"),g=a.require("node");a.require("dom")}return e.ATTRS={dialog:{value:!0},width:{value:""},height:{value:""},data:{value:{id:".dialog-box",content:"",contentText:""},setter:function(b){return a.mix(this.get("data"),b)}},tmpl:{valueFn:function(){var a,b="POPUPID"+(new Date).getTime();return this.set("data",{id:"#"+b}),a='<div class="dialog-box" id="'+b+'"><div class="dialog-shim"><div class="dialog-body"><h3 class="dialog-hd">{{title}}</h3><div class="dialog-content">{{{content}}}</div><div class="dialog-ft">{{desc}}</div></div></div></div>'}},zIndex:{value:1e5},iframe:{value:{src:"",width:"",height:""}},hasMask:{value:!1},maskShared:{value:!1},closable:{value:!0},closing:{valueFn:function(){var a=new g('<a href="javascript:;" class="dialog-close icon-todo-cancel nice-cancel"></a>');return a}},resizable:{value:!1},draggable:{value:!1}},e.METHOD={},e.EVENTS={".dialog-tgr-click":{click:function(a){var b=this;a.halt(),b.get("toggle")?b[b.get("visible")?"_hiding":"_showing"]():b._showing()}}},a.extend(e,b,{initialize:function(){var b=this,c=(b.get("el"),b.get("data")),e=c.id,h=a.one(c.id),i=h.one(".dialog-body"),j=h.one(".dialog-content"),k=b.get("loading"),l=c.content,m=c.desc,n=h.one(".dialog-ft"),o=b.get("async"),p=b.get("iframe");if(b.box=h,l||j.append(k),!m&&n&&n.remove(),b.get("closable")){var q=b.get("closing");i.append(q),q.on("click",function(){b._hiding()})}if(b.get("draggable")&&b._setDraggable(),b.get("resizable")){var r=b.get("resize");b.resizer&&b.resizer.destroy(),d&&r&&(r.node=i,b.resizer=new d(r))}if(o.url)o.success=function(a){l=a.content,b.set("data",{id:e,content:l}),k&&k.remove(),j[0].innerHTML=l,b._offset(),b.get("visible")&&b._showing()},f(o);else if(p.src){var s=new g(a.substitute('<iframe src="{src}" width="{width}" height="{height}" frameborder="0" scrolling="no"></iframe>',p));s.on("load",function(){k&&k.remove(),b._offset(),b.get("visible")&&b._showing(),p.width&&i.css({width:p.width,height:p.height})}),j.append(s)}else b._offset();b.__bindUI()},__bindUI:function(){var a=this,b=a.box,c=a.get("data");b.attr("aria-label",c.title+"\u5f39\u7a97, \u6309\u4e0b Esc \u952e\u5173\u95ed"),b.on("keydown",function(b){27==b.keyCode&&a._hiding()})},_offset:function(a){var b=this,a=b.box,c=a.one(".dialog-shim"),d=a.one(".dialog-body"),e=b.get("width"),f=b.get("height");e?d.css({width:e,height:f}):(b._replaceVisible(a),e=d.width(),f=d.height(),b._replaceVisible(a,!0));var g={position:"relative",top:-f/2,left:-e/2,zIndex:b.get("zIndex")};c.css(g)},_docWidth:function(){return 6==a.UA.ie?"expression(KISSY.DOM.docWidth())":"100%"},_docHeight:function(){return 6==a.UA.ie?"expression(KISSY.DOM.docHeight())":"100%"},_maskShow:function(){var a=this,b=a.get("zIndex"),c=a.get("maskShared"),d=a._mask;c?d?a._masknum++:(a._initMask(),a._masknum=1,d=a._mask,d.css("zIndex",b-1)):d||(a._initMask(),d=a._mask,d.css("zIndex",b-1)),d.show()},_maskHide:function(){var a=this,b=a._mask,c=a.get("maskShared");c?(a._masknum=a._masknum-1,0==a._masknum&&b.hide()):b.hide()},_setDraggable:function(){var a,b,d,e=this,f=e.get("el"),g={handlers:f.one(".dialog-hd")},h=e.__drag,i=e.__constrain;if(g&&!h&&c&&(b=c.Draggable,h=e.__drag=new b({node:e.box,move:1}),g.proxy&&(g.proxy.moveOnEnd=!0,d=e.__proxy=new c.Proxy(g.proxy),d.attachDrag(h)),i=e.__constrain=(new c.Constrain).attachDrag(h),h.on("dragend",function(){var a;a=f.offset(),e.set("x",a.left),e.set("y",a.top),d&&e._replaceVisible(f,!0)}),g.scroll)){var j=e.__scroll=new c.Scroll(g.scroll);j.attachDrag(h)}h&&h.set("disabled",!g),g&&h&&(a=g.handlers,"constrain"in g&&i.set("constrain",g.constrain),a&&a.length>0&&h.set("handlers",a))},_showing:function(){var b=this,c=b.box,d=a.later(function(){if(b.get("adapt")&&b.adapt(),b.fire("beforeShow")!==!1){if(b.get("focus")){var a=b.get("el"),e=a.one(".dialog-tgr-click");e.css({position:"relative",zIndex:b.get("zIndex")+1})}c.css({zIndex:b.get("zIndex")}),c.show(),c.addClass("hover"),b.set("visible",!0),b.get("hasMask")&&b._maskShow(),d.cancel(),d=void 0}},100)},_hiding:function(){var a=this,b=a.box;if(a.fire("beforeHide"),a.get("focus")){var c=a.get("el"),d=c.one(".dialog-tgr-click");d.css({position:"",zIndex:""})}b.css({zIndex:""}),b.hide(),b.removeClass("hover"),a.set("visible",!1),a.get("hasMask")&&a._maskHide()},_initMask:function(){var b=this,c=new a.Node("<div  style='width:"+b._docWidth()+";left:0;top:0;height:"+b._docHeight()+";position:"+(6==a.UA.ie?"absolute":"fixed")+'; opacity: 0.4; filter: alpha(opacity=40); background-color: #666;\' class="dialog-mask">'+(6==a.UA.ie?"<iframe style='position:absolute;left:0;top:0;background:red;width: expression(this.parentNode.offsetWidth);height: expression(this.parentNode.offsetHeight);filter:alpha(opacity=0);z-index:-1;'></iframe>":"")+"</div>").prependTo("body");c.unselectable(),c.on("mousedown",function(a){a.preventDefault()}),b._mask=c}}),a.augment(e,e.METHOD),e},{requires:["../popup/","dd","resizable","core"]}),KISSY.add("srpbase/com/sidebar/index",function(a,b,c){function d(b){i=null,a.use("srpbase/com/sidebar/advice2visual/",function(a,c){document.domain.indexOf("taobao.com")>-1&&(document.domain="taobao.com"),window.feedCallback=function(){},i=new c({sourceUrl:b}),i.on("open",function(){var b=a.one(".weather-floatlayer");b&&b.removeAttr("bx-name");var c=a.one(".sortbar");c&&c.hasClass("sortbar-fixed")&&(c.removeClass("sortbar-fixed"),c.attr("style","position: static !important"),c.prev().hide(),c[0].advice=!0)}),i.on("close",function(){var b=a.one(".sortbar");b&&b[0].advice&&(b.css("position",""),b.addClass("sortbar-fixed"),b.prev().show(),b[0].advice=!1)}),i.init()})}function e(b){return a.one("#J_advice2visual")?void(i&&i.render()):void d(b)}function f(){var b=a.one("#J_dialog_adviseForm form");b&&(b=b[0],b.action=b.action+"?nk="+unescape(decodeURIComponent(n.get("_nk_")||"").replace(/\\u/g,"%u")),window.feedCallback=function(a){var b=[{msg:"\u60a8\u7684\u63d0\u4ea4\u6ca1\u6709\u6210\u529f\uff0c\u8bf7\u91cd\u65b0\u63d0\u4ea4\uff0c\u8c22\u8c22\uff01"},{msg:"\u611f\u8c22\u60a8\u7684\u53cd\u9988\uff01",success:!0},{msg:"\u60a8\u63d0\u4ea4\u7684\u8fc7\u4e8e\u9891\u7e41\uff0c\u611f\u8c22\u60a8\u7684\u53cd\u9988\uff01"}];a=b[parseInt(a,10)||0],alert(a.msg),a.success&&(j=!0,k._hiding())})}function g(b){return j&&(a.one("#J_AdviseInput").val(""),j=!1),b._dialog&&a.one("#J_dialog_adviseForm")?void k._showing():(document.domain.indexOf("taobao.com")>-1&&(document.domain="taobao.com"),b._dialog=!0,k=new c({el:a.one(b),data:{id:"#J_dialog_adviseForm"},tmpl:"",width:450,height:395,loading:"",hasMask:!1}),k.initialize(),void k._showing())}function h(){h.superclass.constructor.apply(this,arguments)}var i,j,k,l=a.require("dom"),m=a.require("event"),n=a.require("cookie");return h.ATTRS={gotop:{value:null},gotopHeight:{value:1.2*l.viewportHeight()},isGotopVSB:{value:!1}},h.METHOD={resetGotop:function(){var a=l.scrollTop();a>this.get("gotopHeight")&&!this.get("isGotopVSB")?this.showGoTop():a<this.get("gotopHeight")&&this.get("isGotopVSB")&&this.hideGoTop()},showGoTop:function(){var a=this,b=a.get("gotop");a.get("isGotopVSB")||b.fadeIn(.2,function(){b.css("display","block"),a.set("isGotopVSB",!0)})},hideGoTop:function(){var b=this,c=b.get("gotop");b.get("isGotopVSB")&&c.fadeOut(.2,function(){a.UA.ie<7&&b.resetTopForIE6(),b.set("isGotopVSB",!1)})}},h.FIRES={RESET:"reset"},h.EVENTS={".gotop":{click:function(a){window.scrollTo(0,0),a.preventDefault()}},li:{mouseenter:function(b){var c=a.one(b.currentTarget),d=c.one(".bg"),e=c.one("a");d&&(c.one("a").addClass("hover"),e.stop(!1,!0).animate({width:96},{duration:.2}))},mouseleave:function(b){var c=a.one(b.currentTarget),d=c.one(".bg"),e=c.one("a");d&&e.stop(!1,!0).animate({width:30},{duration:.2,complete:function(){c.one("a").removeClass("hover")}})}},".advise-side-suggest":{click:function(a){a.preventDefault();var b=a.currentTarget.getAttribute("_source");return b?void(void 0===i?d(b):e(b)):void g(a.currentTarget)}}},a.extend(h,b,{onRendered:function(){this.init(),a.UA.ie<7&&this.initForIE6(),a.UA.ie<12&&f()},init:function(){var a=this,b=a.get("el"),c=b.one(".gotop");a.set("gotop",c),m.on(window,"scroll",function(){a.resetGotop()}),c.on("click",function(){l.scrollIntoView("#site-nav")}),a.resetGotop()},initForIE6:function(){{var a=this;a.get("el")}m.on(window,"scroll",function(){a.resetTopForIE6()})},resetTopForIE6:function(){var a=this.get("el"),b=a.height()+30,c=l.scrollTop(),d=l.viewportHeight(),e=d+c-b;a.css("top",e)}}),a.augment(h,h.METHOD),h},{requires:["srpbase/async/activity","./dialog/","core"]}),KISSY.add("srpbase/com/sidebar/popup/index",function(a,b){function c(){c.superclass.constructor.apply(this,arguments)}var d=a.require("io"),e=a.require("node");return c.ATTRS={mouseDelay:{value:.1},zIndex:{value:9999},x:{value:0},y:{value:0},align:{value:{points:["tr","tl"],offset:[0,0]},setter:function(b){return a.mix(this.get("align"),b)}},toggle:{value:!1},loading:{valueFn:function(){var a=new e("<div class='loading' style='border: none;width: 50px;height:50px;*height: expression(this.parentNode.offsetHeight);'/>");return a}},closable:{value:!1},closing:{valueFn:function(){var a=new e('<a href="javascript:;" class="popup-close icon-todo-cancel"></a>');return a}},visible:{value:!1},data:{value:{id:".popup-box",content:"",contentText:""},setter:function(b){return a.mix(this.get("data"),b)}},tmpl:{valueFn:function(){var a="POPUPID"+(new Date).getTime();this.set("data",{id:"#"+a});var b='<div class="popup-box {{personalCls}}" id="'+a+'"><div class="popup-body" bx-tmpl="contentText" bx-datakey="contentText"><div class="popup-arrow"><i class="arrow"><s class="arrow"></s></i></div>{{{contentText}}}</div></div>';return b}},async:{value:{url:"",data:"",dataType:"json",success:null},setter:function(b){var c=this.get("async");return a.mix(c,b)}},effect:{value:{effect:"",target:".popup-target",duration:.5,easing:"easeOut"},setter:function(b){var c=b.effect,d={fade:["Out","In"],slide:["Up","Down"]};return b?(a.isString(c)&&!d[c]&&(b.effect=""),b):!1}},holder:{value:null},isTip:{value:!1}},c.METHOD={show:function(){this._showing()},hide:function(){this._hiding()},adapt:function(){var b=this,c=(b.get("el"),b.get("holder")||b.get("el")),d={x:0,y:0};if(c){var e,f,g=b.box,h=b.tgrBox;b._replaceVisible(g),e=g.offset(),f=a.mix(c.offset(),{width:c.width(),height:c.height()}),d.x=f.left+f.width-h.left-h.width,d.y=f.top+f.height-h.top-h.height,b.tgrBox=f,e.top+=d.y,e.left+=d.x,g.css(e),b._replaceVisible(g,!0)}},_replaceVisible:function(a,b){a.css(b?{display:"none",visibility:"visible"}:{display:"block",visibility:"hidden"})}},c.EVENTS={".popup-tgr-click":{click:function(a){var b=this;a.halt(),b.get("toggle")?b[b.get("visible")?"_hiding":"_showing"]():b._showing()}},".popup-tgr-mouse":{mouseenter:function(){this._clearHiddenTimer(),this._showing()},mouseleave:function(){this._setHiddenTimer()}}},c.DOCEVENTS={".popup-box":{mouseenter:function(){this._clearHiddenTimer()},mouseleave:function(){this._setHiddenTimer()}}},a.extend(c,b,{initialize:function(){if(!this.get("dialog")){var b=this,c=b.get("el"),e=b.get("data"),f=e.content,g=e.contentText,h=e.id,i=!0,j=b.get("loading"),k=b.get("async"),l=a.one(h),m=l.one(".popup-body");if(b.get("tmpl")){var n=a.one(h);l=n.clone(!0),n.remove(),l.appendTo(a.one("body")),m=l.one(".popup-body"),i=!1}if(b.box=l,f?m.append(a.one(f)):g&&b.setChunkData("contentText",g),b.get("closable")){var o=b.get("closing");m.css({paddingTop:10}),m.append(o),o.on("click",function(){b._hiding()})}if(k.url&&(m.append(j),j.show(),k.success=function(d){f=d.content,b.set("data",{id:h,content:f}),m.append(a.one(f)),l.css({width:"",height:""}),j&&j.remove(),i?(b._replaceVisible(l),elBox=a.mix(l.offset(),{width:l.width(),height:l.height(),zIndex:b.get("zIndex")}),l.css(elBox),b._replaceVisible(l,!0)):b._offsetEl(c,!0),b[b.get("visible")?"_showing":"_hiding"]()},d(k)),i){b._replaceVisible(l),elBox=l.offset(),elBox.top=elBox.top+b.get("y"),elBox.left=elBox.left+b.get("x"),l.css(elBox);var p=l.one(".popup-arrow");p&&b._offsetArrow(p,m,b.get("align")),b._replaceVisible(l,!0)}else b._offset(c);b.__bindUI(),b[b.get("visible")?"_showing":"_hiding"]()}},_offset:function(b){var c=this,b=c.get("holder")||c.get("el");b&&(tgrBox=a.mix(b.offset(),{width:b.width(),height:b.height()}),c.tgrBox=tgrBox),c._offsetEl(b,!0)},_offsetEl:function(b,c){var d,e,f,g,h=this,i=h.box,j=h.get("align"),k=i.one(".popup-arrow"),l=i.one(".popup-body"),g=h.tgrBox;if(h._replaceVisible(i),g){i.css({width:"auto",height:"auto"}),d=a.mix(i.offset(),{width:i.width(),height:i.height(),zIndex:h.get("zIndex")}),e={tl:[g.top,g.left],tr:[g.top,g.left+g.width],bl:[g.top+g.height,g.left],br:[g.top+g.height,g.left+g.width],tt:[g.top,g.left+g.width/2],bb:[g.top+g.height,g.left+g.width/2]};var m;switch(j.points[0]){case"br":m=g.width+20;break;case"tr":m=g.width+20;break;case"bl":m=d.width-g.width-20;break;case"tl":m=d.width-g.width-20;break;case"tt":m=d.width/2;case"bb":m=d.width/2}f={tl:[e[j.points[0]][0]+j.offset[1],e[j.points[0]][1]+j.offset[0]],tr:[e[j.points[0]][0]+j.offset[1],e[j.points[0]][1]+j.offset[0]-d.width],bl:[e[j.points[0]][0]+j.offset[1]-d.height,e[j.points[0]][1]+j.offset[0]],br:[e[j.points[0]][0]+j.offset[1]-d.height,e[j.points[0]][1]+j.offset[0]-d.width-g.width],tt:[e[j.points[0]][0]+j.offset[1],e[j.points[0]][1]+j.offset[0]-m],bb:[e[j.points[0]][0]+j.offset[1]-d.height,e[j.points[0]][1]+j.offset[0]-m]},a.mix(d,{top:f[j.points[1]][0],left:f[j.points[1]][1]}),i.css(d),k&&c&&h._offsetArrow(k,l,j),h._replaceVisible(i,!0)}},_offsetArrow:function(a,b,c){var d;switch(c.points[0]){case"br":_width=20;break;case"tr":_width=20;break;case"bl":_width=b.width()-20;break;case"tl":_width=b.width()-20;break;case"tt":_width=b.width()/2;case"bb":_width=b.width()/2}d={tl:[0,"","",-14],tr:[0,0,"",""],bl:[b.height()-14,"","",-14],br:[b.height()-14,0,"",""],tt:[-14,"","",_width],bb:["","",0,_width]},a.css({top:d[c.points[1]][0],right:d[c.points[1]][1],bottom:d[c.points[1]][2],left:d[c.points[1]][3]});var e={tl:".arrow-left",tr:".arrow-right",bl:".arrow-left",br:".arrow-right",tt:".arrow-top",bb:".arrow-bottom"};a.all(".arrow").addClass(e[c.points[1]])},_showing:function(){var b=this,c=b.box;b.set("visible",!0),b._showTimer=a.later(function(){b._showTimer.cancel(),b._showTimer=void 0,b.adapt(),b.fire("beforeShow")!==!1&&(c.show(),c.addClass("hover"))},1e3*b.get("mouseDelay"))},_hiding:function(){var a=this,b=a.box;a.fire("beforeHide"),b.hide(),b.removeClass("hover")},_setHiddenTimer:function(){var b=this;return b.set("visible",!1),b.get("isTip")?void b._hiding():b._showTimer?(b._showTimer.cancel(),void(b._showTimer=void 0)):void(b._hiddenTimer=a.later(function(){b._clearHiddenTimer(),b._hiding()},200))},_clearHiddenTimer:function(){var a=this;a.get("isTip")||a._hiddenTimer&&(a._hiddenTimer.cancel(),a._hiddenTimer=void 0)},__bindUI:function(){var a=this;""!=a.get("effect").effect&&(a.on("beforeHide",function(){a._processEffect(0)}),a.on("beforeShow",function(){a._processEffect(1)}))},_getGhost:function(){var b=self.box,c=b[0].cloneNode(!0);return c.style.visibility="",c.style.overflow="hidden",c.className+=" tb-overlay-ghost",c.innerHTML="",c=a.one(c)},_processTarget:function(b){var c=this,d=c.box;c.__effectGhost&&c.__effectGhost.stop(1);var e,f,g,h,i=c.get("effect"),j=a.one(i.target),k=i.duration,l=a.mix(j.offset(),{width:j.width(),height:j.height()}),m=i.easing;c._replaceVisible(box),h=c._getGhost(),e=a.mix(d.offset(),{width:d.width(),height:d.height()}),h.insertAfter(d),c._replaceVisible(box,!0),b?(f=l,g=e):(f=e,g=l),h.css(f),h.show(),c.__effectGhost=h,h.animate(g,{duration:k,easing:m,complete:function(){c.__effectGhost=null,h[0].parentNode.removeChild(h[0]),b&&d.show()}})},_processEffect:function(b){var c=this,d=c.box,e=c.get("effect"),f=e.effect||"none",g=a.one(e.target),h={fade:["Out","In"],slide:["Up","Down"]};if(g)return void c._processTarget(b);var i=e.duration,j=e.easing,k=b,l=["block","none"],m=k?1:0;d.stop(1,1);var n={visibility:"visible",display:l[m]};d.css(n);var o=f+h[f][m];d[o](i,function(){var a={display:l[0],visibility:k?"visible":"hidden"};d.css(a)},j)}}),a.augment(c,c.METHOD),c},{requires:["srpbase/async/activity","core"]}),KISSY.add("srpbase/com/sidebar/tpl",function(){return'<ul><li class="gotop"><a trace="toolBarTohead" href="javascript:void(0)" data-spm-anchor-id="a230r.1.0.0"><span class="icon-btn-top">\u56de\u5230\u9876\u90e8</span></a></li><li class="advice advise-side-suggest" _source="{{liSource}}"><a trace="toobarFeedback" href="javascript:;" target="_blank" class=""><span class="icon-btn-feedback">\u7528\u6237\u53cd\u9988</span></a></li><li class="help"><a trace="toolbarSearchhelp" target="_blank" href="http://s.taobao.com/faq.php?spm=a230r.1.2.3.RgGkQB"><span class="icon-btn-help">\u641c\u7d22\u5e2e\u52a9</span></a></li><li class="history"><a trace="toolbarHistory" target="_blank" href="http://lu.taobao.com/newMyPath.htm?scm=12307.3.0.0 " data-spm-anchor-id="0.0.0.0"><span class="icon-btn-history">\u641c\u7d22\u5386\u53f2</span></a></li></ul><div class="dialog-box" id="J_dialog_adviseForm"><div class="dialog-shim"><div class="dialog-body"><div class="dialog-hd"><h4>\u8bf4\u8bf4\u6211\u4f7f\u7528\u641c\u7d22\u7684\u611f\u53d7</h4><span class="sitelink"><a href="http://bangpai.taobao.com/group/400769.htm" target="_blank">\u641c\u7d22\u5b98\u65b9\u8bba\u575b</a> | <ahref="/faq.html" target="_blank">\u4e86\u89e3\u65b0\u7248\u641c\u7d22</a></span></div><div class="dialog-content"><div id="J_adviseForm" class="advise tdg-advise search-popup-window" aria-label="\u6ce8\u610f\uff1a\u5f39\u7a97, \u6309\u4e0b Esc \u952e\u5173\u95ed"><iframe src="about:blank" name="feedback"></iframe><form action="http://search.feedback.taobao.com/talkers/add_feedback.php" target="feedback"method="post"><div class="search-popup-window-wrapper"><div class="bd"><input type="hidden" name="sourceid" value="28"><input type="hidden" name="userip" value="121.0.29.251"><input type="hidden" name="fromurl"value="/search?spm=a230r.1.10.454.ciAEzZ&amp;amp;q=%C5%AE%D7%B0&amp;amp;uniqpid=-1306875142&amp;amp;nouniq=true&amp;amp;style=list&amp;amp;tab=coefp&amp;amp;from_pos=0_mini_samestyle-pop_null_null"><input type="hidden" name="surveyid" value="55"><input type="hidden" name="query" value="\u5973\u88c5"><input type="hidden" name="categoryid" value="0"><input type="hidden" name="userid"><input type="hidden" name="bucket_id" value="17"><input type="hidden" name="machine" value="s006231.cm6"><div id="J_adviseCont"><div class="models"><dl class="firstmodel"><dt>\u4e0d\u6ee1\u610f\uff1a</dt><dd><ul class="advise-options"><li><label><input type="checkbox" name="causes[]" value="201">\u901a\u8fc7\u641c\u7d22\u627e\u4e0d\u5230\u60f3\u8981\u7684\u5b9d\u8d1d</label></li><li><label><input type="checkbox" name="causes[]" value="202">\u5b9d\u8d1d\u6392\u5e8f\u4e0d\u5408\u7406</label></li><li><label><input type="checkbox" name="causes[]" value="203">\u5546\u54c1\u5206\u7c7b\u4e0d\u80fd\u5e2e\u6211\u5feb\u901f\u627e\u5230\u5b9d\u8d1d</label></li><li><label><input type="checkbox" name="causes[]" value="204">\u7b5b\u9009\u529f\u80fd\u4e0d\u65b9\u4fbf\u6211\u7b5b\u9009\u5b9d\u8d1d</label></li><li><label><input type="checkbox" name="causes[]" value="205">\u4e00\u884c\u56db\u56fe\u4e0d\u65b9\u4fbf\u6211\u67e5\u770b\u5b9d\u8d1d</label></li></ul></dd></dl><dl><dt>\u6ee1\u610f\uff1a</dt><dd><ul class="advise-options"><li><label><input type="checkbox" name="causes[]" value="206">\u901a\u8fc7\u641c\u7d22\u627e\u5230\u4e86\u60f3\u8981\u7684\u5b9d\u8d1d</label></li><li><label><input type="checkbox" name="causes[]" value="207">\u5b9d\u8d1d\u6392\u5e8f\u5408\u7406</label></li><li><label><input type="checkbox" name="causes[]" value="208">\u5546\u54c1\u5206\u7c7b\u80fd\u5e2e\u6211\u5feb\u901f\u627e\u5230\u5b9d\u8d1d</label></li><li><label><input type="checkbox" name="causes[]" value="209">\u7b5b\u9009\u529f\u80fd\u65b9\u4fbf\u6211\u7b5b\u9009\u5b9d\u8d1d</label></li><li><label><input type="checkbox" name="causes[]" value="210">\u4e00\u884c\u56db\u56fe\u65b9\u4fbf\u6211\u67e5\u770b\u5b9d\u8d1d</label></li></ul></dd></dl></div><div class="advise-more"><p>\u5c06\u60a8\u5bf9\u6dd8\u5b9d\u641c\u7d22\u7684\u5efa\u8bae\u6216\u8005\u60f3\u6cd5\u544a\u8bc9\u6211\u4eec\u5427\uff0c\u6211\u4eec\u5c06\u968f\u65f6\u503e\u542c\u60a8\u7684\u611f\u53d7\uff1a\uff09</p><textarea name="content" id="J_AdviseInput" rows="6" cols="80"class="init"></textarea><button type="submit"> \u63d0\u4ea4</button><span class="inputTips"><em id="J_inputTip">0</em> / <spanid="J_maxLength">1000</span></span></div></div></div></div></form></div></div></div></div></div>'}),KISSY.add("srpbase/com/statsend/index",function(a){function b(){}return b.prototype={_statData:{rule:{},data:{}},_router:{tongji:{key:"/tongji",sign:"H51884970"},pv:{key:"/search",sign:"H51884969"}},setRouter:function(a){this._router=a},getRouter:function(){return this._router},send:function(a,b){var c;c=b?this._router.tongji:this._router.pv,(window.goldlog_queue||(window.goldlog_queue=[])).push({action:"goldlog.record",arguments:[c.key,"",a,c.sign]})},setStat:function(b){this._statData.rule=a.merge(this._statData.rule,b.rule),this._statData.data=a.merge(this._statData.data,b.data)},getStat:function(){return this._statData},clickTrace:function(b,c){var d,e=c.attr("trace"),f=!1;if(e&&(d=b.rule[e])){var g=b.data,h=d.replace(/\$\{([\w-]+)\}/g,function(a,b){return 0==b.indexOf("data-")?c.attr(b):g[b]});if(h.indexOf("[].")>-1){var i,j,k,l=a.all('a[trace="'+e+'"]');k=c.attr("traceidx"),k?(j=parseInt(k),isNaN(j)&&(j=1)):(i=c.attr("tracenum")||1,j=Math.floor(a.indexOf(c[0],l)/i)),h.indexOf("[].#index")>-1&&(h=h.replace(/\$\{([\w]+\[\]\.\#index)\}/g,function(){return j+1})),h.indexOf("[].#value")>-1&&(h=h.replace(/\$\{([\w]+)\[\]\.\#value\}/g,function(a,b){return g[b][j]}))}f||this.send(h,!1)}},clickStat:function(a){for(var b,c=0;!b&&a&&a.getAttribute&&4>c;)c++,b=a.getAttribute("stat")||a.getAttribute("data-stat"),a=a.parentNode;b&&this.send(b,!1)},initClickTrace:function(b){var c=this,d=c.getStat();d&&(b=b||a.one("body"),a.UA.ie>6?b.delegate("keyup mouseup","[trace]",function(b){var e=b.which;(2===e||b.ctrlKey&&1===e)&&c.clickTrace(d,a.one(b.currentTarget))}):a.UA.firefox&&b.delegate("keyup mouseup","[trace]",function(b){var e=b.which;(2===e||3===e)&&c.clickTrace(d,a.one(b.currentTarget))}),b.delegate("click","[trace]",function(b){c.clickTrace(d,a.one(b.currentTarget))}))},initClickStat:function(){var a=this;Event.on(doc,"click",function(b){a.clickStat(b.target)})},_iframeTrace:"",setIframeTrace:function(a){this._iframeTrace=a},matchIframe:function(b){var c=this._iframeTrace,d=0,e=[];if(c[b])return c[b];for(var f in c)d++,e.push(f);return 1===d?c[e[0]]:d>1&&(a.all("iframe").each(function(a){for(var b=a[0].src,f=0;d>f;f++)if(b.indexOf(c[e[f]])>-1){e.splice(f,1);break}}),e.length)?c[e[e.length-1]]:void 0},iframeTrace:function(a,b,c){if(b){var d=a.rule[b],e=a.data;if(c=this.matchIframe(c)){e.iframe_show="iframe_show:"+c;var f=d.replace(/\$\{([\w]+)\}/g,function(a,b){return e[b]});this.send(f,!1)}}},iframeTongjiStat:function(a){var b=this,c=b.getStat(),d=c.rule.sc,e=c.data;if(a=b.matchIframe(a)){e.iframe_show="iframe_show:"+a;var f=d.replace(/\$\{([\w]+)\}/g,function(a,b){return e[b]});f=f.replace("stats_click","f_stats_show"),b.send(f,!0)}},iframeClickStat:function(a){var b=this,c=b.getStat(),d=this._iframeTrace;if(d&&(document.domain="taobao.com"),a)for(var e=0,f=a.length;f>e;e++)"null"==a[e]?b.iframeTrace(c,"sc",""):b.iframeTrace(c,"sc",a[e]);else{var g=location.search,h=g.match(/sc_trace=([\.\w]*)/);if(h){var i=c.rule.sc,j=c.data;j.iframe_show="iframe_show:"+h[1];var k=i.replace(/\$\{([\w]+)\}/g,function(a,b){return j[b]});this.send(k,!1)}}}},b});KISSY.add("components/breadcrumbs/index",function(a){var b=a.require("srpbase/async/activity"),c="icon-btn-arrow-up-3",d="icon-btn-arrow-down-3";return b.extend({onStart:function(){var a,b=this.get("context"),e=b.getData("components/navigation"),f=this.get("data"),g=b.getData("components/pagination");a=g?g.currentPage:1,f.hasNav=!!e,f.iconCls=1!==a?d:c},onRendered:function(){this.set("navSwitchBtnSpan",a.one(".J_navSwitchBtn span"))},closeNav:function(){var a=this.get("navSwitchBtnSpan"),b=(this.get("navEl"),this.get("context"));a.removeClass(c),a.addClass(d),b.getActivity("components/navigation").hideNav()},openNav:function(){var a=this.get("navSwitchBtnSpan"),b=(this.get("navEl"),this.get("context"));a.removeClass(d),a.addClass(c),b.getActivity("components/navigation").showNav()}},{EVENTS:{".J_navSwitchBtn":{click:function(){var a=this.get("navSwitchBtnSpan");a.hasClass(c)?this.closeNav():this.openNav()}}}})},{requires:["srpbase/async/activity"]}),KISSY.add("components/breadcrumbs/tpl",function(){return'<div class="bread-crumbs row"><div class="col crumbs-cont">{{#each catpath}}{{@if url}}<a class="cat-name" href="{{url}}">{{name}}</a>{{else}}<span class="cat-name">{{name}}</span>{{/if}}{{#if xcount!==xindex+1}}<span class="cat-divider"><span class="icon-btn-vbarrow"></span></span>{{/if}}{{/each}}{{#if propSelected.length}}<span class="cat-divider"><span class="icon-btn-vbarrow"></span></span>{{/if}}{{#propSelected}}<a class="param-selected icon-tag async-btn" href="{{url}}" title="{{text}}\uff1a{{#sub}}{{text}}{{#if xcount!==xindex+1}},{{/if}}{{/sub}}">{{text}}\uff1a{{#sub}}{{text}}{{#if xcount!==xindex+1}},{{/if}}{{/sub}}<span class="close-icon icon-btn-x">X</span></a>{{/propSelected}}</div><div class="col end">{{#if spuTotalHit}}<span class="product-num">\u5171<span class="highlight">{{spuTotalHit}}</span>\u6b3e\u4ea7\u54c1</span>{{/if}}{{#if hasNav}}<a class="nav-toggle-btn J_navSwitchBtn icon-tag" href="javascript:;"><span class="{{iconCls}}"></span></a>{{/if}}</div></div>'}),KISSY.add("components/navigation/baby/index",function(a,b,c,d,e){var f=new c(e);return b.extend({onStart:function(){var a=this,b=a.get("data"),c=b.subCat,d=18;c&&c.length<d&&(a.set("needCheckBlock",1),b.needCheck=1)},renderParams:function(a){var b=this,c=b.get("data").subNav[a],d=c.sub,e=18,g=b.get("paramsCont"),h=b.get("expandBtn");g.html(f.render(c)),d&&d.length<e?b.setCheckLine():h.css("display","block")},onRendered:function(){var a=this,b=a.get("el"),c=b.one(".J_expandBtn"),d=b.one(".J_babyParamCont");a.set("expandBtn",c),a.set("paramsCont",d),a.get("needCheckBlock")&&a.setCheckLine()},toggleBlock:function(){var a=this,b=a.get("el");b.hasClass("block-expand")?a.closeBlock():a.openOneBlock()},openOneBlock:function(){var a=this,b=a.get("el"),c=a.get("expandBtn");b.parent().all(".nav-block").removeClass("block-multi block-expand"),b.parent().all(".J_expandBtn").html('\u66f4\u591a<span class="icon-btn-arrow-down-2">'),b.addClass("block-expand"),c.html('\u6536\u8d77<span class="icon-btn-arrow-up-2">')},closeBlock:function(){var a=this,b=a.get("el"),c=a.get("expandBtn");b.removeClass("block-expand"),c.html('\u66f4\u591a<span class="icon-btn-arrow-down-2">')},getFormerPPath:function(a){var b=a.match(/ppath=([^&]*)/);return b?b[1]:""},checkLine:function(){var a=this,b=a.get("paramsCont"),c=b.first().offset().top,d=b.last().offset().top,e=this.get("expandBtn");d-c>a.get("lineDiff")?e.css("display","block"):e.css("display","none")},setCheckLine:function(){var a=this,b=a.get("context");b.addTask(function(){a.checkLine()},["resize"]),a.checkLine()}},{ATTRS:{lineDiff:{value:10}},EVENTS:{".J_expandBtn":{click:function(){this.toggleBlock()}},".J_babyNav":{click:function(b){var c=a.one(b.currentTarget),d=c.parent(),e=c.attr("data-index");e&&(d.all(".selected").removeClass("selected"),c.addClass("selected"),this.renderParams(e),b.preventDefault())}}}})},{requires:["srpbase/async/activity","xtemplate","node","./params"]}),KISSY.add("components/navigation/baby/params",function(){return'{{#each sub}}<a target="_self" trace="{{trace}}" title="{{text}}" class="param-item" href="{{url}}">{{text}}</a>{{/each}}'}),KISSY.add("components/navigation/baby/tpl",function(){return'<div class="baby-nav row">{{#each subNav}}<div class="baby-nav-block col {{#if selected}}selected{{/if}}" data-index="{{xindex}}"><a class="baby-nav-item" href="{{url}}">{{#imgSrc}}<img class="nav-img" src="{{imgSrc}}" alt=""/>{{/imgSrc}}{{text}}</a></div>{{/each}}</div><div class="nav-block"><div class="block-body"><div class="params-cont J_babyParamCont">{{#each subCat}}<a target="_self" trace="{{trace}}" title="{{text}}" class="param-item" href="{{url}}">{{text}}</a>{{/each}}</div></div><div class="block-tail"><a href="javascript:;" {{#if needCheck}}style="display: none"{{/if}} class="more-btn J_expandBtn">\u66f4\u591a<span class="icon-btn-arrow-down-2"></span></a></div></div>'}),KISSY.add("components/navigation/common/index",function(a){var b=a.require("srpbase/async/activity"),c="icon-hover";return b.extend({onStart:function(){var a=this,b=a.get("data"),c=b.sub,d=b.show2line,e=18;d&&(e=36,a.set("lineDiff",46)),c&&c.length<e&&(a.set("needCheckBlock",1),b.needCheck=1)},onRendered:function(){var a=this,b=a.get("el").one(".J_expandBtn");a.set("expandBtn",b),a.get("needCheckBlock")&&a.setCheckLine()},toggleBlock:function(){var a=this,b=a.get("el");b.hasClass("block-expand")?a.closeBlock():a.openOneBlock()},openOneBlock:function(){var a=this,b=a.get("el"),c=a.get("expandBtn");b.parent().all(".nav-block").removeClass("block-multi block-expand"),b.parent().all(".J_expandBtn").html('\u66f4\u591a<span class="icon-btn-arrow-down-2">'),b.addClass("block-expand"),c.html('\u6536\u8d77<span class="icon-btn-arrow-up-2">')},closeBlock:function(){var a=this,b=a.get("el"),c=a.get("expandBtn");b.removeClass("block-expand"),b.hasClass("block-multi")&&a.endMulti(),c.html('\u66f4\u591a<span class="icon-btn-arrow-down-2">')},beginMulti:function(){var a=this,b=a.get("el");b.hasClass("block-multi")||(a.openOneBlock(),b.addClass("block-multi"),a.set("isMulti",1))},endMulti:function(){var a=this.get("el");a.all(".async-btn").removeClass(c),a.removeClass("block-multi"),this.set("isMulti",0)},getFormerPPath:function(a){var b=a.match(/ppath=([^&]*)/);return b?b[1]:""},submitMulti:function(){var a,b=this,d=[],e=b.get("context"),f=window.location.href,g=b.get("el");g.all("."+c).each(function(a){d.push(a.attr("data-ppath"))}),d.push(b.getFormerPPath(f)),a=e.trans2i(f,{ppath:d.join(";")}),e.async(a,function(){b.set("isMulti",1)})},checkLine:function(){var a=this,b=a.get("el"),c=b.all(".params-cont"),d=c.first().offset().top,e=c.last().offset().top,f=this.get("expandBtn");e-d>a.get("lineDiff")?f.css("display","block"):f.css("display","none")},setCheckLine:function(){var a=this,b=a.get("context");b.addTask(function(){a.checkLine()},["resize"]),a.checkLine()}},{ATTRS:{lineDiff:{value:10}},EVENTS:{".J_expandBtn":{click:function(){this.toggleBlock()}},".J_multiBtn":{click:function(){this.beginMulti()}},".J_cancelBtn":{click:function(){this.closeBlock()}},".J_navBtn":{click:function(b){var c=a.one(b.currentTarget),d=this.get("el");b.preventDefault(),d.hasClass("block-multi")||this.get("context").async(c.attr("href"))}},".block-multi .J_navBtn":{click:function(b){var d=a.one(b.currentTarget);d.hasClass(c)?d.removeClass(c):d.addClass(c)}},".J_submitBtn":{click:function(){this.submitMulti()}}}})},{requires:["srpbase/async/activity","xtemplate","node"]}),KISSY.add("components/navigation/common/tpl",function(){return'<div class="block-head"><h4><span class="nav-title">{{text}}</span>:</h4></div><div class="block-body {{#if show2line}}default-2-line{{/if}}"><div class="params-cont">{{#each sub}}<a target="_self" trace="{{trace}}" {{#if !description}}title="{{text}}"{{/if}} class="param-item icon-tag {{#if !isBaobei}}J_navBtn{{/if}} {{#if description}}J_hasTips{{/if}}" href="{{url}}" {{#if description}}data-description="{{description}}"{{/if}} {{#if ppath}}data-ppath="{{ppath}}"{{/if}}>{{#if multiSelect}}<span class="icon-btn-check-small param-checkbox"></span>{{/if}}{{#if wordIcon}}<span class="param-pic srpifont">{{{wordIcon}}}</span>{{/if}}{{#if imgSrc}}<img class="param-img" src="{{imgSrc}}" alt=""/>{{/if}}{{text}}</a>{{/each}}</div>{{#if multiSelect}}<div class="multi-btn-cont"><a trace="navMutiSelect" href="javascript:;" class="submit-btn J_submitBtn">\u786e\u5b9a</a><a href="javascript:;" class="cancel-btn J_cancelBtn">\u53d6\u6d88</a></div>{{/if}}</div><div class="block-tail">{{#if multiSelect}}<a href="javascript:;" class="multi-btn J_multiBtn">\u591a\u9009</a>{{/if}}<a href="javascript:;" {{#if needCheck}}style="display: none"{{/if}} class="more-btn J_expandBtn">\u66f4\u591a<span class="icon-btn-arrow-down-2"></span></a></div>'}),KISSY.add("components/navigation/index",function(a){var b=a.require("srpbase/async/activity"),c={_el:null,setEl:function(a){this._el=a},getPoint:function(){var a=this._el,b=a.offset(),c=b.left,d=b.top,e=a.width(),f=a.height();return c+=e/2,d=d+f+5,[c,d]}};return b.extend({hideNav:function(){this.get("el").css("display","none")},showNav:function(){var a=this;a.get("el").css("display","block"),a.get("needRender")&&(a.set("needRender",0),a.renderCpn(),a.onRendered())},onStart:function(){var b=this,c=b.get("data"),d=c.common,e=c.adv,f=b.get("context"),g=f.get("cpnRule"),h=g.js,i=g.tpl,j=c.isSync,k=[];if(!e&&d&&(d[d.length-1].isLast=1),d)for(var l=0,m=d.length;m>l;l++){var n="components/navigation/common_clone"+l,o="J_commonNav"+l;f.setContainer(n,"."+o),d[l].containerCls=o,d[l].isBaobei=j,f.setData(n,d[l]);var p="components/navigation/common",q={};q[n+h]={alias:[p+h]},q[n+i]={alias:[p+i]},a.config("modules",q),k.push(n)}if(e){var r="components/navigation/overlay";f.setContainer(r,".J_overlayCont"),f.setData(r,{adv:e,isBaobei:j}),k.push(r)}b.set("navRenderQueue",k);var s,t=f.getData("components/pagination");s=t?t.currentPage:1,1!==s?(b.set("isRendered",1),b.set("needRender",1)):(b.set("isRendered",0),b.set("needRender",0),b.hideNav())},onRendered:function(){var a=this,b=a.get("context");a.get("needRender")||b.renderQueue(a.get("navRenderQueue"),function(){a.showNav(),b.activeTick("resize")})}},{EVENTS:{".J_hasTips":{mouseenter:function(b){if(!this.get("isMulti")){var d=this,e=d.get("context"),f=a.one(b.currentTarget);c.setEl(f),e.getData("tool_tipslayer").activeTips(1,f.attr("data-description"),c),e.activeTick("tips")}},mouseleave:function(){if(!this.get("isMulti")){var a=this,b=a.get("context");b.getData("tool_tipslayer").activeTips(),b.activeTick("tips")}}}}})},{requires:["srpbase/async/activity"]}),KISSY.add("components/navigation/overlay/index",function(a,b,c){var d,e=a.require("xtemplate"),f="nav_overlay",g=a.require("node"),h=a.require("srpbase/com/ie67adapter/");return b.extend({onRendered:function(){var a=this,b=a.get("el");a.initOverlay(b)},initOverlay:function(a){var b=this,g=b.get("context");b.set("overlayCont",a),b._overlays={},d=new e(c),g.registerTaskType(f),g.addTask(function(){b.activeOverlay()},[f])},_overlays:{},_conditionBtns:{},activeOverlay:function(){var b,c=this,d=c._cConditionBtn,e=c._overlays,f=c._conditionBtns;(c._isOnCBtn||c._isOnOverlay)&&d?(b=d.attr("data-overlayIndex"),a.all(".J_blockOverlay").css("display","none"),e[b]?e[b].css("display","block"):(c.renderOverlay(b),f[b]=d),h.highZIndex(e[b]),a.all(".J_conditionBtn").removeClass("active"),d.addClass("active")):(a.all(".J_blockOverlay").css("display","none"),a.all(".J_conditionBtn").removeClass("active"),h.emptyPool())},renderOverlay:function(a){var b,c=this,e=c.get("data").adv[a],f=c.get("overlayCont");b=new g(d.render(e)),c._overlays[a]=b,f.prepend(b)}},{EVENTS:{".J_conditionBtn":{mouseenter:function(b){this._cConditionBtn=a.one(b.currentTarget),this._isOnCBtn=!0,this.get("context").activeTick(f)},mouseleave:function(){this._isOnCBtn=!1,this.get("context").activeTick(f)}},".J_blockOverlay":{mouseenter:function(){this._isOnOverlay=!0,this.get("context").activeTick(f)},mouseleave:function(){this._isOnOverlay=!1,this.get("context").activeTick(f)}}}})},{requires:["srpbase/async/activity","./layertpl","xtemplate","node"]}),KISSY.add("components/navigation/overlay/layertpl",function(){return'<div class="block-overlay J_blockOverlay"><div class="overlay-panel">{{#each sub}}<a target="_self" trace="{{trace}}" class="param-item {{#if !isBaobei}}async-btn{{/if}}" href="{{url}}">{{text}}</a>{{/each}}</div></div>'}),KISSY.add("components/navigation/overlay/tpl",function(){return'<div class="block-head"><h4>\u7b5b\u9009\u6761\u4ef6:</h4></div><div class="block-body">{{#each adv}}<a title="{{text}}" class="condition-btn J_conditionBtn" href="javascript:;" data-overlayIndex="{{xindex}}">{{text}}<span class="condition-icon icon-btn-arrow-down-2"></span></a>{{/each}}</div>'}),KISSY.add("components/navigation/tpl",function(){return'<div class="navigation"><div class="nav-panel">{{#each common}}<div class="nav-block {{containerCls}}{{#if isLast}} last-block{{/if}} type-{{type}}"></div>{{/each}}{{#if adv}}<div class="nav-block last-block overlay-cont J_overlayCont"></div>{{/if}}</div>{{#selectionGuide}}<div class="nav-side"><a trace="{{trace}}" href="{{link}}" target="_blank">\u9009\u8d2d\u6307\u5357<span class="icon-btn-vnav-book"></span></a></div>{{/selectionGuide}}</div>'}),KISSY.add("components/newsrp/apass/index",function(a,b){function c(){c.superclass.constructor.apply(this,arguments)}return c.ATTRS={},a.extend(c,b,{initialize:function(){this._bindUI()},_bindUI:function(){function b(a){return a.offset().top>e}var c=this.get("el"),d=c.one(".nav"),e=d.offset().top;c.delegate("mouseenter",".J_FilterCheckList label",function(b){var c=a.one(b.currentTarget);c.addClass("icon-hover")}),c.delegate("mouseleave",".J_FilterCheckList label",function(b){var c=a.one(b.currentTarget);c.removeClass("icon-hover")}),c.delegate("click",".icon-btn-check-big,.icon-btn-check-big-hover",function(b){var c=a.one(b.currentTarget);c.hasClass("icon-btn-check-big-hover")?c.replaceClass("icon-btn-check-big-hover","icon-btn-check-big"):c.addClass("icon-btn-check-big-hover"),a.get("#J_filterForm").submit()}),c.delegate("mouseenter",".elem-wrapper",function(c){var e=a.one(c.currentTarget).one(".elem-popup"),f=d.last();if(b(f))for(e.prepend(f);(f=d.last())&&b(f);)e.prepend(f);e.show()}),c.delegate("mouseleave",".elem-wrapper",function(b){var c=a.one(b.currentTarget).one(".elem-popup");c.hide();for(var e=c.children(),f=0,g=e.length;g>f;)d.append(e.item(f++))})}}),c},{requires:["brix/core/brick","core"]}),KISSY.add("components/newsrp/filter/index",function(a,b,c){function d(){d.superclass.constructor.apply(this,arguments)}return d.ATTRS={},a.extend(d,b,{initialize:function(){var a=this;this._adjust(),c.readyResize(this.get("el"),function(){setTimeout(function(){a._adjust()},10)},this),this._bindUI()},_adjust:function(){var a=this.get("el");this._checkOverflow()?a.addClass("overflow"):a.removeClass("overflow")},_checkOverflow:function(){var a=this.get("el"),b=a.all(".nav li"),c=b.item(b.length-1),d=b.item(0),e=c.height();if(d&&c){var f=d.offset().top,g=c.offset().top;return g-f>=e-2}},_bindUI:function(){{var b=this.get("el"),c=b.one(".nav");c.offset().top}b.delegate("mouseenter",".J_FilterCheckList label",function(b){var c=a.one(b.currentTarget);c.addClass("icon-hover")}),b.delegate("mouseleave",".J_FilterCheckList label",function(b){var c=a.one(b.currentTarget);c.removeClass("icon-hover")}),b.delegate("click",".icon-btn-check-big,.icon-btn-check-big-hover",function(b){var c=a.one(b.currentTarget);c.hasClass("icon-btn-check-big-hover")?c.replaceClass("icon-btn-check-big-hover","icon-btn-check-big"):c.addClass("icon-btn-check-big-hover"),a.get("#J_filterForm").submit()}),b.delegate("mouseenter",".bd",function(b){var c=a.one(b.currentTarget);c.addClass("bd-hover"),c.one(".filter-more-btn").addClass("icon-hover")}),b.delegate("mouseleave",".bd",function(b){var c=a.one(b.currentTarget);c.removeClass("bd-hover"),c.one(".filter-more-btn").removeClass("icon-hover")})}}),d},{requires:["brix/core/brick","../../utils/resizebase","core"]}),KISSY.add("components/newsrp/gridbase/index",function(a,b,c){function d(){d.superclass.constructor.apply(this,arguments)}var e=a.require("io"),f=["removeClass","addClass"],g="pic-hover",h="item-hover";return d.EVENTS={".pic":{mouseenter:function(b){var c=this,d=a.one(b.currentTarget),e=d.one(".quick-btns");c._picToggle(d,1),c._quickToggle(e,1)},mouseleave:function(b){var c=this,d=a.one(b.currentTarget),e=d.one(".quick-btns");c._picToggle(d,0),c._quickToggle(e,0)}},".item":{mouseenter:function(b){this._itemToggle(a.one(b.currentTarget),1)},mouseleave:function(b){this._itemToggle(a.one(b.currentTarget),0)}},'[trace="auction"]':{click:function(b){var c=a.one(b.currentTarget),d=c.parent(".item"),f=d.attr("realtime_source"),g=d.attr("nid");f&&g&&e.get(f+g+"&t="+a.now())}},".J_ApassIgnore":{click:function(b){{var d=a.one(b.currentTarget),e=d.parent(".item");e.attr("realtime_source"),e.attr("nid")}d.after(c)}},".apass-btn-cancel":{click:function(b){var c=a.one(b.currentTarget),d=c.parent(".apass-container");d.fadeOut(.3)}},".apass-btn-summit":{click:function(b){var c=a.one(b.currentTarget),d=c.parent(".item"),f=d.attr("data-apass"),g=d.one(".hateshop"),h=d.one(".hatestyle");if(f){var i=f.replace("((hateshop))",g.attr("checked")?1:0).replace("((hatestyle))",h.attr("checked")?1:0);e.get(i,function(a){console.log(a),location.href=location.href})}}}},a.extend(d,b,{initialize:function(){},_picToggle:function(a,b){a[f[b]](g)},_quickTimer:null,_quickToggle:function(b,c){b&&(c?this._quickTimer=a.later(function(){b.show()},500):(this._quickTimer&&this._quickTimer.cancel(),this._quickTimer=null,b.hide()))},_itemToggle:function(a,b){a[f[b]](h)}}),d},{requires:["brix/core/brick","./tpl.js","core"]}),KISSY.add("components/newsrp/gridbase/tpl",function(){return'<div class="apass-container"><div class="icon-btn-apass-flag"></div><div class="apass-center"><p class="title">\u4e0d\u559c\u6b22\u5b9d\u8d1d</p><label class=""><input class="icon-btn-check-big hateshop"  type="checkbox" value="1">\u8be5\u5e97\u94fa\u5b9d\u8d1d\u90fd\u4e0d\u559c\u6b22</label><label class=""><input class="icon-btn-check-big hatestyle"  type="checkbox" value="1">\u6b64\u7c7b\u5b9d\u8d1d\u90fd\u4e0d\u559c\u6b22</label><p class="tip">\u4f60\u4e0d\u559c\u6b22\u7684\u5b9d\u8d1d\u5c06\u4e0d\u518d\u663e\u793a</p><div class="apass-btn-summit">\u786e\u5b9a</div><div class="apass-btn-cancel">\u53d6\u6d88</div></div><div class="apass-layer"></div></div>'}),KISSY.add("components/newsrp/gridcontent-promotion/index",function(a,b){function c(){c.superclass.constructor.apply(this,arguments)}return a.extend(c,b,{initialize:function(){var b=this;a.all(".activity-item").length>0&&(setTimeout(function c(){b._refreshActivity(),setTimeout(c,1e3)},0),setTimeout(function(){a.all(".activity-countdown").show()},1))},_refreshActivity:function(){for(var a=this.get("el"),b=a.all(".activity-item"),c=0,d=b.length;d>c;c++){var e=b.item(c),f=(new Date).getTime()/1e3,g=~~e.attr("data-start"),h=~~e.attr("data-end");g>f?(e.one(".time-desc").text("\u5f00\u59cb"),e.addClass("activity-nostart"),this._setTime(e,g-f)):(e.one(".time-desc").text("\u7ed3\u675f"),h>f?(this._setTime(e,h-f),e.removeClass("activity-nostart")):(this._setTime(e,0),e.addClass("activity-finish")))}},_setTime:function(a,b){var c=b/60,d=Math.floor(c%60),e=c/60,f=Math.floor(e%24),g=Math.floor(e/24);a.one(".day").text(g),a.one(".hour").text(f),a.one(".min").text(d)}}),c},{requires:["../gridcontent-simple/"]}),KISSY.add("components/newsrp/gridcontent-sameseller/index",function(a,b){function c(){c.superclass.constructor.apply(this,arguments)}return a.extend(c,b,{initialize:function(){}}),c},{requires:["../gridcontent-simple/"]}),KISSY.add("components/newsrp/gridcontent-simple/index",function(a,b){function c(){c.superclass.constructor.apply(this,arguments)}return a.extend(c,b,{initialize:function(){}}),c},{requires:["../gridcontent/"]}),KISSY.add("components/newsrp/gridcontent-store/index",function(a,b){function c(){c.superclass.constructor.apply(this,arguments)}return a.extend(c,b,{initialize:function(){}}),c.EVENTS={".elem-seller":{mouseenter:function(a){a.currentTarget}}},c},{requires:["../gridcontent-simple/"]}),KISSY.add("components/newsrp/gridcontent-thumbs/index",function(a,b){function c(){c.superclass.constructor.apply(this,arguments)}var d=a.require("dom");return c.ATTRS={},a.extend(c,b,{initialize:function(){this._renderUI(),this._bindUI()},_renderUI:function(){var a=this,b=a.get("el");b.all(".item").each(function(a){if(!a[0]._thumbs&&a.one(".pic-imgs-hook")){var b=a.one(".pic"),c=b.one("a"),d=b.one("img"),e=d.attr("data-ks-lazyload")||d[0].src,f=c[0].href;a.all(".pic-imgs-hook").each(function(a){a.attr("_src",a.one("img")[0].src);var b=f.split("#");b[1]?a.attr("href",b[0]+"&"+a.attr("href")+"#"+b[1]):a.attr("href",f+"&"+a.attr("href"))}),c.attr("_href",f),c.attr("_src",e),a[0]._thumbs=!0}})},_bindUI:function(){function b(b,c){e=a.later(function(){var a=d.parent(b,".item"),e=d.get(".pic a",a),g=d.get("img",e),h=e.className.slice(1);h="_"+h+"x"+h+".jpg",c?(g.src=e.getAttribute("_src").replace(/_\w{3}x\w{3}.jpg/,h),e.href=e.getAttribute("_href"),d.removeClass(f,"pic-imgs-active")):(g.src=b.getAttribute("_src").replace("_30x30.jpg",h),e.href=b.getAttribute("href"),f=b,d.addClass(f,"pic-imgs-active"))},100)}function c(){e&&(e.cancel(),e=null)}var e,f,g=this,h=g.get("el");h.delegate("mouseenter",".pic-imgs-hook",function(a){c(),f&&d.removeClass(f,"pic-imgs-active"),b(a.currentTarget,!1)}),h.delegate("mouseleave",".pic-imgs-hook",function(a){c(),b(a.currentTarget,!0)}),h.delegate("mouseenter",".pic-box",function(){c()})}}),c},{requires:["../gridcontent/"]}),KISSY.add("components/newsrp/gridcontent-u2i/index",function(a,b,c,d,e,f,g){function h(){h.superclass.constructor.apply(this,arguments)}function i(b){a.use("components/utils/wangwang",function(a,c){c.light(b)})}{var j=a.JSON;a.DOM}return h.ATTRS={sourceUrl:{},tnk:{}},a.extend(h,d,{initialize:function(){var a=this,b=a.get("el"),c=a.get("sourceUrl");c&&g.addCallback(b,function(){a._fetch(b,c)})},_fetch:function(b,c){var d=this,g=d.get("tnk"),h=d._getPromise(),i={name:"J_grid_u2i",options:{url:c,param:"",type:"get",dataType:"jsonp",scriptCharset:"utf-8",jsonp:"callback",parse:function(a){return a}}};e.fetchAll(i,function(c){c["API.RecommendBottomAPI"].handpick?(d._renderUI({tnk:g,item_list:e.parse(c["API.RecommendBottomAPI"].handpick.former_list,h,!0).slice(0,4)}),f.setData(j.parse(c["API.TraceInfo"].traceDataJSON))):(a.log("U2I\u63a5\u53e3\uff0c\u6570\u636e\u4e0d\u5b58\u5728\uff01"),b.remove())},function(){a.log("U2I\u63a5\u53e3\uff0c\u8bf7\u6c42\u5931\u8d25\uff01"),b.remove()})},_getPromise:function(){var a={nick:!0,user_id:!0,nid:!0,nick_u:!0,loc:!0,pict_url:!0,title:!0,tag_price:!0,biz30day:!0};return a},_renderUI:function(a){var d=this.get("el");if(d.html(new b(c).render(a)),SEARCH){var e=SEARCH.config("responsive");d.all("img").each(function(a){e.addImage(a,a.attr("_placeholder"))})}else d.all("img").each(function(a){a[0].src=a.attr("_placeholder")});i(d)}}),h},{requires:["xtemplate","./tpl-js","../gridcontent/","../../utils/resolver","srpbase/util/goldsend/","../../utils/datalazyload"]}),KISSY.add("components/newsrp/gridcontent-u2i/tpl-js",function(){return'<div><div class="elem-headline"><h5>hi&nbsp;<span>{{tnk}}</span>\uff0c\u6839\u636e\u60a8\u7684\u6d4f\u89c8\u3001\u6536\u85cf\u3001\u8d2d\u4e70\u884c\u4e3a\u731c\u60a8\u53ef\u80fd\u4e5f\u559c\u6b22</h5></div>{{#item_list}}<div class="col item" nid="{{nid}}" uid="{{user_id}}"><div class="item-box"><div class="pic"><p class="pic-box"><a href="http://item.taobao.com/item.htm?id={{nid}}" trace="btmHandpick" traceNum="2" target="_blank" class="s220"><span><img src="http://a.tbcdn.cn/kissy/1.0.0/build/imglazyload/spaceball.gif" _placeholder="{{pict_url}}_210x210.jpg" resy-img="true" ></span></a></p></div><div class="row row-focus"><div class="col price">\uffe5{{tag_price}}<em></em></div><div class="col end dealing">\u9500\u91cf\uff1a{{biz30day}}</div></div><h3 class="summary"><a href="http://item.taobao.com/item.htm?id={{nid}}" trace="btmHandpick" traceNum="2" target="_blank" title="{{title}}">{{title}}</a></h3><div class="row"><div class="col seller" ><a href="">{{nick}}</a></div><div class="col end loc">{{loc}}</div></div><div class="row service-box"><div class="col end"><span class="J_WangWang" data-nick="{{nick_u}}" data-display="inline" data-item="{{nid}}"  data-icon="small"  data-encode="true"></span></div></div></div></div>{{/item_list}}</div>'}),KISSY.add("components/newsrp/gridcontent/index",function(a,b,c){function d(){d.superclass.constructor.apply(this,arguments)}return a.extend(d,b,{initialize:function(){var a=this,b=a.get("el"),d=b.all(".elem-p4pblock");if(d&&d.length){var e=[],f={},g={};d.each(function(a){var b=a.attr("nid");b&&(e.push(b),f[b]=a,g[b]=a.attr("uid"))}),e.length&&new c({item_list:f,p4p_ids:e,user_ids:g})}}}),d},{requires:["../gridbase/","../p4pblock/"]}),KISSY.add("components/newsrp/i2i/gridcontent/index",function(a,b){function c(){c.superclass.constructor.apply(this,arguments)}return a.extend(c,b,{initialize:function(){}}),c},{requires:["../../gridcontent-simple/"]}),KISSY.add("components/newsrp/i2i/listcontent/index",function(a,b){function c(){c.superclass.constructor.apply(this,arguments)}a.require("node");return c.EVENTS={},a.extend(c,b,{}),c},{requires:["../../listcontent/"]}),KISSY.add("components/newsrp/i2i/sortbar/index",function(a,b,c){function d(){d.superclass.constructor.apply(this,arguments)}var e;return d.ATTRS={nofixed:{valueFn:function(){return a.UA.ie<7}}},d.EVENTS={".elem-loc":{mouseenter:function(b){a.one(b.currentTarget).addClass("location-hover icon-hover")},mouseleave:function(b){a.one(b.currentTarget).removeClass("location-hover icon-hover")}},".elem-pic":{mouseenter:function(b){e&&(e.cancel(),e=null),a.one(b.currentTarget).addClass("pic-hover")},mouseleave:function(b){e=a.later(function(){a.one(b.currentTarget).removeClass("pic-hover")},100)}}},a.extend(d,b,{initialize:function(){var b=this,d=b.get("el"),e=d.one(".elem-nav"),f=d.one(".sorting-btns"),g=d.one(".elem-fiter"),h=d.one("#sel-loc"),i=d.one(".pagination"),j=a.one(".newsrp-i2i-mystore-el");if(j){var k=j.one(".pic-box a"),l=k.one("img"),m=l[0].src,n=m.replace("_120x120.jpg","_210x210.jpg"),o=m.replace("_120x120.jpg","_40x40.jpg"),p=j.one(".price");d.prepend('<div class="elem-store"><div class="pic elem-pic"><div class="pic-box"><a href="'+k[0].href+'" target="_blank" class="s40"><img src="'+o+'" /></a></div><div class="pic-big-box"><div class="pic-box-arrow" ><i class="arrow arrow-top"><s class="arrow arrow-top"></s></i></div><div class="pic"><div class="pic-box"><a href="'+k[0].href+'" class="s210" target="_blank"><img src="'+n+'" /></a></div></div>'+p[0].outerHTML+"</div></div></div>")}if(f){e.append('<li class="tab-n-1 tab-n-r">'+f[0].outerHTML+"</li>");var q=e.one(".sorting-btns");g&&q.append("<li>"+g[0].outerHTML+"</li>"),h&&q.append('<li class="elem-loc" data-param=\''+a.trim(h.attr("data-param"))+"'></li>"),i&&q.append("<li>"+i[0].outerHTML+"</li>"),h=q.one(".elem-loc");var r=a.one("#J_filterForm")[0];if(h&&r){var s=new c({el:h});s.on("click",function(a){var b=a.text;r.loc.value=b,r.submit()})}}}}),d},{requires:["components/newsrp/sortbar/index","components/srpbase/location/index"]}),KISSY.add("components/newsrp/listbase/index",function(a,b){function c(){c.superclass.constructor.apply(this,arguments)}c.EVENTS={".pic":{mouseenter:function(b){this._picToggle(a.one(b.currentTarget),1)},mouseleave:function(b){this._picToggle(a.one(b.currentTarget),0)}},".shop-dsr":{mouseenter:function(b){this._dsrToggle(a.one(b.currentTarget),1)},mouseleave:function(b){this._dsrToggle(a.one(b.currentTarget),0)}},".descr-icon":{mouseenter:function(b){this._newDsrToggle(a.one(b.currentTarget),1)},mouseleave:function(b){this._newDsrToggle(a.one(b.currentTarget),0)}},'[trace="auction"]':{click:function(b){var c=a.one(b.currentTarget),d=c.parent(".item"),e=d.attr("realtime_source"),f=d.attr("nid");e&&f&&IO.get(e+f+"&t="+a.now())}}};var d=["removeClass","addClass"],e="pic-hover",f="descr-icon-hover";return a.extend(c,b,{initialize:function(){},_picToggle:function(a,b){a[d[b]](e)},_dsrToggle:function(a,b){b?a.one(".dropdown-list").show():a.one(".dropdown-list").hide()},_newDsrToggle:function(a,b){a[d[b]](f)}}),c},{requires:["brix/core/brick"]}),KISSY.add("components/newsrp/listcontent-thumbs/index",function(a,b){function c(){c.superclass.constructor.apply(this,arguments)}var d=a.require("dom");return c.ATTRS={},a.extend(c,b,{initialize:function(){this._renderUI(),this._bindUI()},_renderUI:function(){var a=this,b=a.get("el");b.all(".item-box").each(function(a){if(!a[0]._thumbs&&a.one(".pic-imgs-hook")){var b=a.one(".pic"),c=b.one("a"),d=b.one("img"),e=d.attr("data-ks-lazyload")||d[0].src,f=c[0].href;a.all(".pic-imgs-hook").each(function(a){a.attr("_src",a.one("img")[0].src);var b=f.split("#");b[1]?a.attr("href",b[0]+a.attr("href")+"#"+b[1]):a.attr("href",f+a.attr("href"))}),c.attr("_href",f),c.attr("_src",e),a[0]._thumbs=!0}})},_bindUI:function(){function b(b,c){e=a.later(function(){var a=d.parent(b,".pic-box-big"),e=d.get(".pic a",a),g=d.get("img",e),h=e.className.slice(1);h="_"+h+"x"+h+".jpg",c?(g.src=e.getAttribute("_src").replace(/_\w{3}x\w{3}.jpg/,h),e.href=e.getAttribute("_href"),d.removeClass(f,"pic-imgs-active")):(g.src=b.getAttribute("_src").replace("_30x30.jpg",h),e.href=b.getAttribute("href"),f=b,d.addClass(f,"pic-imgs-active"))},100)}function c(){e&&(e.cancel(),e=null)}var e,f,g=this,h=g.get("el");h.delegate("mouseenter",".pic-imgs-hook",function(a){c(),f&&d.removeClass(f,"pic-imgs-active"),b(a.currentTarget,!1)}),h.delegate("mouseleave",".pic-imgs-hook",function(a){c(),b(a.currentTarget,!0)}),h.delegate("mouseenter",".pic-box",function(){c()})}}),c},{requires:["../listcontent/"]}),KISSY.add("components/newsrp/listcontent/index",function(a,b){function c(){c.superclass.constructor.apply(this,arguments)}var d,e=a.require("node"),f=document,g=".btn-fastbuy",h="http://buy.taobao.com/auction/buy_now.htm",i='<input type="hidden" name="item_id_num" id="J_fb_item" value="{{value}}" />',j={initFastBuy:function(a){if(!d&&a.one(g)){var b=a.one("#J_fb_form"),c=a.one("#J_fb_token");d=f.createElement("form"),d.action=h,d.method="post",d.target="_blank",b&&d.appendChild(b[0]),c&&d.appendChild(c[0])}},submitFastBuy:function(a,b){var c=a.attr("_val");c&&d&&(b?b.val(c):b=new e(i.replace("{{value}}",c)),d.appendChild(b[0]),f.body.appendChild(d),d.submit())}};return c.EVENTS={".btn-fastbuy":{click:function(b){var c=a.one(b.currentTarget),d=a.one("#J_fb_item");j.submitFastBuy(c,d)}},".descr-icon":{mouseenter:function(){},mouseleave:function(){}}},a.extend(c,b,{initialize:function(){var a=this.get("el");j.initFastBuy(a)}}),c},{requires:["../listbase/","core"]}),KISSY.add("components/newsrp/navbar/index",function(){return'<div class="newsrp-navbar-el"><div class="row-n clearfix"><dl class="row-n-1  elem-nav clearfix"><dt><a href><span class=""></span>\u627e\u4f18\u60e0</a></dt><dd><a href>10\u5143\u5305\u90ae</a></dd><dd><a href>\u5386\u53f2\u6700\u4f4e\u4ef7</a></dd><dd><a href>\u514d\u8fd0\u8d39</a></dd><dd><a href>\u6dd8\u91d1\u5e01</a></dd><dd><a href>\u514d\u8d39\u9002\u7528</a></dd><dd><a href>\u5386\u53f2\u6700\u4f4e\u4ef7</a></dd><dd><a href>\u514d\u8fd0\u8d39</a></dd><dd><a href>\u6dd8\u91d1\u5e01</a></dd><dd><a href>\u514d\u8d39\u9002\u7528</a></dd></dl><dl class="row-n-1 elem-nav clearfix"><dt><a href><span class=""></span>\u627e\u7279\u8272</a></dt><dd><a href>10\u5143\u5305\u90ae</a></dd><dd><a href>\u5386\u53f2\u6700\u4f4e\u4ef7</a></dd><dd><a href>\u514d\u8fd0\u8d39</a></dd><dd><a href>\u6dd8\u91d1\u5e01</a></dd><dd><a href>\u514d\u8d39\u9002\u7528</a></dd></dl><dl class="row-n-1 elem-nav clearfix"><dt><a href><span class=""></span>\u627e\u6d3b\u52a8</a></dt></dl></div></div>'}),KISSY.add("components/newsrp/navigation/index",function(a,b,c,d){function e(){e.superclass.constructor.apply(this,arguments)
}var f=a.require("cookie"),g=(a.require("node"),a.require("event")),h="_nav_isnarrow_",i=0,j=1,k='<div class="nav-flexbox"></div>',l='<div class="icon-btn-check-small"></div>',m='<div class="nav-btn-container" ><a href="javascript:void(0);" trace="navMutiSelect" class="btn-submit">\u786e\u5b9a</a><a href="javascript:void(0);" class="btn-cancel J_CancelMulti">\u53d6\u6d88</a></div>',n='<a class="nav-more J_More" href="javascript:void(0);">\u66f4\u591a<span class="arrow"></span></a>';e.ATTRS={catNum:{value:0,setter:function(a){return a}},param:{value:{ppath:"",cat:"",url:window.__SafeUrl__}},minTypeUnfoldDelay:{value:200}},e.DOCEVENTS={body:{click:function(b){var c,d=a.one(b.target),e=!((d.hasClass("state-unfold")||d.parent(".state-unfold"))&&d.parent(".type-block"));e&&(c=a.one(".state-unfold",".type-block"),c&&c.removeClass("state-multi state-unfold"))}}},e.EVENTS={".J_TopbarSearch .search-input":{keydown:function(a){13==a.keyCode&&this.search()}},".J_TopbarSearch .topbar-submit":{click:function(){this.search()}},".nav-pill a":{click:function(b){this._setParam("ppath",a.DOM.attr(b.currentTarget,"data-pid")+":"),this.navigate(a.one(b.currentTarget))}},".nav-category .btn-submit":{click:function(b){var c,d=a.one(b.currentTarget),e=d.parent(".nav-category").one(".nav-category-content"),f=e.all(".icon-hover"),g=e.attr("data-pid"),h=[];if(0!=f.length){for(var i=0;i<f.length;i++)c=f.item(i),c.parent("li").hasClass("hide")||h.push(c.attr("data-param-value"));this._setParam("ppath",g+":"+h.join(",")),this.navigate(d)}}},".type-line .J_More,.type-block .J_More":{click:function(b){var c=a.one(b.currentTarget),d=c.parent(".nav-category");this.lazyNav(d),this.toggleFold(d),b.preventDefault()}},".type-min .nav-category,.nav-topbar .nav-category":{mouseenter:function(b){this._foldLater&&this._foldLater.cancel(),this._unfoldLater=a.later(this.unfold,this.get("minTypeUnfoldDelay"),!1,this,[a.one(b.currentTarget)])},mouseleave:function(b){var c=a.one(b.currentTarget);this._referCat=c,this._unfoldLater&&this._unfoldLater.cancel(),this._foldLater=a.later(function(){this.fold(c),this._referCat&&(this._referCat=void 0)},50,!1,this)}},".nav-category-panel":{mouseenter:function(){this._foldLater&&this._foldLater.cancel()},mouseleave:function(){this._referCat&&(this._foldLater=a.later(function(){this.fold(this._referCat),this._referCat&&(this._referCat=void 0)},50,!1,this))}},".J_Switch":{click:function(b){b.halt();var c=this.get("el"),d=c.one(".state-unfold");d&&this.toggleFold(d);var e=a.one(b.currentTarget),f=c.hasClass("nav-narrowed");f?(this.expand(),e.one("span").removeClass("icon-btn-arrow-down-3"),e.attr("title","\u6536\u8d77\u5bfc\u822a")):(this.narrow(),e.one("span").addClass("icon-btn-arrow-down-3"),e.attr("title","\u5c55\u5f00\u5bfc\u822a"))},mouseenter:function(b){var c=a.one(b.currentTarget);c.addClass("icon-hover")},mouseleave:function(b){var c=a.one(b.currentTarget);c.removeClass("icon-hover")}},".J_MultiChoice":{click:function(b){var c=a.one(b.currentTarget).parent(".nav-category");this.lazyNav(c),this.toMulti(c)}},".J_CancelMulti":{click:function(b){var c=a.one(b.currentTarget).parent(".nav-category");this.toRadio(c),b.preventDefault()}},".nav-category-content li a":{click:function(b){this.selectCategoryItem(a.one(b.currentTarget),b)},mouseenter:function(b){b.catHref=!0,this.selectCategoryItem(a.one(b.currentTarget),b)}}};var o=!1;return a.extend(e,b,{initialize:function(){this._loadParams(),a.all(".J_CategorySearch").on("valuechange",a.bind(this._searchInputValueChangeEvent,this)),this._categorys=a.all(".nav-category",".nav-content"),this._getAdjustCategory(),this._adjustBlockTypeColumn(),this._checkTypeminGroup(),this._checkTypeblockGroup(),!this.get("el").hasClass("nav-narrowed")&&this._init(),c.readyResize(this.get("el"),function(){this._adjustBlockTypeColumn(),this._checkContentOverflow(),this._checkTypeminGroup()},this);var b="at_bucketid="+SRP.Global.bucketid+"&multi_bucket="+SRP.Global.multi_bucket+"&f_stats_show=nav_height%3A"+this.get("el").height();d.send(b,!0)},_init:function(){this._findLast(),this._checkContentOverflow(),o=!0},search:function(){var b=a.one(".search-input",".J_TopbarSearch"),c=b.val(),d=b.attr("placeholder")||b.attr("_default");if(d&&d==c&&(c=""),""==c)return!1;var e=this.get("param"),f=e.url;f=f.replace(/&?q=[^&]*/g,""),e.url=f+"&q="+c,this.navigate()},_loadParams:function(){var a,b,c=this.get("param"),d=c.ppath,e={};if(d){a=d.split(";");for(var f=0;f<a.length;f++)b=a[f].split(":"),e[b[0]]=b[1]}c.params={cat:c.cat,ppath:e}},_setParam:function(a,b){"cat"===a?this._setCat(b):this._setPPath(b)},_setCat:function(a){var b=this.get("param");b.params.cat=a},_setPPath:function(a){var b=this.get("param").params.ppath;if(a){var c=a.split(":"),d=c[0],e=b[d];"undefined"!=typeof e?delete b[d]:b[d]=c[1]}},_resolvePPathMap:function(b){var c=[];return a.each(b,function(a,b){c.push(b+":"+a)}),c.join(";")},_renderUrl:function(){var a=this.get("param"),b=a.params,c=a.url,d=b.cat,e=this._resolvePPathMap(b.ppath);return d&&(c+="&cat="+d),e&&(c+="&ppath="+e),c},_presetUrl:function(){},_redirect:function(a){var b=document.createElement("a");if(b.href=a,b.setAttribute("target","_self"),document.body.appendChild(b),!b.click){var c=document.createEvent("Event");return c.initEvent("click",!0,!0),void b.dispatchEvent(c)}setTimeout(function(){b.click()},50)},navigate:function(a){var b=this._renderUrl();a?a.attr("href",b):this._redirect(b)},_searchInputValueChangeEvent:function(b){for(var c,d=b.newVal,e=a.one(b.currentTarget).parent().parent().one(".nav-category-content"),f=e.all("li"),g=0,h=0;h<f.length;h++)c=f.item(h),this._matchWord(c,d)?(g++,c.removeClass("hide")):c.addClass("hide");var i=e.one(".nav-search-noresult");0==g?i.show():i.hide()},_matchWord:function(a,b){var c=!1,d=a.one("a").attr("data-spell"),e=a.text().toLowerCase();return b=b.toLowerCase(),d&&(c=d.indexOf(b)>-1),!c&&(c=e.indexOf(b)>-1),c},_checkContentOverflow:function(){if(!this.get("el").hasClass("nav-narrowed")){var b=["type-line","type-block","four-box"];a.each(b,function(b){var c,d=a.one("."+b);if(d&&0!=(c=d.all(".nav-category")).length){var e=c.item(0).one("li"),f=parseInt(e.css("margin-top"))+parseInt(e.css("margin-bottom"))+parseInt(e.css("line-height"));"type-block"===b&&(f*=2);for(var g,h,i,j=0;j<c.length;j++){g=c.item(j),h=g.attr("lines"),h?(i="nav-"+h+"-line",f=26*(parseInt(h)-1)||26):i="";var k=g.one(".nav-more");this._checkCatOverflow(g,f)?(k?k.addClass("show"):g.append(a.DOM.create(n)),i&&g.addClass(i)):(k&&k.removeClass("show"),i&&g.removeClass(i)),g.one(".nav-category-lazy")&&k&&k.addClass("show")}a.each(c,function(){},this)}},this)}},_checkCatOverflow:function(a,b){var c=a.all("li"),d=a.hasClass("navhackHasmore");if(d)return!0;var e=c.item(0).offset().top,f=c.item(c.length-1).offset().top;return f-e>=b-2},_checkTypeminGroup:function(){var b=a.one(".type-min"),c=b.all(".nav-category");c.length>0?b.show():b.hide()},_checkTypeblockGroup:function(){if(this._categorys.length<=4){var a=this.get("el").one(".type-block");a&&a.hide()}},_getAdjustCategory:function(){this._adjustedCategory=this._categorys.item(5);var a,b,c,d=this,e=d.get("el");e.all("[lines]").each(function(e){c=e.attr("lines"),b="nav-"+c+"-line",a=26*(parseInt(c)-1)||26,d._checkCatOverflow(e,a)?e.addClass(b):e.removeClass(b)})},_adjustBlockTypeColumn:function(){if(this._adjustedCategory){var a=this.get("el"),b=a.width()<970,c=this._adjustedCategory,d=null!=c.parent(".nav-narrowed");c&&(b?this._removeCatFromBlockGroup(c,d):this._addCatToBlockGroup(c,d))}},_removeCatFromBlockGroup:function(a,b){var c=this.get("el"),d=c.one(".type-block");d&&d.hasClass("four-box")&&(b?a.removeClass("J_Moved"):(a.removeClass("state-unfold state-multi"),this._moveCatetoryFromBlockToMin(a,c.one(".type-min .nav-category-container")),this._findLast()),c.one(".type-block").removeClass("four-box"))},_addCatToBlockGroup:function(a,b){var c=this.get("el"),d=c.one(".type-block");d&&!d.hasClass("four-box")&&(b?(a.addClass("J_Moved"),a.attr("data-origin","type-block")):(this._moveCatetoryFromMinToBlock(a,d),this._findLast()),d.addClass("four-box"))},_findLast:function(a){var a=this.get("el").one(".type-block");if(a){var b=a.one(".last"),c=a.last(),d=b&&b==c;!d&&c&&(b&&b.removeClass("last"),c.addClass("last"))}},selectCategoryItem:function(a,b){var c=a.parent(".nav-category");c&&"1"==c.attr("data-link")||(c&&c.hasClass("state-unfold state-multi")?b.catHref||(this._multiSelect(a),b.preventDefault()):b.catHref?this._radioHref(a):this._radioSelect(a))},_radioHref:function(a){var b=a.attr("href")||"";if(-1===b.indexOf("http")){var c=this.get("param"),d=c.ppath,e=c.cat,f=c.url,g=[],h=a.attr("data-param-value"),i=a.parent(".nav-category-content"),j=i.attr("data-param-type"),k=i.attr("data-pid");"ppath"===j?void 0!=d[k]?delete d[k]:g.push(k+":"+h):e=h;for(var l in d)g.push(l+":"+d[l]);g.length&&(f+="&ppath="+g.join(";")),e&&(f+="&cat="+e),a.attr("href",f)}},_radioSelect:function(a){var b=a.parent(".nav-category-content"),c=b.attr("data-param-type"),d=a.attr("data-param-value");"ppath"===c&&(d=b.attr("data-pid")+":"+d),this._setParam(c,d),this.navigate(a)},_multiSelect:function(a){a.toggleClass("icon-hover")},toMulti:function(a){this.foldAll(),a.addClass("state-multi"),a.addClass("state-unfold"),a.parent(".type-line")?g.Target.fire("message.layerchange.resize",{box:this.get("el")}):g.Target.fire("message.layerchange.popup",{box:a}),this.initMulti(a)},toRadio:function(a){a.removeClass("state-multi"),a.removeClass("state-unfold"),a.one(".nav-category-content").scrollTop(0),a.parent(".type-line")?g.Target.fire("message.layerchange.resize",{box:this.get("el")}):g.Target.fire("message.layerchange.popup",{box:a}),this._resetItemSearch(a)},initMulti:function(b){b.attr("data-multi-inited")||(b.all(".nav-category-content a").prepend(a.DOM.create(l)),b.append(a.DOM.create(m)),b.attr("data-multi-inited",!0))},narrow:function(){var b=this.get("el"),c=[b.one(".type-block"),b.one(".type-line")],d=b.one(".type-min .nav-category-container");g.Target.fire("message.layerchange.resize",{box:this.get("el")}),f.set(h,j),b.addClass("nav-narrowed"),a.each(c,function(a){if(a)for(var b=a.attr("data-group"),c=a.all(".nav-category"),e=c.length-1;e>-1;e--){var f=c.item(e);f.attr("data-origin",b),f.addClass("J_Moved"),a.hasClass("type-block")?this._moveCatetoryFromBlockToMin(f,d):d.prepend(f)}},this)},expand:function(){var b=a.all(".J_Moved");this.get("el").removeClass("nav-narrowed"),f.set(h,i),g.Target.fire("message.layerchange.resize",{box:this.get("el")}),b.each(function(b){var c=b.attr("data-origin"),d=a.one("."+c);"type-block"===c?this._moveCatetoryFromMinToBlock(b,d):d.append(b),b.removeClass("J_Moved")},this);var c=this.get("el").one(".type-block");c&&this._findLast(),!o&&this._init(),this._checkTypeminGroup()},_moveCatetoryFromBlockToMin:function(a,b){a.unwrap();var c=a.one(".category-search");c&&a.one(".nav-category-wrap").prepend(c),a.removeClass("state-multi"),b.prepend(a)},_moveCatetoryFromMinToBlock:function(b,c){var d=b.one(".category-search");d&&b.prepend(d),c.append(b),b.wrap(a.DOM.create(k))},foldAll:function(){var b=a.one(".state-unfold");b&&(b.parent(".type-line")&&b.one(".nav-category-content").scrollTop(0),b.removeClass("state-unfold"),this._resetItemSearch(b)),a.all(".state-unfold-active").removeClass("state-unfold-active")},fold:function(a){this.foldAll(),this._toggleMintypeFold(a,!0)},unfold:function(a){this.foldAll(),a.addClass("state-unfold"),this._toggleMintypeFold(a,!1)},toggleFold:function(a){var b=a.hasClass("state-unfold"),c=a.one(".J_More");b?(this.fold(a),c.html('\u66f4\u591a<span class="icon-btn-arrow-down-2"></span>')):(this.unfold(a),c.html('\u6536\u8d77<span class="icon-btn-arrow-up-2"></span>'))},_resetItemSearch:function(a){var b=a.one(".J_CategorySearch");b&&b.val("");var c=a.one(".nav-search-noresult");c&&c.hide(),a.all(".hide").removeClass("hide")},_toggleMintypeFold:function(a,b){var c=a.parent(".nav-category-group"),d=c.hasClass("type-min")||c.hasClass("nav-topbar"),e=d&&!b,f=this.get("el").one(".nav-category-panel .nav-category-wrap");if(f){var h=+f.parent(".nav-category-panel").attr("data-origin-index"),i=f.parent(".nav-category-group").all(".nav-category").item(h);i.prepend(f)}var j,k=c.one(".nav-category-panel");e&&(k.append(a.one(".nav-category-wrap")),k.attr("data-origin-index",c.all(".nav-category").index(a)),j=k.one(".nav-category-content"),j&&"-1"===j.attr("data-pid")&&k.addClass("nav-panel-category"),c.addClass("state-unfold-active")),k?g.Target.fire("message.layerchange.popup",{box:k}):c.hasClass("type-line")?g.Target.fire("message.layerchange.resize",{box:this.get("el")}):g.Target.fire("message.layerchange.popup",{box:a})},lazyNav:function(a){var b=a.one(".nav-category-lazy");if(b){var c=a.one(".nav-category-content");c&&c.append(b.children()),b.remove()}}}),e},{requires:["brix/core/brick","../../utils/resizebase","../../utils/goldsend","core"]}),KISSY.add("components/newsrp/p4pblock/index",function(a){function b(){b.superclass.constructor.apply(this,arguments),this.initialize()}{var c=a.require("io"),d=a.require("base");a.require("node")}return b.ATTRS={p4p_ids:{},item_list:{},user_ids:{}},a.extend(b,d,{initialize:function(){var b=this,d=b.get("p4p_ids"),e=b.get("user_ids"),f=b.get("item_list"),g={promoPrice:{tokens:["promoPrice","promoOtherNeed"],render:function(a,b){var c=b.promoPrice,d=a.one(".price");if(a&&c&&""!==c){{d.text().slice(1)}d[0].innerHTML="<span>&yen;</span><strong>"+c+"</strong>"}}},dsrDescribe:{tokens:["dsrDescribe","dsrService","dsrDeliver","dsrDescribeGap","dsrServiceGap","dsrDeliverGap"],render:function(){}},coinTip:{tokens:["coinTip"],render:function(){}},spSeven:{tokens:["spUserType","spSeven","spSevenPlus","spSevenPlusNum"],render:function(){}}},h=[];for(var i in e)h.push(i);var j="http://show.re.taobao.com/feature_v1.htm",k="from=taobao_search&auction_ids="+d.join(",")+"&user_ids="+h.join(","),l=[];for(var m in g)l=l.concat(g[m].tokens);k+="&feature_names="+l.join(","),c({url:j,type:"get",data:k,dataType:"jsonp",scriptCharset:"utf-8",jsonp:"cb",success:function(b){var c=b.auction,d=b.user;c&&a.each(c,function(a){var b=a.auction_id,c=f[b];if(c)for(var e in g)g[e].render(c,a,d[b])})}})}}),b},{requires:["core"]}),KISSY.add("components/newsrp/pagination/index",function(a,b){function c(b){var c=a.Event.KeyCode||a.Event.keyCodes;a.one(document).on("keyup",function(a){"INPUT"!==a.target.tagName.toUpperCase()&&(a.keyCode===c.LEFT?b(-1):a.keyCode===c.RIGHT&&b(1))})}function d(b){if(!a.isPlainObject(b))return"";var c,d,e="&",f="=",g=[];for(c in b)if(b.hasOwnProperty(c))if(d=b[c],a.isArray(d)){if(a.isArray(d)&&d.length)for(var h=0,i=d.length;i>h;++h)g.push(c,f,d[h],e)}else g.push(c,f,d,e);return g.pop(),g.join("")}function e(b){if("string"!=typeof b||0===(b=a.trim(b)).length)return{};for(var c,d,e,f="&",g="=",h={},i=b.split(f),j=0,k=i.length;k>j;++j)c=i[j].split(g),d=c[0],e=c[1]||"",Object.prototype.hasOwnProperty.call(h,d)?a.isArray(h[d])?h[d].push(e):h[d]=[h[d],e]:h[d]=e;return h}function f(){f.superclass.constructor.apply(this,arguments)}return f.ATTRS={mode:{value:"p"},offset:{value:0},simplify:{value:!1},step:{value:5},index:{value:1},size:{value:15},sizeChange:{value:!1},count:{value:350},hascount:{value:!0},max:{value:!1},hasmax:{value:!1},statistics:{value:!1},pageCount:{value:!0},jump:{value:!1},goTo:{value:!0},goToUrl:{value:null},pageName:{value:"page"},pageSizeName:{value:"pagesize"},params:{value:!1},paramsArr:{value:!1},defaultUI:{value:!0},sizes:{value:[10,15,20,25,30]},urlInfo:{value:{}},formatUrl:{value:!1}},f.EVENTS={".page-num":{keydown:function(a){13===a.keyCode&&(a.preventDefault(),this._jumpPage())}},".btn-jump":{click:function(a){a.preventDefault(),this._jumpPage()}},a:{click:function(b){var c=this,d=a.one(b.currentTarget);if(d.hasClass("page-0-link")&&(b.preventDefault(),c.setConfig({index:-1})),d.hasClass("page"))b.preventDefault(),c.goToPage(parseInt(d.html(),10));else if(d.hasClass("page-prev")){b.preventDefault();var e=c.get("index");c.goToPage(e-1)}else if(d.hasClass("page-next")){b.preventDefault();var e=c.get("index");c.goToPage(e+1)}}},".page-wrap":{mouseenter:function(b){var c=a.one(b.currentTarget);c.addClass("pagewrap-hover")},mouseleave:function(b){var c=a.one(b.currentTarget);c.removeClass("pagewrap-hover")}},".page-prev,.page-next":{mouseenter:function(b){var c=a.one(b.currentTarget);c.addClass("hover")},mouseleave:function(b){var c=a.one(b.currentTarget);c.removeClass("hover")}}},f.FIRES={beforeGotoPage:"beforeGotoPage",goToPage:"goToPage",gotoPage:"gotoPage",sizeChange:"sizeChange"},f.METHODS={goToPage:function(a){if(!(1>a)){var b,c=this;b=c.fire("beforeGotoPage",{newIndex:a,prevIndex:c.get("index")}),b!==!1&&(c.set("index",a),c.setConfig({index:a})||(c.fire("goToPage",{index:a}),c.fire("gotoPage",{index:a})))}},setConfig:function(a){var b=this,c=b.get("size");for(var d in a)b.set(d,a[d]);if(a.goToUrl&&b._setUrlInfo(),b.get("goTo")){var e=b.doUrl();return location.href=e,!0}return a.size&&a.size!=c&&b.fire("sizeChange",{size:a.size}),b._destroyDropdown(),b._resizeConfig(),b.renderUI(),b._getDropDown(),!1},parseUrl:function(a){var b=document.createElement("a");return b.href=a,{source:a,protocol:b.protocol.replace(":",""),host:b.hostname,port:b.port,query:b.search,params:function(){return e(b.search.replace(/^\?/,""))}(),file:(b.pathname.match(/\/([^\/?#]+)$/i)||[,""])[1],hash:b.hash.replace("#",""),path:b.pathname.replace(/^([^\/])/,"/$1"),relative:(b.href.match(/tps?:\/\/[^\/]+(.+)/)||[,""])[1],segments:b.pathname.replace(/^\//,"").split("/")}},doUrl:function(){var a=this,b=a.get("urlInfo"),c=a.get("index"),e=a.get("size"),f=a.get("pageName"),g=a.get("pageSizeName"),h="";return b.params[f]=a._offset(c),g?b.params[g]=e:b.params[g]&&delete b.params[g],b.host&&(h=b.protocol+"://"+b.host,0!=b.port&&80!=b.port&&(h+=":"+b.port)),h+=b.path+"?",-1==c&&(h+="page0count="+a.get("count")+"&"),h+=d(b.params),""!=b.hash&&(h+="#"+b.hash),h}},a.extend(f,b,{initialize:function(){var a=this;a._setUrlInfo();var b=a.get("urlInfo"),d=a.get("mode"),e=a.get("offset"),f=a.get("pageName"),g=a.get("pageSizeName");if(g&&b.params[g]&&a.set("size",parseInt(b.params[g],10)),b.params[f])switch(d){case"p":a.set("index",parseInt(b.params[f],10)-e);break;case"s":var h=a.get("size");a.set("index",(parseInt(b.params[f],10)-e*h)/h)}a._resizeConfig(),a.get("defaultUI")&&a.renderUI(),a._getDropDown();var i=a.get("index");c(function(b){a.goToPage(i+b)})},initBtnEvent:function(){var b=this,c=a.one(".page-num"),d=a.one(".btn-jump");c.on("focus",function(){a.one(".anim").show().stop(1).animate({left:47},{duration:.2})}),c.on("blur",function(){window.setTimeout(function(){b.isAtBtn||a.one(".anim").stop(1).animate({left:0},{duration:.2,complete:function(){}})},300)}),d.on("mouseenter",function(){b.isAtBtn=!0}),d.on("mouseleave",function(){b.isAtBtn=!1})},destructor:function(){this._destroyDropdown()},renderUI:function(){var b,c,d=this,e=(d.get("mode"),d.get("formatUrl")),f=d.get("step"),g=d.get("index"),h=d.get("max"),i=d.get("size"),j=d.get("count"),k=d.get("hascount"),l=d.get("pageCount"),m=[];if(d.get("statistics")){if(m.push('<div class="pagination-info"><span>\u5f53\u524d</span><span class="b">'+(0==j?0:(g-1)*i+1)+"-"+Math.min(g*i,j)+'</span><span>\u6761</span><span class="mr">\u5171</span><span class="b">'+j+'</span><span>\u6761</span><span class="mr">\u6bcf\u9875\u5c55\u73b0</span>'),d.get("sizeChange")){var n=d.get("sizes");m.push('<div class="dropdown"><span class="dropdown-hd"><span class="dropdown-text" value="'+a.indexOf(i,n)+'">'+i+'</span></span><ul class="dropdown-list dropdown-list-noicon">'),a.each(n,function(a,b){m.push('<li class="dropdown-item'+(a==i?" dropdown-itemselected":"")+'"><span value="'+b+'">'+a+"</span></li>")}),m.push("</ul></div>")}else m.push('<span class="b">'+i+"</span>");m.push("<span>\u6761</span></div>")}if(m.push('<div class="pagination-pages"><div class="pagination-page">'),g>1?(b="icon-btn-prev-2",c=""):(b="icon-btn-prev-2-disable",c="icon-disable"),m.push('<div class="page-wrap page-siblings icon-tag"><a trace="srp_bottom_pageup" title="\u4e0a\u4e00\u9875" href="'+e.replace("{$p}",d._offset(g-1))+'" class="page-prev '+c+'"><span class="'+b+'">\u4e0a\u4e00\u9875</span>\u4e0a\u4e00\u9875</a></div>'),d.get("simplify"))m.push('<span class="page-simply">'+g+"/"+h+"</span>");else{var o=Math.max(1,g-parseInt(f/2)),p=Math.min(h,o+f-1);o=Math.max(1,p-f+1),d.get("page0")&&m.push('<div class="page-wrap page-0"><div class="bg"></div><a class="page-0-link">&#xe600;</a></div>'),o>=3?(m.push('<div class="page-wrap"><div class="bg"></div><a trace="srp_bottom_page1" class="page" href="'+e.replace("{$p}",d._offset(1))+'" title="\u7b2c1\u9875">1</a></div>'),m.push('<div class="page-wrap"><div class="bg"></div><a trace="srp_bottom_page2" class="page" href="'+e.replace("{$p}",d._offset(2))+'" title="\u7b2c2\u9875">2</a></div>'),o>3&&m.push('<span class="page-split">...</span>')):2==o&&m.push('<div class="page-wrap"><div class="bg"></div><a trace="srp_bottom_page1" class="page" href="'+e.replace("{$p}",d._offset(1))+'" title="\u7b2c1\u9875">1</a></div>');for(var q=o;p>=q;q++)m.push(q===g?'<div class="page-wrap"><span class="page-cur">'+q+"</span></div>":'<div class="page-wrap"><div class="bg"></div><a trace="srp_bottom_page'+q+'" class="page" href="'+e.replace("{$p}",d._offset(q))+'" title="\u7b2c'+q+'\u9875">'+q+"</a></div>");h>=p+2?m.push('<span class="page-split">...</span>'):h>p&&m.push('<div class="page-wrap"><div class="bg"></div><a trace="srp_bottom_page'+h+'" class="page" href="'+e.replace("{$p}",d._offset(h))+'" title="\u7b2c'+h+'\u9875">'+h+"</a></div>")}g!=h?(c="",b="icon-btn-next-2"):(c="icon-disable",b="icon-btn-next-2-disable"),m.push('<div class="page-wrap page-siblings icon-tag"><a trace="srp_bottom_pagedown"  title="\u4e0b\u4e00\u9875" href="'+e.replace("{$p}",d._offset(g+1))+'" class="page-next '+c+'"><span class="'+b+'">\u4e0b\u4e00\u9875</span>\u4e0b\u4e00\u9875</a></div>'),m.push("</div>"),k&&l&&m.push('<div class="pagination-count"><span>\u5171</span><span class="b">'+h+"</span><span>\u9875</span></div>"),d.get("jump")&&m.push('<div class="pagination-form"><label>\u53bb\u7b2c</label><div class="page-num-wrap"><input class="page-num" value="'+Math.min(h,g+1)+'" name="page" type="text"><span class="anim"><a class="btn-jump">\u786e\u5b9a</a>\u9875</span></div></div>'),m.push("</div>"),d.get("el").html(m.join("")),d.initBtnEvent()},_offset:function(a){var b=this,c=b.get("mode"),d=b.get("offset");switch(c){case"p":return a+d;case"s":var e=b.get("size");return e*(a+d);default:return a+d}},_getDropDown:function(){var a=this;if(a.get("sizeChange")&&a.get("statistics")){var b=a.get("el").one(".dropdown");if(b){var c=b?b.attr("id"):!1;c&&a.pagelet?a.pagelet.ready(function(){a.dropdown=a.pagelet.getBrick(c),a.dropdown?a._bindDropdownSizeChange():a._createDropdown()}):a._createDropdown()}}},_createDropdown:function(){var b=this;a.use("brix/gallery/dropdown/",function(a,c){b.dropdown=new c({tmpl:b.get("el").one(".dropdown")}),b._bindDropdownSizeChange()})},_bindDropdownSizeChange:function(){var a=this;a.dropdown.on("selected",function(b){a.setConfig({index:1,size:b.text})})},_destroyDropdown:function(){var a=this;a.dropdown&&(a.dropdown.destroy(),a.dropdown=null)},_jumpPage:function(){var a=this,b=this.get("el").one(".page-num"),c=parseInt(b.val(),10),d=a.get("max"),e=a.get("index");return isNaN(c)||1>c||c==e||c>d?void b[0].select():void this.goToPage(c)},_setUrlInfo:function(){var b=this,c=b.get("params");b.get("goToUrl")||b.set("goToUrl",location.href);var d=b.parseUrl(b.get("goToUrl"));c&&a.each(c,function(a,b){d.params[b]=a}),b.set("urlInfo",d)},_resizeConfig:function(){{var a=this,b=a.get("index"),c=a.get("hascount"),d=a.get("step"),e=a.get("size"),f=a.get("count"),g=a.get("max"),h=a.get("hasmax"),i=a.get("mode"),j=a.get("pageName");a.get("pageSizeName")}c||(f=b>=d?e*(b+1):e*d,a.set("count",f)),g=h?Math.min(Math.ceil(f/e),g):Math.ceil(f/e),a.set("max",g),b=Math.min(b,g),a.set("index",b),0===f&&(a.set("max",1),a.set("index",1)),d=Math.min(d,g),a.set("step",d);var k=a.doUrl();switch(i){case"p":k=k.replace(j+"="+b,j+"={$p}");break;case"s":k=k.replace(j+"="+b*e,j+"={$p}")}a.set("formatUrl",k)}}),a.augment(f,f.METHODS),f},{requires:["brix/core/brick"]}),KISSY.add("components/newsrp/qrsort/index",function(a,b){function c(){c.superclass.constructor.apply(this,arguments)}return c.EVENTS={".J_qrSortDp":{mouseenter:function(b){a.one(b.currentTarget).addClass("qr-sort-dp-hover")},mouseleave:function(b){a.one(b.currentTarget).removeClass("qr-sort-dp-hover")}},".J_qrSortItem":{click:function(b){var c=a.one(b.currentTarget),d=c.attr("data-value"),e=this.get("el");e.one(".J_qrSortDp").prepend(c),e.one(".J_submitBtn").attr("data-value",d)}},".J_submitBtn":{click:function(b){var c=a.one(b.currentTarget),d=c.attr("data-value"),e=a.one("#J_filterForm");if(d)e[0].sort2.value=d,e[0].sortn.value="3";else{var f=e.one("input[name=sort2]"),g=e.one("input[name=sortn]");f&&f.remove(),g&&g.remove()}e[0].submit()}}},a.extend(c,b,{initialize:function(){}}),c},{requires:["brix/core/brick","core"]}),KISSY.add("components/newsrp/sortbar/index",function(a,b,c,d,e,f,g){function h(a){p||new c({form:a})}function i(b){var c=new d,e=a.DOM.get(b);return c.on("click",function(a){var b=a.text;e.loc.value=b,e.submit()}),c}function j(){j.superclass.constructor.apply(this,arguments)}var k=a.require("cookie"),l=(a.require("node"),"_sortbar_stick_"),m="#J_filterForm",n="sortbar-fixed",o="sortbar-nofixed",p=!!window.ActiveXObject&&!window.XMLHttpRequest;return j.ATTRS={},j.EVENTS={".icon-todo-cancel":{click:function(){this._enNoFixed()}},".dropdown":{mouseenter:function(b){var c=a.one(b.currentTarget);c.addClass("dropdown-hover")},mouseleave:function(b){var c=a.one(b.currentTarget);c.removeClass("dropdown-hover")}}},a.extend(j,b,{initialize:function(){var a=this;a._renderUI(),h(m),i(m)},_renderUI:function(){var b=this,c=b.get("el"),d=c.one("#J_RankLike"),g=a.one(".sortbar-holder"),h=b._hasNoFixed();d&&(p||g.width()<840)&&d.hide(),h||(b._bindFixedClick(),e.fixed(c[0],n,50,0,function(b,c){var b=a.one(b);c?(b[0]._fixed=!1,b.css("width","")):(b[0]._fixed=!0,b.css("width",b.parent().width()))}),f.readyResize(document.body,function(){var a=g.width();d&&(840>a?d.hide():d.show()),c[0]._fixed&&c.width(a)},b,!1,!0))},_bindFixedClick:function(){var a=this.get("el");a.all("[trace]").each(function(b){b.on("click",function(){var c=b.attr("trace"),d=g.getStat().rule,e=d[c];e&&(d[c]=a[0]._fixed?e.replace(/stats_click=([^&]*)/,function(a){return-1===a.indexOf("hover_click:1")?a+";hover_click:1":void 0}):e.replace(";hover_click:1",""))})})},_enNoFixed:function(){var a=this.get("el");a.removeClass(n),k.set(l,"0"),a.parent().addClass(o)},_hasNoFixed:function(){var a=this.get("el"),b=this.get("nofixed");return"0"===k.get(l)||b?(a.parent().addClass(o),!0):!1}}),j},{requires:["brix/core/brick","components/srpbase/pricerange/index","components/srpbase/location/index","components/utils/scrollbase","components/utils/resizebase","srpbase/util/goldsend/","core"]}),KISSY.add("components/newsrp/supplement-suggest/index",function(a,b){function c(){c.superclass.constructor.apply(this,arguments)}return a.extend(c,b,{initialize:function(){}}),c},{requires:["brix/core/brick"]}),KISSY.add("components/newsrp/supplement-tbalink/index",function(a,b,c,d){function e(){e.superclass.constructor.apply(this,arguments)}var f=a.require("io");return e.ATTRS={},e.METHOD={},e.EVENTS={".supple-wanke":{mouseenter:function(b){var e=a.one(b.currentTarget);if(!this.wanke){this.wanke=!0;var g=e.attr("data-url");f.get(g,function(b){var f=new c(d).render(b["API.WankeApi"]);e.append(a.one(f))})}}}},a.extend(e,b,{}),a.augment(e,e.METHOD),e},{requires:["brix/core/brick","xtemplate","./wanke.tpl"]}),KISSY.add("components/newsrp/supplement-tbalink/wanke.tpl",function(){return'<div class="supple-wanke-tip"><ol>{{#wanke_links}}<li><a href="{{guide_info_url}}" target="_blank" trace="wanke" link-order="{{xindex+2}}"  title="{{guide_title}}">{{xindex+1}}. {{guide_title}}</a></li>{{/wanke_links}}</ol></div>'}),KISSY.add("components/newsrp/tab2mysearch/gridcontent/index",function(a){function b(){b.superclass.constructor.apply(this,arguments),this.initialize()}var c=a.require("srpbase/widget/gridcontent/gridpills/index"),d="mysearch-gridcontent",e=".hate-tgr",f="hate-tgr-hover";return a.extend(b,c,{initialize:function(){b.superclass.initialize.apply(this,arguments),this._renderUI(),this._bindUI()},_renderUI:function(){this.get("el").addClass(d)},_bindUI:function(){var b=this,c=b.get("el");c.delegate("mouseenter",e,function(b){var c=a.one(b.currentTarget);c.addClass(f)}),c.delegate("mouseleave",e,function(b){var c=a.one(b.currentTarget);c.removeClass(f)}),c.delegate("click",e,function(b){var c=a.one(b.currentTarget),d=c.attr("_paramurl");b.preventDefault(),a.getScript(d+"&t="+a.now(),function(){location.href=c.attr("href")})})}}),b}),KISSY.add("components/newsrp/tab2mysearch/gridcontent/lessgraph/index",function(a,b){function c(){c.superclass.constructor.apply(this,arguments)}return a.extend(c,b,{}),c},{requires:["../index"]}),KISSY.add("components/newsrp/tab2mysearch/gridcontent/lessgraph/tpl",function(a,b){return b.replace("{{#auctions}}",'<textarea class="ks-datalazyload"><div class="gridcontent-lessgraph-tips clearfix"><div class="tips-text"><span>\u8ddf\u4f60\u559c\u597d\u76f8\u4f3c\u7684\u7528\u6237\u4e5f\u5728\u4e70</span></div></div>{{#auctions}}').replace("{{/auctions}}","{{/auctions}}</textarea>")},{requires:["../tpl"]}),KISSY.add("components/newsrp/tab2mysearch/gridcontent/lessrequery/index",function(a,b){function c(){c.superclass.constructor.apply(this,arguments)}return a.extend(c,b,{}),c},{requires:["../index"]}),KISSY.add("components/newsrp/tab2mysearch/gridcontent/lessrequery/tpl",function(a,b){return b.replace("{{#auctions}}",'<div class="gridcontent-lessrequery-tips"><div class="tips-text"><span>\u641c\u7d22\u8fd9\u7c7b\u5546\u54c1\u7684\u7528\u6237\u90fd\u5728\u4e70</span></div></div><textarea class="ks-datalazyload">{{#auctions}}').replace("{{/auctions}}","{{/auctions}}</textarea>")},{requires:["../tpl"]}),KISSY.add("components/newsrp/tab2mysearch/gridcontent/tpl",function(a){var b=a.require("srpbase/widget/gridcontent/gridpills/tpl");return b.replace('{{#tagName}}<div class="elem-tag {{tagColor}}"><a href="{{tagUrl}}" >{{tagName}}</a></div>{{/tagName}}',function(){return'{{#tagName}}<div class="elem-tag {{tagColor}}"><a href="{{tagUrl}}" >{{tagName}}</a></div>{{/tagName}}{{#hateUrl}}<a href="{{hateUrl}}" _paramurl="{{hateParamUrl}}" class="hate-tgr"><div class="hate-tgr-tip">\u4e0d\u5728\u663e\u793a\u8fd9\u5bb6\u5e97\u7684\u5b9d\u8d1d</div></a>{{/hateUrl}}'})}),KISSY.add("components/newsrp/tab2mysearch/index",function(a,b,c,d,e){function f(b){a.use("components/utils/wangwang",function(a,c){c.light(b)})}function g(){try{TB.Global.blacklist=["fn-cart"],TB.Global.init()}catch(b){a.log("\u540a\u9876\u521d\u59cb\u5316\u5931\u8d25")}}function h(){var b={document:{"0-1260":{className:"range-1-small",imgSize:["s180","180x180.jpg"]},"1260-1440":{className:"range-1-normal",imgSize:["s220","220x220.jpg"]},"1440-10000":{className:"range-1-large",imgSize:["s250","250x250.jpg"]}}},c=a.require("srpbase/common/wrd/index"),d=new c({boxs:["J_Page","J_SiteNavBd","J_footer"],prefixCls:"s-page-",regions:b,autoAdapt:!0,autoDestroy:!1,autoRender:!1,delay:100,HDImgSize:!1,holderAttr:"data-ks-lazyload"});return d}function i(b){var c=a.require("srpbase/common/lazy/index"),d=new c({execScript:!0,autoDestroy:!1,diff:{bottom:500,top:1e4},onStart:b});return d}function j(){var b=a.require("srpbase/common/freepopup/"),c=new b({apiurl:"/search?app=api",param:window.SRP.Global||m.Global,icondata:m.Icon});return c}function k(){var b=a.require("ua");return b.ie<9&&(o="div"),n.replace(/vtag/g,o)}var l=window,m=l.givenByFE;a.config(a.Config.debug?{combine:!1,packages:[{name:"components",debug:!0,path:"./src"},{name:"tbc",path:"http://g.assets.daily.taobao.net/tbc/",ignorePackageNameInUri:!0}]}:{combine:!0,packages:[{name:"components",debug:!0,path:"http://g.tbcdn.cn/tb/tsrp/"},{name:"tbc",path:"http://g.tbcdn.cn/tbc/",ignorePackageNameInUri:!0}]});
var n=['<vtag id="J_container">','<div class="tb-wrapper">','<div class="tb-wrapper-main">','<vtag id="J_headsearch"></vtag>',"</div>","</div>",'<vtag class="tb-wrapper">','<vtag class="tb-wrapper-main">','<vtag id="J_tabpage"></vtag>','<vtag id="J_postcard"></vtag>','<vtag id="J_navbar"></vtag>','<vtag id="J_content"></vtag>','<vtag id="J_combo"></vtag>',"</vtag>","</vtag>",'<vtag class="tb-wrapper-sub">','<vtag id="J_headsidebar"></vtag>','<vtag id="J_advertbox">','<div id="J_shopkeeper"></div>','<div id="J_shopfeature"></div>','<div id="etao-recommend"></div>',"</vtag>","</vtag>",'<vtag id="J_clearfix"></vtag>','<vtag id="J_advertbox_bottom"">','<div id="J_shopkeeper_bottom"></div>',"</vtag>",'<vtag id="J_footsearch"></vtag>',"</vtag>"].join(""),o="vbox",p={"#J_SiteNav":{weight:0},"#J_headsearch":{weight:0,components:["srpbase/widget/headsearch/"]},"#J_tabpage":{weight:1,components:["components/newsrp/tabpage/"]},"#J_postcard":{weight:2,components:["srpbase/widget/postcard/account/tpl"]},"#J_navbar":{weight:3,components:["components/newsrp/tab2mysearch/nav/"]},"#J_content":{weight:4,components:["components/newsrp/tab2mysearch/gridcontent/","components/newsrp/tab2mysearch/gridcontent/lessgraph/","components/newsrp/tab2mysearch/gridcontent/lessrequery/"]},"#J_combo":{weight:5,components:[]},"#J_headsidebar":{weight:0,components:["srpbase/widget/headsidebar/tpl"]},"#J_advertbox":{weight:1,components:[]},"#J_advertbox_bottom":{weight:6,components:[]},"#J_footsearch":{weight:7,components:["srpbase/widget/supplement/search/tpl"]},".tb-footer":{weight:8}};return function(){var n=a.require("srpbase/common/mvp/presentor"),q=new n;q.set("params",m.Global),q.set("safeUrl",l.__SafeUrl__),q.set("layout",k()),q.set("VIEWTag",o),q.set("view",p),q.set("APITag",m.APITag||"app=api&m=get_mysearch"),q.set("IMGTag",m.IMGTag||"_210x210.jpg"),q.set("container","#J_Page"),q.use(c),q.on("view",function(){q.use(e)});var r,s;q.on("create",function(){g(),r=h(),s=i(function(b){"img"==b.type?r.addImage(b.elem,b.src):a.later(function(){var c=a.one(b.elem).prev();f(c),r.addImages(c.all("img"))},50)}),j(),q.use(b),q.use(d),q.on("renderP4P",function(a){var b=a.el,c=a.key;if("J_shopkeeper"==c){var d=b.all("img");d.each(function(a){a.attr("resy-img","true"),r.addImage(a,a.attr("_placeholder"))})}else if("J_shopfeature"==c){var d=b.all(".pic img");d.each(function(a){r.bindImg(a[0],a.attr("_placeholder")),a[0]._cls=""})}}),a.one("#J_SiteNav").animate({opacity:1},.5,"easeOut")}),q.on("render",function(a){f(a.view.el)}),q.on("ready",function(){s.initLoadEvent(),r.refreshPage()}),q.start(m.defaultData)}},{requires:["./ware/p4p/","./ware/statsend/","./ware/sidebar/","./ware/gridlazy/","./nav/","./gridcontent/","./gridcontent/lessgraph/","./gridcontent/lessrequery/","xtemplate","core"]}),KISSY.add("components/newsrp/tab2mysearch/nav/index",function(a,b,c){function d(){d.superclass.constructor.apply(this,arguments),this.initialize()}var e=a.require("ua"),f=a.require("base"),g="elem-wrapper-fixed";return a.extend(d,f,{initialize:function(){6!=e.ie&&this._adapt()},_adapt:function(){var d=this,e=d.get("el");e&&(b.fixed(e.one(".elem-wrapper")[0],g,50,0,function(b,c){var b=a.one(b),d=b.parent("#J_navbar");(b||d)&&(c?(b[0]._fixed=!1,b.css("width",""),d.css("zIndex","800")):(b[0]._fixed=!0,b.css("width",b.parent().width()),d.css("zIndex","100000")))}),c.readyResize(document.body,function(){if(e&&e[0]._fixed){var a=e.parent().width();e.width(a)}},d,!1,!0))},destroy:function(){}}),d},{requires:["srpbase/util/scrollbase/","srpbase/util/resizebase/","core"]}),KISSY.add("components/newsrp/tab2mysearch/nav/tpl",function(){return['<div class="mysearch-nav-el">','<ul class="mn-n-x elem-wrapper clearfix">',"{{#navs}}",'<li class="mn-1-x {{selected}} elem-nav-i"><a href="{{href}}" _extra="{{extra}}">{{text}}</a></li>',"{{/navs}}","</ul>","</div>"].join("")}),KISSY.add("components/newsrp/tab2mysearch/ware/gridlazy/index",function(a){function b(){return!!h.get("_l_g_")}function c(){return unescape(decodeURIComponent(h.get("_nk_")||h.get("snk")).replace(/\\u/g,"%u"))}function d(b){a.config(a.Config.debug?{combine:!1,packages:[{name:"tbc",path:"http://g.assets.daily.taobao.net/tbc/",ignorePackageNameInUri:!0}]}:{combine:!0,packages:[{name:"tbc",path:"http://g.tbcdn.cn/tbc/",ignorePackageNameInUri:!0}]}),a.use("tbc/mini-login/1.4.2/",function(a,c){function d(){return c.check({type:"l"})}d()||c.show(function(){location.href=b})})}function e(){e.superclass.constructor.apply(this,arguments)}var f=a.require("srpbase/common/mvp/ware"),g=a.require("dom"),h=a.require("cookie"),i=a.require("event"),j=a.require("node"),k=a.require("xtemplate"),l=['<div class="tab2mysearch-postcard">',"{{#noresult}}",'<div class="elem-noresult">','<div class="elem-icon"></div>','<div class="elem-desc">','<s class="quote-icon quote-left"></s><s class="quote-icon quote-right"></s>',"<span>\u62b1\u6b49\uff01{{nick}}\uff0c\u6211\u4eec\u8fd8\u4e0d\u592a\u61c2\u4f60\uff0c\u8bf7\u5148\u56db\u5904\u901b\u901b\u3002</span>","<span>\u7a0d\u540e\u6211\u4eec\u4f1a\u6839\u636e\u4f60\u7684\u884c\u4e3a\uff0c\u6311\u9009\u51fa\u53ea\u5c5e\u4e8e\u4f60\u7684\u4f18\u8d28\u7ed3\u679c\u3002</span>","</div>","</div>","{{/noresult}}","{{#unlogin}}",'<div class="elem-unlogin">','<div class="elem-icon"></div>','<div class="elem-desc">','<s class="quote-icon quote-left"></s><s class="quote-icon quote-right"></s><span>\u4e13\u5c5e\u4e8e\u4eb2\u7684\u4f18\u9009\u7ed3\u679c\u5df2\u7ecf\u7b49\u5f85\u5f88\u4e45\u4e86\uff0c\u8d76\u5feb\u767b\u5f55\u53bb\u770b\u770b\u5427\uff01</span>',"</div>",'<a  class="elem-tologin" href="{{url}}">\u7acb\u5373\u767b\u5f55</a>',"</div>","{{/unlogin}}","</div>"].join(""),m='<div id="J_content_loading" style="position: absolute; left: 0; width: 100%; display: none;text-align: center;border: 1px solid #d5d5d5;background: #eeeeee;"><div style=" display: inline-block; *display: inline; *zoom: 1;padding: 0px 30px 0 60px;  color: #666; background: url(http://img01.taobaocdn.com/tps/i1/T1Z6DDXllbXXbb3zDj-60-24.gif) no-repeat 0 5px #eeeeee; height: 34px; line-height: 34px; ">\u6b63\u5728\u52aa\u529b\u7684\u4e3a\u60a8\u52a0\u8f7d\u3002\u3002\u3002</div></div>',n="components/newsrp/tab2mysearch/gridcontent/index";return a.extend(e,f,{ineffect:!1,load:function(){function b(){var b=a.one("#J_content_loading");if(!d.ineffect)return void(b&&b.hide());if(!o.isRunning()){var c=a.one("#J_content"),e=c.offset().top,f=a.one("#J_advertbox_bottom");if(d.ineffect=c.one(".ks-datalazyload"),d.ineffect){var h=g.scrollTop()+k,i=f.offset().top;b&&e+c.height()<h&&(b.show(),o=b.fadeOut(.5),h>i?b.css("top",i-e-34-10):b.css("top",h-e-34))}else b&&b.hide()}}function c(a){return a.el.offset().top>g.scrollTop()+l+k?a:void 0}var d=this,e=d.get("app"),f=e.view.get("view"),h=f[n]||f[n.replace("/index","/")],j=e.model.get("data");if(h&&j&&(j[n]=d.lazyData(j[n]),j[n])){h.tpl=h.tpl.replace("{{#auctions}}",'{{#blocks}}{{#lazyload}}<textarea class="ks-datalazyload">{{/lazyload}}{{#auctions}}').replace("{{/auctions}}","{{/auctions}}{{#lazyload}}</textarea>{{/lazyload}}{{/blocks}}")+m;var k=g.viewportHeight(),l=500,o={stop:function(){},isRunning:function(){return!1}};f.J_footer={el:a.one(".footer"),container:a.one(".tb-footer"),rendered:!1};var p=[];e.on("render",function(a){var b=a.view;c(b)&&(b.rendered=!1,b.el.css({height:"0",overflow:"hidden"}),p.push(b))}),e.emit("render",{view:f.J_footer});var q=a.buffer(function(){if(!d.ineffect){var a,b=p;p=[];for(var f=0,g=b.length;g>f;f++)a=c(b[f]),a?p.push(a):(a=b[f],a.el.css({height:"",overflow:"visible"}),a.rendered=!0,e.view.showView(a),e.view.behaviorView(a)),a=null;p.length||i.remove(window,"scroll",r)}},100),r=function(){b(),q()};i.on(window,"scroll",r)}},reload:function(a,b,c){var d=b.data;d[n]=this.lazyData(d[n]),c()},lazyData:function(b){var c=[];if(a.isArray(b)&&b.length||a.isPlainObject(b)){b=b.auctions;var d=Math.ceil(b.length/8),e=0;for(c.push({auctions:b.slice(0,8)}),d>1&&(this.ineffect=!0);++e<d;)c.push({auctions:b.slice(8*e,8*(e+1)),lazyload:!0});return{blocks:c}}this.noResult()},noResult:function(){var e;e=b()?{noresult:{nick:c()}}:{unlogin:{url:window.__SafeUrl__||window.location.href}};var f=a.one("#J_postcard"),g=new j(new k(l).render(e)).appendTo(f);f.animate({opacity:1},.5,"easeOut"),a.one(".tb-footer").animate({opacity:1},.5,"easeOut"),g.delegate("click",".elem-tologin",function(a){a.preventDefault(),d(a.currentTarget.href)})}}),e}),KISSY.add("components/newsrp/tab2mysearch/ware/p4p/index",function(a,b){function c(){c.superclass.constructor.apply(this,arguments)}var d=(a.DOM,a.UA,"http://a.tbcdn.cn/kissy/1.0.0/build/imglazyload/spaceball.gif"),e=a.require("srpbase/common/mvp/ware");return c.ATTRS={cfg:{}},a.extend(c,e,{p4pAdvert:null,load:function(){var c=this,e=c.get("app"),f=window.givenByFE.P4PConfig;a.one("#J_shopkeeper").css("height","2000px"),a.one("#J_shopfeature").css("height","1000px");var g=new b({param:f,placeholder:d,callbacks:{J_shopkeeper:function(b,c){a.one("#J_advertbox").animate({opacity:1},.5,"easeOut"),a.one("#J_advertbox_bottom").animate({opacity:1},.5,"easeOut"),a.ready(function(){b?e.emit("PV",{p4p_isOK:!1}):(e.emit("PV",{p4p_isOK:!0}),a.each(c,function(a){e.emit("renderP4P",{el:a,key:"J_shopkeeper"})}))})},J_shopfeature:function(a,b){a||e.emit("renderP4P",{el:b,key:"J_shopfeature"})}}});c.p4pAdvert=g},reload:function(){var a=this,b=a.get("params"),c=a.p4pAdvert;c.refresh(b)}}),c},{requires:["widget/advertindex/","esrp-3pc/tsrp/"]}),KISSY.add("components/newsrp/tab2mysearch/ware/sidebar/index",function(a){function b(){b.superclass.constructor.apply(this,arguments)}var c=a.require("srpbase/common/mvp/ware"),d=a.require("srpbase/tool/sidebar/");return b.ATTRS={params:{}},a.extend(b,c,{sidebar:null,load:function(){var a=this,b=a.get("params");a.sidebar=new d({params:b})},reload:function(){}}),b}),KISSY.add("components/newsrp/tab2mysearch/ware/statsend/index",function(a){function b(){b.superclass.constructor.apply(this,arguments)}var c=a.require("srpbase/common/mvp/ware"),d=a.require("srpbase/tool/statsend/");return a.extend(b,c,{statsend:null,load:function(){var a=this.get("app"),b=window.maidian,c=window.givenByFE.defaultData.traceData||window.givenByFE.traceData,e=window.givenByFE.tracerule,f=new d;this.statsend=f,c&&f.setStat({data:c,rule:e}),a.on("PV",function(a){var c=a.flag;c=c?1:0,f.send(b.replace("{p4p_isOK}",c),!1),window.maidian=void 0}),f.initClickTrace(),f.iframeClickStat()},reload:function(a,b,c){var d=b.data;d.traceData&&this.statsend.setData(d.traceData),c()}}),b}),KISSY.add("components/newsrp/tabpage/index",function(a,b,c){function d(b){b.delegate("click",".h_tologin",function(b){b.halt();var c=b.currentTarget.href;c&&-1===c.indexOf("javascript:")||(c=location.href),b.preventDefault(),a.use("tbc/mini-login/1.4.2/",function(a,b){function d(){return b.check({type:"l"})}d()||b.show(function(){location.href=c})})})}function e(){e.superclass.constructor.apply(this,arguments)}return e.EVENTS={".J_tabHasTip":{mouseenter:function(b){a.one(b.currentTarget).addClass("tab-has-tip-active")},mouseleave:function(b){a.one(b.currentTarget).removeClass("tab-has-tip-active")}},".J_tabHasTip .tip-link":{click:function(a){a.halt(),this.get("el").removeClass("tab-has-tip-show"),c.set("_mysearch_tab_tip_state_",1)}}},a.extend(e,b,{initialize:function(){var a=this.get("el");d(a),c.get("_mysearch_tab_tip_state_")||a.addClass("tab-has-tip-show")}}),e},{requires:["brix/core/brick","cookie"]}),KISSY.add("components/newsrp/tabpage/tpl",function(){return['<div class="new-tabpage-el widget-tabpage-el">','<ul class="elem-nav tab-n clearfix">',"{{#tabs}}",'<li class="tab-n-1 {{actived}}" ><a class="elem-nav-i {{extra}}" href="{{href}}" target="_self" >{{text}}</a></li>',"{{/tabs}}","</ul>","</div>"].join("")}),KISSY.add("components/newsrp/wrapper/index",function(a){function b(){b.superclass.constructor.apply(this,arguments),this.initialize()}function c(a,b){var c=a.offset(),d={top:c.top,right:c.left+a.width()};c=b.offset();var e={bottom:c.top+b.height(),right:c.left+b.width()};return d.top>=e.bottom||d.right>=e.right?!0:void 0}var d=a.require("base"),e=a.require("node"),f=".n-w-tgr",g=".n-w-box",h=".n-w-wpr",i=".n-w-wpr-e",j=".n-w-tgr-l",k=".n-w-tgr-r",l="n-w-tgr-l-e",m="n-w-tgr-r-e",n="n-w-tgr-l-d",o="n-w-tgr-r-d",p='<div class="'+f.slice(1)+'" style="display: none"><a href="javascript:;" class="'+j.slice(1)+' {prevCls}" >&lt;</a><a href="javascript:;" class="'+k.slice(1)+' {nextCls}" >&gt;</a></div>';return b.ATTRS={itemCls:{value:"li"},triggerCls:{value:{prev:"",next:"",prevDisable:"",nextDisable:""}}},a.extend(b,d,{initialize:function(){var b=this,c=b.get("triggerCls");l=c.prev||l,m=c.next||m,n=c.prevDisable||n,o=c.nextDisable||o,p=n&&o?a.substitute(p,{prevCls:n,nextCls:o}):a.substitute(p,{prevCls:"",nextCls:""}),b._bindUI()},_bindUI:function(){var b=this,d=a.one("body"),e=b.get("itemCls");d.delegate("click","."+l,function(b){var d=a.one(b.currentTarget),f=d.parent(h),i=f.one(g),j=f[0]._offset;e=i.attr("_itemcls")||e;var k=i.last(),p=Math.floor(i.width()/(k.outerWidth(1)+2));if(j){var q=f.all(e),r=(j-1)*p,s=q.length;for(s>j*p&&(s=j*p);s>r;)q.item(r++).parent().show();f[0]._offset=--j,0==j&&d.replaceClass(l,n),c(i.last(),i)&&d.next().replaceClass(o,m)}}),d.delegate("click","."+m,function(b){var d=a.one(b.currentTarget),f=d.parent(h),i=f.one(g),j=f[0]._offset||0;e=i.attr("_itemcls")||e;var k=i.last(),p=Math.floor(i.width()/(k.outerWidth(1)+2));if(c(i.last(),i)){0==j&&d.prev().replaceClass(n,l);var q=f.all(e),r=j*p,s=q.length;for(s>(j+1)*p&&(s=(j+1)*p);s>r;)q.item(r++).parent().hide();f[0]._offset=++j,c(k,i)||d.replaceClass(m,o)}})},addWrappers:function(a,b){var d=this;b=b||d.get("itemCls"),a.each(function(a){a.attr("_itemcls",b);var d=a.parent(),j=d.one(f);a.addClass(g.slice(1)),d.addClass(h.slice(1)),j||(j=new e(p).appendTo(d));var l=a.last();l&&c(l,a)&&(d.one(f).show(),d.addClass(i.slice(1)),j.one(k).replaceClass(o,m))})},addWrappersByCB:function(a,b){{var d=this;d.get("itemCls")}a.each(function(a){var d=a.parent();a.addClass(g.slice(1)),d.addClass(h.slice(1)),b&&b(d,a);var e=a.last();if(e&&c(e,a)){d.addClass(i.slice(1));var j=d.one(f);j&&j.show()}})},refresh:function(){{var b=this;b.get("itemCls")}a.all(h).each(function(a){var b=a.one(g),d=a.one(f),e=a.one(k),h=b.last();h&&c(h,b)?(d&&d.show(),a.addClass(i.slice(1)),e&&e.replaceClass(o,m)):(d&&d.hide(),a.removeClass(i.slice(1)))})}}),b},{requires:["core"]}),KISSY.add("components/combobar-copy/index",function(a,b){function c(){c.superclass.constructor.apply(this,arguments)}var d=a.require("io");return c.ATTR={m:{value:"get_custom"},"form-url":{value:""}},c.EVENTS={".dprice":{click:function(){var b=this.get("form-url");window.SRP&&d.get(window.SRP.apiUrl+"&m="+this.get("m")+"&timestamp="+a.now(),function(){b&&d.jsonp(b+"?timestamp="+a.now()+"&do=addpricebest&cm=cm6",function(){location.reload()})})}},".cancel":{click:function(){var b=this.get("form-url");window.SRP&&d.get(window.SRP.apiUrl+"&m="+this.get("m")+"&timestamp="+a.now(),function(){b&&d.jsonp(b+"?timestamp="+a.now()+"&do=addpricebest&v=pricebest%3A1",function(){location.reload()})})}}},a.extend(c,b,{}),c},{requires:["brix/core/brick","core"]}),KISSY.add("components/combobar-noquery/index",function(a,b){function c(){c.superclass.constructor.apply(this,arguments)}return c.ATTR={},c.EVENTS={},a.extend(c,b,{initialize:function(){}}),c},{requires:["brix/core/brick"]}),KISSY.add("components/combobar-noresult/index",function(a,b){function c(){c.superclass.constructor.apply(this,arguments)}return c.ATTR={},c.EVENTS={".btn-yellow":{click:function(b){var c=a.one(b.currentTarget),d=c.attr("referer");location.href=this.escapeMethod(d)}}},a.extend(c,b,{initialize:function(){},escapeMethod:function(a){var b;return b="string"==typeof a?a.replace(/[<>'"\s]/g,""):a}}),c},{requires:["brix/core/brick"]}),KISSY.add("components/combobar-simple/index",function(a,b){function c(){c.superclass.constructor.apply(this,arguments)}return c.ATTR={},c.EVENTS={},a.extend(c,b,{initialize:function(){}}),c},{requires:["brix/core/brick"]}),KISSY.add("components/srpbase/dialog/index",function(a,b,c,d){function e(){e.superclass.constructor.apply(this,arguments)}{var f=a.require("io"),g=a.require("node");a.require("dom")}return e.ATTRS={dialog:{value:!0},width:{value:""},height:{value:""},data:{value:{id:".dialog-box",content:"",contentText:""},setter:function(b){return a.mix(this.get("data"),b)}},tmpl:{valueFn:function(){var a,b="POPUPID"+(new Date).getTime();return this.set("data",{id:"#"+b}),a='<div class="dialog-box" id="'+b+'"><div class="dialog-shim"><div class="dialog-body"><h3 class="dialog-hd">{{title}}</h3><div class="dialog-content">{{{content}}}</div><div class="dialog-ft">{{desc}}</div></div></div></div>'}},zIndex:{value:1e5},iframe:{value:{src:"",width:"",height:""}},hasMask:{value:!1},maskShared:{value:!1},closable:{value:!0},closing:{valueFn:function(){var a=new g('<a href="javascript:;" class="dialog-close icon-todo-cancel nice-cancel"></a>');return a}},resizable:{value:!1},draggable:{value:!1}},e.METHOD={},e.EVENTS={".dialog-tgr-click":{click:function(a){var b=this;a.halt(),b.get("toggle")?b[b.get("visible")?"_hiding":"_showing"]():b._showing()}}},a.extend(e,b,{initialize:function(){var b=this,c=(b.get("el"),b.get("data")),e=c.id,h=a.one(c.id),i=h.one(".dialog-body"),j=h.one(".dialog-content"),k=b.get("loading"),l=c.content,m=c.desc,n=h.one(".dialog-ft"),o=b.get("async"),p=b.get("iframe");if(b.box=h,l||j.append(k),!m&&n&&n.remove(),b.get("closable")){var q=b.get("closing");i.append(q),q.on("click",function(){b._hiding()})}if(b.get("draggable")&&b._setDraggable(),b.get("resizable")){var r=b.get("resize");b.resizer&&b.resizer.destroy(),d&&r&&(r.node=i,b.resizer=new d(r))}if(o.url)o.success=function(a){l=a.content,b.set("data",{id:e,content:l}),k&&k.remove(),j[0].innerHTML=l,b._offset(),b.get("visible")&&b._showing()},f(o);else if(p.src){var s=new g(a.substitute('<iframe src="{src}" width="{width}" height="{height}" frameborder="0" scrolling="no"></iframe>',p));s.on("load",function(){k&&k.remove(),b._offset(),b.get("visible")&&b._showing(),p.width&&i.css({width:p.width,height:p.height})}),j.append(s)}else b._offset();b.__bindUI()},__bindUI:function(){var a=this,b=a.box,c=a.get("data");b.attr("aria-label",c.title+"\u5f39\u7a97, \u6309\u4e0b Esc \u952e\u5173\u95ed"),b.on("keydown",function(b){27==b.keyCode&&a._hiding()})},_offset:function(a){var b=this,a=b.box,c=a.one(".dialog-shim"),d=a.one(".dialog-body"),e=b.get("width"),f=b.get("height");e?d.css({width:e,height:f}):(b._replaceVisible(a),e=d.width(),f=d.height(),b._replaceVisible(a,!0));var g={position:"relative",top:-f/2,left:-e/2,zIndex:b.get("zIndex")};c.css(g)},_docWidth:function(){return 6==a.UA.ie?"expression(KISSY.DOM.docWidth())":"100%"},_docHeight:function(){return 6==a.UA.ie?"expression(KISSY.DOM.docHeight())":"100%"},_maskShow:function(){var a=this,b=a.get("zIndex"),c=a.get("maskShared"),d=a._mask;c?d?a._masknum++:(a._initMask(),a._masknum=1,d=a._mask,d.css("zIndex",b-1)):d||(a._initMask(),d=a._mask,d.css("zIndex",b-1)),d.show()},_maskHide:function(){var a=this,b=a._mask,c=a.get("maskShared");c?(a._masknum=a._masknum-1,0==a._masknum&&b.hide()):b.hide()},_setDraggable:function(){var a,b,d,e=this,f=e.get("el"),g={handlers:f.one(".dialog-hd")},h=e.__drag,i=e.__constrain;if(g&&!h&&c&&(b=c.Draggable,h=e.__drag=new b({node:e.box,move:1}),g.proxy&&(g.proxy.moveOnEnd=!0,d=e.__proxy=new c.Proxy(g.proxy),d.attachDrag(h)),i=e.__constrain=(new c.Constrain).attachDrag(h),h.on("dragend",function(){var a;a=f.offset(),e.set("x",a.left),e.set("y",a.top),d&&e._replaceVisible(f,!0)}),g.scroll)){var j=e.__scroll=new c.Scroll(g.scroll);j.attachDrag(h)}h&&h.set("disabled",!g),g&&h&&(a=g.handlers,"constrain"in g&&i.set("constrain",g.constrain),a&&a.length>0&&h.set("handlers",a))},_showing:function(){var b=this,c=b.box,d=a.later(function(){if(b.get("adapt")&&b.adapt(),b.fire("beforeShow")!==!1){if(b.get("focus")){var a=b.get("el"),e=a.one(".dialog-tgr-click");e.css({position:"relative",zIndex:b.get("zIndex")+1})}c.css({zIndex:b.get("zIndex")}),c.show(),c.addClass("hover"),b.set("visible",!0),b.get("hasMask")&&b._maskShow(),d.cancel(),d=void 0}},100)},_hiding:function(){var a=this,b=a.box;if(a.fire("beforeHide"),a.get("focus")){var c=a.get("el"),d=c.one(".dialog-tgr-click");d.css({position:"",zIndex:""})}b.css({zIndex:""}),b.hide(),b.removeClass("hover"),a.set("visible",!1),a.get("hasMask")&&a._maskHide()},_initMask:function(){var b=this,c=new a.Node("<div  style='width:"+b._docWidth()+";left:0;top:0;height:"+b._docHeight()+";position:"+(6==a.UA.ie?"absolute":"fixed")+'; opacity: 0.4; filter: alpha(opacity=40); background-color: #666;\' class="dialog-mask">'+(6==a.UA.ie?"<iframe style='position:absolute;left:0;top:0;background:red;width: expression(this.parentNode.offsetWidth);height: expression(this.parentNode.offsetHeight);filter:alpha(opacity=0);z-index:-1;'></iframe>":"")+"</div>").prependTo("body");c.unselectable(),c.on("mousedown",function(a){a.preventDefault()}),b._mask=c}}),a.augment(e,e.METHOD),e},{requires:["components/srpbase/popup/","dd","resizable","core"]}),KISSY.add("components/srpbase/dropdown/index",function(a,b){function c(){c.superclass.constructor.apply(this,arguments)}return c.ATTRS={mouseDelay:{value:0},multiSelect:{value:!1},isSwap:{value:!1},sign:{value:void 0},activeIndex:{value:0,setter:function(a){return a}},form:{value:null},zIndex:{value:100},visible:{value:!1}},c.Method={},c.DOCEVENTS={"":{click:function(b){if(this._click){var c=this.get("el"),d=a.one(b.target);if(c.contains(d)||c.equals(d))return;this.set("visible",!1),this._hiding()}}}},c.EVENTS={".dropdown-tgr-click":{click:function(){this._click=!0,this.get("visible")?(this.set("visible",!1),this._hiding()):(this.set("visible",!0),this._showing())}},".dropdown-tgr-mouse":{mouseenter:function(){this._clearHiddenTimer(),this._showing()},mouseleave:function(){this._setHiddenTimer()}},".dropdown-list":{mouseenter:function(b){a.one(b.currentTarget).css("zIndex",this.get("zIndex")),this._clearHiddenTimer()},mouseleave:function(){this._click||this._setHiddenTimer()}},".dropdown-list li":{click:function(b){if(this.get("refresh")){var c=a.one(b.currentTarget).one("a").attr("href")||"";if(c)return;return void b.stopPropagation()}var d=this,e=d.get("el"),f=e.one(".dropdown-list"),g=f.all("li"),h=d.get("activeIndex"),i=a.one(b.currentTarget);d.fire("beforeSelect",{activeIndex:h,items:g})!==!1&&(d.get("multiSelect")?i.hasClass("selected")?i.removeClass("selected"):i.addClass("selected"):(a.one(g[h]).removeClass("selected"),h=a.indexOf(i[0],g),d._swap(i,g,e),f[0]._show=!1,i.addClass("selected")),d.set("activeIndex",h),d.fire("select",{activeIndex:h,items:g})===!1)}}},a.extend(c,b,{initialize:function(){var a=this,b=a.get("el");b.hasClass("dropdown-custom")&&a._customSelect(),a[a.get("visible")?"_showing":"_hiding"]()},_hiding:function(){var a=this.get("el"),b=a.one(".dropdown-list");b.css("zIndex",""),b.hide(),a.removeClass("dropdown-hover")},_showing:function(){var b=this,c=b.get("el"),d=c.one(".dropdown-list");b._showTimer=a.later(function(){b._showTimer.cancel(),b._showTimer=void 0,d.css("zIndex",b.get("zIndex")),d.show(),c.addClass("dropdown-hover"),a.UA.ie<7&&b.get("ie")&&d.width(c.width())},1e3*b.get("mouseDelay"))},_setHiddenTimer:function(){var b=this;b._showTimer&&(b._showTimer.cancel(),b._showTimer=void 0),b._hiddenTimer=a.later(function(){b._hiding()},200)},_clearHiddenTimer:function(){var a=this;a._hiddenTimer&&(a._hiddenTimer.cancel(),a._hiddenTimer=void 0)},_swap:function(b,c,d){var e,f,g,h=this,i=d.one(".active"),j=i.one(".arrow"),k=b.one("a");j&&(g=j[0].cloneNode(!0),j.remove()),h.get("isSwap")?(e=new a.Node(i.html()),i[0].innerHTML="",f=i.attr("title"),i.attr("title",k.attr("title")),k.attr("title",f),i.append(new a.Node(k.html())),k[0].innerHTML="",k.append(e)):(i[0].innerHTML="",i.append(new a.Node(k.html())),i.attr("title",k.attr("title")),d.one(".dropdown-list").hide()),j&&j.appendTo(i)},_customSelect:function(){var b=this,c=b.get("sign"),d=b.get("el"),e=d.attr("_val"),f=d.attr("_for");if(f){var g=a.one(b.get("form"))||d.parent("form")||a.one(document.body),h=a.one(g.one('input[name="'+f+'"]'));if(h)if(c){for(var i=h.val(),j=i.split(";"),k=j.length;c>k;k++)j[k]="";j[c-1]=e,c-=1,h.val(j.join(";"))}else h.val(e);else{if(c){for(var j=[],k=0;c>k;k++)j[k]="";j[c-1]=e,c-=1,e=j.join(";")}h=new a.Node('<input type="hidden" name="'+f+'" id="'+f+'" value="'+e+'" />').appendTo(g)}d[0]._sign=c,b.on("select",function(f){var g=a.one(f.items[f.activeIndex]),i=g.attr("_val");if(isNaN(c))h.val(i);else{var j=h.val().split(";");j[c]=i,h.val(j.join(";"))}d.attr("_val",i),b.get("isSwap")&&g.attr("_val",e),e=i})}}}),c},{requires:["brix/core/brick"]}),KISSY.add("components/srpbase/header/index",function(a,b,c,d,e,f,g,h,i,j){function k(){var b,h="http://suggest.taobao.com",i=h+"/sug?k=1&area=c2c",j="",k=["history","c2c_activity","dapei_top","cat","global","list","dapei_bottom","scene","shop","cloud"],l=new e;window.___cloud=l;var m=[new g({node:"#J_SearchTab li"}),new d({limit:10}),l,new f];b=new c({plugins:m,sugConfig:{sourceUrl:i,node:"#q",resultFormat:j},mods:{sort:k}}),b.on("beforeFocus",function(){var a=b.get("input"),c=n.parent(a,"form"),d=n.parent(a,2),e=n.prev(d,"label");e&&n.css(e,{color:"#ccc"}),c.className="search-panel-focused"}),b.on("beforeBlur",function(){var c=b.get("input"),d=n.parent(c,"form"),e=n.parent(c,2),f=n.prev(e,"label");""===a.trim(b.query)&&f&&(n.show([f]),n.css(f,{color:"#999"})),d.className=""}),location.href.indexOf("debug=test")>-1&&b.on("beforeParse",function(a){if(""!==a.query){var b=a.results;b.tmall=a.query}}),a.one(".search-triggers").on("mouseenter mouseleave",function(a){var b,c=this,d="add";"mouseleave"===a.type&&(d="remove",b=n.query("li",c),n[d+"Class"].call(c,b,"selected"),n.addClass.call(c,b[0],"selected")),n[d+"Class"].call(c,".search-triggers","triggers-hover icon-hover")});var o=a.all("#J_SearchTab li");return o.on("mouseenter",function(){var a=this,b=n.siblings(a);n.addClass(a,"selected"),n.removeClass(b,"selected")}),o.on("click",function(a){var b=this,c=n.parent(b),d=n.children(c)[0];b!==d&&(n.insertBefore(b,d),n.removeClass.call(b,".search-triggers","triggers-hover"),n.addClass.call(b,"#J_TSearchForm","search-panel-focused"),a.halt())}),b}function l(){l.superclass.constructor.apply(this,arguments)}var m=a.Event,n=a.DOM;return l.ATTRS={el:{},param:{},marketUrl:{value:"http://www.taobao.com/go/rgn/vertical/jsonp.php"}},l.EVENTS={".more-button":{mouseenter:function(a){var b=this,c=a.currentTarget,d=n.attr(c,"data-fetched");return d?void n.addClass(c,"icon-hover"):void b._fetchMarket(function(a){var b=n.create(a);n.append(b,c),n.attr(c,"data-fetched","true"),n.addClass(c,"icon-hover")})},mouseleave:function(a){var b=a.currentTarget;n.removeClass(b,"icon-hover")}},".J_excludeBtn":{click:function(){var b=a.one("#J_excludeQueryInput").prop("value");if(b){var c=a.one("#q"),d=c.prop("value");c.prop("value",d+" -"+b),a.one("#J_SearchForm")[0].submit()}}},"#J_excludeQueryInput":{keydown:function(b){if(13===b.keyCode){var c=a.one("#J_excludeQueryInput").prop("value");if(c){var d=a.one("#q"),e=d.prop("value");d.prop("value",e+" -"+c),a.one("#J_SearchForm")[0].submit()}}}}},a.extend(l,b,{commonform:null,initialize:function(){var a=this;a._renderUI(),a._bindUI()},_fetchMarket:function(b){var c=this,d=c.get("marketUrl");a.IO({url:d,jsonp:"cb",dataType:"jsonp",complete:function(d){if(!d)return void a.log("\u83b7\u53d6\u5e02\u573a\u6570\u636e\u5931\u8d25!");var e={markets:d},f=new h(j).render(e);b&&b.call(c,f)}})},_renderUI:function(){var a=this,b=(a.get("el"),a.get("param"));k(b)},_bindUI:function(){var b=this.get("el");if(!(a.UA.ie<8||!b.hasClass("J_hasFixedSearchBox")||i.get("_header_fixed_"))){var c=10;8==a.UA.ie&&(c=600),i.set("_sortbar_stick_","0");var d,e=a.one("#q")[0],f=5,g=function(c,f){d=d||a.one(".search-popupmenu"),c>f?(b.hasClass("header-fixed")||(b.addClass("header-fixed"),d&&(d.addClass("search-popupmenu-hidden"),e.blur())),d&&!d.hasClass("tb-g-suggest-fixed")&&d.addClass("tb-g-suggest-fixed")):(b.hasClass("header-fixed")&&(b.removeClass("header-fixed"),d&&(d.addClass("search-popupmenu-hidden"),e.blur())),d&&d.hasClass("tb-g-suggest-fixed")&&d.removeClass("tb-g-suggest-fixed"))},h=(a.buffer(g,c*f),a.buffer(function(){var a=n.scrollTop(),b=150;g(a,b)},c));8!=a.UA.ie&&g(n.scrollTop(),150),m.on(window,"scroll",h),b.one(".J_fixedCloseBtn").on("click",function(){i.set("_header_fixed_",1),b.hasClass("header-fixed")&&(b.removeClass("header-fixed"),d&&(d.addClass("search-popupmenu-hidden"),e.blur())),d&&d.hasClass("tb-g-suggest-fixed")&&d.removeClass("tb-g-suggest-fixed"),m.detach(window,"scroll",h)})}}}),l},{requires:["brix/core/brick","tbc/search-suggest/1.3.5/index","tbc/search-suggest/1.3.5/plugin/history","tbc/search-suggest/1.3.5/plugin/cloud","tbc/search-suggest/1.3.5/plugin/history-magic","tbc/search-suggest/1.3.5/plugin/tab","xtemplate","cookie","./tpl","core","tbc/search-suggest/1.3.5/new_suggest.css"]}),KISSY.add("components/srpbase/header/tpl",function(){return'<div class="more-content">{{#markets}}<dl><dt><a trace="more_market" href="{{href}}" target="_blank">{{text}}</a></dt>{{#subMarkets}}<dd><a trace="more_market" href="{{href}}" target="_blank">{{text}}</a></dd>{{/subMarkets}}</dl>{{/markets}}</div>'}),KISSY.add("components/srpbase/location/index",function(a,b,c,d,e,f){function g(){g.superclass.constructor.apply(this,arguments),this.initialize()}return a.extend(g,b,{initialize:function(){var a=this;a._render(),a._renderPop()}},{ATTRS:{panelEl:{getter:function(a){return a?a:".J_Location"}},el:{getter:function(a){return a?a:"#sel-loc"}},tmpl:{value:""},data:{value:{most:{data:["\u5317\u4eac","\u4e0a\u6d77","\u5e7f\u5dde","\u6df1\u5733","\u676d\u5dde","\u6d77\u5916","\u6c5f\u6d59\u6caa","\u73e0\u4e09\u89d2","\u4eac\u6d25\u5180","\u4e1c\u4e09\u7701","\u6e2f\u6fb3\u53f0","\u6c5f\u6d59\u6caa\u7696"]},city:{data:["\u957f\u6c99","\u957f\u6625","\u6210\u90fd","\u91cd\u5e86","\u5927\u8fde","\u4e1c\u839e","\u4f5b\u5c71","\u798f\u5dde","\u8d35\u9633","\u5408\u80a5","\u91d1\u534e","\u6d4e\u5357","\u5609\u5174","\u6606\u660e","\u5b81\u6ce2","\u5357\u660c","\u5357\u4eac","\u9752\u5c9b","\u6cc9\u5dde","\u6c88\u9633","\u82cf\u5dde","\u5929\u6d25","\u6e29\u5dde","\u65e0\u9521","\u6b66\u6c49","\u897f\u5b89","\u53a6\u95e8","\u90d1\u5dde","\u4e2d\u5c71","\u77f3\u5bb6\u5e84","\u54c8\u5c14\u6ee8"]},province:{data:["\u5b89\u5fbd","\u798f\u5efa","\u7518\u8083","\u5e7f\u4e1c","\u5e7f\u897f","\u8d35\u5dde","\u6d77\u5357","\u6cb3\u5317","\u6cb3\u5357","\u6e56\u5317","\u6e56\u5357","\u6c5f\u82cf","\u6c5f\u897f","\u5409\u6797","\u8fbd\u5b81","\u5b81\u590f","\u9752\u6d77","\u5c71\u4e1c","\u5c71\u897f","\u9655\u897f","\u4e91\u5357","\u56db\u5ddd","\u897f\u85cf","\u65b0\u7586","\u6d59\u6c5f","\u6fb3\u95e8","\u9999\u6e2f","\u53f0\u6e7e","\u5185\u8499\u53e4","\u9ed1\u9f99\u6c5f"]}}},map:{value:{"\u6c5f\u6d59\u6caa":"\u6c5f\u82cf,\u6d59\u6c5f,\u4e0a\u6d77","\u6c5f\u6d59\u6caa\u7696":"\u6c5f\u82cf,\u6d59\u6c5f,\u4e0a\u6d77,\u5b89\u5fbd","\u73e0\u4e09\u89d2":"\u5e7f\u5dde,\u6df1\u5733,\u4e2d\u5c71,\u73e0\u6d77,\u4f5b\u5c71,\u4e1c\u839e,\u60e0\u5dde","\u4eac\u6d25\u5180":"\u5317\u4eac,\u5929\u6d25,\u6cb3\u5317","\u4e1c\u4e09\u7701":"\u9ed1\u9f99\u6c5f,\u5409\u6797,\u8fbd\u5b81","\u6e2f\u6fb3\u53f0":"\u9999\u6e2f,\u6fb3\u95e8,\u53f0\u6e7e","\u6d77\u5916":"\u7f8e\u56fd,\u82f1\u56fd,\u6cd5\u56fd,\u745e\u58eb,\u6fb3\u6d32,\u65b0\u897f\u5170,\u52a0\u62ff\u5927,\u5965\u5730\u5229,\u97e9\u56fd,\u65e5\u672c,\u5fb7\u56fd,\u610f\u5927\u5229,\u897f\u73ed\u7259,\u4fc4\u7f57\u65af,\u6cf0\u56fd,\u5370\u5ea6,\u8377\u5170,\u65b0\u52a0\u5761,\u5176\u5b83\u56fd\u5bb6"}},reverseMap:{getter:function(a){if(!a){var b,c=this.get("map"),d={};for(var e in c)b=c[e],d[b]=e;a=d}return a}},placeTmpl:{value:'<div class="fake-select sel-loc"><ul class="selected"><li><a href="javascript:;"><span>{loc}</span><s class="icon-btn-arrow-2-h"></s></a></li></ul></div>'}}}),g.METHOD={_getGivenData:function(){var b,d,e=this,f=e.get("el"),g=c.attr(f,"data-param"),h=e.get("data"),i=e.get("map"),j=e.get("reverseMap");
if(g?(d=a.JSON.parse(g),b=d.location):d={},d.loc&&"\u53d1\u8d27\u5730"!==d.loc){var k=window.__SafeUrl__||"",l=k.replace(/loc[^&]+/,"");h.cancle={url:l}}else d.loc="\u53d1\u8d27\u5730";var m,n={};for(var o in d)m=d[o],"location"!==o&&"cancle"!==o&&"loc"!==o&&(n[o]={data:m});return a.isEmptyObject(n)||(h.personal=n),h.location=i[b]||b,d.loc=j[b]||d.loc,d},_renderPop:function(){var a=this,b=a.get("el"),d=a.getTemplate();c.append(c.create(d),b),a.initEvent()},_render:function(){var b=this,d=b.get("placeTmpl"),e=b.get("el"),f=b._getGivenData(),g=a.substitute(d,f);c.append(c.create(g),e),b._initElEvent(e)},_initElEvent:function(a){{var b=this;b.get("panelEl")}d.on(a,"mouseenter",function(){c.addClass(a,"location-hover icon-hover")}),d.on(a,"mouseleave",function(){c.removeClass(a,"location-hover icon-hover")})},getTemplate:function(){var a=this,b=a.get("data"),c=new e(f).render(b);return c},initEvent:function(){var a=this,b=a.get("panelEl"),e=(a.get("el"),a.get("map"));d.delegate(b,"click","a",function(b){var d=b.currentTarget,f=c.text(d),g=(c.attr(d,"data-tracetype"),e[f]||f);return"cancle"===c.attr(d,"data-action")?!0:(a.fire("click",{e:b,text:g}),void b.preventDefault())}),d.delegate(b,"click",".submit",function(b){var d=c.get(".J_InputText"),e=b.currentTarget,f=d.value,g="4_"+f;c.attr(e,"data-tracetype",g),f=f.replace(/\uff0c/g,","),a.fire("click",{e:b,text:f})}),d.delegate(b,"keydown","input",function(a){var e=13===a.keyCode,f=c.get(".submit",b);e&&d.fire(f,"click")})},locate:function(){var a=this,b=a.get("panelEl"),d=a.getOffset();d.display="block",c.css(b,d)},getOffset:function(){var a=this,b=a.get("el"),d=c.offset(b);return{top:d.top+17,left:d.left+2}}},a.augment(g,g.METHOD),g},{requires:["base","dom","event","xtemplate","./tpl.js","core"]}),KISSY.add("components/srpbase/location/tpl",function(){return'<div class="location-panel J_Location">{{#cancle}}<div class="cancle-location"><a data-action="cancle" href="{{url}}">\u53d6\u6d88\u9009\u62e9</a></div>{{/cancle}}<div class="recommend-location">{{#personal}}<div class="personal-location">{{#guess}}<span class="guess"><label>\u540c\u57ce:</label><a trace="seller_location" trace-lazy="true" data-tracetype="1_{{data}}">{{data}}</a></span>{{/guess}}{{#often}}<span class="often"><label>\u5e38\u7528:</label>{{#data}}<a trace="seller_location" trace-lazy="true" data-tracetype="2_{{.}}">{{.}}</a>{{/data}}</span>{{/often}}</div>{{/personal}}{{#most}}<div class="most-location clearfix"><div class="list-innerwrap"><ul>{{#data}}<li><a trace="seller_location" trace-lazy="true" data-tracetype="3_{{.}}" href="#">{{.}}</a></li>{{/data}}</ul></div></div>{{/most}}</div><div class="list-location">{{#city}}<div class="city-location clearfix"><div class="list-innerwrap"><ul>{{#data}}<li><a trace="seller_location" trace-lazy="true" data-tracetype="3_{{.}}" href="#">{{.}}</a></li>{{/data}}</ul></div></div>{{/city}}{{#province}}<div class="province-location clearfix"><div class="list-innerwrap"><ul>{{#data}}<li><a trace="seller_location"  trace-lazy="true" data-tracetype="3_{{.}}" href="#">{{.}}</a></li>{{/data}}</ul></div></div>{{/province}}<div class="input-location"><input class="J_InputText"  type="text" placeholder="\u591a\u4e2a\u5730\u533a\u7528\u9017\u53f7\u9694\u5f00" value="{{location}}" /><span trace="seller_location" data-tracetype="4_{{location}}" trace-lazy="true" class="submit">\u63d0\u4ea4</span></div></div></div>'}),KISSY.add("components/srpbase/popup/index",function(a,b){function c(){c.superclass.constructor.apply(this,arguments)}var d=a.require("io"),e=a.require("node");return c.ATTRS={mouseDelay:{value:.1},zIndex:{value:9999},x:{value:0},y:{value:0},align:{value:{points:["tr","tl"],offset:[0,0]},setter:function(b){return a.mix(this.get("align"),b)}},toggle:{value:!1},loading:{valueFn:function(){var a=new e("<div class='loading' style='border: none;width: 50px;height:50px;*height: expression(this.parentNode.offsetHeight);'/>");return a}},closable:{value:!1},closing:{valueFn:function(){var a=new e('<a href="javascript:;" class="popup-close icon-todo-cancel"></a>');return a}},visible:{value:!1},data:{value:{id:".popup-box",content:"",contentText:""},setter:function(b){return a.mix(this.get("data"),b)}},tmpl:{valueFn:function(){var a="POPUPID"+(new Date).getTime();this.set("data",{id:"#"+a});var b='<div class="popup-box {{personalCls}}" id="'+a+'"><div class="popup-body" bx-tmpl="contentText" bx-datakey="contentText"><div class="popup-arrow"><i class="arrow"><s class="arrow"></s></i></div>{{{contentText}}}</div></div>';return b}},async:{value:{url:"",data:"",dataType:"json",success:null},setter:function(b){var c=this.get("async");return a.mix(c,b)}},effect:{value:{effect:"",target:".popup-target",duration:.5,easing:"easeOut"},setter:function(b){var c=b.effect,d={fade:["Out","In"],slide:["Up","Down"]};return b?(a.isString(c)&&!d[c]&&(b.effect=""),b):!1}},holder:{value:null},isTip:{value:!1}},c.METHOD={show:function(){this._showing()},hide:function(){this._hiding()},adapt:function(){var b=this,c=(b.get("el"),b.get("holder")||b.get("el")),d={x:0,y:0};if(c){var e,f,g=b.box,h=b.tgrBox;b._replaceVisible(g),e=g.offset(),f=a.mix(c.offset(),{width:c.width(),height:c.height()}),d.x=f.left+f.width-h.left-h.width,d.y=f.top+f.height-h.top-h.height,b.tgrBox=f,e.top+=d.y,e.left+=d.x,g.css(e),b._replaceVisible(g,!0)}},_replaceVisible:function(a,b){a.css(b?{display:"none",visibility:"visible"}:{display:"block",visibility:"hidden"})}},c.EVENTS={".popup-tgr-click":{click:function(a){var b=this;a.halt(),b.get("toggle")?b[b.get("visible")?"_hiding":"_showing"]():b._showing()}},".popup-tgr-mouse":{mouseenter:function(){this._clearHiddenTimer(),this._showing()},mouseleave:function(){this._setHiddenTimer()}}},c.DOCEVENTS={".popup-box":{mouseenter:function(){this._clearHiddenTimer()},mouseleave:function(){this._setHiddenTimer()}}},a.extend(c,b,{initialize:function(){if(!this.get("dialog")){var b=this,c=b.get("el"),e=b.get("data"),f=e.content,g=e.contentText,h=e.id,i=!0,j=b.get("loading"),k=b.get("async"),l=a.one(h),m=l.one(".popup-body");if(b.get("tmpl")){var n=a.one(h);l=n.clone(!0),n.remove(),l.appendTo(a.one("body")),m=l.one(".popup-body"),i=!1}if(b.box=l,f?m.append(a.one(f)):g&&b.setChunkData("contentText",g),b.get("closable")){var o=b.get("closing");m.css({paddingTop:10}),m.append(o),o.on("click",function(){b._hiding()})}if(k.url&&(m.append(j),j.show(),k.success=function(d){f=d.content,b.set("data",{id:h,content:f}),m.append(a.one(f)),l.css({width:"",height:""}),j&&j.remove(),i?(b._replaceVisible(l),elBox=a.mix(l.offset(),{width:l.width(),height:l.height(),zIndex:b.get("zIndex")}),l.css(elBox),b._replaceVisible(l,!0)):b._offsetEl(c,!0),b[b.get("visible")?"_showing":"_hiding"]()},d(k)),i){b._replaceVisible(l),elBox=l.offset(),elBox.top=elBox.top+b.get("y"),elBox.left=elBox.left+b.get("x"),l.css(elBox);var p=l.one(".popup-arrow");p&&b._offsetArrow(p,m,b.get("align")),b._replaceVisible(l,!0)}else b._offset(c);b.__bindUI(),b[b.get("visible")?"_showing":"_hiding"]()}},_offset:function(b){var c=this,b=c.get("holder")||c.get("el");b&&(tgrBox=a.mix(b.offset(),{width:b.width(),height:b.height()}),c.tgrBox=tgrBox),c._offsetEl(b,!0)},_offsetEl:function(b,c){var d,e,f,g,h=this,i=h.box,j=h.get("align"),k=i.one(".popup-arrow"),l=i.one(".popup-body"),g=h.tgrBox;if(h._replaceVisible(i),g){i.css({width:"auto",height:"auto"}),d=a.mix(i.offset(),{width:i.width(),height:i.height(),zIndex:h.get("zIndex")}),e={tl:[g.top,g.left],tr:[g.top,g.left+g.width],bl:[g.top+g.height,g.left],br:[g.top+g.height,g.left+g.width],tt:[g.top,g.left+g.width/2],bb:[g.top+g.height,g.left+g.width/2]};var m;switch(j.points[0]){case"br":m=g.width+20;break;case"tr":m=g.width+20;break;case"bl":m=d.width-g.width-20;break;case"tl":m=d.width-g.width-20;break;case"tt":m=d.width/2;case"bb":m=d.width/2}f={tl:[e[j.points[0]][0]+j.offset[1],e[j.points[0]][1]+j.offset[0]],tr:[e[j.points[0]][0]+j.offset[1],e[j.points[0]][1]+j.offset[0]-d.width],bl:[e[j.points[0]][0]+j.offset[1]-d.height,e[j.points[0]][1]+j.offset[0]],br:[e[j.points[0]][0]+j.offset[1]-d.height,e[j.points[0]][1]+j.offset[0]-d.width-g.width],tt:[e[j.points[0]][0]+j.offset[1],e[j.points[0]][1]+j.offset[0]-m],bb:[e[j.points[0]][0]+j.offset[1]-d.height,e[j.points[0]][1]+j.offset[0]-m]},a.mix(d,{top:f[j.points[1]][0],left:f[j.points[1]][1]}),i.css(d),k&&c&&h._offsetArrow(k,l,j),h._replaceVisible(i,!0)}},_offsetArrow:function(a,b,c){var d;switch(c.points[0]){case"br":_width=20;break;case"tr":_width=20;break;case"bl":_width=b.width()-20;break;case"tl":_width=b.width()-20;break;case"tt":_width=b.width()/2;case"bb":_width=b.width()/2}d={tl:[0,"","",-14],tr:[0,0,"",""],bl:[b.height()-14,"","",-14],br:[b.height()-14,0,"",""],tt:[-14,"","",_width],bb:["","",0,_width]},a.css({top:d[c.points[1]][0],right:d[c.points[1]][1],bottom:d[c.points[1]][2],left:d[c.points[1]][3]});var e={tl:".arrow-left",tr:".arrow-right",bl:".arrow-left",br:".arrow-right",tt:".arrow-top",bb:".arrow-bottom"};a.all(".arrow").addClass(e[c.points[1]])},_showing:function(){var b=this,c=b.box;b.set("visible",!0),b._showTimer=a.later(function(){b._showTimer.cancel(),b._showTimer=void 0,b.adapt(),b.fire("beforeShow")!==!1&&(c.show(),c.addClass("hover"))},1e3*b.get("mouseDelay"))},_hiding:function(){var a=this,b=a.box;a.fire("beforeHide"),b.hide(),b.removeClass("hover")},_setHiddenTimer:function(){var b=this;return b.set("visible",!1),b.get("isTip")?void b._hiding():b._showTimer?(b._showTimer.cancel(),void(b._showTimer=void 0)):void(b._hiddenTimer=a.later(function(){b._clearHiddenTimer(),b._hiding()},200))},_clearHiddenTimer:function(){var a=this;a.get("isTip")||a._hiddenTimer&&(a._hiddenTimer.cancel(),a._hiddenTimer=void 0)},__bindUI:function(){var a=this;""!=a.get("effect").effect&&(a.on("beforeHide",function(){a._processEffect(0)}),a.on("beforeShow",function(){a._processEffect(1)}))},_getGhost:function(){var b=self.box,c=b[0].cloneNode(!0);return c.style.visibility="",c.style.overflow="hidden",c.className+=" tb-overlay-ghost",c.innerHTML="",c=a.one(c)},_processTarget:function(b){var c=this,d=c.box;c.__effectGhost&&c.__effectGhost.stop(1);var e,f,g,h,i=c.get("effect"),j=a.one(i.target),k=i.duration,l=a.mix(j.offset(),{width:j.width(),height:j.height()}),m=i.easing;c._replaceVisible(box),h=c._getGhost(),e=a.mix(d.offset(),{width:d.width(),height:d.height()}),h.insertAfter(d),c._replaceVisible(box,!0),b?(f=l,g=e):(f=e,g=l),h.css(f),h.show(),c.__effectGhost=h,h.animate(g,{duration:k,easing:m,complete:function(){c.__effectGhost=null,h[0].parentNode.removeChild(h[0]),b&&d.show()}})},_processEffect:function(b){var c=this,d=c.box,e=c.get("effect"),f=e.effect||"none",g=a.one(e.target),h={fade:["Out","In"],slide:["Up","Down"]};if(g)return void c._processTarget(b);var i=e.duration,j=e.easing,k=b,l=["block","none"],m=k?1:0;d.stop(1,1);var n={visibility:"visible",display:l[m]};d.css(n);var o=f+h[f][m];d[o](i,function(){var a={display:l[0],visibility:k?"visible":"hidden"};d.css(a)},j)}}),a.augment(c,c.METHOD),c},{requires:["brix/core/brick","core"]}),KISSY.add("components/srpbase/pricerange/index",function(a,b,c){function d(){e=a.one("#rank-priceform"),e&&d.superclass.constructor.apply(this,arguments)}var e,f=a.require("node");return d.ATTRS={el:{valueFn:function(){return e?e.parent():void 0}},form:{setter:function(b){return a.one(b)}}},d.DOCEVENTS={"":{click:function(b){var c=a.one("#rank-priceform"),d=a.one(b.target);c&&(c.contains(d)||c.equals(d)||(this.inPanel=!1,c.removeClass("focus")))}}},d.EVENTS={"#rank-priceform":{mouseenter:function(){this.isFocus=!0},mouseleave:function(b){this.inPanel=!1,this.isFocus||a.one(b.currentTarget).removeClass("focus")}},".reset":{click:function(){for(var a=this.get("el"),b=a.all("input"),c=a.one("#filter"),d=b.length-1;d>=0;d--)b[d].value="";c&&(c[0].value=""),this.isFocus=!1},mouseenter:function(){var a=this.get("el").one("#rank-priceform");this.inPanel=!0,this.isFocus&&a.addClass("focus")}},button:{mouseenter:function(b){a.one(b.currentTarget).addClass("on")},mouseleave:function(b){a.one(b.currentTarget).removeClass("on")},focus:function(b){a.one(b.currentTarget).addClass("on")},blur:function(b){var c=this.get("el").one("#rank-priceform");a.one(b.currentTarget).removeClass("on");var d=self._timer=a.later(function(){c.removeClass("focus"),d.cancel(),d=void 0},300)},click:function(){var b,d,e=this,f=e.get("el"),g=f.all("input"),h=g[0].value,i=g[1].value,j=!0,k=e.get("form"),l=e._input,m="reserve_price["+h+","+i+"]";l[0].value=m;for(var n=g.length-1;n>-1;n--){var o=g[n].value;if(""===a.trim(o)){j=!1;break}var p=o-0;p>i-0?(h=i,i=p):h=p,"start_price"==g[n].name?b=g[n]:"end_price"==g[n].name&&(d=g[n])}try{j&&(b.value=h,d.value=i,l[0].value="reserve_price["+h+","+i+"]")}catch(q){}var r=k.spm;r||(r=a.DOM.create('<input type="hidden" name="spm" value=""/>'),a.DOM.append(r,k)),r.value="a230r.1.1997074097.d4917629",c.prototype.clearSubmit(k)}},input:{click:function(){var a=this,b=a.get("el").one("#rank-priceform"),c=b.all("input"),d=b.one(".reset");if(a.inPanel=!0,a._timer&&a._timer.cancel(),b.addClass("focus"),d){for(var e=!1,f=c.length-1;f>-1;f--)if(""!=c[f].value){d.show(),a.isFocus=!0,e=!0;break}e||d.hide()}}},li:{mouseenter:function(b){var c=this.get("el"),d=a.one(b.currentTarget);d.addClass("hover"),d.siblings().removeClass("hover");var e=d.attr("start")-0,f=d.attr("end")-0;this.showPrice(e,f);var g=(d.attr("percent"),c.parent(".sortbar")),h=g.hasClass("sortbar-fixed");this._showTip(d,h)}},ul:{mouseenter:function(){var a=this.get("el"),b=a.all(".txt");b.each(function(a){a.attr("price")||""===a.val()||a.attr("price",a.val()),a.attr("mouse","enter")})},mouseleave:function(b){var c=this.get("el"),d=c.all(".txt"),e=a.one(b.currentTarget);d.each(function(a){a.attr("mouse","leave");var b=a.attr("price");a.val(b?b:"")});var f=c.one("#J_RankLike .hover"),g=a.one("#J_RangeTip"),h=e.attr("_default");g&&g.remove(),f&&f.removeClass("hover"),h&&e.children().each(function(a,b){b==h-0&&a.addClass("hover")})}},".price-range-like li":{click:function(b){var c=a.one(b.currentTarget);if(!c.attr("url")){var d=c.attr("start"),e=c.attr("end"),f=self.get("form"),g=self._input,h="reserve_price["+d+","+e+"]";g[0].value=h,f[0].submit()}}}},a.extend(d,b,{initialize:function(){var a=this,b=(a.get("el"),a.get("form"));b&&(a._input=b.one("#filter"),a._input||(a._input=new f('<input type="hidden" value="" id="filter" name="filter">').appendTo(b))),a.__buildUI(),a._initTip()},__buildUI:function(){function b(b){var c=a.one(this),d=c.val(),e=/^\d+\.?\d*$/;if(b)var f=b.isInterger,g=b.noNegative;f&&(e=/^\d*$/),e.test(d)||(d=f?parseInt(d):parseFloat(d),g&&(d=Math.abs(d)),isNaN(d)&&(d=""),c.val(d))}var c=this,d=c.get("el"),e=d.all("input"),f=function(){var b=a.one(this),c=b.val().length;c>3&&7>c?b.css("width",.52*c+.5+"em"):3>=c?b.css("width",""):c>=7&&b.css("width","4em")};e.on("keyup",b),e.on("keyup focus",f),e.each(function(a){f.call(a),b.call(a)})},_initTip:function(){var a,b,c,d,e,f,g=this,h=g.get("el"),i=h.all("li"),j=new Array,k=g._input,l=!0;if(k){var m=k[0].value;m=/\[(\d{1,}[.]?\d{1,})?[,](\d{1,}[.]?\d{1,})?/.exec(m),m&&(e=m[1],f=m[2])}for(var n=i.length-1;n>-1;n--){var b=i[n];0===n&&(i[0].className="first");var o=!1;if(!o){e||(e="0");var p=b.getAttribute("start");(p===e||p+".0"===e||p+".01"===e)&&(o=!0),f||(f="0");var q=b.getAttribute("end");(q===f||q+".0"===f||q+".01"===f)&&o&&(b.parentNode.setAttribute("_default",n),l=!1)}a=b.getAttribute("percent")-0,j[n]=a,(!c||a>c)&&(c=a,d=b)}var r=function(){var a=h.one(".fm-price"),b=a.offsetWidth;h.css("width",b)};r(),i.length&&g.listRender(i,j,c)},listRender:function(b,c,d){var e=b[0].parentNode,f=e.getAttribute("_default");f&&(f-=0);for(var g=b.length-1;g>=0;g--){var h=Math.round(c[g]/d*18),i=b[g].getAttribute("url");g===f&&a.one(b[g]).addClass("hover"),i||(i="javascript:;"),b[g].innerHTML='<a href="'+i+'"><span class="bg"></span><span style="height:'+h+'px;"></span></a>'}},_showTip:function(b,c,d){var e=(this.get("el"),b.attr("percent")),f=a.one("#J_RangeTip"),g="",h=b.offset(),i=h.top-44,j=h.left-54;f&&f.remove(),c&&(g="range-popup-bottom",i+=74);var k='<div id="J_RangeTip" class="range-popup '+g+'"><p>'+e+'%\u7528\u6237\u559c\u6b22\u7684\u4ef7\u4f4d</p><s class="popup-arrow"><s></s></s></div>';a.one("body").append(k);var f=a.one("#J_RangeTip");f.css({top:i,left:j}),d&&d(f)},showPrice:function(a,b){var c=this,d=c.get("el"),e=d.all(".txt");if(2==e.length){var f=e[0],g=e[1],h=f.value-0,i=g.value-0;c.anim(f,h,a),c.anim(g,i,b)}},anim:function(a,b,c){var d,e=c-b,f=100,g=20,h=Math.round(f/g),i=Math.round(e/h),j=0;d=window.setInterval(function(){return"leave"===a.getAttribute("mouse")?void window.clearInterval(d):j>=h?(a.value=c,0===c&&(a.value=""),void window.clearInterval(d)):(a.value=b+(j+1)*i,void j++)},g)}}),d},{requires:["brix/core/brick","components/srpbase/sform/","core"]}),KISSY.add("components/srpbase/sform/index",function(a,b){function c(){c.superclass.constructor.apply(this,arguments)}return c.ATTRS={isPlaceholder:{value:!0},isAssociate:{value:!1},autoFocus:{value:!1},autoValidate:{value:!1},isParse:{value:!1},isClear:{value:!1},immediate:{value:!1}},c.METHOD={blink:function(b){for(var c,d={backgroundColor:"#fff2e6",borderColor:"#f80",outlineColor:"#fc1"},e={backgroundColor:"",borderColor:"",outlineColor:""},f=0;600>f;f+=130)a.later(function(){c=c==e?d:e,b.css(c)},f)},placeholder:function(b,c){var b=a.one(b),c=c||"blur",d=b.attr("placeholder")||b.attr("_default");if(d){if(!("placeholder"in document.createElement("input")||"input"!==b[0].tagName.toLowerCase())){b.on("focus",function(){a.trim(b.val())===d&&(b.removeClass(c),b.val(""))}),b.on("blur",function(){var e=a.trim(b.val());!d||""!==e&&e!==d||(b.addClass(c),b.val(d))});var e=a.one(b[0].form)||this.get("el");return e&&e.on("submit",function(){b.val()==d&&b.val("")}),b.fire("blur"),b}b.removeClass(c)}},autofocus:function(b){b=a.one(b)||this.get("el").one('input[type="text"]'),b&&("autofocus"in document.createElement("input")||(b.addClass("focus"),b[0].focus()))},writeHiddenInput:function(b,c,d){var d=d||this.get("el");if(d=a.one(d),d&&""!=b){var e=d.one("[name="+b+"]");return e?(e.val(c),a.log(b+' -> "'+c+'"')):(e=new a.Node('<input type="hidden" name="'+b+'" id="'+b+'" value="'+c+'" />').appendTo(d),a.log(b+' -> "'+c+'"')),e}},checkbox:function(b,c){c=c||this.get("el"),b=b||".checkbox-custom";var d=c.all(b);d.each(function(b){var c,b=a.one(b),d=b.attr("for"),e=(b.attr("_val"),b.one("#"+d));if(e){e.hide();var f="icon-todo-check",g="icon-todo-checked";c=e[0].checked?g:f,b.one("."+c)?c.hasClass(g)&&e.attr("checked","checked"):c=new a.Node('<span class="'+c+'"></span>').insertAfter(e)}})},radio:function(b,c){c=c||this.get("el"),b=b||".radio-custom";var d,e=c.all(b);e.each(function(b){var b=a.one(b),c=b.attr("for"),f=(b.attr("_val"),b.one("#"+c));if(f){var g="icon-todo-radio",h="icon-todo-radioed";d=b.one("."+g)||b.one("."+h),d?d.hasClass(h)&&f.attr("checked","checked"):d=new a.Node('<span class="'+g+'"></span>').insertAfter(f),b.on("click",function(a){a.preventDefault(),f.attr("checked")||(e.removeClass(h),d.addClass(h),f.attr("checked","checked"))})}})},parseAction:function(b,c){if(c=c||this.get("el"),-1!==b.indexOf("?")){var d,e=b.substring(b.indexOf("?")+1,b.length);e=a.unparam(e);for(d in e)c[0][d]||this.writeHiddenInput(d,e[d],c)}},clearSubmit:function(b,c){if(b=b||this.get("el")){b=b[0];var c=c||"",d=b.elements,e=b.action,f=!0,g=document.createElement("form");g.action=e+c,a.each(d,function(b){var c=b.name,d=b.value;c&&d&&d!==b.getAttribute("placeholder")&&d!==b.getAttribute("_default")&&("checkbox"===b.type&&b.checked&&(f=!1),g.appendChild(a.one(b).clone()[0]))}),f&&g.fs&&(g.fs.value="0"),document.body.appendChild(g),g.submit()}},isDigital:function(a,b){var c=/^[0-9]{3,11}$/g;return b=b||"",c.test(a)?!0:b}},c.EVENTS={},a.extend(c,b,{initialize:function(){{var a=this,b=a.get("el");a.get("data")}b&&(a.get("isPlaceholder")&&b.all('input[type="text"]').each(function(b){a.placeholder(b,"blur")}),b.one(".checkbox-custom")&&a.checkbox(),b.one(".radio-custom")&&a.radio(),a.get("autoFocus")&&a.autofocus(),a.__bindUI())},__bindUI:function(){this.get("immediate")?this._immediateSubmit():this._submit()},_bindAssociate:function(b,c,d){if(d&&(c=c.one('input[type="checkbox"]')),c){var e,f=c[0].checked,g=c.attr("_bind"),h=c.attr("_unbind"),i=c;if(g)if(g.indexOf(",")>0){g=g.split(","),e=g.length;for(var j=0;e>j;j++)i=i.add(b.one("#"+g[j]))}else i=i.add(b.one("#"+g));if(e=i.length,d)if(f){c.removeAttr("checked");var k=c.parent().one(".icon-todo-checked");k&&k.replaceClass("icon-todo-checked","icon-todo-check")}else for(var j=0;e>j;j++){var c=a.one(i[j]);c.attr("checked","checked");var k=c.parent().one(".icon-todo-check");k&&k.replaceClass("icon-todo-check","icon-todo-checked")}else if(f)for(var j=1;e>j;j++){var c=a.one(i[j]);c.attr("checked","checked");var k=c.parent().one(".icon-todo-check");k&&k.replaceClass("icon-todo-check","icon-todo-checked")}else{c.removeAttr("checked");var k=c.parent().one(".icon-todo-checked");k&&k.replaceClass("icon-todo-checked","icon-todo-check")}if(h){var l=b.one("#"+h);if(l.attr("checked")){l.removeAttr("checked");var k=l.parent().one(".icon-todo-checked");n.replaceClass("icon-todo-checked","icon-todo-check")}}}},_immediateSubmit:function(){var b=this,c=b.get("el"),d=!1;c.on("click",function(e){var f=a.one(e.target),g=f[0].tagName.toLowerCase(),h=f[0].type,i=c[0].elements;if((a.indexOf(f[0],i)>-1||"label"===g)&&(d=!0,"input"===g&&a.UA.ie>9&&(f[0].getAttribute("checked")?f[0].removeAttribute("checked"):f[0].setAttribute("checked","checked"))),f.parent(".dropdown-custom")&&f.parent(".dropdown-list")&&(d=!0),(f.parent(".sku-item")||f.parent(".nav-dropdown"))&&(d=!1),"input"===g&&"text"===h&&(d=!1),"checkbox"===h?b._bindAssociate(c,f):"label"===g&&(e.preventDefault(),b._bindAssociate(c,f,!0)),d){if(b.fire("beforeSubmit",{form:c})===!1)return!1;b.get("isParse")&&b.parseAction(c[0].action),b.get("isClear")?(b.clearSubmit(),e.halt(!0)):c[0].submit()}})},_submit:function(){var a=this,b=a.get("el");b.on("submit",function(c){return a.fire("beforeSubmit",{form:b})===!1?!1:(a.get("isParse")&&a.parseAction(b[0].action),a.get("isClear")?a.clearSubmit():b[0].submit(),void c.halt(!0))})}}),a.augment(c,c.METHOD),c},{requires:["brix/core/brick"]}),KISSY.add("components/srpbase/sidebar/index",function(a,b,c,d){function e(b){j=null,a.use("components/tools/advice2visual/",function(a,c){document.domain.indexOf("taobao.com")>-1&&(document.domain="taobao.com"),window.feedCallback=function(){},j=new c({sourceUrl:b}),j.on("open",function(){var b=a.one(".weather-floatlayer");b&&b.removeAttr("bx-name");var c=a.one(".sortbar");c&&c.hasClass("sortbar-fixed")&&(c.removeClass("sortbar-fixed"),c.attr("style","position: static !important"),c.prev().hide(),c[0].advice=!0)}),j.on("close",function(){var b=a.one(".sortbar");b&&b[0].advice&&(b.css("position",""),b.addClass("sortbar-fixed"),b.prev().show(),b[0].advice=!1)}),j.init()})}function f(b){return a.one("#J_advice2visual")?void(j&&j.render()):void e(b)}function g(){var b=a.one("#J_dialog_adviseForm form");b&&(b=b[0],b.action=b.action+"?nk="+unescape(decodeURIComponent(o.get("_nk_")||o.get("snk")||"").replace(/\\u/g,"%u")),window.feedCallback=function(a){var b=[{msg:"\u60a8\u7684\u63d0\u4ea4\u6ca1\u6709\u6210\u529f\uff0c\u8bf7\u91cd\u65b0\u63d0\u4ea4\uff0c\u8c22\u8c22\uff01"},{msg:"\u611f\u8c22\u60a8\u7684\u53cd\u9988\uff01",success:!0},{msg:"\u60a8\u63d0\u4ea4\u7684\u8fc7\u4e8e\u9891\u7e41\uff0c\u611f\u8c22\u60a8\u7684\u53cd\u9988\uff01"}];a=b[parseInt(a,10)||0],alert(a.msg),a.success&&(k=!0,l._hiding())})}function h(b){return k&&(a.one("#J_AdviseInput").val(""),k=!1),b._dialog&&a.one("#J_dialog_adviseForm")?void l._showing():(document.domain.indexOf("taobao.com")>-1&&(document.domain="taobao.com"),b._dialog=!0,l=new d({el:a.one(b),data:{id:"#J_dialog_adviseForm"},tmpl:"",width:450,height:395,loading:"",hasMask:!1}),void l._showing())}function i(){i.superclass.constructor.apply(this,arguments)}var j,k,l,m=a.require("dom"),n=a.require("event"),o=a.require("cookie");return i.ATTRS={gotop:{value:null},gotopHeight:{value:1.2*m.viewportHeight()},isGotopVSB:{value:!1}},i.METHOD={resetGotop:function(){var a=m.scrollTop();a>this.get("gotopHeight")&&!this.get("isGotopVSB")?this.showGoTop():a<this.get("gotopHeight")&&this.get("isGotopVSB")&&this.hideGoTop()},showGoTop:function(){var a=this,b=a.get("gotop");a.get("isGotopVSB")||b.fadeIn(.2,function(){b.css("display","block"),a.set("isGotopVSB",!0)})},hideGoTop:function(){var b=this,c=b.get("gotop");b.get("isGotopVSB")&&c.fadeOut(.2,function(){a.UA.ie<7&&b.resetTopForIE6(),b.set("isGotopVSB",!1)})}},i.FIRES={RESET:"reset"},i.EVENTS={".gotop":{click:function(a){window.scrollTo(0,0),a.preventDefault()}},li:{mouseenter:function(b){var c=a.one(b.currentTarget),d=c.one(".bg"),e=c.one("a");d&&(c.one("a").addClass("hover"),e.stop(!1,!0).animate({width:96},{duration:.2}))},mouseleave:function(b){var c=a.one(b.currentTarget),d=c.one(".bg"),e=c.one("a");d&&e.stop(!1,!0).animate({width:30},{duration:.2,complete:function(){c.one("a").removeClass("hover")}})}},".advise-side-suggest":{click:function(a){a.preventDefault();var b=a.currentTarget.getAttribute("_source");return b?void(void 0===j?e(b):f(b)):void h(a.currentTarget)}}},a.extend(i,b,{initialize:function(){this.init(),a.UA.ie<7&&this.initForIE6(),a.UA.ie<12&&g()},init:function(){var a=this,b=a.get("el"),c=b.one(".gotop");a.set("gotop",c),n.on(window,"scroll",function(){a.resetGotop()}),c.on("click",function(){m.scrollIntoView("#site-nav")}),a.resetGotop()},initForIE6:function(){var a=this,b=a.get("el");n.on(window,"scroll",function(){a.resetTopForIE6()}),c.readyResize(b,function(){this.resetTopForIE6()},a)},resetTopForIE6:function(){var a=this.get("el"),b=a.height()+30,c=m.scrollTop(),d=m.viewportHeight(),e=d+c-b;a.css("top",e)}}),a.augment(i,i.METHOD),i},{requires:["brix/core/brick","components/utils/resizebase","components/srpbase/dialog/","core"]}),KISSY.add("components/srpbase/statsend/functions",function(a){var b=window,c=(b.document,a.Base,a.Event,a.UA,{navHeigth:function(){var b=a.one(".tb-navigation");return b?b.height():"unknown"},navMutiSelectedPPath:function(a){for(var b=a.parent(".nav-category"),c=b.one(".nav-category-content"),d=c.attr("data-pid"),e="",f=c.all(".checked"),g=0;g<f.length;g++)0!=g&&(e+=","),e+=f.item(g).attr("data-param-value");return d+":"+e},navPPath:function(a){var b=a.parent(".nav-category");return b&&b.hasClass("state-multi")?void 0:a.attr("data-ppath")},navSwitchState:function(a){return a.parent(".navigation").hasClass("nav-narrowed")?1:0}});return c}),KISSY.add("components/srpbase/statsend/index",function(a,b,c,d){function e(a){return this instanceof e?void e.superclass.constructor.call(this,a):new e(a)}var f=window,g=f.document,h=a.Base,i=a.Event,j=a.UA;return a.extend(e,h,{send:function(a,c,d){d?this.saveTrace(a):b.send(a,c)},setStat:function(a){b.setStat(a)},getStat:function(){return b.getStat()},setData:function(a){b.setData(a)},setDataWithCB:function(a,c){b.setDataWithCB(a,c)},setRule:function(a){b.setRule(a)},setRuleWithCB:function(a,c){b.setDataWithCB(a,c)},initSendTrace:function(){var a=this,b=d.getItem("stat");b&&(a.send(b,!1),d.setItem("stat",""))},saveTrace:function(a){d.setItem("stat",a)},clickTrace:function(b,d){var e,f=this,g=d.attr("trace"),h=!1;if(g&&(e=b.rule[g])){var i=b.data,j=e.replace(/\$\{([\w-]+)\}/g,function(a,b){if(0==b.indexOf("data-"))return d.attr(b);if(0==b.indexOf("exec-")){var e=c[b.slice(5)](d);if(void 0!==e)return e;h=!0}return i[b]});if(j.indexOf("[].")>-1){var k=a.all('a[trace="'+g+'"]'),l=d.attr("tracenum")||1,m=Math.floor(a.indexOf(d[0],k)/l);j.indexOf("[].#index")>-1&&(j=j.replace(/\$\{([\w]+\[\]\.\#index)\}/g,function(){return m+1})),j.indexOf("[].#value")>-1&&(j=j.replace(/\$\{([\w]+)\[\]\.\#value\}/g,function(a,b){return i[b][m]}))}h||f.send(j,!1,!!d.attr("trace-lazy"))}},clickStat:function(a){for(var b,c=0;!b&&a&&a.getAttribute&&4>c;)c++,b=a.getAttribute("stat")||a.getAttribute("data-stat"),a=a.parentNode;b&&this.send(b,!1)},initClickTrace:function(b){var c=this,d=c.getStat();d&&(b=b||a.one("body"),j.ie>6?b.delegate("keyup mouseup","[trace]",function(b){var e=b.which;(2===e||b.ctrlKey&&1===e)&&c.clickTrace(d,a.one(b.currentTarget))}):a.UA.firefox&&b.delegate("keyup mouseup","[trace]",function(b){var e=b.which;(2===e||3===e)&&c.clickTrace(d,a.one(b.currentTarget))}),b.delegate("click","[trace]",function(b){c.clickTrace(d,a.one(b.currentTarget))}))},initClickStat:function(){var a=this;i.on(g,"click",function(b){a.clickStat(b.target)})},matchIframe:function(b){var c=SEARCH.config("iframeTrace"),d=0,e=[];if(c[b])return c[b];for(var f in c)d++,e.push(f);return 1===d?c[e[0]]:d>1&&(a.all("iframe").each(function(a){for(var b=a[0].src,f=0;d>f;f++)if(b.indexOf(c[e[f]])>-1){e.splice(f,1);break}}),e.length)?c[e[e.length-1]]:void 0},iframeTrace:function(a,b,c){if(b){var d=a.rule[b],e=a.data;if(c=this.matchIframe(c)){e.iframe_show="iframe_show:"+c;var f=d.replace(/\$\{([\w]+)\}/g,function(a,b){return e[b]});this.send(f,!1)}}},iframeTongjiStat:function(a){var b=this,c=b.getStat(),d=c.rule.sc,e=c.data;if(a=b.matchIframe(a)){e.iframe_show="iframe_show:"+a;var f=d.replace(/\$\{([\w]+)\}/g,function(a,b){return e[b]});f=f.replace("stats_click","f_stats_show"),b.send(f,!0)}},iframeClickStat:function(a){var b=this,c=b.getStat(),d=SEARCH.config("iframeTrace");if(d&&(document.domain="taobao.com"),a)for(var e=0,f=a.length;f>e;e++)"null"==a[e]?b.iframeTrace(c,"sc",""):b.iframeTrace(c,"sc",a[e]);else{var g=location.search,h=g.match(/sc_trace=([\.\w]*)/);if(h){var i=c.rule.sc,j=c.data;j.iframe_show="iframe_show:"+h[1];var k=i.replace(/\$\{([\w]+)\}/g,function(a,b){return j[b]});this.send(k,!1)}}}}),e},{requires:["../../utils/goldsend","./functions","../../utils/localstorage","core"]}),KISSY.add("srpbase/tab",function(a,b){function c(){c.superclass.constructor.apply(this,arguments)}var d=a.require("io");return c.ATTRS={activeIndex:{value:0},async:{value:{url:"",data:"",dataType:"json",success:null},setter:function(b){var c=this.get("async");return a.mix(c,b)}},loading:{valueFn:function(){var b=new a.Node("<div class='loading' style='border: none;width: 100%;height:100%;*height: expression(this.parentNode.offsetHeight);'/>");return b}}},c.METHOD={initSwitch:function(){var b=this,c=b.get("el"),d=c.one(".tab");if(!d.one(".active")){var e=b.get("activeIndex"),f=d.all("li"),g=c.all(".tab-panel");a.one(f[e]).addClass("active"),a.one(g[e]).addClass("active"),b.fire("switch",{activeIndex:e,currentItem:f[e],panels:g})===!1}}},c.EVENTS={".tab li":{click:function(b){var c=this,d=a.one(b.currentTarget),e=c.get("el"),f=c.get("activeIndex"),g=e.all("li"),h=e.all(".tab-panel");if(c.fire("beforeSwitch",{activeIndex:f,currentItem:g[f],panels:h})!==!1){a.one(g[f]).removeClass("active"),d.addClass("active");var i=f;f=a.indexOf(d[0],g),h[0]&&(a.one(h[i]).removeClass("active"),a.one(h[f]).addClass("active")),c.set("activeIndex",f),c.fire("switch",{activeIndex:f,currentItem:g[f],panels:h})===!1}}}},a.extend(c,b,{initialize:function(){this.__bindUI()},__bindUI:function(){var a=this,b=a.get("el"),c=a.get("async");c&&c.url&&(a._asyncPanel(c,b.all(".tab-panel"),a.get("activeIndex")),a.on("switch",function(b){a._asyncPanel(c,b.panels,b.activeIndex)}));var d=a.get("activeIndex");a.fire("inited",{activeIndex:d,currentItem:b.all("li")[d],panels:b.all(".tab-panel")})},_asyncPanel:function(b,c,e){if(c[0]){var f=this,c=a.one(c[e]),g=f.get("loading");c[0].innerHTML="",c.append(g),b.success=function(b){g.remove(),b.content&&c.append(a.one(b.content))},d(b)}}}),a.augment(c,c.METHOD),c},{requires:["brix/core/brick","core"]});!function(a){var b=window.givenByFE,c=b.defaultData,d="components/layout/vcombo";a.ready(function(){a.use("srpbase/async/context,"+d+"/",function(a,b){b.injectData(c,function(){}),b.setData(d,c),b.initContainerMap({"components/layout/vcombo":".J_vcombo","components/vcombo/choosecar":".J_vcomboHead","components/vcombo/babyinfo":".J_vcomboHead","components/navigation/baby":".J_vcomboNav","components/navigation/common":".J_picNav","components/vcombo/cstyle":".J_comboStyle"}),b.set("renderPrepare",function(b,c){var d=[],e="/index",f="/tpl",g=[];a.each(b,function(a){-1!==a.indexOf("components")&&(g.push(a),d.push(a+e,a+f))}),a.use(d.join(","),function(){c(g,{})})}),b.renderQueue(["components/vcombo/choosecar","components/vcombo/babyinfo","components/navigation/baby","components/navigation/common",d])})})}(KISSY),KISSY.add("components/commands/checkbrowser",function(a){return{execute:function(){a.UA.ie<8&&(6==a.UA.ie&&a.DOM.addClass(document.body,"ie-6"),a.use("components/browser-updater/",function(a,b){b.show({tbDownloadPid:"0080_2103"})}))}}}),KISSY.add("components/commands/globalinit",function(){return{execute:function(){TB.Global.blacklist=["fn-cart"],TB.Global.init()}}}),KISSY.add("components/commands/imglazyload",function(a){var b=a.require("srpbase/async/context"),c=a.require("srpbase/com/imgmagic/");return{execute:function(){b.setData("tool_imgMagic",new c);var a=b.getData("tool_imgMagic");b.registerTaskType("img"),b.addTask(function(){a.check()},["resize","scroll","img"])}}},{requires:["srpbase/com/imgmagic/","srpbase/async/context","event"]}),KISSY.add("components/commands/initp4p",function(a){var b=a.require("widget/advertindex/"),c=a.require("srpbase/async/context");return{execute:function(){var d=c.getData("p4pAdvert");if(d){var e=c.getData("p4pconfig");return void(e&&(d.set("param",e),d.refresh(),c.setData("p4pconfig",null)))}var f=c.getData("tool_imgMagic");d=new b({param:c.getData("p4pconfig"),placeholder:c.getData("lazyDefaultImg"),callbacks:{J_shopkeeper:function(b,d){a.ready(function(){b||(a.each(d,function(a){var b=[];a.all(".pic-box img").each(function(a){b.push({img:a,src:a.attr("_placeholder").replace("_210x210.jpg","_320x320.jpg")})}),f.addImgs(b)}),c.activeTick("img"))})},J_shopfeature:function(a,b){if(!a){var d=[];b.all(".pic-box img").each(function(a){d.push({img:a,src:a.attr("_placeholder").replace("_210x210.jpg","_320x320.jpg"),callback:function(a){a.img.css("height","100%")}})}),f.addImgs(d),c.activeTick("img")}}}}),c.setData("p4pAdvert",d)}}},{requires:["widget/advertindex/","srpbase/async/context"]}),KISSY.add("components/commands/set-response",function(a){var b=a.require("srpbase/async/context"),c=a.require("srpbase/com/domcls/");return{execute:function(){b.setData("tool_domcls",new c);var a=b.getData("tool_domcls");a.watch({el:"body",callback:function(a){if(a!==b.getData("bodyCls")){var c=b.getData("p4pAdvert");if(c&&c.resize)switch(a){case"wSmall":c.resize({pageWidth:1e3,rightWidth:200});break;case"wLarge":c.resize({pageWidth:1350,rightWidth:270});break;default:c.resize({pageWidth:1190,rightWidth:240})}b.setData("bodyCls",a)}},queue:[{cls:"wSmall",range:[0,1200]},{cls:"wNormal",range:[1200,1440]},{cls:"wLarge",range:[1440,5e3]}]}),a.check(),b.addTask(function(){a.check()},["resize"])}}},{requires:["srpbase/com/domcls/","srpbase/async/context"]}),KISSY.add("components/commands/setticktask",function(a){var b=a.require("srpbase/async/context"),c=a.require("event");return{execute:function(){b.registerTaskType("resize"),b.registerTaskType("scroll"),c.on(window,"resize",function(){b.activeTick("resize")}),c.on(window,"scroll",function(){b.activeTick("scroll")})}}},{requires:["srpbase/async/context","event"]}),KISSY.add("components/commands/statinit",function(a){var b=a.require("srpbase/com/statsend/"),c=a.require("srpbase/async/context");return{execute:function(){var a,d=c.getData("tool_goldsend"),e=window.givenByFE.tracerule;d||(d=new b,d.initClickTrace(),d.iframeClickStat(),c.setData("tool_goldsend",d)),a={rule:e,data:c.getData("traceinfo")},d.setStat(a);var f=c.getData("pvStats");d.send(f.replace("{p4p_isOK}",2),!1)}}},{requires:["srpbase/async/context","srpbase/com/statsend/"]}),KISSY.add("components/layout/vcombo/index",function(a){var b,c=a.require("srpbase/async/activity"),d="http://a.tbcdn.cn/kissy/1.0.0/build/imglazyload/spaceball.gif",e=(a.require("srpbase/util/goldsend/"),a.require("json"),{});return c.extend({_nids:"",_nidNum:0,onStart:function(){function b(b){var c=b.vcombo,h=[];return c&&!b.dataFromBuffer&&(a.each(c,function(c){var i=c.tagComboKey,m=c.type,n="J_vcombo"+i,o=c.traceInfo,p="components/vcombo/"+m+"_clone"+i,q=c.comboIndex;if(m){if(c.container=n,c.lazyDefaultImg=d,!l){var r=c.showAuctionNum,s=[],t=c.auctions,u=[],v=f._nids;a.each(t,function(a){if(!r)return!1;var b=a.nid;-1===v.indexOf(b)&&(s.push(a),u.push(b),r--)}),c.auctions=s,o["v_auction"+q]=u}f._nids+="#"+o["v_auction"+q].join("#"),f._nidNum+=o["v_auction"+q].length,b[p]=c;var w,x,y=c.selectedProperty;if(y&&(w=y.pid+"%3A"+y.vid,x={},x.dataFromBuffer=1,x[p]=c,e[w]=x),b[p]=c,!g.getContainer(p)){h.push({target:n,name:c.name}),g.setContainer(p,"."+n);var z="components/vcombo/"+m,A={};A[p+j]={alias:[z+j]},A[p+k]={alias:[z+k]},a.config("modules",A)}}}),h.length&&window.givenByFE&&"findauctionsrp"==window.givenByFE.srpName&&(b["components/vcombo/nav"]={nav:h},b.hasnav=1,g.setContainer("components/vcombo/nav",".vcombo-headnav"))),!b["components/vcombo/cstyle"]&&l&&(b["components/vcombo/cstyle"]={baseColor:"#fa4f83"}),b}function c(b,c){var d=[],e=["components/vcombo/choosecar","components/vcombo/babyinfo","components/navigation/baby","components/navigation/common"],f=[];a.each(b,function(a){for(var b=0,c=e.length;c>b;b++)if(-1!==e[b].indexOf(a))return;-1!==a.indexOf("components")&&(f.push(a),d.push(a+j,a+k))}),a.use(d.join(","),function(){c(f,{})})}var f=this,g=f.get("context"),h=this.get("data"),i=g.get("cpnRule"),j=i.js,k=i.tpl,l=!0;g.get("datapool").set("dataPrepare",b),g.set("renderPrepare",c),g.setData("lazyDefaultImg",d),g.injectData(h,function(a){l=!1,f.set("renderQ",a)})},onRendered:function(){var b=this,c=b.get("context"),d=b.get("el");d.removeClass("blank-vcombo");try{var e,f,g=window.SRP.stat.data;g&&(e="#"+g.auctionNids.join("#"),f=g.auctionNids.length,b._nids+=e,b._nidNum+=f)}catch(h){a.log("\u65e0\u6cd5\u83b7\u53d6\u57cb\u70b9\u6570\u636e:window.SRP.stat.data\uff0c\u5bfc\u81f4\u65e0\u6cd5\u83b7\u53d6nids")}c.runCommand(["setticktask","imglazyload"]),c.startTick(),c.activeTick("async"),c.renderQueue(b.get("renderQ"))}},{EVENTS:{".J_navItem":{click:function(c){var d,f=a.one(c.currentTarget),g=f.attr("data-url"),h=f.attr("data-auctionNum")>>0,i=this,j=i.get("context"),k=h+i._nidNum,l=g.match(/ppath=([^&]*)/)[1];l&&(d=e[l]),d?j.injectData(d,function(a){j.renderQueue(a)}):j.async(!1,b,b,g+"&n="+k)}}}})},{requires:["srpbase/async/activity"]}),KISSY.add("components/layout/vcombo/tpl",function(){return'<div class="J_comboStyle" style="display: none"></div>{{#if hasnav}}<div class="vcombo-headnav"></div>{{/if}}{{#each vcombo}}<div class="vcombo-box {{#if xindex===0}}first-vcombo{{/if}} {{container}}"></div>{{/each}}{{#if bannerPic}}<div class="banner-pic"><img src="{{bannerPic}}" alt=""/></div>{{/if}}'}),KISSY.add("components/vcombo/babyinfo/index",function(a,b,c){return b.extend({onStart:function(){var a=this,b=a.get("data"),c=b.birthday,d=b.nickname,e=b.sex;a.set("valueBirthday",c),a.set("valueName",d),a.set("valueSex",e),e&&(b.isMale="male"==e?1:0,b.isFemale="female"==e?1:0),c&&d&&e&&(b.saveActive=1,b.babyage=a.getAge(c))},getAge:function(a){var b,c=new Date(a),d=new Date,e=d.getFullYear()-c.getFullYear(),f=d.getMonth()-c.getMonth(),g=d.getDate()-c.getDate(),h=d.getTime(),i="";return 0>g&&(f--,d.setMonth(d.getMonth()-1),g=(h-d.getTime())/1e3/3600/24+g),0>f&&(e--,f=12+f),b=g/7>>0,e&&(i+=e+"\u5468\u5c81"),f&&(i+=f+"\u4e2a\u6708"),b&&(i+="0"+b+"\u5468"),i},onRendered:function(){var b=this,c=b.get("el"),d=c.one(".J_nameInput"),e=c.one(".J_saveBtn"),f=c.one(".J_birthdaySelect");b.set("nameInput",d),b.set("calendarInput",f),b.set("saveBtn",e),a.use("gallery/datetimepicker/1.1/index",function(a,c){var d=new c({start:".J_birthdaySelect",timepicker:!1,closeOnDateSelect:!0,className:"srp-date"});d.on("clickDateChange",function(){b.checkBirthday(d.getDateStr(),d),b.checkSaveActive()}),d.on("changeYear",function(){b.checkBirthday(d.getDateStr(),d),b.checkSaveActive()}),d.on("changeMonth",function(){b.checkBirthday(d.getDateStr(),d),b.checkSaveActive()})}),b.bufferCheckNameInput=a.buffer(b.checkNameInput,100,b),b.sendComboTongjiStat()},checkBirthday:function(b,c){var d="twinkle-action",e=this,f=e.get("calendarInput");new Date(b)-new Date>0?(f.attr("value",""),f.prop("value",""),e.set("valueBirthday",""),c.hide(),f.removeClass(d),a.later(function(){f.addClass(d)},200)):e.set("valueBirthday",b)},checkSaveActive:function(){var a=this;a.get("valueBirthday")&&a.get("valueName")&&a.get("valueSex")?a.get("saveBtn").removeClass("save-btn-disabled"):a.get("saveBtn").addClass("save-btn-disabled")},checkNameInput:function(){var a=this,b=a.get("nameInput"),c=b.prop("value");a.set("valueName",c),a.checkSaveActive()},submitBabyInfo:function(){var b=this,d=b.get("valueBirthday"),e=b.get("valueName"),f=b.get("valueSex"),g=b.get("data").saveUrl;d&&e&&f&&(g+="&birthday="+d+"&nickname="+e+"&sex="+f),c.jsonp(g,function(){var b=location.search,c=b.replace(/\&t=\d*/,"")+"&t="+(new Date).getTime();a.later(function(){location.search=c},500)})},checkLogin:function(b){TB.Global.isLogin?b():a.use("tbc/mini-login/1.4.2/",function(a,c){c.show(function(){b()})})}},{EVENTS:{".J_chooseSex":{click:function(b){var c=this,d=a.one(b.currentTarget),e=d.attr("data-key");d.parent().all(".icon-hover").removeClass("icon-hover"),d.addClass("icon-hover"),c.set("valueSex",e),c.checkSaveActive()}},".J_nameInput":{input:function(){this.bufferCheckNameInput()}},".J_saveBtn":{click:function(b){var c=this,d=a.one(b.currentTarget);d.hasClass("save-btn-disabled")||c.checkLogin(function(){c.submitBabyInfo()})}},".J_infoEdit":{click:function(){this.get("el").first().removeClass("vcombo-babyinfo-saved")}}}})},{requires:["../baseitem/","io"]}),KISSY.add("components/vcombo/babyinfo/tpl",function(){return'<div class="vcombo-babyinfo {{#if saveActive}}vcombo-babyinfo-saved{{/if}}"><div class="babyinfo-panel row"><div class="panel-head col"><div class="mod-title">\u6211\u7684\u5b9d\u5b9d\u6863\u6848</div><div class="mod-desc">\u586b\u5199\u5b9d\u5b9d\u4fe1\u606f\u53ef\u4ee5\u66f4\u9002\u5408\u7684\u5b9d\u8d1d</div></div><div class="birthday-select info-block col"><span class="block-title">\u751f\u65e5\uff1a</span><input class="J_birthdaySelect baby-birthday-input" type="text" value="{{birthday}}"/></div><div class="baby-sex info-block col"><span class="block-title">\u6027\u522b\uff1a</span><span class="J_chooseSex first icon-tag {{#if isMale}}icon-hover{{/if}}" data-key="male"><span class="icon-btn-radio radio-icon"></span><span class="content">\u738b\u5b50</span><img class="baby-img" src="{{malePic}}" alt=""/></span><span class="J_chooseSex icon-tag {{#if isFemale}}icon-hover{{/if}}" data-key="female"><span class="icon-btn-radio radio-icon"></span><span class="content">\u516c\u4e3b</span><img class="baby-img" src="{{femalePic}}" alt=""/></span></div><div class="baby-name info-block col"><span class="block-title">\u5c0f\u540d\uff1a</span><input class="baby-name-input J_nameInput" type="text" value="{{nickname}}"/></div><div class="baby-name info-block col end"><a trace="v_babysave" class="{{#if !saveActive}}save-btn-disabled{{/if}} save-btn J_saveBtn" href="javascript:;">\u4fdd\u5b58</a></div><div class="saved-info-block col"><span class="baby-pic"><img src="{{@if isMale}}{{malePic}}{{else}}{{femalePic}}{{/if}}" alt=""/></span><span class="baby-nickname">{{nickname}}</span><span class="baby-age">{{babyage}}</span><a class="info-edit J_infoEdit" href="javascript:;">[\u7f16\u8f91]</a></div><div class="saved-info-block col end"><span class="word-info">\u6839\u636e\u4f60\u7684\u5b9d\u5b9d\u4fe1\u606f\u5339\u914d\u4e0b\u5217\u5546\u54c1</span></div></div></div>'}),KISSY.add("components/vcombo/baseitem/index",function(a){function b(a){var b,c,d=a.img,e=a.oWidth,f=a.oHeight,g=Math.min(e,f),h=a.toWidth||g,i=a.toHeight||g,j=a.isFadeIn;c=e-h>>1,b=f-i>>1,c=c/h*100,b=b/h*100,c===b?d.css("width","100%"):d.css(c>b?{height:"100%",width:"auto",margin:"0 0 0 -"+c+"%"}:{width:"100%",height:"auto",margin:"-"+c+"% 0 0 0"}),j&&d.fadeIn(.3)}function c(a){var b,c,d=a.img,e=a.oWidth,f=a.oHeight,g=Math.min(e/2,f/3),h=2*g,i=3*g;c=e-h>>1,b=f-i>>1,c=c/h*100,b=b/h*100,c===b?d.css("height","100%"):c>b?(d.css("height","100%"),d.css("width","auto"),d.css("marginLeft","-"+c+"%")):(d.css("width","100%"),d.css("height","auto"),d.css("marginTop","-"+b+"%"))}var d=a.require("srpbase/async/activity"),e=a.require("srpbase/util/goldsend/");return d.extend({getStatStr:function(a){var b=window.SRP,c=b.Global||{},d=b.stat?b.stat.data.chuizhi_page:"",e=d?";"+d:"",f=c.algBucketid,g=c.multi_bucket;return"at_bucketid="+f+"&multi_bucket="+g+a+e},sendComboTongjiStat:function(){var a=this,b=a.get("data"),c=b.comboKey,d=b.selectedProperty?b.selectedProperty.ppath:"0";e.send(a.getStatStr("&f_stats_show=chuizhi_combo:"+c+"_"+d),!0)},sendTongji:function(a){e.send(this.getStatStr(a),!0)},addImgLazyLoad:function(){var a,b=this,c=b.get("el"),d=b.get("context").getData("tool_imgMagic"),e=[],f=b.get("context");a=b.get(window.devicePixelRatio>1?"retinaPicSuffix":"normalPicSuffix"),c.all(".pic-box img").each(function(c){var d=c.attr("data-src");d&&e.push({img:c,src:d+a,errorSrc:[d],callback:b.get("imgProcessor")})}),d.addImgs(e),f.activeTick("img")},mergeStatData:function(){e.setData(this.get("data").traceInfo)},onRendered:function(){var a=this;a.mergeStatData(),a.sendComboTongjiStat(),a.addImgLazyLoad()}},{ATTRS:{retinaPicSuffix:{value:"_400x400.jpg"},normalPicSuffix:{value:"_250x250.jpg"},imgProcessor:{value:b,setter:function(a){return"long"==a?c:b}}}})},{requires:["srpbase/async/activity","srpbase/util/goldsend/"]}),KISSY.add("components/vcombo/choosecar/index",function(a,b,c,d,e){var f=new c(e),g=a.require("node"),h=a.require("srpbase/util/goldsend/"),i={pinpai:"xilie",xilie:"chexing"};return b.extend({onStart:function(){var a=this,b=a.get("data"),c=b.pinpai,d=b.xilie,e=b.chexing;a.set("pinpaiUrl",b.pinpaiUrl),c&&a.set("pinpaiPPath",c.ppath),a.set("carUrl",b.carUrl),d&&a.set("xiliePPath",d.ppath),c&&d&&e&&(b.usualWord="\u60a8\u9009\u62e9\u7684\u8f66\u578b",b.carPPath=c.ppath+"-"+d.ppath+"-"+e.ppath),a.set("saveUrl",b.saveUrl)},sendComboTongjiStat:function(){var a=this,b=window.SRP,c=b.Global||{},d=b.stat?b.stat.data.chuizhi_page:"",e=d?";"+d:"",f=c.algBucketid,g=c.multi_bucket,i=a.get("data"),j=(i.comboKey,i.carPPath||"0");h.send("at_bucketid="+f+"&multi_bucket="+g+"&f_stats_show=chuizhi_combo:_"+j+e,!0)},onRendered:function(){var a=this,b=(a.get("data"),a.get("el"));a.set("filterPanel",b.one(".J_FilterPanel")),a.sendComboTongjiStat()},getDPData:function(a,b){var c,e=this,f=e.get("data");if(f[a+"Data"])b(f[a+"Data"]);else{var g;switch(a){case"pinpai":g=e.get("pinpaiUrl");break;case"xilie":g=e.get("carUrl")+"&ppath="+e.get("pinpaiPPath");break;case"chexing":g=e.get("carUrl")+"&ppath="+e.get("pinpaiPPath")+","+e.get("xiliePPath"),c="v_carinfosave"}g&&d.jsonp(g,function(a){var d={};d.items=a,c&&(d.clickTrace=c),b(d)})}},renderDPPanel:function(a,b){var c,d=this,e=d.get("filterPanel"),h=a.attr("data-key"),j="J_dpPanel"+h,k=d.get("el"),l=a.offset().left-k.offset().left-1;d.getDPData(h,function(k){a.removeClass("disabled"),a.addClass("J_filterBtn");var m=b?" dp-panel-selected":"";k.panelCls="dp-panel-active "+j+m,k.next=i[h],k.current=h,c=new g(f.render(k)),e.append(c),c.css("left",l),d.set(j,c),a.attr("_panelCls",j)})},distroyPanel:function(a){var b=this,c=b.get("el").one(".J_"+a+"Btn"),d=c.one(".content");c.addClass("disabled"),c.removeClass("J_filterBtn"),d.html(d.attr("data-default")),this.get("J_dpPanel"+a)&&(b.get("J_dpPanel"+a).remove(),b.set("J_dpPanel"+a,null))},submitCar:function(){var b=this,c=b.get("pinpaiPPath"),e=b.get("xiliePPath"),f=b.get("chexingPPath"),g=b.get("saveUrl")+"&ppath=";c&&e&&f&&(g+=c+","+e+","+f),d.jsonp(g,function(){var b=location.search,c=b.replace(/\&t=\d*/,"")+"&t="+(new Date).getTime();c=c.replace(/\&s=[^&]*/,""),a.later(function(){location.search=c},500)})}},{EVENTS:{".J_filterBtn":{mouseenter:function(b){var c=a.one(b.currentTarget),d=this,e=(d.get("filterPanel"),c.attr("_panelCls"));e?d.get(e).addClass("dp-panel-active"):d.renderDPPanel(c,c.hasClass("selected")),c.addClass("icon-hover active")},mouseleave:function(b){var c=a.one(b.currentTarget),d=this,e=c.attr("_panelCls");e&&d.get(e).removeClass("dp-panel-active"),c.removeClass("icon-hover active")}},".J_DPBtn":{click:function(b){var c=this,d=c.get("el"),e=a.one(b.currentTarget),f=e.parent(2),g=f.attr("data-next"),h=f.attr("data-current"),j=e.attr("data-ppath"),k=d.one(".J_"+h+"Btn");if(c.set(h+"PPath",j),g){var l=d.one(".J_"+g+"Btn");k.one(".content").html(e.html()),f.removeClass("dp-panel-active"),c.set(g+"PPath",""),c.distroyPanel(g),c.renderDPPanel(l),i[g]&&(c.set(i[g]+"PPath",""),c.distroyPanel(i[g]))}else c.submitCar()}},".J_cancelBtn":{click:function(){var a=this;a.set("pinpaiPPath",""),a.set("xiliePPath",""),a.set("chexingPPath",""),a.submitCar()}},".J_DPPanel":{mouseenter:function(b){var c=a.one(b.currentTarget),d=c.attr("data-current");a.one(".J_"+d+"Btn").addClass("active icon-hover"),c.addClass("dp-panel-active")},mouseleave:function(b){var c=a.one(b.currentTarget),d=c.attr("data-current");a.one(".J_"+d+"Btn").removeClass("active icon-hover"),c.removeClass("dp-panel-active")}},".J_usualBtn":{mouseenter:function(b){a.one(b.currentTarget).addClass("icon-hover active")},mouseleave:function(b){a.one(b.currentTarget).removeClass("icon-hover active")}}}})},{requires:["srpbase/async/activity","xtemplate","io","./panel"]}),KISSY.add("components/vcombo/choosecar/panel",function(){return'<div class="dp-panel dp-panel-{{current}} J_DPPanel {{panelCls}}" data-current="{{current}}" data-next="{{next}}">{{#each items}}<div class="item-row {{#if xindex%2}}double-row{{/if}}"><div class="item-head">{{key}}</div>{{#item}}<a trace="{{clickTrace}}" class="sub-item J_DPBtn" href="javascript:;" data-ppath="{{ppath}}">{{val}}</a>{{/item}}</div>{{/each}}</div>'}),KISSY.add("components/vcombo/choosecar/tpl",function(){return'<div class="vcombo-choosecar"><div class="choosecar-panel row"><div class="choose-filter col J_FilterPanel"><span class="filter-head">\u9009\u8f66\u578b</span><a href="javascript:;" class="filter-dropdown J_filterBtn J_pinpaiBtn" data-key="pinpai"><span class="content" data-default="\u54c1\u724c">{{@if pinpai.content}}{{pinpai.content}}{{else}}\u54c1\u724c{{/if}}</span><b class="icon-btn-arrow-2-h"></b></a><a href="javascript:;" class="filter-dropdown {{@if xilie.content}}J_filterBtn{{else}}disabled{{/if}} J_xilieBtn" data-key="xilie"><span class="content" data-default="\u7cfb\u5217">{{@if xilie.content}}{{xilie.content}}{{else}}\u7cfb\u5217{{/if}}</span><b class="icon-btn-arrow-2-h"></b></a><a href="javascript:;" class="filter-dropdown {{@if chexing.content}}J_filterBtn{{else}}disabled{{/if}} J_chexingBtn long-dp" data-key="chexing"><span class="content" data-default="\u8f66\u578b">{{@if chexing.content}}{{chexing.content}}{{else}}\u8f66\u578b{{/if}}</span><b class="icon-btn-arrow-2-h"></b></a></div>{{#if usualCar}}<div class="mychoice col end J_usualBtn"><span class="choice-head">{{usualWord}}\uff1a</span><a href="" class="choice-item">{{usualCar}}</a>{{#if moreCar}}<b class="icon-btn-arrow-2-h"></b><div class="choice-panel"><div class="choice-row"><a href="" class="choice-item">{{car}}</a></div></div>{{/if}}</div>{{/if}}</div></div>'}),KISSY.add("components/vcombo/compic/index",function(a,b){return b.extend({onStart:function(){var a=this;a.set("retinaPicSuffix","_600x600.jpg"),a.set("normalPicSuffix","_250x250.jpg")}})},{requires:["../baseitem/"]}),KISSY.add("components/vcombo/compic/tpl",function(){return'<div class="vcombo-head row"><div class="title col"><span class="main-title">{{preName}}</span>{{name}}</div>{{#if description}}<div class="description col">{{description}}</div>{{/if}}{{@if nav}}<div class="vc-nav col"><div class="vc-nav-panel">{{#each nav}}<a trace="{{trace}}" class="vc-nav-item J_navItem {{#if selected}}selected{{/if}}" href="javascript:;" data-url="{{dataUrl}}" data-auctionNum="{{showAuctionNum}}">{{text}}<span class="arrow"><b></b></span></a>{{/each}}</div></div>{{else}}{{#if totalInfo.total_hits}}<div class="total-info col">\u5171{{totalInfo.total_hits}}\u4ef6\u5b9d\u8d1d</div>{{/if}}{{/if}}{{#if moreLink}}<div class="more-btn col end"><a trace="{{moreLinkTrace}}" class="more-btn-a J_moreBtn" href="{{moreLink}}" target="_blank">\u66f4\u591a>></a></div>{{/if}}</div><div class="vcombo-compic"><div class="compic-panel row {{#if extConfig.p_hasNick}}vcombo-hasnick{{/if}}">{{#each auctions}}<div class="vcombo-baobei col"><div class="pic-box"><a trace="{{trace}}" traceNum="2" href="{{url}}" title="{{rawTitle}}" target="_blank"><img src="{{lazyDefaultImg}}" data-src="{{picUrl}}" alt=""/></a></div>{{#if userComments}}<div class="user-comments"><div class="current-comment"><div class="bg"></div><span class="text J_userComment">{{currentComment}}</span></div><div class="users row">{{#each userComments}}<div class="col J_userPic {{#if xindex===0}}active{{/if}}"  data-src="{{picUrl}}"  data-comment="{{comment}}"><a class="user-pic-box" href="{{url}}"><img src="{{lazyDefaultImg}}" data-src="{{gravatar}}" alt=""/></a></div>{{/each}}</div></div>{{/if}}<div class="sale-info row"><div class="col"><span class="price">\uffe5<span class="price-num">{{price}}</span></span></div><div class="end col"><span class="sale-num">{{sales}}\u4eba\u4ed8\u6b3e</span></div></div>{{#if showTitle}}<div class="baobei-title"><a trace="{{trace}}" traceNum="2" href="{{url}}" title="{{rawTitle}}"  target="_blank">{{{showTitle}}}</a></div>{{/if}}{{#if nick}}<div class="boss-nick"><a href="{{shopurl}}" target="_blank">{{nick}}</a></div>{{/if}}</div>{{/each}}</div></div>'}),KISSY.add("components/vcombo/cstyle/index",function(a){var b=a.require("srpbase/async/activity");return b.extend({onRendered:function(){}})},{requires:["srpbase/async/activity"]}),KISSY.add("components/vcombo/cstyle/tpl",function(){return'<style type="text/css">.vcombo-nav-panel .vhnav-item:hover,.vcombo-nav-panel .vhnav-item-active{background: {{baseColor}};color: #fff;}.vcombo-rownav .nav-panel .nav-item:hover,.vcombo-rownav .nav-panel .selected {border-color: {{baseColor}};background: #fff;color: {{baseColor}};}.vcombo-baobei .user-comments .users .active .user-pic-box {border-color: {{baseColor}};}.vertical-combo .vcombo-box .vcombo-head .main-title {color: {{baseColor}};}.vertical-combo .vcombo-box .vcombo-head .vc-nav .selected,.vertical-combo .vcombo-box .vcombo-head .vc-nav .vc-nav-item:hover {color: #FFF;background: {{baseColor}};}.vertical-combo .vcombo-box .vcombo-head .vc-nav .selected .arrow b,.vertical-combo .vcombo-box .vcombo-head .vc-nav .vc-nav-item:hover .arrow b{border-color: {{baseColor}} transparent transparent transparent;}.vertical-combo .vcombo-box .vcombo-head .more-btn-a{background: {{baseColor}};color: #FFF;}.vertical-combo .vcombo-withnav .vcombo-nav .nav-withpic .selected .img-box,.vertical-combo .vcombo-withnav .vcombo-nav .nav-withpic .nav-item:hover .img-box {border-color: {{baseColor}};}.vertical-combo .vcombo-withnav .vcombo-nav .nav-word .selected,.vertical-combo .vcombo-withnav .vcombo-nav .nav-word .nav-item:hover {border-color: {{baseColor}};background: {{baseColor}};color: #FFF;}.vertical-combo .vcombo-leftnav .vcombo-nav .nav-pic-item.selected .img-box,.vertical-combo .vcombo-leftnav .vcombo-nav .nav-pic-item:hover .img-box {border-color: {{baseColor}};}.vertical-combo .vcombo-leftnav .vcombo-nav .nav-word-item.selected,.vertical-combo .vcombo-leftnav .vcombo-nav .nav-word-item:hover {border-color: {{baseColor}};background: {{baseColor}};color: #FFF;}</style>'}),KISSY.add("components/vcombo/dapei/index",function(a,b){return b.extend({onRendered:function(){var a=this;a.mergeStatData(),a.sendComboTongjiStat();var b,c,d=a.get("el"),e=a.get("context").getData("tool_imgMagic"),f=[],g=a.get("context");window.devicePixelRatio>1?(b="_600x600.jpg",c="_400x400.jpg"):(b="_400x400.jpg",c="_170x170.jpg"),d.all(".main-pic img").each(function(c){var d=c.attr("data-src");d&&f.push({img:c,src:d+b,errorSrc:[d],callback:a.get("imgProcessor")})}),d.all(".sub-pic img").each(function(b){var d=b.attr("data-src");d&&f.push({img:b,src:d+c,errorSrc:[d],callback:a.get("imgProcessor")})}),e.addImgs(f),g.activeTick("img")}})},{requires:["../baseitem/"]}),KISSY.add("components/vcombo/dapei/tpl",function(){return'<div class="vcombo-head row"><div class="title col"><span class="main-title">{{preName}}</span>{{name}}</div>{{#if description}}<div class="description col">{{description}}</div>{{/if}}{{@if nav}}<div class="vc-nav col"><div class="vc-nav-panel">{{#each nav}}<a trace="{{trace}}" class="vc-nav-item J_navItem {{#if selected}}selected{{/if}}" href="javascript:;" data-url="{{dataUrl}}" data-auctionNum="{{showAuctionNum}}">{{text}}<span class="arrow"><b></b></span></a>{{/each}}</div></div>{{else}}{{#if totalInfo.total_hits}}<div class="total-info col">\u5171{{totalInfo.total_hits}}\u4ef6\u5b9d\u8d1d</div>{{/if}}{{/if}}{{#if moreLink}}<div class="more-btn col end"><a trace="{{moreLinkTrace}}" class="more-btn-a J_moreBtn" href="{{moreLink}}" target="_blank">\u66f4\u591a>></a></div>{{/if}}</div><div class="vcombo-compic vcombo-dapei"><div class="compic-panel row">{{#each auctions}}<div class="dapei-item col row"><div class="main-pic col"><a trace="{{mainPic.trace}}" href="{{mainPic.url}}"  target="_blank"><img src="{{lazyDefaultImg}}" data-src="{{mainPic.picUrl}}" alt=""/></a><div class="price-layer"><div class="bg"></div><span class="price">\uffe5<span class="price-num">{{mainPic.price}}</span></span></div></div><div class="sub-pics col">{{#each subPics}}{{#if xindex<2}}<div class="sub-pic"><a trace="{{trace}}" href="{{url}}" target="_blank"><img src="{{lazyDefaultImg}}" data-src="{{picUrl}}" alt=""/></a><div class="price-layer"><div class="bg"></div><span class="price">\uffe5<span class="price-num">{{price}}</span></span></div></div>{{/if}}{{/each}}</div></div>{{/each}}</div></div>'}),KISSY.add("components/vcombo/leftnav/index",function(a,b){return b.extend({onStart:function(){var a=this.get("data"),b=a.auctions,c=[],d=a.richNav,e=6;d.pic||(a.isHalf=1,e=7);for(var f=0;e>f;f++){var g=b[f];c.push(g)}a.auctions=c},onRendered:function(){var a=this,b=a.get("el"),c=a.get("context").getData("tool_imgMagic"),d=[],e=a.get("context");a.callSuper();var f;f=window.devicePixelRatio>1?"":"_50x50.jpg",b.all(".vcombo-nav img").each(function(a){d.push({img:a,src:a.attr("data-src")+f})}),c.addImgs(d),e.activeTick("img")}})},{requires:["../baseitem/"]}),KISSY.add("components/vcombo/leftnav/tpl",function(){return'<div class="vcombo-head row"><div class="title col"><span class="main-title">{{preName}}</span>{{name}}</div>{{#if description}}<div class="description col">{{description}}</div>{{/if}}{{@if nav}}<div class="vc-nav col"><div class="vc-nav-panel">{{#each nav}}<a trace="{{trace}}" class="vc-nav-item J_navItem {{#if selected}}selected{{/if}}" href="javascript:;" data-url="{{dataUrl}}" data-auctionNum="{{showAuctionNum}}">{{text}}<span class="arrow"><b></b></span></a>{{/each}}</div></div>{{else}}{{#if totalInfo.total_hits}}<div class="total-info col">\u5171{{totalInfo.total_hits}}\u4ef6\u5b9d\u8d1d</div>{{/if}}{{/if}}{{#if moreLink}}<div class="more-btn col end"><a trace="{{moreLinkTrace}}" class="more-btn-a J_moreBtn" href="{{moreLink}}" target="_blank">\u66f4\u591a>></a></div>{{/if}}</div><div class="vcombo-compic vcombo-leftnav"><div class="compic-panel row vcombo-notitle">{{#richNav}}<div class="vcombo-nav col"><div class="nav-panel {{#if isHalf}}nav-half-panel{{/if}}">{{#if pic}}<div class="pic-block nav-block row">{{#each pic}}<a trace="{{trace}}" class="nav-pic-item col {{@if selected}}selected{{else}}J_navItem{{/if}}" href="javascript:;" data-url="{{dataUrl}}" data-auctionNum="{{showAuctionNum}}"><span class="img-box"><img src="{{lazyDefaultImg}}" data-src="{{picUrl}}" alt=""/></span><span class="word">{{text}}</span></a>{{/each}}</div>{{/if}}<div class="word-block nav-block row">{{#each common}}{{#if text}}<a trace="{{trace}}" class="col nav-word-item {{@if selected}}selected{{else}}J_navItem{{/if}}" href="javascript:;" data-url="{{dataUrl}}" data-auctionNum="{{showAuctionNum}}">{{text}}</a>{{/if}}{{/each}}</div></div></div>{{/richNav}}{{#each auctions}}<div class="vcombo-baobei col"><div class="pic-box"><a trace="{{trace}}" traceNum="2" href="{{url}}" title="{{rawTitle}}" target="_blank"><img src="{{lazyDefaultImg}}" data-src="{{picUrl}}" alt=""/></a></div>{{#if userComments}}<div class="user-comments"><div class="current-comment"><div class="bg"></div><span class="text J_userComment">{{currentComment}}</span></div><div class="users row">{{#each userComments}}<div class="col J_userPic {{#if xindex===0}}active{{/if}}"  data-src="{{picUrl}}"  data-comment="{{comment}}"><a class="user-pic-box" href="{{url}}"><img src="{{lazyDefaultImg}}" data-src="{{gravatar}}" alt=""/></a></div>{{/each}}</div></div>{{/if}}<div class="sale-info row"><div class="col"><span class="price">\uffe5<span class="price-num">{{price}}</span></span></div><div class="end col"><span class="sale-num">{{sales}}\u4eba\u4ed8\u6b3e</span></div></div>{{#if showTitle}}<div class="baobei-title"><a trace="{{trace}}" traceNum="2" href="{{url}}" title="{{rawTitle}}"  target="_blank">{{{showTitle}}}</a></div>{{/if}}{{#if nick}}<div class="boss-nick"><a href="{{shopurl}}" target="_blank">{{nick}}</a></div>{{/if}}</div>{{/each}}</div></div>'}),KISSY.add("components/vcombo/longpic/index",function(a,b){return b.extend({onStart:function(){var a=this;a.set("imgProcessor","long")}})},{requires:["../baseitem/"]}),KISSY.add("components/vcombo/longpic/tpl",function(){return'<div class="vcombo-head row"><div class="title col"><span class="main-title">{{preName}}</span>{{name}}</div>{{#if description}}<div class="description col">{{description}}</div>{{/if}}{{@if nav}}<div class="vc-nav col"><div class="vc-nav-panel">{{#each nav}}<a trace="{{trace}}" class="vc-nav-item J_navItem {{#if selected}}selected{{/if}}" href="javascript:;" data-url="{{dataUrl}}" data-auctionNum="{{showAuctionNum}}">{{text}}<span class="arrow"><b></b></span></a>{{/each}}</div></div>{{else}}{{#if totalInfo.total_hits}}<div class="total-info col">\u5171{{totalInfo.total_hits}}\u4ef6\u5b9d\u8d1d</div>{{/if}}{{/if}}{{#if moreLink}}<div class="more-btn col end"><a trace="{{moreLinkTrace}}" class="more-btn-a J_moreBtn" href="{{moreLink}}" target="_blank">\u66f4\u591a>></a></div>{{/if}}</div><div class="vcombo-panel"><div class="vcombo-content vcombo-longpic {{#if extConfig.p_hasNick}}vcombo-hasnick{{/if}} row">{{#each auctions}}<div class="vcombo-baobei col"><div class="pic-box"><a trace="{{trace}}" traceNum="2" href="{{url}}" title="{{rawTitle}}" target="_blank"><img src="{{lazyDefaultImg}}" data-src="{{picUrl}}" alt=""/></a></div>{{#if userComments}}<div class="user-comments"><div class="current-comment"><div class="bg"></div><span class="text J_userComment">{{currentComment}}</span></div><div class="users row">{{#each userComments}}<div class="col J_userPic {{#if xindex===0}}active{{/if}}"  data-src="{{picUrl}}"  data-comment="{{comment}}"><a class="user-pic-box" href="{{url}}"><img src="{{lazyDefaultImg}}" data-src="{{gravatar}}" alt=""/></a></div>{{/each}}</div></div>{{/if}}<div class="sale-info row"><div class="col"><span class="price">\uffe5<span class="price-num">{{price}}</span></span></div><div class="end col"><span class="sale-num">{{sales}}\u4eba\u4ed8\u6b3e</span></div></div>{{#if showTitle}}<div class="baobei-title"><a trace="{{trace}}" traceNum="2" href="{{url}}" title="{{rawTitle}}"  target="_blank">{{{showTitle}}}</a></div>{{/if}}{{#if nick}}<div class="boss-nick"><a href="{{shopurl}}" target="_blank">{{nick}}</a></div>{{/if}}</div>{{/each}}</div></div>'
}),KISSY.add("components/vcombo/nav/index",function(a){var b=a.require("srpbase/async/activity"),c=a.require("dom"),d=a.require("event"),e="vcombo-nax-fixed";return b.extend({onStart:function(){},onRendered:function(){var b=this,f=(b.get("context"),this.get("el"));if(!(a.UA.ie<8)){var g=10;8==a.UA.ie&&(g=600);var h=function(a,b){a>b?f.hasClass(e)||f.addClass(e):f.hasClass(e)&&f.removeClass(e)},i=a.buffer(function(){h(c.scrollTop(),f.offset().top+40)},g);8!=a.UA.ie&&h(c.scrollTop(),f.offset().top+40),d.on(window,"scroll",function(){i()})}}},{EVENTS:{".J_vheadNavItem":{click:function(b){var c=a.one(b.currentTarget),d=c.attr("data-target"),e=a.one("."+d).offset().top,f=this.get("context");window.scrollTo(0,e-68),f.activeTick("scroll"),this.get("el").all(".vhnav-item-active").removeClass("vhnav-item-active"),c.addClass("vhnav-item-active")}}}})},{requires:["srpbase/async/activity","event","dom"]}),KISSY.add("components/vcombo/nav/tpl",function(){return'<div class="vcombo-nav-panel row">{{#each nav}}<a href="javascript:;" class="col vhnav-item J_vheadNavItem" data-target="{{target}}">{{name}}</a>{{/each}}</div>'}),KISSY.add("components/vcombo/navpic/index",function(a,b){a.require("srpbase/util/goldsend/");return b.extend({onStart:function(){for(var a=this.get("data"),b=a.auctions,c=[],d=0;9>d;d++){var e=b[d];e&&(8>d?c.push(e):a.externalItem=e)}a.auctions=c},onRendered:function(){var a=this,b=a.get("el"),c=a.get("context").getData("tool_imgMagic"),d=[],e=a.get("context");a.callSuper();var f;f=window.devicePixelRatio>1?"":"_50x50.jpg",b.all(".nav-item img").each(function(a){d.push({img:a,src:a.attr("data-src")+f})}),c.addImgs(d),e.activeTick("img")}})},{requires:["../baseitem/"]}),KISSY.add("components/vcombo/navpic/tpl",function(){return'<div class="vcombo-head row"><div class="title col"><span class="main-title">{{preName}}</span>{{name}}</div>{{#if description}}<div class="description col">{{description}}</div>{{/if}}{{@if nav}}<div class="vc-nav col"><div class="vc-nav-panel">{{#each nav}}<a trace="{{trace}}" class="vc-nav-item J_navItem {{#if selected}}selected{{/if}}" href="javascript:;" data-url="{{dataUrl}}" data-auctionNum="{{showAuctionNum}}">{{text}}<span class="arrow"><b></b></span></a>{{/each}}</div></div>{{else}}{{#if totalInfo.total_hits}}<div class="total-info col">\u5171{{totalInfo.total_hits}}\u4ef6\u5b9d\u8d1d</div>{{/if}}{{/if}}{{#if moreLink}}<div class="more-btn col end"><a trace="{{moreLinkTrace}}" class="more-btn-a J_moreBtn" href="{{moreLink}}" target="_blank">\u66f4\u591a>></a></div>{{/if}}</div><div class="vcombo-panel vcombo-notitle"><div class="vcombo-content row vcombo-withnav">{{#each auctions}}<div class="vcombo-baobei col"><div class="pic-box"><a trace="{{trace}}" traceNum="2" href="{{url}}" title="{{rawTitle}}" target="_blank"><img src="{{lazyDefaultImg}}" data-src="{{picUrl}}" alt=""/></a></div>{{#if userComments}}<div class="user-comments"><div class="current-comment"><div class="bg"></div><span class="text J_userComment">{{currentComment}}</span></div><div class="users row">{{#each userComments}}<div class="col J_userPic {{#if xindex===0}}active{{/if}}"  data-src="{{picUrl}}"  data-comment="{{comment}}"><a class="user-pic-box" href="{{url}}"><img src="{{lazyDefaultImg}}" data-src="{{gravatar}}" alt=""/></a></div>{{/each}}</div></div>{{/if}}<div class="sale-info row"><div class="col"><span class="price">\uffe5<span class="price-num">{{price}}</span></span></div><div class="end col"><span class="sale-num">{{sales}}\u4eba\u4ed8\u6b3e</span></div></div>{{#if showTitle}}<div class="baobei-title"><a trace="{{trace}}" traceNum="2" href="{{url}}" title="{{rawTitle}}"  target="_blank">{{{showTitle}}}</a></div>{{/if}}{{#if nick}}<div class="boss-nick"><a href="{{shopurl}}" target="_blank">{{nick}}</a></div>{{/if}}</div>{{/each}}{{#richNav}}<div class="vcombo-nav">{{#if pic}}<div class="nav-withpic nav-block row">{{#each pic}}<div class="nav-block  col"><a trace="{{trace}}" class="nav-item {{@if selected}}selected{{else}}J_navItem{{/if}}" href="javascript:;" data-url="{{dataUrl}}" data-auctionNum="{{showAuctionNum}}"><span class="img-box"><img src="{{lazyDefaultImg}}" data-src="{{picUrl}}" alt=""/></span><span class="word">{{text}}</span></a></div>{{/each}}</div>{{/if}}<div class="nav-word nav-block"><div class="nav-panel row">{{#each common}}{{#if text}}<a trace="{{trace}}" class="col nav-item {{@if selected}}selected{{else}}J_navItem{{/if}}" href="javascript:;" data-url="{{dataUrl}}" data-auctionNum="{{showAuctionNum}}">{{text}}</a>{{/if}}{{/each}}</div></div><div class="nav-block">{{#externalItem}}<div class="vcombo-baobei col"><div class="pic-box"><a trace="{{trace}}" traceNum="2" href="{{url}}" title="{{rawTitle}}" target="_blank"><img src="{{lazyDefaultImg}}" data-src="{{picUrl}}" alt=""/></a></div>{{#if userComments}}<div class="user-comments"><div class="current-comment"><div class="bg"></div><span class="text J_userComment">{{currentComment}}</span></div><div class="users row">{{#each userComments}}<div class="col J_userPic {{#if xindex===0}}active{{/if}}"  data-src="{{picUrl}}"  data-comment="{{comment}}"><a class="user-pic-box" href="{{url}}"><img src="{{lazyDefaultImg}}" data-src="{{gravatar}}" alt=""/></a></div>{{/each}}</div></div>{{/if}}<div class="sale-info row"><div class="col"><span class="price">\uffe5<span class="price-num">{{price}}</span></span></div><div class="end col"><span class="sale-num">{{sales}}\u4eba\u4ed8\u6b3e</span></div></div>{{#if showTitle}}<div class="baobei-title"><a trace="{{trace}}" traceNum="2" href="{{url}}" title="{{rawTitle}}"  target="_blank">{{{showTitle}}}</a></div>{{/if}}{{#if nick}}<div class="boss-nick"><a href="{{shopurl}}" target="_blank">{{nick}}</a></div>{{/if}}</div>{{/externalItem}}</div></div>{{/richNav}}</div></div>'}),KISSY.add("components/vcombo/rownav/index",function(a,b){return b.extend({onStart:function(){var a=this,b=a.get("data");!b.richNav&&b.nav&&(b.richNav=b.nav.slice(0,5),b.nav=null),a.set("retinaPicSuffix","_600x600.jpg"),a.set("normalPicSuffix","_250x250.jpg")}})},{requires:["../baseitem/"]}),KISSY.add("components/vcombo/rownav/tpl",function(){return'<div class="vcombo-head row"><div class="title col"><span class="main-title">{{preName}}</span>{{name}}</div>{{#if description}}<div class="description col">{{description}}</div>{{/if}}{{@if nav}}<div class="vc-nav col"><div class="vc-nav-panel">{{#each nav}}<a trace="{{trace}}" class="vc-nav-item J_navItem {{#if selected}}selected{{/if}}" href="javascript:;" data-url="{{dataUrl}}" data-auctionNum="{{showAuctionNum}}">{{text}}<span class="arrow"><b></b></span></a>{{/each}}</div></div>{{else}}{{#if totalInfo.total_hits}}<div class="total-info col">\u5171{{totalInfo.total_hits}}\u4ef6\u5b9d\u8d1d</div>{{/if}}{{/if}}{{#if moreLink}}<div class="more-btn col end"><a trace="{{moreLinkTrace}}" class="more-btn-a J_moreBtn" href="{{moreLink}}" target="_blank">\u66f4\u591a>></a></div>{{/if}}</div><div class="vcombo-compic vcombo-rownav">{{#if richNav}}<div class="nav-panel"><div class="panel-bg"></div><div class="panel-content row">{{#richNav}}<a  class="{{@if selected}}selected{{else}}J_navItem{{/if}} nav-item col" trace="{{trace}}" data-url="{{dataUrl}}" data-auctionNum="{{showAuctionNum}}" href="javascript:;"><span class="content">{{text}}</span></a>{{/richNav}}</div></div>{{/if}}<div class="compic-panel row">{{#each auctions}}<div class="vcombo-baobei col"><div class="pic-box"><a trace="{{trace}}" traceNum="2" href="{{url}}" title="{{rawTitle}}" target="_blank"><img src="{{lazyDefaultImg}}" data-src="{{picUrl}}" alt=""/></a></div>{{#if userComments}}<div class="user-comments"><div class="current-comment"><div class="bg"></div><span class="text J_userComment">{{currentComment}}</span></div><div class="users row">{{#each userComments}}<div class="col J_userPic {{#if xindex===0}}active{{/if}}"  data-src="{{picUrl}}"  data-comment="{{comment}}"><a class="user-pic-box" href="{{url}}"><img src="{{lazyDefaultImg}}" data-src="{{gravatar}}" alt=""/></a></div>{{/each}}</div></div>{{/if}}<div class="sale-info row"><div class="col"><span class="price">\uffe5<span class="price-num">{{price}}</span></span></div><div class="end col"><span class="sale-num">{{sales}}\u4eba\u4ed8\u6b3e</span></div></div>{{#if showTitle}}<div class="baobei-title"><a trace="{{trace}}" traceNum="2" href="{{url}}" title="{{rawTitle}}"  target="_blank">{{{showTitle}}}</a></div>{{/if}}{{#if nick}}<div class="boss-nick"><a href="{{shopurl}}" target="_blank">{{nick}}</a></div>{{/if}}</div>{{/each}}</div></div>'}),KISSY.add("components/vcombo/shaitu/index",function(a,b){return b.extend({onStart:function(){var b=this,c=b.get("data");b.set("retinaPicSuffix","_600x600.jpg"),b.set("normalPicSuffix","_250x250.jpg"),b.set("imgProcessor","normal"),a.each(c.auctions,function(a){a.userComments=a.userComments.slice(0,7);var b=a.userComments[0];a.picUrl=b.picUrl,a.currentComment=b.comment})},onRendered:function(){var a=this,b=a.get("el"),c=a.get("context").getData("tool_imgMagic"),d=[],e=a.get("context");a.callSuper();var f;f=window.devicePixelRatio>1?"30":"60",b.all(".user-pic-box img").each(function(b){d.push({img:b,src:b.attr("data-src").replace("30",f),callback:a.get("imgProcessor")})}),c.addImgs(d),e.activeTick("img")}},{EVENTS:{".J_userPic":{mouseenter:function(b){var c=this,d=a.one(b.currentTarget),e=d.attr("data-src"),f=d.attr("data-comment"),g=d.parent(3),h=g.one(".J_userComment"),i=g.one(".pic-box img"),j=c.get("context").getData("tool_imgMagic");h.html(f),g.all(".active").removeClass("active"),d.addClass("active");var k;k=c.get(window.devicePixelRatio>1?"retinaPicSuffix":"normalPicSuffix"),j.loadImg({img:i,src:e+k,errorSrc:[e],isFadeIn:1,callback:c.get("imgProcessor")})}}}})},{requires:["../baseitem/"]}),KISSY.add("components/vcombo/shaitu/tpl",function(){return'<div class="vcombo-head row"><div class="title col"><span class="main-title">{{preName}}</span>{{name}}</div>{{#if description}}<div class="description col">{{description}}</div>{{/if}}{{@if nav}}<div class="vc-nav col"><div class="vc-nav-panel">{{#each nav}}<a trace="{{trace}}" class="vc-nav-item J_navItem {{#if selected}}selected{{/if}}" href="javascript:;" data-url="{{dataUrl}}" data-auctionNum="{{showAuctionNum}}">{{text}}<span class="arrow"><b></b></span></a>{{/each}}</div></div>{{else}}{{#if totalInfo.total_hits}}<div class="total-info col">\u5171{{totalInfo.total_hits}}\u4ef6\u5b9d\u8d1d</div>{{/if}}{{/if}}{{#if moreLink}}<div class="more-btn col end"><a trace="{{moreLinkTrace}}" class="more-btn-a J_moreBtn" href="{{moreLink}}" target="_blank">\u66f4\u591a>></a></div>{{/if}}</div><div class="vcombo-compic vcombo-comment"><div class="compic-panel row {{#if extConfig.p_hasNick}}vcombo-hasnick{{/if}}">{{#each auctions}}<div class="vcombo-baobei col"><div class="pic-box"><a trace="{{trace}}" traceNum="2" href="{{url}}" title="{{rawTitle}}" target="_blank"><img src="{{lazyDefaultImg}}" data-src="{{picUrl}}" alt=""/></a></div>{{#if userComments}}<div class="user-comments"><div class="current-comment"><div class="bg"></div><span class="text J_userComment">{{currentComment}}</span></div><div class="users row">{{#each userComments}}<div class="col J_userPic {{#if xindex===0}}active{{/if}}"  data-src="{{picUrl}}"  data-comment="{{comment}}"><a class="user-pic-box" href="{{url}}"><img src="{{lazyDefaultImg}}" data-src="{{gravatar}}" alt=""/></a></div>{{/each}}</div></div>{{/if}}<div class="sale-info row"><div class="col"><span class="price">\uffe5<span class="price-num">{{price}}</span></span></div><div class="end col"><span class="sale-num">{{sales}}\u4eba\u4ed8\u6b3e</span></div></div>{{#if showTitle}}<div class="baobei-title"><a trace="{{trace}}" traceNum="2" href="{{url}}" title="{{rawTitle}}"  target="_blank">{{{showTitle}}}</a></div>{{/if}}{{#if nick}}<div class="boss-nick"><a href="{{shopurl}}" target="_blank">{{nick}}</a></div>{{/if}}</div>{{/each}}</div></div>'});