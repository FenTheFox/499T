/*! Brix - v1.0
* https://github.com/etaoux/brix
* Copyright (c) 2014 etaoux; Licensed MIT */ 
(function(e,t){function r(t){if(t=e.trim(t),t&&"/"!=t.charAt(t.length-1)&&(t+="/"),t.match(/^(http(s)?)|(file):/i)||l(t,"/")||(t=c+t),l(t,"/")){var r=o.location;t=r.protocol+"//"+r.host+t}for(var n,a=t.split("/"),i=[],s=0;a.length>s;s++)n=a[s],"."==n||(".."==n?i.pop():i.push(n));return t=i.join("/"),t.substring(0,t.length-1)}function n(){var t=/^(.*)brix(-min)?\.js[^\/]*/i,n=/brix(-min)?\.js/i,a=o.document.getElementsByTagName("script"),i=a[a.length-1],s=r(i.src),l=i.getAttribute("bx-config");l=l?Function("return "+l)():{},l.comboPrefix=l.comboPrefix||"??",l.comboSep=l.comboSep||",";var c,u,f=l.comboPrefix,p=l.comboSep,d=s.split(p),h=d[0],v=h.indexOf(f);return-1==v?c=s.replace(t,"$1"):(c=h.substring(0,v),u=h.substring(v+2,h.length),u.match(n)?c+=u.replace(t,"$1"):e.each(d,function(e){return e.match(n)?(c+=e.replace(t,"$1"),!1):void 0})),c=c.substring(0,c.lastIndexOf("brix")),e.mix({autoConfig:!0,path:c,componentsPath:"./",importsPath:"./"},l)}var a=!1,i=[],o=window,s=o.location,l=e.startsWith,c=s.href.replace(s.hash,"").replace(/[^\/]*$/i,"");t=o[t]=o[t]||{};var u=n(),f="",p="20121111",d="1.0",h=!1;return e.mix(t,{config:function(r){h||(h=!0,r=e.merge({debug:"@DEBUG@"==f?!0:!1,tag:"@TAG@"==p?"":p,fixed:"@VERSION@"==d?"":d+"/",gallery:{}},u,r),"@VERSION@"==r.fixed&&(r.fixed=""),t.basePath=r.path,t.fixed=r.fixed,e.config({packages:[{name:"brix",path:r.path,tag:r.tag,charset:"utf-8"},{name:"components",path:r.componentsPath,tag:r.componentsTag||r.tag,charset:"utf-8"},{name:"imports",path:r.importsPath,tag:r.importsTag||r.tag,charset:"utf-8"}]}),e.config({map:[[/(.+brix\/)(gallery\/)(.+?)(\/.+?(?:-min)?\.(?:js|css))(\?[^?]+)?$/,function(e,t,n,a,i,o){var s=t+r.fixed+n+a;return r.gallery[a]&&(s+="/"+r.gallery[a]),r.debug&&(i=i.replace("-min","")),s+=i+(o?o:"")}],[/(.+brix\/)(core.+?)((?:-min)?\.js)(\?[^?]+)?$/,function(e,t,n,a,i){var o=t+r.fixed;return r.debug&&(a=a.replace("-min","")),o+=n+a+(i?i:"")}]]}))},ready:function(e){a?e.call(t):i.push(e)},_fireReady:function(){if(!a&&(a=!0,i)){for(var e,r=0;e=i[r++];)e.call(t);i=null}}}),u.autoConfig&&(t.config({}),u.autoPagelet)?(e.later(function(){e.use("brix/core/pagelet",function(e,r){e.ready(function(){t.pagelet=new r({tmpl:"body"}),t._fireReady()})})},1),void 0):(e.ready(function(){t._fireReady()}),void 0)})(KISSY,"Brix"),KISSY.add("brix/core/mustache",function(){var e="undefined"!=typeof module&&module.exports||{};return function(e){function t(e){return b.test(e)}function r(e){return(e+"").replace(/&(?!\w+;)|[<>"']/g,function(e){return x[e]||e})}function n(e,t,r,n){n=n||"<template>";for(var a,i=t.split("\n"),o=Math.max(r-3,0),s=Math.min(i.length,r+3),l=i.slice(o,s),c=0,u=l.length;u>c;++c)a=c+o+1,l[c]=(a===r?" >> ":"    ")+l[c];return e.template=t,e.line=r,e.file=n,e.message=[n+":"+r,l.join("\n"),"",e.message].join("\n"),e}function a(e,t,r){if("."===e)return t[t.length-1];for(var n,a,i,o,s=e.split("."),l=s.length-1,c=s[l],u=t.length;u;){for(o=t.slice(0),a=t[--u],i=0;l>i&&(a=a[s[i++]],null!=a);)o.push(a);if(a&&"object"==typeof a&&c in a){n=a[c];break}}return"function"==typeof n&&(n=n.call(o[o.length-1])),null==n?r:n}function i(e,t,r,n){var i="",o=a(e,t);if(n)(null==o||o===!1||f(o)&&0===o.length)&&(i+=r());else if(f(o))g(o,function(e){t.push(e),i+=r(),t.pop()});else if("object"==typeof o)t.push(o),i+=r(),t.pop();else if("function"==typeof o){var s=t[t.length-1],l=function(e){return u(e,s)};i+=o.call(s,r(),l)||""}else o&&(i+=r());return i}function o(r,a){a=a||{};for(var i,o,s,l,c,u=a.tags||e.tags,f=u[0],p=u[u.length-1],d=['var buffer = "";',"\nvar line = 1;","\ntry {",'\nbuffer += "'],h=[],v=!1,g=!1,b=function(){if(!v||g||a.space)h=[];else for(;h.length;)d.splice(h.pop(),1);v=!1,g=!1},y=[],_=function(e){u=m(e).split(/\s+/),o=u[0],s=u[u.length-1]},x=function(e){d.push('";',i,'\nvar partial = partials["'+m(e)+'"];',"\nif (partial) {","\n  buffer += render(partial,stack[stack.length - 1],partials);","\n}",'\nbuffer += "')},k=function(e,t){var o=m(e);if(""===o)throw n(Error("Section name may not be empty"),r,A,a.file);y.push({name:o,inverted:t}),d.push('";',i,'\nvar name = "'+o+'";',"\nvar callback = (function () {","\n  return function () {",'\n    var buffer = "";','\nbuffer += "')},T=function(e){k(e,!0)},E=function(e){var t=m(e),i=0!=y.length&&y[y.length-1].name;if(!i||t!=i)throw n(Error('Section named "'+t+'" was never opened'),r,A,a.file);var o=y.pop();d.push('";',"\n    return buffer;","\n  };","\n})();"),o.inverted?d.push("\nbuffer += renderSection(name,stack,callback,true);"):d.push("\nbuffer += renderSection(name,stack,callback);"),d.push('\nbuffer += "')},S=function(e){d.push('";',i,'\nbuffer += lookup("'+m(e)+'",stack,"");','\nbuffer += "')},R=function(e){d.push('";',i,'\nbuffer += escapeHTML(lookup("'+m(e)+'",stack,""));','\nbuffer += "')},A=1,w=0,B=r.length;B>w;++w)if(r.slice(w,w+f.length)===f){switch(w+=f.length,l=r.substr(w,1),i="\nline = "+A+";",o=f,s=p,v=!0,l){case"!":w++,c=null;break;case"=":w++,p="="+p,c=_;break;case">":w++,c=x;break;case"#":w++,c=k;break;case"^":w++,c=T;break;case"/":w++,c=E;break;case"{":p="}"+p;case"&":w++,g=!0,c=S;break;default:g=!0,c=R}var j=r.indexOf(p,w);if(-1===j)throw n(Error('Tag "'+f+'" was not closed properly'),r,A,a.file);var N=r.substring(w,j);c&&c(N);for(var D=0;~(D=N.indexOf("\n",D));)A++,D++;w=j+p.length-1,f=o,p=s}else switch(l=r.substr(w,1)){case'"':case"\\":g=!0,d.push("\\"+l);break;case"\r":break;case"\n":h.push(d.length),d.push("\\n"),b(),A++;break;default:t(l)?h.push(d.length):g=!0,d.push(l)}if(0!=y.length)throw n(Error('Section "'+y[y.length-1].name+'" was not closed properly'),r,A,a.file);b(),d.push('";',"\nreturn buffer;","\n} catch (e) { throw {error: e, line: line}; }");var C=d.join("").replace(/buffer \+= "";\n/g,"");return a.debug&&("undefined"!=typeof console&&console.log?console.log(C):"function"==typeof print&&print(C)),C}function s(e,t){var s="view,partials,stack,lookup,escapeHTML,renderSection,render",l=o(e,t),c=Function(s,l);return function(o,s){s=s||{};var l=[o];try{return c(o,s,l,a,r,i,u)}catch(f){throw n(f.error,e,f.line,t.file)}}}function l(){k={}}function c(e,t){return t=t||{},t.cache!==!1?(k[e]||(k[e]=s(e,t)),k[e]):s(e,t)}function u(e,t,r){return c(e)(t,r)}e.name="mustache.js",e.version="0.5.0-dev",e.tags=["{{","}}"],e.parse=o,e.compile=c,e.render=u,e.clearCache=l,e.to_html=function(e,t,r,n){var a=u(e,t,r);return"function"!=typeof n?a:(n(a),void 0)};var f,p=Object.prototype.toString,d=Array.isArray,h=Array.prototype.forEach,v=String.prototype.trim;f=d?d:function(e){return"[object Array]"===p.call(e)};var g;g=h?function(e,t,r){return h.call(e,t,r)}:function(e,t,r){for(var n=0,a=e.length;a>n;++n)t.call(r,e[n],n,e)};var m,b=/^\s*$/;if(v)m=function(e){return null==e?"":v.call(e)};else{var y,_;t("\u00a0")?(y=/^\s+/,_=/\s+$/):(y=/^[\s\xA0]+/,_=/[\s\xA0]+$/),m=function(e){return null==e?"":(e+"").replace(y,"").replace(_,"")}}var x={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},k={}}(e),e}),KISSY.add("brix/core/mu",function(e,t){function r(e,t){for(var r=n(e),i="",o=0;r.length>o;o++)i="if("+r[o]+")",t[i]||(t[i]=a(r[o]))}function n(e){var t=/\{{2,3}[\^#]?if\((.*?)\)\}{2,3}?/gi,r=/\{{2,3}[\^#]?if\((.*?)\)\}{2,3}?/i,n=e.match(t),a=[];if(n)for(var i=0;n.length>i;i++)a.push(n[i].match(r)[1]);return a}function a(e){e=e.split("==");var t=function(){for(var t=e[0].split("."),r=e[1],n=this,a=t.length-1;a>-1;a--){var i=t.slice(a),o=n;try{for(var s=0;i.length-1>s;s++)o=o[i[s]];if(i[i.length-1]in o)return""+o[i[i.length-1]]===r?!0:!1}catch(l){}}return!1};return t}function i(e,t){var r,n;for(r in e)n=e[r],n instanceof Array?o(n):"object"==typeof n&&5>t&&i(n,t+1)}function o(e){for(var t=0;e.length>t;t++){var r=e[t];"object"==typeof r&&(0===t?r.__first__=!0:t===e.length-1?r.__last__=!0:r.__mid__=!0,r.__index__=t)}}return{to_html:function(e,n){return"object"==typeof n&&i(n,0),e=e.replace(/(\{{2,3})@if/gi,"$1#if"),r(e,n),t.to_html.apply(this,arguments)},name:t.name,version:t.version,tags:t.tags,parse:t.parse,compile:t.compile,render:function(){return this.to_html.apply(this,arguments)},clearCache:t.clearCache}},{requires:["./mustache"]}),KISSY.add("brix/core/tmpler",function(e,t,r){function n(e,t){this.tmpls=[],e&&t!==!1?this._praseTmpl(e,t):this.tmpl=e}var a=r.all;return e.extend(n,Object,{_praseTmpl:function(e,t){var r,n=this,i=!1;if("string"==typeof e?("."===e.charAt(0)||"#"===e.charAt(0)||"body"===e)&&(r=a(e)):r=e,r&&("SCRIPT"==r.item(0)[0].nodeName.toUpperCase()?e=r.item(0).html():i=!0),!i){for(var o="<([\\w]+)\\s+[^>]*?bx-tmpl=[\"']?([^\"'\\s]+)[\"']?\\s+[^>]*?bx-datakey=[\"']?([^\"'\\s]+)[\"']?[^>]*?>(@brix@)</\\1>";t--;)o=o.replace("@brix@","(?:<\\1[^>]*>@brix@</\\1>|[\\s\\S])*?");o=o.replace("@brix@","(?:[\\s\\S]*?)"),n.reg=o,n.tmpl=n._replaceTmpl(e),n._buildTmpls(n.tmpl)}n.inDom=i},_buildTmpls:function(e){for(var t,r=this,a=RegExp(r.reg,"ig");null!==(t=a.exec(e));)r.tmpls.push({name:t[2],datakey:t[3],tmpler:new n(t[4],!1)}),r._buildTmpls(t[4])},_replaceTmpl:function(t){for(var r=/<!--bx-tmpl="([^"]+?)"\s+bx-datakey="([^"]+?)"-->(\s*([\s\S]*)?\s*)<!--bx-tmpl="\1"-->/g,n=function(t,r,n,a){return e.log(t+","+a),a};r.test(t);)t=t.replace(r,n),r.lastIndex=0;return t},addTmpl:function(e,t,r){var a=this;a.tmpls.push({name:e,datakey:t,tmpler:new n(r,!1)})},getTmpl:function(){return this.tmpl},to_html:function(e){return t.to_html(this.getTmpl(),e)}}),n},{requires:["./mu","node","sizzle"]}),KISSY.add("brix/core/dataset",function(e,t){function r(){r.superclass.constructor.apply(this,arguments)}return r.ATTRS={data:{}},e.extend(r,t,{setRenderer:function(e,t,r){var n,a,i=this,o=i.get("data");if(r=r?r+"_":"",e){var s=function(n,a){var i=r+n+"_"+a,s=e[n][a];o[i]=function(){return s.call(this,t,n)}};for(n in e)for(a in e[n])s(n,a)}}}),r},{requires:["base"]}),KISSY.add("brix/core/chunk",function(e,t,r,n,a,i){function o(e,t){for(var r=0;e.length>r;r++)for(var n=0;t.length>n;n++)if(e[r]==t[n])return!0;return!1}function s(){s.superclass.constructor.apply(this,arguments);var e=this,t=e.get("tmpl");if(t){e._buildTmpler(t,e.get("level"));var r=e.get("tmpler");r&&(e._buildDataset(e.get("data")),r.inDom&&e.set("el",t))}}var l=t.all;return s.ATTRS={el:{getter:function(t){return e.isString(t)&&(t=l(t)),t}},isRemoveHTML:{value:!0},isRemoveEl:{value:!0},container:{value:"body",getter:function(t){return e.isString(t)&&(t=l(t)),t}},tmpl:{value:!1},tmpler:{value:!1},rendered:{value:!1},autoRender:{value:!0},data:{value:!1},dataset:{value:!1},level:{value:3}},e.extend(s,n,{_buildTmpler:function(e,t){var r=this;if(!r.get("isBuidTmpler")){r.set("isBuidTmpler",!0);var n=new i(e,t);r.set("tmpler",n)}},_buildDataset:function(t){var r=this;if(!r.get("isBuidDataset")){r.set("isBuidDataset",!0),t=t||{},t=e.clone(t);var n=new a({data:t});r.set("dataset",n),n.on("*Change",function(t){var a=!1,i=e.map(t.subAttrName,function(e){return/^data\./g.test(e)?(a=!0,e.replace(/^data\./,"")):"zuomo.xb@taobao.com"});a&&r._renderTmpl(i,n.get("data"))})}},_destroy:function(){var e=this,t=e.get("tmpler"),r=e.get("dataset");t&&(e.set("tmpler",null),delete t.tmpls),r&&(e.set("dataset",null),r.detach())},addTmpl:function(e,t,r){var n=this;n._buildTmpler("",!1),n._buildDataset();var a=n.get("tmpler");a.addTmpl(e,t,r)},setChunkData:function(t,r,n){var a=this,i=a.get("dataset");if(i){if(e.isObject(t)){t=e.clone(t);var o={};for(var s in t)o["data."+s]=t[s];t=o,n=r}else t="data."+t,r=e.clone(r);var l="html";n&&n.renderType&&(l=n.renderType,delete n.renderType),a.set("renderType",l),i.set.apply(i,arguments)}},render:function(){var e=this;if(!e.get("rendered")){var t=e.get("dataset");t&&e._render("data",t.get("data")),e.set("rendered",!0),e.fire("rendered")}},_render:function(n,a){var i=this,o=i.get("tmpler");if(o&&!o.inDom){var s,c=i.get("container"),u=i.get("el"),f=e.trim(o.to_html(a));if(u&&0!==u.length)if(8>=r.ie){for(s=new t("<div />"),c.append(s),s.html(f);s[0].childNodes.length>0;)c[0].appendChild(s[0].childNodes[0]);s.remove(),s=null}else c.append(f);else{var p="brix_"+e.guid();if(8>=r.ie){s=new t("<div />"),c.append(s),s.html(f);var d=s[0].childNodes;if(d.length>1)s.attr("id",p);else{for(p=d[0].id||p,d[0].id=p;d.length>0;)c[0].appendChild(d[0]);s.remove(),s=null}}else s=new t(f),s.length>1?s=l('<div id="'+p+'"></div>').append(s):(p=s.attr("id")||p,s.attr("id",p)),c.append(s);i.set("el","#"+p)}}},_renderTmpl:function(t,r){var n=this,a=n.get("tmpler");if(a&&n.get("rendered")){var i=n.get("el"),s=a.tmpls;e.each(s,function(a){var s=a.datakey.split(",");if(o(s,t)){var l=i.all("[bx-tmpl="+a.name+"]");i.attr("bx-tmpl")==a.name&&(l=i.add(l)),l.each(function(t){if(t.attr("bx-datakey")==a.datakey){var i={};e.each(s,function(e){for(var t=r,n=e.split("."),a=n.length,o=0;o!==a;)t=t[n[o]],o++;i[n[a-1]]=t,t=null}),e.each(r,function(t,r){e.isFunction(t)&&(i[r]=t)});var o=n.get("renderType")||"html";n.fire("beforeRefreshTmpl",{node:t,renderType:o}),t[o](e.trim(a.tmpler.to_html(i))),n.fire("afterRefreshTmpl",{node:t}),i=null}}),l=null}})}}}),s},{requires:["node","ua","base","./dataset","./tmpler"]}),KISSY.add("brix/core/brick",function(e,t){function r(t,r){return e.isString(r)?t[r]:r}function n(){var e=this;e.pagelet=arguments[0]?arguments[0].pagelet:null,n.superclass.constructor.apply(this,arguments);for(var t=e.constructor;"Brick"!=t.NAME;){var r=t.RENDERERS;r&&(e._buildTmpler("",!1),e._buildDataset(),e.get("dataset").setRenderer(r,e)),t=t.superclass.constructor}e.on("rendered",function(){var r,n=[];for(t=e.constructor;"Brick"!=t.NAME;)t.prototype.hasOwnProperty("initialize")&&(r=t.prototype.initialize)&&n.push(r),t=t.superclass.constructor;for(var a=n.length-1;a>=0;a--)n[a]&&n[a].call(e);e._bindEvent()});var a=e.get("tmpler");(e.get("autoRender")||!a||a.inDom)&&e.render()}return n.NAME="Brick",e.extend(n,t,{initialize:function(){},destructor:function(){},_detachEvent:function(){for(var t=this,r=t.constructor;"Brick"!=r.NAME;){var n=r.EVENTS;n&&t._removeEvents(n);var a=r.DOCEVENTS;a&&t._removeEvents(a,e.one(document)),r=r.superclass.constructor}t._undelegateEvents();var i=t.get("events");i&&this._removeEvents(i)},_bindEvent:function(){for(var t=this,r=t.constructor;"Brick"!=r.NAME;){var n=r.EVENTS;n&&this._addEvents(n);var a=r.DOCEVENTS;a&&this._addEvents(a,e.one(document)),r=r.superclass.constructor}t._delegateEvents();var i=t.get("events");i&&this._addEvents(i)},_removeEvents:function(e,t){t=t||this.get("el");for(var n in e){var a=e[n];for(var i in a){var o=r(this,a[i]);""===n?t.detach(i,o,this):t.undelegate(i,n,o,this)}}},_addEvents:function(e,t){t=t||this.get("el");for(var n in e){var a=e[n];for(var i in a){var o=r(this,a[i]);""===n?t.on(i,o,this):t.delegate(i,n,o,this)}}},_delegateEvents:function(){var e=this.events,t=this.get("el")[0],r=this,n=function(e){t["on"+e]=function(){var t=arguments[0]||window.event,n=t.target||t.srcElement;1!==n.nodeType&&(n=n.parentNode);var a=n.getAttribute("bx"+e);if(a)for(var i,o,s=a.split("|"),l=0;s.length>l;l++){i=s[l].split(":"),o=i.shift();var c=i[i.length-1],u=!1;("_halt_"===c||"_preventDefault_"===c)&&(t.preventDefault?t.preventDefault():t.returnValue=!1,u=!0),("_halt_"===c||"_stop_"===c)&&(t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,u=!0),u&&i.pop(),r.events&&r.events[e]&&r.events[e][o]&&r.events[e][o].call(r,n,i)}n=null}};for(var a in e)n(a)},_undelegateEvents:function(){var e=this.events,t=this.get("el")[0],r=function(e){t["on"+e]=null};for(var n in e)r(n)},destroy:function(){var e=this;e._destroy(),e.get("rendered")&&e._detachEvent();for(var t=e.constructor;"Brick"!=t.NAME;)t.prototype.hasOwnProperty("destructor")&&t.prototype.destructor.apply(e),t=t.superclass.constructor;if(e.get("rendered")&&e.get("isRemoveHTML")){var r=e.get("el");e.get("isRemoveEl")?r.remove():r.empty()}e.pagelet&&delete e.pagelet,e.detach()}}),n},{requires:["./chunk"]}),KISSY.add("brix/core/pagelet",function(e,t){function r(t,r){return r=r||"brick_",t.attr("id")||t.attr("id",e.guid("brix_"+r)),t.attr("id")}function n(){n.superclass.constructor.apply(this,arguments);var e=this;e.isReady=!1,e.readyList=[],e.bricks=[],e.isAddBehavior=!1,(e.get("autoRender")||e.get("tmpler").inDom)&&(e.on("rendered",function(){var t=e.get("callback");t&&"function"==typeof t&&e.ready(t),e.get("behavior")&&e.addBehavior()}),e.render())}return n.ATTRS={behavior:{value:!0},callback:{value:null},config:{value:{}}},e.extend(n,t,{getBrick:function(t){var r,n=this;return e.each(n.bricks,function(e){return e.id===t?(r=e.brick,!1):void 0}),r||null},addBehavior:function(){var e=this;if(e.get("rendered")&&!e.isAddBehavior){e.isAddBehavior=!0;var t=e.get("el"),r=t.all("[bx-name]");t.hasAttr("bx-name")&&(r=t.add(r)),e._addBehavior(r,function(t){e.bricks=t,e._fireReady(),e.on("beforeRefreshTmpl",function(t){"html"===t.renderType&&t.node.all("[bx-name]").each(function(t){e.destroy(t.attr("id"))})}),e.on("afterRefreshTmpl",function(t){e._addBehavior(t.node.all("[bx-name]"),function(t){t.length>0&&(e.bricks=e.bricks.concat(t))})})})}},_addBehavior:function(t,n){var a=this,i=a.get("config"),o=[];if(t.each(function(t){if("true"!=t.attr("bx-behavior")){var n=r(t),a=t.attr("bx-name"),s=t.attr("bx-path"),l=t.attr("bx-config");l=l?Function("return "+l)():{},i&&i[n]&&e.mix(l,i[n]),t.attr("bx-behavior","true"),o.push({id:n,name:a,path:s,config:l})}}),o.length>0){var s=[];e.each(o,function(t){t.path||(t.path="brix/gallery/"+t.name+"/"),e.inArray(s,t.path)||s.push(t.path)}),a.fire("beforeAddBehavior",{useList:s}),e.use(s.join(","),function(e){var t=arguments;e.each(o,function(r){var n=r.id,i=e.merge({container:"#"+n,el:"#"+n,pagelet:a},r.config),o=t[e.indexOf(r.path,s)+1],l=new o(i);r.brick=l}),t=null,n(o)})}else n(o)},ready:function(e){this.isReady?e.call(window,this):this.readyList.push(e)},_fireReady:function(){var e=this;if(!e.isReady&&(e.isReady=!0,e.readyList)){for(var t,r=0;t=e.readyList[r++];)t.call(e);e.readyList=null}},destroy:function(t){var r=this;if(t)for(var n=0;r.bricks.length>n;n++){var a=r.bricks[n];if(t===a.id)return r._destroyBrick(a),r.bricks.splice(n,1),!1}else{if(r._destroy(),e.each(r.bricks,function(e){r._destroyBrick(e)}),r.bricks=null,r.get("rendered")&&r.get("isRemoveHTML")){var i=r.get("el");r.get("isRemoveEl")?i.remove():i.empty(),i=null}r.detach()}},_destroyBrick:function(e){e.brick&&(e.brick.destroy&&e.brick.destroy(),e.brick=null)}}),n},{requires:["./chunk"]}),KISSY.add("brix/core/demolet",function(e,t,r,n){function a(e){return l[e]?!1:(l[e]=!0,r({url:e,dataType:"text",async:!1,complete:function(e,t){"success"==t&&s("<style>"+e+"</style>").appendTo("head")}}),void 0)}function i(e,t,n){n=n||"@",t=t||{};var a=RegExp("\\{\\{"+n+"(.+)?\\}\\}","ig");return e=e.replace(a,function(e,n){var a="",i=n.replace(/\//gi,"_").replace(/\./gi,"_");return t[i]=t[i]||{},r({url:n+"template.html",dataType:"html",async:!1,success:function(e){a="{{#"+i+"}}"+e+"{{/"+i+"}}"}}),r({url:n+"data.json",async:!1,dataType:"json",success:function(e){for(var r in e)t[i][r]=e[r]}}),a}),{tmpl:e,data:t}}function o(){var t=this;t.on("beforeAddBehavior",function(r){e.each(t.get("projectCss"),function(e){a(e)});var n=r.useList;e.each(n,function(t){var r=t.split("/");if(e.startsWith(t,"brix/"))e.use(t+r[r.length-2]+".css");else{var n=3;e.startsWith(t,"imports/")&&(n=4),r.length>n&&(r.splice(r.length-2),a(r.join("/")+"/index.css")),a(t+"index.css")}})}),o.superclass.constructor.apply(this,arguments)}var s=n.all,l={};return o.ATTRS={projectCss:{value:["styles/style.css"],setter:function(t){return e.isArray(t)?t:[t]}},s:{value:"@"},tmpl:{setter:function(e){var t=this,r=t.get("data")||{},n=i(e,r,t.get("s"));return t.set("data",n.data),n.tmpl}}},e.extend(o,t,{}),o},{requires:["./pagelet","ajax","node"]});