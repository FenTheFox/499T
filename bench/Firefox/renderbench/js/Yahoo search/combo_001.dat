window.ucs||(window.ucs={}),window.ucs.UH_MAIN_ID||(window.ucs.UH_MAIN_ID="#yucs"),window.ucs.ymreqid||(window.ucs.ymreqid=function(){var a=(new Date).getTime(),b=null,c="xxxxxxxx-xxxx-xxxx-09xx-xxxxxxxxxx00".replace(/x/g,function(){return b=(a+16*Math.random())%16|0,a=Math.floor(a/16),b.toString(16)});return c}),window.ucs._sendBeacon||(window.ucs._sendBeacon=function(a){var b=new Image;b.height=0,b.width=0,b.style.display="none",b.src="https://geo.yahoo.com/t"+a,document.body.appendChild(b)}),window.ucs.YObj||(window.ucs.YObj=function(){var a=document.getElementById("yucs");return"undefined"!=typeof window.Y&&a&&"srp"===a.getAttribute("data-property")?window.Y:YUI()}());YUI.add("gallery-jsonp",function(a){function b(){this._init.apply(this,arguments)}var c=a.Lang.isObject,d=a.Lang.isFunction;b._pattern=/\bcallback=(.*?)(?=&|$)/i,b._template="callback={callback}",b.prototype={_init:function(b,c){this.url=b,c=c||{},d(c)&&(c={on:{success:c}}),c.on=c.on||{},c.on.success||(c.on.success=this._getCallbackFromUrl(b)),this._config=a.merge({on:{},context:this,args:[],format:this._format},c)},_getCallbackFromUrl:function(e){var f,g,h,i,j=e.match(b._pattern);if(j){for(g=a.config.win,h=j[1].split(/\./).reverse(),f=h.shift(),i=h.length-1;i>=0;--i)if(g=g[h[i]],!c(g))return null;if(c(g)&&d(g[f]))return a.bind(g[f],g)}return null},send:function(){function b(a){return d(a)?function(b){delete YUI.Env.JSONP[c],a.apply(e.context,[b].concat(e.args))}:null}if(!this._config.on.success)return this;var c=a.guid().replace(/-/g,"_"),e=this._config,f=e.format.call(this,this.url,"YUI.Env.JSONP."+c);return YUI.Env.JSONP[c]=b(e.on.success),a.Get.script(f,{onFailure:b(e.on.failure),onTimeout:b(e.on.timeout||e.on.failure),timeout:e.timeout}),this},_format:function(a,c){var d,e=b._template.replace(/\{callback\}/,c);return b._pattern.test(a)?a.replace(b._pattern,e):(d=a.slice(-1),"&"!==d&&"?"!==d&&(a+=a.indexOf("?")>-1?"&":"?"),a+e)}},a.JSONPRequest=b,a.jsonp=function(b,c){return new a.JSONPRequest(b,c).send()},YUI.Env.JSONP||(YUI.Env.JSONP={})},"gallery-2010.08.11-20-39",{requires:["get","oop"]});YUI.add("ucs-menu-utils",function(a){if(a.namespace("ucs"),!a.ucs.MenuUtils){var b='{separatorTop}<li class="{isDisabled} {isActive} {menuClass}"><a target="{target}" {actionData} href="{url}" {disabledAria}>{icon}{menuText}</a></li>{separatorBottom}',c='{separatorTop}<li class="{isDisabled} {isActive} {menuClass}"><a href="#" data-customevt="true" {actionData} {disabledAria} {checkedAria}>{icon}{menuText}</a></li>{separatorBottom}',d='<span class="separator" role="presentation"></span>',e="click",f="a",g="role",h="tabIndex",i="yucs-hide",j="iframe",k="ul",l="li",m="parentNode",n="http://l.yimg.com/a/lib/ush/icon.gif",o="https://s.yimg.com/lq/lib/ush/icon.gif",p=300;a.ucs.MenuUtils=function(a,b){var c=b&&b.panelSelector||k;this.menu=a,this.enableClick=b&&b.enableClick,this.panel=this.menu.one(c),this.panel&&this.init(),this.openDelay=b&&"undefined"!=typeof b.openDelay?b.openDelay:p,this.closeTimer=null,this.overPanel=!1,this.overLink=!1},a.ucs.MenuUtils.prototype={init:function(){this.keyedup=!1,this.menu.on("hover",a.bind(this._handleMenuEnter,this),a.bind(this._handleMouseOut,this),this),this.panel.on("hover",a.bind(this._handlePanelEnter,this),a.bind(this._handlePanelLeave,this),this),this.enableClick&&this.menu.on("click",a.bind(this._handleMenuToggle,this),this),this.menu.delegate(e,this._handleMenuItemClick,"li a",this),this.menu.on("keyup",this._handleKeyup,this),this.menu.on("keydown",this._handleKeydown,this),this.menu.removeClass("yucs-activate"),this._initAria()},_initAria:function(){this.menu.one(f).set(g,"button"),this.panel.all(f).set(g,"menuitemradio"),this.panel.set(g,"menu"),this.panel.all("div,ul,li").set(g,"presentation"),a.UA.ipad||a.UA.mobile||this.panel.set(h,-1),this.focusmanager=this.panel.plug(a.Plugin.NodeFocusManager,{descendants:f,keys:{next:"down:40",previous:"down:38"},focusClass:{className:"yucs-has-focus",fn:function(a){return a.get(m)}},circular:!0})},_refreshAria:function(){this.focusmanager.focusManager.refresh()},_destructAria:function(){this.panel.unplug(a.Plugin.NodeFocusManager),this.panel.one(f).set(h,0)},_handleMenuClick:function(a){this.overLink&&this.panel.hasClass(i)&&(this._accessShowMenu(a),this.closeTimer&&(this.closeTimer.cancel(),this.closeTimer=null))},_handleMenuEnter:function(b){b.halt(),this.overLink=!0,a.later(this.openDelay,this,this._handleMenuClick)},_handlePanelEnter:function(){this.closeTimer&&(this.closeTimer.cancel(),this.closeTimer=null),this.overPanel=!0},_handlePanelLeave:function(){this.overPanel=!1,this.panelShown&&this._handleMouseOut()},_handleMenuToggle:function(){this.overLink=this.overLink?!1:!0,this.panelShown?(this.closeTimer&&(this.closeTimer.cancel(),this.closeTimer=null),this.panel.hasClass(i)||(this.closeTimer=a.later(500,this,this._handleLeave))):a.later(this.openDelay,this,this._handleMenuClick)},_handleKeyup:function(a){27===a.keyCode?(this.menu.one(f).focus(),this._hideMenu()):40!==a.keyCode||this.keyedup||(this.panel.one(f).focus(),this.keyedup=!0)},_handleKeydown:function(a){this.panel.hasClass(i)||a.stopPropagation(),40===a.keyCode&&a.preventDefault()},_handleDocumentClick:function(a){return this.panel.contains(a.target)||a.target._node===this.panel._node||this.panel.hasClass(i)||a.target===this.menu.one(">a")||a.target.get("parentNode")===this.menu.one(">a")?void(this.skipBlur=!0):void this._hideMenu()},_accessShowMenu:function(b){this._hideAllMenus(),this._showMenu(b),this.panel.focus(),a.Node.DOM_EVENTS.touchend=!0,this.documentBlurHandle=a.on("blur",function(){var a=this;this.skipBlur||(this.timeout=setTimeout(function(){a._hideMenu()},50)),this.skipBlur=!1},this.panel,this),this.documentFocusHandle=a.on("focus",function(a){this.timeout&&this.panel.hasChildNodes(a.target)&&(clearTimeout(this.timeout),this.timeout=null)},this.panel,this)},_showMenu:function(){this.panel.removeClass(i),this._addIframeShim();var a=this.menu.one(j);a&&a.removeClass(i)},_position:function(){var a=this.menu.get("region");this.panel.hasClass("yucs-menu-right")||this.panel.hasClass("yucs-menu-left")||this.panel.setStyle("left",a[0]),this.panel.setStyle("top",a[1]+13)},_handleMouseOut:function(){this.overLink=!1,this.closeTimer&&(this.closeTimer.cancel(),this.closeTimer=null),this.panel.hasClass(i)||(this.closeTimer=a.later(500,this,this._handleLeave))},_handleLeave:function(){this.overPanel||this.overLink||this._hideMenu()},_hideMenu:function(){this.panel.addClass(i),this.overPanel=!1;var a=this.menu.one(j);a&&a.addClass(i),this.documentBlurHandle&&this.documentBlurHandle.detach(),this.documentFocusHandle&&this.documentFocusHandle.detach(),this.documentClickHandle&&this.documentClickHandle.detach(),this.documentMouseDownHandle&&this.documentMouseDownHandle.detach(),this.documentTouchEndHandle&&this.documentTouchEndHandle.detach(),this.keyedup=!1},_hideAllMenus:function(){var b=a.all("yucs-menu iframe"),c=a.one("#yucs-top-menu");this._hideMenu(),c&&c.one("ul")&&(c.one("ul").addClass(i),a.one("#yucs-more").removeClass("yucs-menu-active")),b.addClass(i)},_addIframeShim:function(){var b,c=a.all("select"),d=a.UA.ie<=6;d&&0!==c.size()&&(b=this.menu.one(j),b||(b=document.createElement(j),b=this.panel.get(m).insertBefore(b,this.panel)),b.className="yucs-shim",b.setStyle("position","absolute"),b.setStyle("width",this.panel.getComputedStyle("width")),b.setStyle("height",this.panel.getComputedStyle("height")),b.setStyle("top",this.panel.getY()+"px"),b.setStyle("border","0px none"),this.menu.hasClass("yucs-help")||b.setStyle("left",0),b.frameBorder=0)},_addMenuGroups:function(a,b,c){for(var d=this.menu.one(k),e="",f=d.get("children")._nodes.length?!0:!1,g=0,h=a.length;h>g;g++){var i=a[g].length;"bottom"===b?a[g][0].separatorTop=!0:(h-1>g||f)&&(a[g][i-1].separatorBottom=!0),e+=this._addMenuGroup(a[g],c)}"bottom"===b?d.append(e):d.prepend(e)},_addMenuGroup:function(a,b){for(var c="",d=0,e=a.length;e>d;d++)b?(a[d].isDebugItem=!0,a[d].menuClass="debug-item"):(a[d].isDebugItem=!1,a[d].menuClass="minty-item"),c+=this._addMenuItem(a[d]);return c},_addMenuItem:function(d){var e="";switch(d.checkedAria=d.isActive?'aria-checked="true"':"",d.disabledAria=d.isDisabled?'aria-disabled="true"':"",d.actionType){case"link":e=a.substitute(b,d,this._processTemplateValue);break;case"customEvent":e=a.substitute(c,d,this._processTemplateValue)}return e&&(e=d.isDebugItem?e.replace(/separator/,"separator debug-item"):e.replace(/separator/,"separator minty-item")),e},_clearMenuItem:function(a){this.menu.one(k).all("."+a).each(function(a){a.remove(!0)})},_processTemplateValue:function(b,c,e){a.log("key = "+b+" value = "+c+" meta_data = "+e);var f="",g="https:"===document.location.protocol?o:n;switch(b){case"icon":void 0!==c&&(f="available"===c?'<img src="'+g+'" class="yucs-opi available"/>':"offline"===c?'<img src="'+g+'" class="yucs-opi offline"/>':"invisible"===c?'<img src="'+g+'" class="yucs-opi invisible"/>':"busy"===c?'<img src="'+g+'" class="yucs-opi busy"/>':"idle"===c?'<img src="'+g+'" class="yucs-opi idle"/>':'<img src="'+c+'" />');break;case"separatorTop":c&&(f=d);break;case"separatorBottom":c&&(f=d);break;case"actionData":c&&(f='data-mad="'+c+'"');break;case"isDisabled":c&&(f="disabled");break;case"isActive":c&&(f="sp active");break;case"checkedAria":f=c;break;default:f=c}return f},_resetItemStatus:function(a){var b,c=a.ancestor(k).all(l),d=a.ancestor(k).all("li.disabled");c.removeClass("sp active"),d.removeClass("disabled"),a.getAttribute("data-dis")&&(b=a.ancestor(l),b.addClass("disabled")),a.getAttribute("data-hs")&&(b=a.ancestor(l),b.addClass("sp active"))},_handleMenuItemClick:function(a){a.target}}}},"1.0",{requires:["node","event","event-hover","event-custom","substitute","node-focusmanager"]}),function(){var a=document.getElementById("yucs");a&&window.ucs.YObj.use("node","ucs-menu-utils",function(a){var b=a.one("#yucs").all("li.yucs-menu.yucs-activate");b.each(function(b){new a.ucs.MenuUtils(b)})})}();!function(){function a(a){switch(a){case"tr-tr":return[" "];case"es-cl":case"nl-nl":case"ta-in":case"zh-hant-cn":case"hi-in":case"kn-in":return["-"];case"de-at":case"de-ch":case"de-de":case"fi-fi":case"nb-no":case"pl-pl":case"ro-ro":case"ru-ru":return["."];default:return["/"]}}function b(a){switch(a){case"en-ae":case"en-au":case"en-ca":case"en-ie":case"en-in":case"en-my":case"en-nz":case"en-ph":case"en-sg":case"en-us":case"es-us":case"ja-jp":case"sv-se":return[e,g,f,g,d].join("");case"ro-ro":case"fi-fi":case"pl-pl":case"en-gb":case"th-th":case"en-ie":case"tr-tr":case"vi-vn":return[f,g,e,g,c].join("");case"zh-hant-cn":case"zh-hant-tw":return[d,g,e,g,f].join("");default:return[f,g,e,g,d].join("")}}var c="%Y",d="%y",e="%m",f="%d",g="_",h=document.getElementById("yucs")&&document.getElementById("yucs").getAttribute("data-lang").toLowerCase()||"en-us";window.ucs||(window.ucs={}),window.ucs.getLocalDateFormat=function(c){c=c.toLowerCase();var d=a(c),e=b(c);return e.replace(new RegExp(g,"g"),d)},window.ucs.localeDateFormat=window.ucs.getLocalDateFormat(h)}();window.ucs.YObj.use("datatype-date",function(){}),YUI.add("ucs-timestamp-library",function(a){a.namespace("ucs.Timestamp"),a.ucs.Timestamp={getTimeStamp:function(b){var c,d,e,f,g,h="AM",i=a.one("#yucs"),j=b.dateRef||new Date,k=b.date,l=b.locale?b.locale:i.getAttribute("data-lang"),m=k.getTime(),n=k.getDate(),o=j.getDate(),p=j.getTime(),q=p-m,r=o-n,s=!0,t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return s=/^en-us$/i.test(l),q=parseInt(q/1e3,10),d=k.getMonth(),e=k.getHours(),f=k.getMinutes(),g=p-(60*j.getHours()*60*1e3+60*j.getMinutes()*1e3+1e3*j.getSeconds()+j.getMilliseconds()),10>f&&(f="0"+f),e>=12&&(h="PM"),e>12&&(e-=12),b.type&&"short"===b.type&&a.DataType&&a.DataType.Date?0===r?c=e+":"+f+" "+h:(/^th-th$/i.test(l)&&k.setFullYear(k.getFullYear()+543),c=a.DataType.Date.format(k,{format:window.ucs.localeDateFormat}).replace(/\b0(?=\d)/g,"")):s?0===r?60>q?c=q>1?q+" secs ago":q+" sec ago":3600>q?(q=Math.ceil(q/60,10),c=2>q?q+" min ago":q+" mins ago"):86400>q&&(q=Math.ceil(q/3600),c=q>1?q+" hours ago":q+" hour ago"):c=864e5>g-m&&0!==r?"Yesterday "+e+":"+f+" "+h:t[d]+" "+n+"&nbsp;&nbsp;"+e+":"+f+" "+h:c=t[d]+" "+n+"&nbsp;&nbsp;"+e+":"+f+" "+h,c}}},"1.0",{requires:["node","datatype-date"]});YUI.add("ucs-logodebug",function(a){a.namespace("ucs");var b=document.getElementById("imageCheck"),c=document.getElementById("yucs-logo-ani"),d=!1;-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(d=!0),(b&&0===b.offsetWidth&&void 0===b.readyState||b&&0===b.offsetWidth&&"uninitialized"===b.readyState||d&&b&&"uninitialized"===b.readyState||d&&b&&void 0===b.readyState)&&(c.style.visibility="visible",c.style.position="relative"),a.ucs.LogoDebug=function(a){a.on("click",this._handleClick,this),this.publish("ucs:logoDebug",{broadcast:2,emitFacade:!0})},a.ucs.LogoDebug.prototype={_handleClick:function(a){a.altKey&&(a.halt(),this.fire("ucs:logoDebug"))}},a.Global.on("ucs:themeChange",function(){a.later(11,this,function(){a.one("#animator")&&a.one("#animator").setStyle("display","none"),a.one("#yucs-logo-ani")&&(a.one("#yucs-logo-ani").setStyle("position","relative"),a.one("#yucs-logo-ani").setStyle("visibility","visible"),a.one(".lt #yucs-logo-ani")?a.one(".lt #yucs-logo-ani").setStyle("backgroundPosition","-350px 0 !important"):a.one("#yucs-logo-ani").setStyle("backgroundPosition","0% 0% !important"))})}),a.Global.on("ucs:playLogo",function(){"undefined"!=typeof Aniden&&Aniden.play&&Aniden.play()}),a.augment(a.ucs.LogoDebug,a.EventTarget)},"1.0",{requires:["node"]}),function(){window.ucs.YObj.use("node","ucs-logodebug",function(a){var b=a.one("#yucs-logo");if(b){new a.ucs.LogoDebug(b)}})}();YUI.add("ucs-switch-theme",function(a){"use strict";a.namespace("ucs"),a.ucs.SwitchTheme=function(a){this.init(a)},a.ucs.SwitchTheme.prototype={init:function(a){this.container=a},_getTheme:function(){return this.container.hasClass("lt")?"light":"dark"},_setTheme:function(a){"light"===a?this.container.addClass("lt"):"dark"===a&&this.container.removeClass("lt")}}}),window.ucs.YObj.use("node","ucs-switch-theme",function(a){if(window.ucs.UhTheme){var b=a.one("#yucs");window.ucs.UhTheme=new a.ucs.SwitchTheme(b),window.ucs.UhTheme.getTheme=function(){return window.ucs.UhTheme._getTheme()},window.ucs.UhTheme.setTheme=function(a){return window.ucs.UhTheme._setTheme(a)}}});window.ucs&&window.ucs.YObj&&!function(a){YUI.add("ucs-meta",function(a){"use strict";if(a.namespace("ucs"),a.ucs.Meta)return void a.log("Y.ucs.Meta is already defined.","debug","ucs-meta");var b=null,c=function(b){return a.version>="3.5.1"?b.getData():{authstate:b.getAttribute("data-authState"),cobrand:b.getAttribute("data-cobrand"),crumb:b.getAttribute("data-crumb"),mccrumb:b.getAttribute("data-mc-crumb"),gta:b.getAttribute("data-gta"),device:b.getAttribute("data-device"),experience:b.getAttribute("data-experience"),firstname:b.getAttribute("data-firstname"),flight:b.getAttribute("data-flight"),forcecobrand:b.getAttribute("data-forcecobrand"),guid:b.getAttribute("data-guid"),host:b.getAttribute("data-host"),https:b.getAttribute("data-https"),languagetag:b.getAttribute("data-languagetag"),property:b.getAttribute("data-property"),protocol:b.getAttribute("data-protocol"),shortfirstname:b.getAttribute("data-shortfirstname"),shortuserid:b.getAttribute("data-shortuserid"),status:b.getAttribute("data-status"),spaceid:b.getAttribute("data-spaceid"),test_id:b.getAttribute("data-test_id"),userid:b.getAttribute("data-userid")}};a.ucs.Meta=function(a){b=this,b.components={meta:a},b.data=c(a)},a.ucs.Meta.prototype={authState:function(){return a.Object.getValue(b.data,"authstate")},cobrand:function(){return a.Object.getValue(b.data,"cobrand")},crumb:function(){return a.Object.getValue(b.data,"crumb")},mccrumb:function(){return a.Object.getValue(b.data,"mccrumb")},gta:function(){return a.Object.getValue(b.data,"gta")},device:function(){return a.Object.getValue(b.data,"device")},experience:function(){return a.Object.getValue(b.data,"experience")},find:function(b){return a.one(a.Lang.sub("#yucs-{component}",{component:b}))},firstname:function(){return a.Object.getValue(b.data,"firstname")},flight:function(){return a.Object.getValue(b.data,"flight")},forcecobrand:function(){return a.Object.getValue(b.data,"forcecobrand")},guid:function(){return a.Object.getValue(b.data,"guid")},host:function(){return a.Object.getValue(b.data,"host")},https:function(){return a.Object.getValue(b.data,"https")},languagetag:function(){return a.Object.getValue(b.data,"languagetag")},property:function(){return a.Object.getValue(b.data,"property")},protocol:function(){return a.Object.getValue(b.data,"protocol")},shortfirstname:function(){return a.Object.getValue(b.data,"shortfirstname")},shortuserid:function(){return a.Object.getValue(b.data,"shortuserid")},status:function(){return a.Object.getValue(b.data,"status")},spaceid:function(){return a.Object.getValue(b.data,"spaceid")},test_id:function(){return a.Object.getValue(b.data,"test_id")},userid:function(){return a.Object.getValue(b.data,"userid")},toJSON:function(){return{authState:b.authState(),cobrand:b.cobrand(),crumb:b.crumb(),mccrumb:b.mccrumb(),gta:b.gta(),device:b.device(),experience:b.experience(),firstname:b.firstname(),flight:b.flight(),forcecobrand:b.forcecobrand(),guid:b.guid(),host:b.host(),https:b.https(),languagetag:b.languagetag(),property:b.property(),protocol:b.protocol(),shortfirstname:b.shortfirstname(),shortuserid:b.shortuserid(),status:b.status(),spaceid:b.spaceid(),test_id:b.test_id(),userid:b.userid()}}}},"0.0.1",{requires:["node"]}),a.YObj.use("ucs-meta",function(b){b.Lang.isObject(a.Meta)&&a.Meta instanceof b.ucs.Meta||(a.Meta=new b.ucs.Meta(b.one("#yucs-meta")))})}(window.ucs);YUI.add("ucs-beacon",function(d){var a=null,c=function(h){var e=null,j={},k="",f="",g=null;e=b();if(e!==null){d.log("emit_beacon: beacon=YMedia.Af.Beacon","debug","Beacon");d.log(h,"debug");switch(h.type){case"info":e.info(h.source,{code:h.code,message:d.JSON.stringify(h)});break;case"error":e.error(h.source,{},{code:h.code,message:d.JSON.stringify(h)});break;}}else{d.log("emit_beacon: beacon=geo.yahoo.com","debug","Beacon");d.log(h,"debug");j.s=1197747123;j.r=encodeURIComponent(location.href);j.t=Math.random();j.dmsgs=encodeURIComponent(d.JSON.stringify(h.dmsgs));j.sec=encodeURIComponent(h.sec);j.slk=encodeURIComponent(h.slk);j.type=h.type;for(g in j){k+=f+g+"="+j[g];f="&";}e=new Image(0,0);e.src="https://geo.yahoo.com/p?"+k;}},b=function(){var e=null;if(typeof YMedia!=="undefined"&&d.Lang.isObject(YMedia)&&d.Lang.isObject(YMedia.Af)&&d.Lang.isObject(YMedia.Af.Beacon)){e=YMedia.Af.Beacon;if(d.Lang.isFunction(e.setSampleSize)){if(window.location.href.match(/debug_beacon=1/)){e.setSampleSize(1);}}else{d.log("get_beacon: setSampleSize method not found!");}}return e;};d.namespace("ucs").Beacon={error:function(e){c(e);},info:function(e){c(e);},perf:function(e){c(e);}};},"1.0",{requires:["json"]});YUI.add("comet",function(d){d.namespace("Comet");function b(e){b.superclass.constructor.apply(this,arguments);}var c={};var a="comet:ready";d.initComet=function(g,f){var e=g.replace(/https:/,"http:");if(e.substr(-1)==="/"){e=e.substring(0,e.length-1);}if(!c[e]){d.publish(a);c[e]=new b();c[e].clearListeners();}else{}if(f){c[e].addListener("/meta/handshake",f);}c[e].initBayeux(g,function(h){if(h.successful){d.fire(a,{message:h});}});return c[e];};b.NAME="Comet";b.ATTRS={uri:{value:null,setter:function(g){if(g===null){return;}var e=window.location.protocol;if(e.indexOf("https")!==-1){g=g.replace(/http:/,"https:");}else{if(e.indexOf("http")!==-1){g=g.replace(/https:/,"http:");}}var f=g.toLowerCase();if(f.indexOf("https://")!==-1){this.set("protocol","https://");}else{if(f.indexOf("http://")!==-1){this.set("protocol","http://");}}return g;}},protocol:{value:"https://"},meta:{value:{handshake:{channel:"/meta/handshake",version:"1.0",supportedConnectionTypes:["long-polling"]},connect:{channel:"/meta/connect",connectionType:"long-polling"},subscribe:{channel:"/meta/subscribe"},unsubscribe:{channel:"/meta/unsubscribe"},publish:{},disconnect:{channel:"/meta/disconnect"}}},ioCfg:{value:{method:"POST",headers:{"Content-Type":"application/json","Accept":"*/*"}}},ext:{value:{all:{},handshake:{},subscribe:{"Comet-api-version":"1.1","Comet-subscriber-auth-info":null},unsubscribe:{"Comet-api-version":"1.1","Comet-subscriber-auth-info":null},connect:{},publish:{"Comet-api-version":"1.1","Comet-registration-id":"make-up","Comet-opaque-id":"markup","Comet-acknowledge-URI":"www.yahoo.com/ack","Comet-acknowledge-type":"All"},disconnect:{}}}};d.extend(b,d.Base,{_clientState:"unconnected",_advice:{},_connected:false,_config:{backoffIncrement:1000,maxBackoff:10000,maxNetworkDelay:300000,delayedSendMaxCount:10,advice:{timeout:60000,interval:0,reconnect:"retry"},subscribe:{jsonpTimeout:5000}},_delayedSendCount:0,_urlOrigin:"",_backoff:0,_isLongpollingConnect:false,_isSendingQueue:false,_clientId:null,_token:null,_lastMessageId:0,_outgoing:[],_subscribeChannel:{},_queue:new d.AsyncQueue(),_ioQueue_c2s:d.io.queue,_ioQueue_s2c:d.io.queue,_jsonp:null,_listeners:{},initializer:function(e){this.setClientState("unconnected");d.on("beforeunload",d.bind(function(){if(this.getClientState()!=="unconnected"){this.disconnect();}},this),window);},config:function(e,f){d.Object.setValue(this._config,e,f);},_Queue_send:function(f){var e=this;e._batch(f);if(!e.getClientId()){return;}if(e._isSendingQueue){return;}if(e._outgoing.length<=0){return;}d.each(e._outgoing,function(g){g=e._patchMessage(g);});e._IO_send(true,e._outgoing);e._outgoing=[];},_nextQueueSend:function(){this._Queue_send();},_IO_send:function(g,f){var e=this;if(!e.get("uri")){return;}if(g){if(e._isSendingQueue||!f){return;}e._IO_Queue_Send(f);}else{if(!e.getClientId()){return;}if(e._isLongpollingConnect||!f){return;}e._IO_Longpolling_Send(f);}},_IO_Queue_Send:function(f){var e=this;e.setTokenHeader(e._token);var g=d.merge(e.get("ioCfg"),{context:e,timeout:e._config.maxNetworkDelay,data:d.JSON.stringify(f),xdr:{credentials:true},on:{success:function(h,k){try{var i=d.JSON.parse(k.responseText);e._handleResponse(i);}catch(j){e._handleFailure(f,"json parse error");return;}},failure:function(h,i){e._handleFailure(f,"500::io failed");},start:function(){e._isSendingQueue=true;},complete:function(){e._isSendingQueue=false;e._nextQueueSend();}}});e._ioQueue_c2s.stop();e._ioQueue_c2s(e.get("uri"),g);e._ioQueue_c2s.start();},_IO_Jsonp_Send:function(f){var e=this;if(!e.get("uri")){return;}var h=e.get("uri")+"?callback={callback}";var g=encodeURIComponent(d.JSON.stringify(f));h=h+"&data="+g;e._jsonp=new d.JSONPRequest(h,{on:{success:function(i){e._handleResponse(i);},timeout:function(i){e._handleFailure(f,"408:"+e._config.subscribe.jsonpTimeout+":jsonp timeout");},failure:function(){e._handleFailure(f,"500::jsonp failed");}},timeout:e._config.subscribe.jsonpTimeout});e._jsonp.send();},_IO_Longpolling_Send:function(f){var e=this;e.setTokenHeader(e._token);var g=d.merge(e.get("ioCfg"),{context:e,timeout:e._config.maxNetworkDelay,xdr:{credentials:true},data:d.JSON.stringify(f),on:{success:function(h,k){try{var i=d.JSON.parse(k.responseText);e._handleResponse(i);}catch(j){e._handleFailure(f,"json parse error");return;}},failure:function(h,i){e._handleFailure(f,"500::io failed");},start:function(){e._isLongpollingConnect=true;},complete:function(){e._isLongpollingConnect=false;}}});e._ioQueue_s2c.stop();e._ioQueue_s2c(e.get("uri"),g);e._ioQueue_s2c.start();},_handleResponse:function(e){if(e===undefined||e===null){return;}var f=this;d.each(e,function(h){f._updateAdvice(h.advice);h.originalURI=f._urlOrigin;var g=h.channel;switch(g){case"/meta/handshake":f._handshakeResponse(h);break;case"/meta/connect":f._connectResponse(h);break;case"/meta/disconnect":f._disconnectResponse(h);break;case"/meta/subscribe":f._subscribeResponse(h);break;case"/meta/unsubscribe":f._unsubscribeResponse(h);break;default:f._messageResponse(h);break;}});},_updateAdvice:function(e){if(e){this._advice=this._mixin(false,{},this._config.advice,e);}else{this._advice=this._config.advice;}},_handshakeResponse:function(f){var e=this;if(f.successful){e.setClientState("connected");e._clientId=f.clientId;if(e._advice.VIP){e.set("uri",e.get("protocol")+e._advice.VIP+"/comet");}e._notifyListeners("/meta/handshake",f);e._Queue_send();var g=e._isDisconnected()?"none":e._advice.reconnect;switch(g){case"retry":e._resetBackoff();e._delayedConnect();break;case"handshake":e.setClientState("unconnected");e._resetBackoff();e._delayedHandshake();break;case"none":e._disconnect(false);break;}}else{e._failHandshake(f);}},_failHandshake:function(g){var f=this;f.setClientState("unconnected");f._clientId=null;f._notifyListeners("/meta/handshake",g);f._notifyListeners("/meta/unsuccessful",g);var e=(f._advice.reconnect!=="none");if(e){f._increaseBackoff();f._delayedHandshake();}else{f._disconnect(false);}},_delayedHandshake:function(){var e=this;
this._delayedSend(function(){e._handshake();});},_subscribeResponse:function(e){if(e.successful){if(this._subscribeChannel[e.subscription]&&this._subscribeChannel[e.subscription]===true){}else{this._subscribeChannel[e.subscription]=true;}if(e["ext"]["Comet-auth-token"]){this._token=e["ext"]["Comet-auth-token"];}this._notifyListeners("/meta/subscribe",e);}else{this._failSubscribe(e);}},_failSubscribe:function(e){this._notifyListeners("/meta/subscribe",e);this._notifyListeners("/meta/unsuccessful",e);},_connectResponse:function(f){var e=this;if(e._isDisconnected()){return;}e._connected=f.successful;if(e._connected){e.setClientState("connected");e._notifyListeners("/meta/connect",f);var g=e._isDisconnected()?"none":e._advice.reconnect;switch(g){case"retry":e._resetBackoff();e._delayedConnect();break;case"handshake":e.setClientState("unconnected");e._resetBackoff();e._delayedHandshake();break;case"none":e._disconnect(false);break;}}else{e._failConnect(f);}},_failConnect:function(f){var e=this;e._notifyListeners("/meta/connect",f);e._notifyListeners("/meta/unsuccessful",f);var g=e._isDisconnected()?"none":e._advice.reconnect;switch(g){case"retry":e._delayedConnect();e._increaseBackoff();break;case"subscribe":e._delayedConnect();e._increaseBackoff();break;case"handshake":e.setClientState("unconnected");e._resetBackoff();e._delayedHandshake();break;case"none":e._disconnect(false);break;}},_delayedConnect:function(){var e=this;this._delayedSend(function(){e._connect();});},_disconnectResponse:function(e){if(e.successful){this._disconnect(false);this._notifyListeners("/meta/disconnect",e);}else{this._failDisconnect(e);}},_failDisconnect:function(e){this._disconnect(true);this._notifyListeners("/meta/disconnect",e);this._notifyListeners("/meta/unsuccessful",e);},_unsubscribeResponse:function(e){if(e.successful){if(this._subscribeChannel[e.subscription]&&this._subscribeChannel[e.subscription]===true){delete this._subscribeChannel[e.subscription];}this._notifyListeners("/meta/unsubscribe",e);}else{this._failUnsubscribe(e);}},_failUnsubscribe:function(e){this._notifyListeners("/meta/unsubscribe",e);this._notifyListeners("/meta/unsuccessful",e);},_messageResponse:function(e){if(e.successful===undefined){if(e.data){this._notifyListeners(e.channel,e);}else{this._notifyListeners("/meta/unsuccessful",e);}}else{if(e.successful){this._notifyListeners("/meta/publish",e);}else{this._failMessage(e);}}},_failMessage:function(e){this._notifyListeners("/meta/publish",e);this._notifyListeners("/meta/unsuccessful",e);},_delayedSend:function(e){var h=this;var f=h._advice.interval+h._backoff;if(h._config.maxBackoff<=h._backoff){h._delayedSendCount++;}else{h._delayedSendCount=0;}if(h._delayedSendCount>h._config.delayedSendMaxCount){var g=h.get("uri");h.set("uri",h._urlOrigin);if(g===h.get("uri")){return;}h._resetBackoff();h._delayedSendCount=0;}h._queue.add({fn:e,timeout:f});h._queue.run();},_handshakeFailure:function(f,e){this._failHandshake({successful:false,failure:true,channel:"/meta/handshake",request:f,advice:{reconnect:"retry",interval:this._backoff},error:e||"",ext:f.ext||{},id:f.id||""});},_connectFailure:function(f,e){this._connected=false;this._failConnect({successful:false,failure:true,channel:"/meta/connect",request:f,advice:{reconnect:"retry",interval:this._backoff},clientId:f.clientId||"",error:e||"",ext:f.ext||{},id:f.id||""});},_disconnectFailure:function(f,e){this._failDisconnect({successful:false,failure:true,channel:"/meta/disconnect",request:f,advice:{reconnect:"none",interval:0},clientId:f.clientId||"",error:e||"",ext:f.ext||{},id:f.id||""});},_subscribeFailure:function(f,e){this._failSubscribe({successful:false,failure:true,channel:"/meta/subscribe",request:f,advice:{reconnect:"none",interval:0},clientId:f.clientId||"",subscription:f.subscription||"",error:e||"",ext:f.ext||{},id:f.id||""});},_unsubscribeFailure:function(f,e){this._failUnsubscribe({successful:false,failure:true,channel:"/meta/unsubscribe",request:f,advice:{reconnect:"none",interval:0},clientId:f.clientId||"",subscription:f.subscription||"",error:e||"",ext:f.ext||{},id:f.id||""});},_messageFailure:function(f,e){this._failMessage({successful:false,failure:true,channel:f.channel,request:f,advice:{reconnect:"none",interval:0},clientId:f.clientId||"",subscription:f.subscription||"",error:e||"",ext:f.ext||{},id:f.id||""});},_handleFailure:function(j,e){var h,g,f;for(f=0;f<j.length;++f){h=j[f];g=h.channel;switch(g){case"/meta/handshake":this._handshakeFailure(h,e);break;case"/meta/connect":this._connectFailure(h,e);break;case"/meta/disconnect":this._disconnectFailure(h,e);break;case"/meta/subscribe":this._subscribeFailure(h,e);break;case"/meta/unsubscribe":this._unsubscribeFailure(h,e);break;default:this._messageFailure(h,e);break;}}},_notifyListeners:function(j,h){this._notify(j,h);this._notify(j+"/*",h);var k=j.split("/");var g=k.length-1,f=0;for(f=g;f>0;--f){var e=k.slice(0,f).join("/")+"/*";if(f===g){this._notify(e,h);}this._notify(e,h);}},_notify:function(g,f){var e=this._listeners[g];if(e){d.each(e,function(h){if(d.Lang.isFunction(h.listener)){h.listener(f);}});}},_isDisconnected:function(){return this._clientState==="unconnected";},_resetBackoff:function(){this._backoff=0;},_nextMessageId:function(){return ++this._lastMessageId+"";},_increaseBackoff:function(){if(this._backoff<this._config.maxBackoff){this._backoff+=this._config.backoffIncrement;}},_createMessage:function(g,f){f=f||{};var j=(new Date()).valueOf();var i=window.location.host;var e=[];var h=d.merge(this.get("ext").all,this.get("ext")[g],f.ext||{},{"timestamp":j,"host":i||""});switch(g){case"handshake":e.push(d.merge({id:this._nextMessageId(),ext:h},this.get("meta")[g]));break;case"connect":e.push(d.merge({id:this._nextMessageId(),ext:h},this.get("meta")[g],{clientId:this.getClientId()}));break;case"subscribe":e.push(d.merge({id:this._nextMessageId(),ext:h},this.get("meta")[g],{clientId:this.getClientId(),subscription:f.channel}));break;case"unsubscribe":e.push(d.merge({id:this._nextMessageId(),ext:h},this.get("meta")[g],{clientId:this.getClientId(),subscription:f.channel}));
break;case"publish":e.push(d.merge({id:this._nextMessageId(),ext:h},this.get("meta")[g],{clientId:this.getClientId(),channel:f.channel,data:f.data}));break;case"disconnect":e.push(d.merge({id:this._nextMessageId(),ext:h},this.get("meta")[g],{clientId:this.getClientId()}));break;}return e;},_handshake:function(e){var h=this;if(h.getClientState()!=="unconnected"){if(h.getClientState()==="connected"){var g={successful:true,channel:"/meta/handshake",clientId:h._clientId,originalURI:h._urlOrigin};h._notifyListeners("/meta/handshake",g);}return;}if(e&&e.listener){h._addListener(e,false);}h._clientId=null;h._token=null;h.resetTokenHeader();h._clearSubscriptions();h._updateAdvice(h._config.advice);var f=h._createMessage("handshake",e);h._IO_send(true,f);h.setClientState("connecting");},_connect:function(e){var g=this;if(g.getClientState()!=="connected"){return;}if(g._isLongpollingConnect){return;}var f=g._createMessage("connect",e);g._IO_send(false,f);},_subscribeJSONP:function(e){if(!(e&&e.channel)){return;}if(!this.getClientId()){return;}if(this._subscribeChannel[e.channel]&&this._subscribeChannel[e.channel]===true){return;}if(e.listener){this._addListener(e,true);}var f=this._createMessage("subscribe",e);this._IO_Jsonp_Send(f);},_unsubscribe:function(e){if(!this.getClientId()){return;}if(e&&e.channel){this.removeListeners(e.channel);}if(e&&e.channel){var f=this._createMessage("unsubscribe",e);this._Queue_send(f);}},_disconnect:function(f){var g=this;if(f){g._ioQueue_c2s.stop();g._ioQueue_s2c.stop();}g.setClientState("unconnected");g._clientId=null;g._resetBackoff();g._queue.stop();if(g._outgoing.length>0){var e=g._outgoing;g._outgoing=[];g._handleFailure(e,"500::canceled after disconnect");}g._clearSubscriptions();},_patchMessage:function(e){if(!e.id){e.id=this._nextMessageId();}e.clientId=this.getClientId();if(e.channel==="/meta/handshake"){delete e.clientId;}return e;},_batch:function(){d.each(arguments,function(e){if(e&&d.Lang.isArray(e)){var f=0;for(f=0;f<e.length;++f){this._outgoing.push(e[f]);}}else{if(e){this._outgoing.push(e);}}},this);},_clearSubscriptions:function(){d.each(this._listeners,function(e){if(e){d.each(e,function(g,f,h){if(g&&g.isSub){h.splice(f);}});}});this._subscribeChannel={};},_reDoSubscriptions:function(){d.each(this._subscribeChannel,function(e,f){if(e){this._subscribeChannel[f]=false;this._subscribeJSONP({channel:f});}},this);},isDuplicatedListener:function(e,g){var f=0;for(f=0;f<g.length;++f){var h=g[f];if(h&&h.listener&&h.listener.toString()===e.toString()){return true;}}return false;},_addListener:function(e,f,g){if(e&&e.listener&&d.Lang.isFunction(e.listener)){if(this._listeners[e.channel]){if(g||!this.isDuplicatedListener(e.listener,this._listeners[e.channel])){this._listeners[e.channel].push({listener:e.listener,isSub:f});}}else{this._listeners[e.channel]=[{listener:e.listener,isSub:f}];}}},_mixin:function(l,j,m){var g,h;var n=j||{};for(g=2;g<arguments.length;++g){var f=arguments[g];if(f===undefined||f===null){continue;}for(h in f){var e=f[h];var k=n[h];if(e===j){continue;}if(e===undefined){continue;}if(l&&typeof e==="object"&&e!==null){if(e instanceof Array){n[h]=this._mixin(l,k instanceof Array?k:[],e);}else{n[h]=this._mixin(l,{},e);}}else{n[h]=e;}}}return n;},destructor:function(){},getClientState:function(){return this._clientState;},setClientState:function(e){this._clientState=e;},getClientId:function(){return this._clientId;},initBayeux:function(e,f){this._urlOrigin=e;this.set("uri",e);this._handshake({channel:"/meta/handshake",listener:f});},subscribe:function(e,f){this._subscribeJSONP({channel:e,listener:f});},unsubscribe:function(e){this._unsubscribe({channel:e});},disconnect:function(g){var f=this;if(g){f._addListener({channel:"/meta/disconnect",listener:g},false);}if(f.getClientState()==="unconnected"){return;}if(!f.getClientId()){return;}var e=f._createMessage("disconnect");f._Queue_send(e);},publishMsg:function(f,h){if(f&&h){var e={channel:f,data:h};var g=this._createMessage("publish",e);this._Queue_send(g);}},clearListeners:function(){this._listeners={};},addListener:function(e,g,f){f=f||false;if(!g&&d.Lang.isFunction(g)){return;}this._addListener({channel:e,listener:g},false,f);},removeListeners:function(e){if(this._listeners[e]){delete this._listeners[e];}},setUserInfo:function(f,e){if(f&&e){var g=this.get("ext");g.subscribe["Comet-subscriber-auth-info"]={"uid":f,"user_type":"yahoo","user_cred":e};}},setUserInfoWithCookie:function(f,e){if(f){var g=this.get("ext");g.subscribe["Comet-subscriber-auth-info"]={"uid":f,"user_type":"yahoo","user_cred":"Any Value"};}},setTokenHeader:function(e){if(e){var f=this.get("ioCfg");f["headers"]["Authorization"]="Basic token="+e;}},resetTokenHeader:function(){var e=this.get("ioCfg");e["headers"]["Authorization"]="Basic token=";},setYcaHeader:function(e,f){if(e){var h=this.get("ioCfg");h["headers"]["Yahoo-App-Auth"]=e;}if(f){var g=this.get("ext");g.publish["Comet-opaque-id"]=f;}}});d.Comet=b;},"3.4.1",{requires:["base","io","json","async-queue","cookie","jsonp","jsonp-url"]});YUI.add("ucs-comet-conn",function(f){f.namespace("ucs");var b={counts_max:{unsuccessful:{"/meta/handshake":25,"/meta/subscribe":25,"/meta/unsubscribe":25,"/meta/connect":25,"/meta/disconnect":25}},prod:{notifications:{host:"https://pr.comet.yahoo.com/comet"},mail_count:{host:"https://pr.comet.yahoo.com/comet"},system_status:{host:"https://comet.yahoo.com/comet"}},nonprod:{notifications:{host:"http://stage-comet1.onepush.mobile.gq1.yahoo.com/comet"},mail_count:{host:"http://stage-comet1.onepush.mobile.gq1.yahoo.com/comet"},system_status:{host:"http://perf501.snp.mobile.gq1.yahoo.com/comet"}}},d="connect",c="disconnect",g="message",a="error",e={};f.ucs.CometConn=function(i,h){this.app=i;this.env=h;this.comet=null;this.init(b[h][i]);this.publish(d);this.publish(c);this.publish(g);};f.ucs.CometConn.getConn=function(k,j,l){var h=null,i=null;f.config.debug=window.location.href.match(/debug_comet-conn=1/);j=j||"prod";if(window.location.href.match(/env=nonprod/)){j="nonprod";}if(f.Lang.isUndefined(j)){throw new Error("getConn(): env is required.");}if(f.Lang.isUndefined(k)){throw new Error("getConn(): app is required.");}if(!f.Object.hasKey(b,j)){throw new Error("getConn(): cannot find config for env="+j);}if(!f.Object.hasKey(b[j],k)){throw new Error("getConn(): cannot find config for app="+k);}i=f.Lang.sub("{app}:{env}",{app:k,env:j});if(!f.Object.hasKey(e,i)){e[i]=new f.ucs.CometConn(k,j);}else{}return e[i];};f.ucs.CometConn.prototype={counts:{},init:function(i){var h=this;h.comet=f.initComet(i.host);h.comet.addListener("/meta/handshake",f.bind(h.cbHandShake,h),true);h.comet.addListener("/meta/subscribe",f.bind(h.cbSubscribe,h),true);h.comet.addListener("/meta/unsubscribe",f.bind(h.cbUnsubscribe,h),true);h.comet.addListener("/meta/connect",f.bind(h.cbConnect,h),true);h.comet.addListener("/meta/disconnect",f.bind(h.cbDisconnect,h),true);h.comet.addListener("/meta/unsuccessful",f.bind(h.cbUnsuccessful,h),true);h.resetCounts();},extractMessage:function(h){return{clientId:h.clientId||"",channel:h.channel||"",timestamp:h.timestamp||"",error:h.error||""};},getComet:function(){return this.comet;},getCounts:function(){return this.counts;},resetCounts:function(){this.counts={unsuccessful:{"/meta/handshake":0,"/meta/subscribe":0,"/meta/unsubscribe":0,"/meta/connect":0,"/meta/disconnect":0}};return this;},isDisconnect:function(j){var i=this,h=true;if(j.successful===false){if(f.Object.hasKey(i.counts.unsuccessful,j.channel)){i.counts.unsuccessful[j.channel]++;if(i.counts.unsuccessful[j.channel]<b.counts_max.unsuccessful[j.channel]){h=false;}}}return h;},cbHandShake:function(k){var i=this,h=null,j=null;if(f.Object.hasKey(k,"originalURI")){j=k.originalURI;}else{if(f.Object.hasKey(k,"uri")){j=k.uri;}else{this.fire(a,"uri / originalURI is missing in the callback_handshake response.");return;}}if(j===b[this.env][this.app].host){if(k.successful){i.fire(d,k);}else{i.fire(a,"cb_handshake. successful=false");}}else{i.fire(a,"cb_handshake.uri is not found in config. uri="+j);}if(k&&k.successful){i.resetCounts();i.emitBeacon({sec:"UH 3 Comet",slk:"UH 3 Comet HandShake",dmsgs:i.extractMessage(k),type:"info",source:"ucs-comet-conn",code:"hand"});}else{i.emitBeacon({sec:"UH 3 Comet",slk:"UH 3 Comet HandShake",dmsgs:i.extractMessage(k),type:"error",source:"ucs-comet-conn",code:"hand"});}},cbSubscribe:function(i){var h=this;if(i&&i.successful){h.resetCounts();h.emitBeacon({sec:"UH 3 Comet",slk:"UH 3 Comet Subscribe",dmsgs:h.extractMessage(i),type:"info",source:"ucs-comet-conn",code:"sub"});}else{h.emitBeacon({sec:"UH 3 Comet",slk:"UH 3 Comet Subscribe",dmsgs:h.extractMessage(i),type:"error",source:"ucs-comet-conn",code:"sub"});}},cbUnsubscribe:function(i){var h=this;if(i&&i.successful){h.resetCounts();h.emitBeacon({sec:"UH 3 Comet",slk:"UH 3 Comet Unsubscribe",dmsgs:h.extractMessage(i),type:"info",source:"ucs-comet-conn",code:"unsub"});}else{h.emitBeacon({sec:"UH 3 Comet",slk:"UH 3 Comet Unsubscribe",dmsgs:h.extractMessage(i),type:"error",source:"ucs-comet-conn",code:"unsub"});}},cbConnect:function(i){var h=this;},cbDisconnect:function(i){var h=this;},cbUnsuccessful:function(i){var h=this;if(h.isDisconnect(i)){h.getComet().disconnect();}},cbSystemStatus:function(h){if(h){this.fire("message",h);}},cbNotification:function(h){if(h){this.fire(g,h);}},initSystemStatus:function(h){this.comet.subscribe(h,f.bind(this.cbSystemStatus,this));},initNotification:function(){this.comet.subscribe("/UNP/alerts/*",f.bind(this.cbNotification,this));},emitBeacon:function(h){if(f.Lang.isObject(f.ucs)&&f.Lang.isObject(f.ucs.Beacon)){switch(h.type){case"info":f.ucs.Beacon.info(h);break;case"error":f.ucs.Beacon.error(h);break;}}}};f.augment(f.ucs.CometConn,f.EventTarget,true,null,{emitFacade:true,broadcast:2});},"1.0",{requires:["event","event-custom","comet","ucs-beacon"]});if(window.ucs&&window.ucs.YObj){window.ucs.YObj.use("node","ucs-comet-conn",function(e){var c=null,b=null,d={};c=e.one("#yucs-meta").getAttribute("data-authstate");b=e.one("#yucs-meta").getAttribute("data-property");r=e.one("#yucs-notifications");if(!e.Lang.isObject(r)){if((c==="signedin")||(b==="mail")){if(e.Lang.isFunction(e.ucs.CometConn)){d.notifications=e.ucs.CometConn.getConn("notifications");d.notifications.on("connect",function a(f){d.notifications.initNotification();});}}}});}YUI.add("ucs-disclaimer-seed",function(a){a.namespace("ucs"),a.ucs.DisclaimerSeed={init:function(){var b=!1,c=a.one(a.one("#yucs-disclaimer")?"#yucs-disclaimer":"#yucs-disclaimer-md"),d=c.getAttribute("data-property"),e=(c.getAttribute("data-lang"),c.getAttribute("data-dss")),f=!1,g=!1,h=(a.Cookie.getSub("ucs","disclaimer",Number),"desktop"),i="false",j=a.Cookie.getSub("AO","o")?a.Cookie.getSub("AO","o"):a.Cookie.getSub("AO",'"o'),k=a.Cookie.getSub("AO","u")?a.Cookie.getSub("AO","u"):a.Cookie.getSub("AO",'"u'),l=(a.Cookie.getSub("AO","t")?a.Cookie.getSub("AO","t"):a.Cookie.getSub("AO",'"t'),a.Cookie.getSub("AO","dnt")?a.Cookie.getSub("AO","dnt"):a.Cookie.getSub("AO",'"dnt'));this.jsPath="https://s.yimg.com/zz/combo?kx/yucs/uh3/disclaimer/294/js/disclaimer-min.js",this.cssPath="https://s.yimg.com/zz/combo?kx/yucs/uh3/disclaimer/294/css/disclaimer-min.css";var m=navigator.userAgent.toLowerCase();a.one("#yucs-disclaimer")?h=a.one("#yucs-disclaimer").getAttribute("data-device"):a.one("#yucs-disclaimer-md")&&(h=a.one("#yucs-disclaimer-md").getAttribute("data-device")),i=h&&(h.match(/smartphone/gi)||h.match(/tablet/gi)),"frontpage"===d&&(h.match(/smartphone/gi)||h.match(/tablet/gi))&&(a.one("#OpenMenuBtn")&&a.one("#OpenMenuBtn").on("touchstart",this.setKillswitch,this),a.one("#OpenWidgetsBtn")&&a.one("#OpenWidgetsBtn").on("touchstart",this.setKillswitch,this)),e&&"0"===e&&m.indexOf("version")>=0&&m.indexOf("crios")<0&&(h.match(/desktop/gi)?this.loadCSS():i&&a.UA.ios&&a.UA.ios<8&&this.loadCSS()),l&&(l=l.replace('"',""),l=l.replace("'",""),l=parseInt(l)),k&&(k=k.replace('"',""),k=k.replace("'",""),k=parseInt(k)),j?(j=j.replace('"',""),j=j.replace("'",""),j=parseInt(j)):b=!0,b=!0,f=!0,l&&1===l&&f===!0&&g===!1&&(l=a.Cookie.get("AO",{raw:!0}),l=l.replace("o=1","o=0"),a.Cookie.set("AO",l,{expires:new Date("January 12, 2025"),path:"/",domain:"yahoo.com",raw:!0}))},setKillswitch:function(){a.one("#yucs-disclaimer").setAttribute("data-killswitch","1")},loadCSS:function(){var b={onSuccess:function(){this.loadJS()},onFailure:function(){this.loadCSS()},context:this};a.Get.css(this.cssPath,b)},checkTimer:function(){var b=a.Cookie.getSub("ucs","disclaimerts",Number),c=(new Date).getTime();return c>=b||null===b?!0:!1},loadJS:function(){var b={onFailure:function(){this.loadJS()},context:this};a.Get.script(this.jsPath,b)}}},"1.0",{requires:["node","cookie"]}),function(){if("undefined"!=typeof ucs&&ucs.YObj)ucs.YObj.use("ucs-disclaimer-seed",function(a){a.ucs.DisclaimerSeed.init()});else{var a=document.getElementById("yUnivHead"),b=a&&"srp"===a.getAttribute("data-property")?Y:YUI();b.use("ucs-disclaimer-seed",function(a){a.ucs.DisclaimerSeed.init()})}}();YUI.add("ucs-simple-menu",function(a){a.namespace("ucs.MoreMenu");var b="yucs-menu-active",c="role",d=">li>a",e="parentNode";a.ucs.MoreMenu=function(b){a.ucs.MoreMenu.superclass.constructor.call(this,b),b.removeClass("yucs-more-activate"),this.ylt=b.getAttribute("data-ylt"),this.topBar=a.one("#yucs-top-bar"),this._init()},a.extend(a.ucs.MoreMenu,a.ucs.MenuUtils,{_init:function(){this._position(),this._initAriaTopbar(),this._initEvents()},_initEvents:function(){this.menu.detach("hover"),this.panel.detach("hover"),a.one("#yucs-more-link").on("click",this._handleMenuClick,this),a.Global.on("ucs:menuNavShow",this._hideMenu,this)},_handleMenuClick:function(b){b.halt(),this.panel.hasClass("yucs-hide")?(this._showMenu(b),this.menu.removeClass("yucs-has-focus"),this.menu.one("a").blur(),this.documentClickHandle=a.one("body").on("click",this._handleDocumentClick,this),this.documentMouseDownHandle=a.one("body").on("mousedown",this._handleDocumentClick,this)):this._hideMenu()},_position:function(){var b=this.menu.get("region").height;b-=2,a.one("#yucs-top-menu").setStyle("top",b+"px")},_sendBeacon:function(){window.ucs._sendBeacon(this.ylt)},_showMenu:function(){this.panel.hasClass("yucs-hide")&&(this._sendBeacon(),this.menu.addClass(b),a.ucs.MoreMenu.superclass._showMenu.apply(this,arguments))},_hideMenu:function(){a.ucs.MoreMenu.superclass._hideMenu.apply(this,arguments),this.menu.removeClass(b)},_handleKeyup:function(a){27===a.keyCode||9===a.keyCode?(this.menu.one("a").focus(),this._hideMenu()):40!==a.keyCode||this.keyedup||(this.panel.one("a")&&(this._handleMenuClick(a),this.panel.one("a").focus()),this.keyedup=!0)},_initAriaTopbar:function(){this.topBar&&(this.toolbar=a.one("#yucs-top-list"),this.toolbar.set(c,"toolbar"),this.toolbar.all(">li").set(c,"presentation"),this.toolbar.delegate("mouseenter",function(a){a.currentTarget.removeClass("yucs-has-focus")},">li"),this.fm=this.toolbar.plug(a.Plugin.NodeFocusManager,{descendants:d,keys:{next:"down:39",previous:"down:37"},focusClass:{TABINDEX_ATTR:"-1",className:"yucs-has-focus",fn:function(a){return a.get(e)}},circular:!0}),this.panel.focusManager.get("descendants").after("keydown",function(a){9===a.keyCode&&(this.panel.focusManager.focus(0),this._hideMenu())},this),this.toolbar.focusManager.get("descendants").after("keyup",function(a){9===a.keyCode&&this.toolbar.focusManager.focus(0),27===a.keyCode&&(this.menu.one("a").focus(),this._hideMenu())},this))}})},"1.0",{requires:["node","event","ucs-menu-utils","event-resize","event-hover","node-focusmanager","event-mouseenter","event-delegate"]}),function(){window.ucs.YObj.use("node","ucs-simple-menu",function(a){var b,c=a.one("#yucs-more.yucs-more-activate");c&&(b=new a.ucs.MoreMenu(c))})}();YUI.add("ucs-helpmenu",function(a){"use strict";a.namespace("ucs.HelpMenu");var b="ucs:helpMenuShow",c="ucs:helpDebugMenuShow",d="ucs:helpMenuItemClick",e="ucs:helpDebugMenuItemClick",f="ucs:utilityMenuShow",g="ucs:utilityMenuItemClick",h='{separatorTop}<li class="{isDisabled} {isActive} {menuClass}"><div><a target="{target}" {actionData} href="{url}" {disabledAria}>{icon}{menuText}</a></div></li>{separatorBottom}',i='{separatorTop}<li class="{isDisabled} {isActive} {menuClass}"><div><a href="#" data-customevt="true" {actionData} {disabledAria} {checkedAria}>{icon}{menuText}</a></div></li>{separatorBottom}',j='<span class="yucs-separator" role="presentation"></span>',k="http://l.yimg.com/a/lib/ush/icon.gif",l="https://s.yimg.com/lq/lib/ush/icon.gif";a.ucs.HelpMenu=function(b){this.menuContainer=b.ancestor("div"),this.shown=!1,this.helpLink=a.one("#yucs-help_button"),this.helpLink.setAttribute("data-mad","true"),this.previewPanel=a.one("#yucs-help_inner"),this.ylt=this.previewPanel.getAttribute("data-yltmenushown"),this.PANEL_OFFSET=30,this.PANEL_OFFSET_Y=3,this.headerNode=a.one("#yucs"),a.ucs.HelpMenu.superclass.constructor.apply(this,[this.menuContainer,{panelSelector:"#yucs-help_inner"}]),this._initCustomEvents(),b.removeClass("yucs-hm-activate")},a.extend(a.ucs.HelpMenu,a.ucs.MenuUtils,{_initCustomEvents:function(){this.publish(b,{broadcast:2,emitFacade:!0}),this.publish(c,{broadcast:2,emitFacade:!0}),this.publish(d,{broadcast:2,emitFacade:!0}),this.publish(e,{broadcast:2,emitFacade:!0}),this.publish(f,{broadcast:2,emitFacade:!0}),this.publish(g,{broadcast:2,emitFacade:!0}),a.Global.on("ucs:utilityMenuItems",this._handleHelpMenuItems,this,{location:"top",menuType:"minty-utility-item"}),a.Global.on("ucs:helpMenuItems",this._handleHelpMenuItems,this,{location:"bottom",menuType:"minty-help-item"}),a.Global.on("ucs:helpDebugMenuItems",this._handleHelpDebugMenuItems,this,{location:"bottom",menuType:"minty-debug-item"})},_showMenu:function(d){this.previewPanel.hasClass("yucs-hide")&&this._sendBeacon(),a.ucs.HelpMenu.superclass._showMenu.apply(this,arguments),"mail"===a.one("#yucs").getAttribute("data-property")&&this.menu.all("li").addClass("yucs-hide"),d&&(d.ctrlKey||d.metaKey)&&d.shiftKey?(this.fire(c),this.shown===!1?a.later(4e3,this,function(){this.fire(c)}):this._showDebugMenuItems()):(this.fire(b),this.fire(f),this.shown===!1?a.later(4e3,this,function(){this.fire(b),this.fire(f)}):this._showMenuItems()),this._setPosition()},_showDebugMenuItems:function(){this.shown=!0,this.menu.all("li").addClass("yucs-hide"),this.menu.all("span.minty-item").setStyle("display","none"),this.menu.all("li.debug-item").removeClass("yucs-hide"),this.menu.all("span.debug-item").setStyle("display","block")},_showMenuItems:function(){this.shown=!0,this.menu.all("li").removeClass("yucs-hide"),this.menu.all("span.minty-item").setStyle("display","block"),this.menu.all("li.debug-item").addClass("yucs-hide"),this.menu.all("span.debug-item").setStyle("display","none"),this._destructAria(),this._initAria()},_setPosition:function(){this.mailIcon=a.one("#yucs-help_button");var b,c=this.previewPanel.one(".yucs-dock"),d=c&&c.get("offsetWidth"),e=this.headerNode.get("offsetHeight");this.previewPanel.setX(this.rtl?Math.round(this.headerNode.getX()+this.PANEL_OFFSET):Math.round(this.headerNode.getX()+this.headerNode.get("offsetWidth")-this.panel.get("offsetWidth")-2)),this.panel.setY(a.one("#search_hot_keyword_block")?this.headerNode.getY()+e-this.PANEL_OFFSET_Y-30:e>0?this.headerNode.getY()+e-this.PANEL_OFFSET_Y:this.mailIcon.getY()+this.mailIcon.get("offsetHeight")+3),c&&(b=this.mailIcon.get("offsetWidth")/2-d/2,c.setX(this.mailIcon.getX()+b))},_handleKeyup:function(a){27===a.keyCode||9===a.keyCode?(this.menu.one("a").focus(),this._hideMenu()):40!==a.keyCode||this.keyedup||(this.panel.one("a")&&(this._showMenu(a),this.panel.one("a").focus()),this.keyedup=!0)},_handleHelpMenuItems:function(b,c){a.log("help menu items received");var d,e,f=c&&c.location||"top",g=c&&c.menuType||"minty-help-item";b.menuGroups&&b.menuGroups.length&&(d=b.menuGroups,e=this.menu.one("#yuhead-help-panel"),b.reset&&e&&e.all("."+g).remove(!0),this._addMenuGroups(d,f,!1,g),this._showMenuItems())},_handleHelpDebugMenuItems:function(b){a.log("help menu items received");var c,d;b.menuGroups&&b.menuGroups.length&&(c=b.menuGroups,d=this.menu.one("#yuhead-help-panel"),b.reset&&d&&d.all(".minty-debug-item").remove(!0),this._addMenuGroups(c,"top",!0,"minty-debug-item"),this._showDebugMenuItems())},_handleMenuItemClick:function(b){a.log("help menu item click");var c,f,h,i;if(c=b.target,c=c.ancestor("a",!0),f=c.getAttribute("data-mad"),h=c.getAttribute("data-customevt"),i=c.ancestor("li").hasClass("disabled"))return void b.halt();if(h&&b.preventDefault(),!i){var j={actionData:f},k=c.ancestor("li");k.hasClass("debug-item")?this.fire(e,j):k.hasClass("minty-utility-item")?this.fire(g,j):this.fire(d,j)}},_addMenuGroups:function(a,b,c,d){var e,f,g,h=this.menu.one("#yuhead-help-panel"),i="",j=a.length;for(e=h.hasChildNodes(),f=0;j>f;f++)g=a[f].length,"bottom"===b?f>0&&(a[f][0].separatorTop=!0):(j-1>f||e)&&(a[f][g-1].separatorBottom=!0),i+=this._addMenuGroup(a[f],c,d);h.ancestor("div.yucs-yql_loading")&&h.ancestor("div.yucs-yql_loading").removeClass("yucs-yql_loading"),"bottom"===b?h.append(i):h.prepend(i),h.one(".yucs-keepatbottom")&&h.all(".yucs-keepatbottom").each(function(a){h.append(a)})},_addMenuGroup:function(a,b,c){var d,e="",f=a.length;for(d=0;f>d;d++)b?(a[d].isDebugItem=!0,a[d].menuClass=c+" debug-item"):(a[d].isDebugItem=!1,a[d].menuClass=c+" minty-item"),e+=this._addMenuItem(a[d],c);return e},_addMenuItem:function(b,c){var d="";switch(b.checkedAria=b.isActive?'aria-checked="true"':"",b.disabledAria=b.isDisabled?'aria-disabled="true"':"",b.actionType){case"link":d=a.substitute(h,b,this._processTemplateValue);break;case"customEvent":d=a.substitute(i,b,this._processTemplateValue)}return d&&(d=b.isDebugItem?d.replace(/separator/,"separator debug-item "+c):d.replace(/separator/,"separator minty-item "+c)),d},_processTemplateValue:function(b,c,d){a.log("key = "+b+" value = "+c+" meta_data = "+d);var e="",f="https:"===document.location.protocol?l:k;switch(b){case"icon":void 0!==c&&(e="available"===c?'<img src="'+f+'" class="yucs-opi available"/>':"offline"===c?'<img src="'+f+'" class="yucs-opi offline"/>':"invisible"===c?'<img src="'+f+'" class="yucs-opi invisible"/>':"busy"===c?'<img src="'+f+'" class="yucs-opi busy"/>':"idle"===c?'<img src="'+f+'" class="yucs-opi idle"/>':'<img src="'+c+'" />');break;case"separatorTop":c&&(e=j);break;case"separatorBottom":c&&(e=j);break;case"actionData":c&&(e='data-mad="'+c+'"');break;case"isDisabled":c&&(e="disabled");break;case"isActive":c&&(e="sp active");break;case"checkedAria":e=c;break;default:e=c}return e},_sendBeacon:function(){this.ylt&&window.ucs._sendBeacon(this.ylt+"?t="+Math.random())}}),a.augment(a.ucs.HelpMenu,a.EventTarget)},"1.0",{requires:["oop","node","event-custom","substitute","ucs-menu-utils"]}),function(){window.ucs.YObj.use("node","ucs-helpmenu",function(a){var b,c=a.one("#yucs").all(".yucs-hm-activate");c.each(function(c){b=new a.ucs.HelpMenu(c)})})}();