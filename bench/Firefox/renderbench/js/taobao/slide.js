/*pub-1|2013-10-17 16:09:49*/(function(b,d){var a=b.Class;var c=new a();c.extend({defaults:{interval:3000,duration:600,viewSize:1,itemSize:0,itemSelector:".slide-item",indicatorSelector:".indicators li",activeClass:"active",isCarousel:true,direction:"x"}});c.include({init:function(f,e){this.$element=d(f);this.options=e;this.$indicators=this.$element.find(e.indicatorSelector);this.$items=this.$element.find(e.itemSelector);this.$slider=this.$element.find(".slide-inner");this.$slide=this.$element.find(".slide");this.activeClass=e.activeClass;this.viewSize=e.viewSize;this.direction=e.direction;this.itemSize=this.options.itemSize||(this.options.direction=="x"?this.$slide.width():this.$slide.height());this.sliding=false;this.interval=0;this.paused=true;this.activeIndex=0;this.nextIndex=1;if(this.options.isCarousel){this.clone();this.length=this.$items.length+this.viewSize*2;this.baseOffset=-(this.itemSize*this.viewSize)}else{this.length=this.$items.length;this.baseOffset=0}if(this.direction=="x"){this.$slider.css({width:this.itemSize*this.length,marginLeft:this.baseOffset})}else{this.$slider.css({height:this.itemSize*this.length,marginTop:this.baseOffset})}this.cycle();this.$element.on("mouseenter",this.proxy(this.pause)).on("mouseleave",this.proxy(this.cycle))},clone:function(){var j=this.$items,f=this.viewSize,e=this.activeClass;var i=j.parent();var g=j.slice(-f).clone().prependTo(i).removeClass(e).addClass("copy");var h=j.slice(0,f).clone().appendTo(i).removeClass(e).addClass("copy")},pause:function(f){f||(this.paused=true);if(this.sliding){this.cycle(true)}this.inerval=clearInterval(this.interval);return this},cycle:function(g){if(this.$items.length==1){return}g||(this.paused=false);this.interval&&clearInterval(this.interval);var f=this.options.interval;f&&!this.paused&&(this.interval=setInterval(this.proxy(this.next),f));return this},next:function(){if(this.sliding){return}return this.slide("next")},prev:function(){if(this.sliding){return}return this.slide("prev")},to:function(g){var e=this;if(g>(this.$items.length-1)||g<0){return}if(this.sliding){return this.$element.one("slid",function(){e.to(g)})}if(this.activeIndex==g){return this.pause().cycle()}var f=g>this.activeIndex?"next":"prev";return this.slide(f,g)},slide:function(n,m){if(m){m=parseInt(m,10)}var i=this.interval;this.sliding=true;i&&this.pause();this.$element.trigger("slide");var p=this.activeIndex,l=this.activeClass,j=this.$items,e=j.length,g=this.$indicators,k=this.$slider;var o=this;if(this.options.isCarousel){if(n=="next"){this.nextIndex=m!=undefined?m:p+1}else{this.nextIndex=m!=undefined?m:p-1}}else{if(p<this.$items.length-1){this.nextIndex=m!=undefined?m:p+1}else{this.nextIndex=0}}var h;if(this.options.direction=="x"){h={marginLeft:this.baseOffset-(this.itemSize*this.nextIndex)}}else{if(this.options.direction=="y"){h={marginTop:this.baseOffset-(this.itemSize*this.nextIndex)}}}h&&k.animate(h,this.options.duration,function(){if(o.options.isCarousel){if(n=="next"){if(o.nextIndex>=e){if(o.options.direction=="x"){k.css({marginLeft:o.baseOffset})}else{k.css({marginTop:o.baseOffset})}o.nextIndex=0;o.activeIndex=0}else{o.activeIndex=o.nextIndex}}else{if(o.nextIndex<0){if(o.options.direction=="x"){k.css({marginLeft:o.baseOffset-o.itemSize*(e-1)})}else{k.css({marginTop:o.baseOffset-o.itemSize*(e-1)})}o.activeIndex=e-1;o.nextIndex=e-1}else{o.activeIndex=o.nextIndex}}}else{o.activeIndex=o.nextIndex}f();o.sliding=false;setTimeout(function(){o.$element.trigger("slid")},0)});!h&&+function(){if(o.options.direction=="fade"){j.hide();j.eq(o.nextIndex).fadeIn()}else{j.hide();j.eq(o.nextIndex).show()}f();o.activeIndex=o.nextIndex;o.sliding=false;setTimeout(function(){o.$element.trigger("slid")},0)}();function f(){j.removeClass(l);j.eq(o.nextIndex).addClass(l);g.removeClass(l);g.eq(o.nextIndex).addClass(l)}i&&o.cycle();return this}});d.fn.Slide=function(e){return this.each(function(){var i=d(this);var g="tbtx.slide";var h=i.data(g);var f=d.extend({},c.defaults,i.data(),typeof e=="object"&&e);if(!h){i.data(g,(h=new c(this,f)))}})};d(document).on("click.tbtx.slide.data-api","[data-slide], [data-slide-to]",function(l){var k=d(this),g;var f=d(k.attr("data-target")||(g=k.attr("href"))&&g.replace(/.*(?=#[^\s]+$)/,""));var h=d.extend({},f.data(),k.data());var j=k.attr("data-slide-to");var i=f.data("tbtx.slide");if(j){i.to(j)}if(h.slide){i[h.slide]()}l.preventDefault()});b.loadCss("base/css/component/slide.css",function(){d(function(){d('[data-ride="slide"]').each(function(){var e=d(this);e.Slide(e.data())})})});b.mix(b,{Slide:c})})(tbtx,jQuery);